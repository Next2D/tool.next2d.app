/*!
 * licenses: MIT Licenses.
 * version: 0.226.0
 * author: Toshiyuki Ienaga <ienaga@tvon.jp>
 * copyright: (c) 2021-2023 Toshiyuki Ienaga.
 */
"nt"in window||function(e){"use strict";class t{constructor(){this.mapping=this.createMapping(),requestAnimationFrame(this.initialize.bind(this))}initialize(){const e=document.getElementsByClassName("language");for(let t=0;t<e.length;++t){const a=e[t],r=a.dataset.text;if(!this.mapping.has(r))continue;let i=this.mapping.get(r),s=a.dataset.shortcutKey;if(s){const e=k.$shortcutSetting.viewMapping.get(a.dataset.area);i+=` (${e.has(s)?e.get(s).text:a.dataset.shortcutText})`}a.innerText=i}}replace(e){return this.mapping.has(e)?this.mapping.get(e):e}}class a extends t{createMapping(){return new Map([["{{書き出し先の選択}}","Избор на дестинация за износ"],["{{画質}}","качество на изображението"],["{{座標}}","координати"],["{{MovieClipを編集}}","Редактиране на MovieClip."],["{{親の階層へ移動}}","Преместване в йерархията на родителите"],["{{ロックされたレイヤーです}}","Заключен слой."],["{{トゥイーンには複数のオブジェクトを設置できません}}","Не могат да се поставят няколко обекта върху един туин."],["{{名前が重複しています}}","Дублиращи се имена."],["{{名前は必須です}}","Изисква се име."],["{{基準点}}","референтна точка"],["{{自由変形ツール}}","Безплатен инструмент за трансформиране"],["{{キーフレームに変換}}","Преобразуване в ключови кадри"],["{{空のキーフレームに変換}}","Преобразува се в празни ключови кадри."],["{{最初のフレームに移動}}","Преминаване към първия кадър"],["{{最後のフレームに移動}}","Преминаване към последния кадър"],["{{SWFを解析中}}","анализираните ДФУ."],["{{JSONを生成}}","Генериране на JSON"],["{{ファイルを生成}}","Генериране на файл"],["{{N2Dファイルの読み込み}}","Зареждане на N2D файлове."],["{{JSONの読み込み}}","Четене на JSON."],["{{データを解凍中}}","Данните се разопаковат."],["{{データを圧縮中}}","Компресиране на данни."],["{{エンコード}}","кодиране"],["{{外部ファイルの読み込み}}","Зареждане на външни файлове"],["{{バイナリデータを生成}}","Генериране на двоични данни."],["{{データベースを起動}}","Стартиране на базата данни"],["{{データを保存中}}","Съхраняване на данни."],["{{完了}}","завършване"],["{{ステージ左揃え}}","подравняване вляво от сцената"],["{{ステージ中央揃え(水平方向)}}","Центриране на сцената (хоризонтално)"],["{{ステージ右揃え}}","Подравняване вдясно на сцената"],["{{ステージ上揃え}}","представяне на сцената"],["{{ステージ中央揃え(垂直方向)}}","Центриране на сцената (вертикално)"],["{{ステージ下揃え}}","обосновка"],["{{定規}}","линийка"],["{{表示}}","дисплей"],["{{ショートカット}}","пряк път"],["{{レイヤーを複製}}","Дублиране на слой"],["{{未使用のフォルダを削除}}","Изтрийте неизползваните папки."],["{{同名のアイテムが存在します}}","Съществува(т) артикул(и) със същото име."],["{{追加ファイル}}","допълнителен файл"],["{{既存のコンテンツ}}","Съществуващо съдържание."],["{{上書きするか、ファイル名を変更して追加するか、スキップを選択する事ができます}}","Можете да изберете да презаписвате, преименувате и добавяте файлове или да пропуснете"],["{{全て上書き}}","Презаписване на всички"],["{{全てスキップ}}","Пропуснете всички."],["{{追加・上書き}}","Добавки и презаписвания"],["{{スキップ}}","прескочете"],["{{表示確認したいフレームを指定}}","Посочете рамката, на която искате да проверите дисплея."],["{{ファイル名を指定}}","Посочете името на файла"],["{{ファイル名}}","име на файл"],["{{終了フレームを指定}}","Посочете крайната рамка"],["{{開始フレームを指定}}","Посочете началната рамка"],["{{フレーム設定}}","настройка на рамката"],["{{書き出し設定}}","Настройки за експортиране"],["{{ファイル形式の選択}}","Избор на файлов формат"],["{{ファイル形式}}","формат на файла"],["{{サイズ設定}}","Оразмеряване"],["{{左上}}","лява горна част"],["{{中央上}}","център-горен"],["{{右上}}","дясна горна част"],["{{中央左}}","лявоцентристки"],["{{中央}}","централен"],["{{中央右}}","дясноцентристки"],["{{左下}}","в долния ляв ъгъл"],["{{中央下}}","по-нисък среден"],["{{右下}}","дясно-долу"],["{{中心点のX座標}}","X-координата на централната точка"],["{{中心点のY座標}}","Y-координата на централната точка"],["{{MovieClipに変換}}","Конвертиране в MovieClip"],["{{変換}}","трансформация"],["{{ループ回数}}","Брой на циклите"],["{{カーブポインターの削除}}","Изтриване на показалеца на кривата."],["{{ステージ基準}}","Критерии за етапа"],["{{閉じる}}","близки"],["{{保存}}","съхранение (обикновено на течност, например дъждовна вода, или зад язовир)"],["{{リセット}}","Нулиране на"],["{{スクリーン}}","екран"],["{{ショートカット設定}}","Настройки за бърз достъп"],["{{レイヤーカラー}}","слоест цвят"],["{{Next2Dを支援する}}","Подкрепа Next2D."],["{{サポート}}","подкрепа"],["{{未使用のアイテムを削除}}","Премахване на неизползвани елементи"],["{{レイヤーをペースト}}","Слой паста."],["{{レイヤーをコピー}}","Копиране на слой"],["{{フレームをペースト}}","Поставяне на рамка."],["{{フレームをコピー}}","Рамка за копиране."],["{{キーフレームを削除}}","Изтриване на ключови кадри."],["{{キーフレームに空のキーフレームを追加できません}}","Не може да се добавят празни ключови кадри към ключови кадри"],["{{ズームツール}}","Инструмент за мащабиране"],["{{タイムライン幅の拡大・縮小}}","Разширяване и намаляване на ширината на времевата линия"],["{{ガイドレイヤー}}","водещ слой"],["{{音量設定}}","Настройка на силата на звука"],["{{サウンドを削除}}","Премахване на звука."],["{{カスタムループ}}","персонализирана примка"],["{{読込のみ}}","Само за четене"],["{{書込を許可}}","разрешение за публикуване"],["{{単一行}}","проста линия"],["{{複数行}}","многоредово"],["{{自動で折り返し}}","Автоматичен обрат"],["{{左寄せ}}","подравнен наляво"],["{{中央揃え}}","центриране"],["{{右寄せ}}","дясно подравнен"],["{{放射状グラデーション}}","радиална градация"],["{{線形グラデーション}}","линеен градиент"],["{{画像}}","Изображение."],["{{画像選択}}","Избор на изображения"],["{{種別}}","класификация"],["{{Shapeの色設定}}","Настройки на цвета на формата"],["{{変形}}","деформация"],["{{カラー効果}}","цветен ефект"],["{{フィルター}}","филтър"],["{{Shapeを複製}}","Дублиране на формата."],["{{読み込み}}","да се чете в"],["{{新規フォルダー}}","Нова папка"],["{{新規MovieClip}}","Нов клип за филм."],["{{枠に合わせてテキストをリサイズ}}","Променете размера на текста, за да се побере в рамката."],["{{テキストに合わせて枠をリサイズ}}","Променете размера на рамката, за да се побере текстът."],["{{リサイズしない}}","Без промяна на размера"],["{{フォント}}","шрифт"],["{{テキスト}}","Текст."],["{{ループ}}","цикъл"],["{{音量}}","сила на звука"],["{{ビデオ}}","Видео."],["{{イージング}}","облекчаване на"],["{{サウンド}}","звук"],["{{シンボル}}","символ"],["{{名前}}","Име."],["{{オブジェクト}}","обект"],["{{ステージ設定}}","Постановка на сцената"],["{{プレビュー}}","преглед"],["{{削除}}","изтриване"],["{{ペースト}}","паста"],["{{コピー}}","копие"],["{{プラグインメニュー}}","Меню Plug-in"],["{{トゥイーン}}","между"],["{{カーブポインターの追加}}","Допълнителен показалец на кривата."],["{{パスの結合}}","Сливане на пътища"],["{{シェイプ}}","форма"],["{{キーフレームに配分}}","Разпределение към ключови кадри"],["{{レイヤーに配分}}","Разпределение по слоеве"],["{{タイムライン}}","хронология"],["{{整列}}","подравняване"],["{{最背面}}","най-скорошен"],["{{ひとつ背面へ}}","Един отзад."],["{{ひとつ前面へ}}","Един отпред."],["{{最前面}}","преди всичко"],["{{重ね順}}","(ред на) суперпозиция"],["{{プラグイン}}","плъгин"],["{{ライブラリ}}","библиотека"],["{{プロパティ}}","собственост"],["{{マスクレイヤー}}","слой маска"],["{{通常レイヤー}}","Нормален слой"],["{{モーショントゥイーンの削除}}","Изтриване на елементи за движение."],["{{モーショントゥイーンの追加}}","Допълнителни настройки за движение."],["{{モーダル表示}}","модална индикация"],["{{言語}}","Език."],["{{フォーマット}}","формат"],["{{含める}}","включва"],["{{含めない}}","да не включва"],["{{使い方、リファレンス}}","Употреба, референция."],["{{非表示レイヤー}}","скрит слой"],["{{設定}}","настройка"],["{{デフォルトのループを利用する}}","Използвайте цикъла по подразбиране."],["{{フレームピッカー}}","избор на рамка"],["{{左揃え}}","лява обосновка"],["{{中央揃え(水平方向)}}","Центрирано (хоризонтално)"],["{{右揃え}}","правилна обосновка"],["{{上揃え}}","обосновка"],["{{中央揃え(垂直方向)}}","Центрирано (вертикално)"],["{{下揃え}}","обосновка"],["{{開始フレーム}}","начална рамка"],["{{終了フレーム}}","крайна рамка"],["{{ループで再生}}","Възпроизвеждане в цикъл"],["{{1回再生}}","1 възпроизвеждане"],["{{指定したフレームで固定}}","Фиксирано в посочената рамка."],["{{1回逆再生}}","1 възпроизвеждане в обратна посока"],["{{逆ループで再生}}","Възпроизвеждане в обратен цикъл."],["{{画面の拡大・縮小}}","Приближаване и отдалечаване на екрана"],["{{カスタムイージングデータを保存}}","Запазване на персонализирани данни за облекчаване."],["{{カスタムイージングデータの読込}}","Четене на потребителски данни за облекчаване."],["{{プレビューのON/OFF}}","Включване/изключване на предварителен преглед."],["{{フォント枠サイズ}}","размер на рамката на шрифта"],["{{フォント枠カラー}}","Цвят на рамката на шрифта"],["{{オニオンスキン}}","лукова кожа"],["{{バケツツール}}","Инструменти с кофа"],["{{ペンツール}}","инструмент за писане"],["{{ダブルクリックでカーブポイントが追加されます}}","Кликнете два пъти, за да добавите точка на крива"],["{{選択ツール}}","инструмент за избор"],["{{Shape変形ツール}}","Инструменти за деформация на формата"],["{{テキストツール}}","инструмент за текст"],["{{矩形ツール}}","Инструмент за правоъгълник"],["{{楕円ツール}}","Елиптични инструменти"],["{{角丸矩形ツール}}","Инструмент за правоъгълник със заоблен ъгъл"],["{{塗りのカラー}}","Цвят на боята"],["{{線のカラー}}","Цвят на линията"],["{{線の太さ}}","дебелина на линията"],["{{プロジェクトデータの読込}}","Четене на данни за проекта"],["{{プロジェクトデータを保存}}","Записване на данни за проекта."],["{{書き出し}}","начално изречение или параграф"],["{{Discordへ移動}}","Отидете в Discord"],["{{バグ報告}}","доклад за грешка"],["{{設定}}","настройка"],["{{タブを追加}}","Добавяне на раздел."],["{{タブの一覧を表示・移動}}","Показване и преместване на списъка с табове"],["{{スクリプトを追加}}","Добавяне на скрипт."],["{{キーフレームを追加}}","Добавяне на ключови кадри."],["{{空のキーフレームを追加}}","Добавяне на празни ключови кадри."],["{{フレームを追加}}","Добавяне на рамка."],["{{フレームを削除}}","Свалете рамката."],["{{再生}}","регенерация"],["{{停止}}","спиране на музиката, танците и т.н. в знак на траур"],["{{ループ設定}}","Настройки на цикъла"],["{{レイヤーを追加}}","Добавете слой."],["{{レイヤーを削除}}","Изтриване на слой."],["{{全てのレイヤーをハイライト}}","Подчертайте всички слоеве"],["{{全てのレイヤーを非表示}}","Скриване на всички слоеве"],["{{全てのレイヤーをロック}}","Заключете всички слоеве."],["{{比率を固定}}","Фиксирано съотношение"],["{{ステージの幅}}","Ширина на сцената"],["{{背景色}}","цвят на фона"],["{{ステージの高さ}}","Височина на сцената."],["{{フレームレート}}","честота на кадрите"],["{{シンボル名}}","име на символа"],["{{イージング設定}}","Настройка за облекчаване"],["{{ビデオの音量設定}}","Настройка на силата на звука на видеото"],["{{自動再生}}","автопредаване"],["{{テキストエリアのボーダー設定}}","Настройки на границите за текстовите области."],["{{テキスト入力設定}}","настройка за въвеждане на текст"],["{{フォント選択}}","Избор на шрифт"],["{{自動サイズ調整}}","Автоматично оразмеряване"],["{{フォントスタイルタイプ}}","тип стил на шрифта"],["{{行揃え}}","да оправдае"],["{{改行設定}}","настройка на прекъсване на реда"],["{{スクロール設定}}","Настройки за превъртане"],["{{フォントサイズ}}","размер на шрифта"],["{{フォントカラー}}","цвят на шрифта"],["{{行間}}","между редовете"],["{{文字幅}}","ширина на символа"],["{{左マージン}}","ляво поле"],["{{右マージン}}","дясно поле"],["{{カラー種別の選択}}","Изберете тип цвят"],["{{背景画像の選択}}","Избор на фоново изображение"],["{{カラーポインターを追加}}","Допълнителен цветен показалец."],["{{カラー値}}","стойност на цвета"],["{{アルファ(0%-100%)}}","Алфа (0%-100%)"],["{{アルファ値}}","алфа стойност"],["{{選択対象の幅}}","Ширина на целта за избор"],["{{選択対象のX座標}}","X-координата на целта за избор"],["{{選択対象の高さ}}","Височина на целта за избор"],["{{選択対象のY座標}}","Y-координата на целта за избор"],["{{選択対象の幅の伸縮}}","Разтягане и свиване на ширината на целта за избор"],["{{選択対象を回転}}","Завъртане на избора"],["{{選択対象の高さの伸縮}}","Разширяване и намаляване на височината на целта за избор."],["{{アルファオフセット(-255〜255)}}","Алфа отместване (-255 до 255)"],["{{赤(0%-100%)}}","Червено (0%-100%)"],["{{赤オフセット(-255〜255)}}","Червено отместване (-255 до 255)"],["{{緑(0%-100%)}}","Зелено (0%-100%)"],["{{緑オフセット(-255〜255)}}","Отместване на зеления цвят (-255 до 255)"],["{{青(0%-100%)}}","Синьо (0%-100%)"],["{{青オフセット(-255〜255)}}","Отместване на синия цвят (-255 до 255)"],["{{ブレンドモード}}","режим на смесване"],["{{フィルターを選択}}","Изберете филтър"],["{{フィルターを追加}}","Добавяне на филтър."],["{{サウンドを追加}}","Добавете звук."],["{{フィルターを表示・非表示する}}","Показване/скриване на филтри"],["{{フィルターを削除}}","Премахване на филтрите."],["{{水平方向にぼかす}}","Размазване по хоризонтала."],["{{垂直方向にぼかす}}","Вертикално размазване."],["{{フィルター強度}}","Сила на филтъра"],["{{フィルター角度}}","Ъгъл на филтъра"],["{{シャドウのアルファ}}","Алфа на сянката."],["{{シャドウのカラー}}","Цветове на сенките."],["{{フィルター距離}}","Разстояние на филтъра"],["{{ハイライトのカラー}}","Цветни акценти"],["{{ハイライトのアルファ}}","Акцентиране на Alpha."],["{{グラデーションカラー}}","цвят на градация"],["{{グラデーションのアルファ}}","Алфа на градиента"],["{{タブの移動・名前を変更}}","Преместване и преименуване на разделите"],["{{プロジェクトを閉じる}}","Приключване на проекта"],["{{上下に移動}}","Преместване нагоре и надолу"],["{{レイヤー変更(ダブルクリック)}}","Промяна на слоя (двойно щракване)"],["{{レイヤーをハイライト}}","Слоеве за подчертаване."],["{{レイヤーを非表示}}","Скриване на слоевете."],["{{レイヤーをロック}}","Слоеве на заключване."],["{{カーブポインター(ダブルクリックでON/OFF)}}","Криволинейна показалка (кликнете два пъти, за да включите/изключите)"],["{{インスタンス名}}","име на инстанция"],["{{ライブラリ内の検索}}","Търсене в библиотеката"],["{{フレームラベル}}","етикет на рамката"],["{{プロジェクトが保存されていない場合、このタブのプロジェクトデータを復旧する事はできません。タブを削除しますか？}}}}","Ако проектът не е запазен, данните за проекта за този раздел не могат да бъдат възстановени. Искате ли да изтриете раздела?}}"]])}}class r extends t{createMapping(){return new Map([["{{書き出し先の選択}}","出口地点"],["{{画質}}","影像质量"],["{{座標}}","坐标"],["{{MovieClipを編集}}","编辑MovieClip"],["{{親の階層へ移動}}","移动到父级层次结构"],["{{ロックされたレイヤーです}}","锁定的层"],["{{トゥイーンには複数のオブジェクトを設置できません}}","多个对象不能放在一个Tween上"],["{{名前が重複しています}}","重复的名字"],["{{名前は必須です}}","名字是必须的"],["{{基準点}}","参考点"],["{{自由変形ツール}}","免费转换工具"],["{{キーフレームに変換}}","转换为关键帧"],["{{空のキーフレームに変換}}","转换为空关键帧"],["{{最初のフレームに移動}}","转到第一帧"],["{{最後のフレームに移動}}","转到最后一帧"],["{{SWFを解析中}}","正在分析的SWF"],["{{JSONを生成}}","生成JSON"],["{{ファイルを生成}}","生成文件"],["{{N2Dファイルの読み込み}}","加载N2D文件"],["{{JSONの読み込み}}","读取JSON"],["{{データを解凍中}}","对数据进行解压"],["{{データを圧縮中}}","压缩数据"],["{{エンコード}}","编码"],["{{外部ファイルの読み込み}}","加载外部文件"],["{{バイナリデータを生成}}","生成二进制数据"],["{{データベースを起動}}","启动数据库"],["{{データを保存中}}","储存数据"],["{{完了}}","完成"],["{{ステージ左揃え}}","舞台左侧对齐"],["{{ステージ中央揃え(水平方向)}}","对准舞台中心（水平）"],["{{ステージ右揃え}}","舞台右侧的对齐"],["{{ステージ上揃え}}","对齐舞台"],["{{ステージ中央揃え(垂直方向)}}","对准舞台中心（垂直）"],["{{ステージ下揃え}}","对准舞台底部"],["{{定規}}","尺子"],["{{表示}}","展示"],["{{ショートカット}}","快捷方式"],["{{レイヤーを複製}}","复制图层"],["{{未使用のフォルダを削除}}","删除未使用的文件夹"],["{{同名のアイテムが存在します}}","存在相同名称的项目"],["{{追加ファイル}}","附加文件"],["{{既存のコンテンツ}}","现有的内容"],["{{上書きするか、ファイル名を変更して追加するか、スキップを選択する事ができます}}","你可以选择覆盖、重命名和添加文件或跳过"],["{{全て上書き}}","覆盖所有"],["{{全てスキップ}}","跳过所有"],["{{追加・上書き}}","添加和覆盖"],["{{スキップ}}","跳过"],["{{表示確認したいフレームを指定}}","指定你要检查显示的框架"],["{{ファイル名を指定}}","指定文件名"],["{{ファイル名}}","文件名"],["{{終了フレームを指定}}","指定终端框架"],["{{開始フレームを指定}}","指定起始框架"],["{{フレーム設定}}","框架设置"],["{{書き出し設定}}","出口设置"],["{{ファイル形式の選択}}","选择文件格式"],["{{ファイル形式}}","文件格式"],["{{サイズ設定}}","尺寸"],["{{左上}}","左上"],["{{中央上}}","中-上"],["{{右上}}","右上"],["{{中央左}}","中间偏左"],["{{中央}}","中央"],["{{中央右}}","中右翼"],["{{左下}}","左下角"],["{{中央下}}","中下级"],["{{右下}}","右下"],["{{中心点のX座標}}","中心点的X坐标"],["{{中心点のY座標}}","中心点的Y坐标"],["{{MovieClipに変換}}","转换为MovieClip"],["{{変換}}","蜕变"],["{{ループ回数}}","循环次数"],["{{カーブポインターの削除}}","删除曲线指针"],["{{ステージ基準}}","阶段性标准"],["{{閉じる}}","贴近"],["{{保存}}","储存"],["{{リセット}}","重置"],["{{スクリーン}}","筛选"],["{{ショートカット設定}}","捷径设置"],["{{レイヤーカラー}}","分层色"],["{{Next2Dを支援する}}","支持Next2D"],["{{サポート}}","支持"],["{{未使用のアイテムを削除}}","删除未使用的项目"],["{{レイヤーをペースト}}","粘贴层"],["{{レイヤーをコピー}}","复制层"],["{{フレームをペースト}}","粘贴框架"],["{{フレームをコピー}}","复制框架"],["{{キーフレームを削除}}","删除关键帧"],["{{キーフレームに空のキーフレームを追加できません}}","不能向关键帧添加空关键帧"],["{{ズームツール}}","缩放工具"],["{{タイムライン幅の拡大・縮小}}","时间线宽度 扩大/缩小"],["{{ガイドレイヤー}}","指导层"],["{{音量設定}}","音量设置"],["{{サウンドを削除}}","移除声音"],["{{カスタムループ}}","定制的循环"],["{{読込のみ}}","只读"],["{{書込を許可}}","职位许可"],["{{単一行}}","单线"],["{{複数行}}","多线"],["{{自動で折り返し}}","自动绕行"],["{{左寄せ}}","左对齐"],["{{中央揃え}}","定心"],["{{右寄せ}}","右对齐"],["{{放射状グラデーション}}","径向梯度"],["{{線形グラデーション}}","线性梯度"],["{{画像}}","图片"],["{{画像選択}}","图像选择"],["{{種別}}","分类"],["{{Shapeの色設定}}","形状颜色设置"],["{{変形}}","变形"],["{{カラー効果}}","颜色转换"],["{{フィルター}}","滤镜"],["{{Shapeを複製}}","复制的形状"],["{{読み込み}}","读在"],["{{新規フォルダー}}","新文件夹"],["{{新規MovieClip}}","新的电影剪辑"],["{{枠に合わせてテキストをリサイズ}}","调整文字大小以适应框架"],["{{テキストに合わせて枠をリサイズ}}","调整框架的大小以适应文本"],["{{リサイズしない}}","不调整大小"],["{{フォント}}","字体"],["{{テキスト}}","文本"],["{{ループ}}","循环"],["{{音量}}","音量"],["{{ビデオ}}","视频"],["{{イージング}}","缓和"],["{{サウンド}}","声音"],["{{シンボル}}","符号"],["{{名前}}","命名"],["{{オブジェクト}}","对象"],["{{ステージ設定}}","舞台设置"],["{{プレビュー}}","预览"],["{{削除}}","删除"],["{{ペースト}}","粘贴"],["{{コピー}}","拷贝"],["{{プラグインメニュー}}","插件菜单"],["{{トゥイーン}}","嫩枝"],["{{カーブポインターの追加}}","额外的曲线指示器"],["{{パスの結合}}","路径合并"],["{{シェイプ}}","形状"],["{{キーフレームに配分}}","分配给关键帧"],["{{レイヤーに配分}}","分配到各层"],["{{タイムライン}}","时间线"],["{{整列}}","对齐"],["{{最背面}}","最 后"],["{{ひとつ背面へ}}","一个背影"],["{{ひとつ前面へ}}","一个正面"],["{{最前面}}","最前线"],["{{重ね順}}","继承顺序"],["{{プラグイン}}","插件"],["{{ライブラリ}}","图书馆"],["{{プロパティ}}","财产"],["{{マスクレイヤー}}","掩膜层"],["{{通常レイヤー}}","普通层"],["{{モーショントゥイーンの削除}}","删去了运动推理的内容"],["{{モーショントゥイーンの追加}}","额外的议案推理"],["{{モーダル表示}}","模态指示"],["{{言語}}","语言"],["{{フォーマット}}","格式"],["{{含める}}","包括"],["{{含めない}}","不包括"],["{{使い方、リファレンス}}","用法，参考"],["{{非表示レイヤー}}","隐藏层"],["{{設定}}","设置"],["{{デフォルトのループを利用する}}","使用默认的循环"],["{{フレームピッカー}}","选框机"],["{{左揃え}}","左对齐"],["{{中央揃え(水平方向)}}","居中（水平方向）"],["{{右揃え}}","右对齐"],["{{上揃え}}","上对齐"],["{{中央揃え(垂直方向)}}","居中（垂直方向）"],["{{下揃え}}","下对齐"],["{{開始フレーム}}","起始框架"],["{{終了フレーム}}","终端框架"],["{{ループで再生}}","循环播放"],["{{1回再生}}","1次播放"],["{{指定したフレームで固定}}","固定在指定的框架内"],["{{1回逆再生}}","1 反向播放"],["{{逆ループで再生}}","反向循环播放"],["{{画面の拡大・縮小}}","画面的放大和缩小"],["{{カスタムイージングデータを保存}}","保存自定义缓和数据"],["{{カスタムイージングデータの読込}}","读取自定义宽松数据"],["{{プレビューのON/OFF}}","预览开/关"],["{{フォント枠サイズ}}","字体帧大小"],["{{フォント枠カラー}}","字体帧颜色"],["{{オニオンスキン}}","洋葱皮"],["{{バケツツール}}","整体填充工具"],["{{ペンツール}}","钢笔工具"],["{{ダブルクリックでカーブポイントが追加されます}}","双击来添加一个曲线点"],["{{選択ツール}}","选择工具"],["{{Shape変形ツール}}","形状变换工具"],["{{テキストツール}}","文本工具"],["{{矩形ツール}}","矩形工具"],["{{楕円ツール}}","椭圆工具"],["{{角丸矩形ツール}}","圆角矩形工具"],["{{塗りのカラー}}","填充颜色"],["{{線のカラー}}","画笔颜色"],["{{線の太さ}}","画笔宽度"],["{{プロジェクトデータの読込}}","载入工程文件"],["{{プロジェクトデータを保存}}","保存工程文件"],["{{書き出し}}","导出"],["{{Discordへ移動}}","前往discord"],["{{バグ報告}}","错误报告"],["{{設定}}","设置"],["{{タブを追加}}","添加标签页"],["{{タブの一覧を表示・移動}}","标签页列表"],["{{スクリプトを追加}}","添加一个脚本"],["{{キーフレームを追加}}","添加一个关键帧"],["{{空のキーフレームを追加}}","添加一个空的关键帧"],["{{フレームを追加}}","添加帧"],["{{フレームを削除}}","删除帧"],["{{再生}}","播放"],["{{停止}}","停止"],["{{ループ設定}}","循环设置"],["{{レイヤーを追加}}","添加图层"],["{{レイヤーを削除}}","删除图层"],["{{全てのレイヤーをハイライト}}","高亮所有图层"],["{{全てのレイヤーを非表示}}","隐藏所有图层"],["{{全てのレイヤーをロック}}","锁定所有图层"],["{{比率を固定}}","锁定比例"],["{{ステージの幅}}","画面宽度"],["{{背景色}}","背景颜色"],["{{ステージの高さ}}","画面高度"],["{{フレームレート}}","帧速率"],["{{シンボル名}}","符号名称"],["{{イージング設定}}","过渡设置"],["{{ビデオの音量設定}}","视频音量设置"],["{{自動再生}}","自动播放"],["{{テキストエリアのボーダー設定}}","文本框边框设置"],["{{テキスト入力設定}}","文本输入设置"],["{{フォント選択}}","字体选择"],["{{自動サイズ調整}}","自动调整尺寸"],["{{フォントスタイルタイプ}}","字体风格类型"],["{{行揃え}}","对齐"],["{{改行設定}}","换行设置"],["{{スクロール設定}}","滚动设置"],["{{フォントサイズ}}","字体大小"],["{{フォントカラー}}","字体颜色"],["{{行間}}","行间距"],["{{文字幅}}","字符宽度"],["{{左マージン}}","左边距"],["{{右マージン}}","右边距"],["{{カラー種別の選択}}","选择颜色类型"],["{{背景画像の選択}}","选择背景图片"],["{{カラーポインターを追加}}","添加颜色指针"],["{{カラー値}}","颜色"],["{{アルファ(0%-100%)}}","透明度（0%-100%）"],["{{アルファ値}}","透明度"],["{{選択対象の幅}}","选择对象的宽度"],["{{選択対象のX座標}}","选择对象的X轴坐标"],["{{選択対象の高さ}}","选择对象的高度"],["{{選択対象のY座標}}","选择对象的Y轴坐标"],["{{選択対象の幅の伸縮}}","选定对象的X轴缩放"],["{{選択対象を回転}}","旋转物体"],["{{選択対象の高さの伸縮}}","所选对象的比例Y"],["{{アルファオフセット(-255〜255)}}","透明度偏移（-255~255）"],["{{赤(0%-100%)}}","红色（0%-100%）"],["{{赤オフセット(-255〜255)}}","红色偏移（-255~255）"],["{{緑(0%-100%)}}","绿色（0%-100%）"],["{{緑オフセット(-255〜255)}}","绿色偏移（-255~255）"],["{{青(0%-100%)}}","蓝色（0%-100%）"],["{{青オフセット(-255〜255)}}","蓝色偏移（-255~255）"],["{{ブレンドモード}}","混合模式"],["{{フィルターを選択}}","选择滤镜"],["{{フィルターを追加}}","添加滤镜"],["{{サウンドを追加}}","添加声音"],["{{フィルターを表示・非表示する}}","显示和隐藏滤镜"],["{{フィルターを削除}}","删除滤镜"],["{{水平方向にぼかす}}","横向模糊"],["{{垂直方向にぼかす}}","纵向模糊"],["{{フィルター強度}}","滤镜强度"],["{{フィルター角度}}","滤镜角度"],["{{シャドウのアルファ}}","阴影透明度"],["{{シャドウのカラー}}","阴影颜色"],["{{フィルター距離}}","滤镜距离"],["{{ハイライトのカラー}}","高光色"],["{{ハイライトのアルファ}}","高光透明度"],["{{グラデーションカラー}}","渐变色"],["{{グラデーションのアルファ}}","渐变透明度"],["{{タブの移動・名前を変更}}","移动/重命名标签"],["{{プロジェクトを閉じる}}","关闭工程"],["{{上下に移動}}","上下移动"],["{{レイヤー変更(ダブルクリック)}}","改变图层（双击）"],["{{レイヤーをハイライト}}","高亮图层"],["{{レイヤーを非表示}}","隐藏图层"],["{{レイヤーをロック}}","锁定图层"],["{{カーブポインター(ダブルクリックでON/OFF)}}","曲线指针（双击打开/关闭）"],["{{インスタンス名}}","实例名称"],["{{ライブラリ内の検索}}","在库中搜索"],["{{フレームラベル}}","帧标签"],["{{プロジェクトが保存されていない場合、このタブのプロジェクトデータを復旧する事はできません。タブを削除しますか？}}","如果工程没有保存，将无法恢复此标签页数据。 你想删除这个标签页吗？"]])}}class i extends t{createMapping(){return new Map([["{{書き出し先の選択}}","Export Location"],["{{画質}}","Quality"],["{{座標}}","Coordinates"],["{{MovieClipを編集}}","Edit MovieClip"],["{{親の階層へ移動}}","Move to parent hierarchy"],["{{ロックされたレイヤーです}}","Locked layer"],["{{トゥイーンには複数のオブジェクトを設置できません}}","Multiple objects cannot be placed on a tween"],["{{名前が重複しています}}","Duplicate Name"],["{{名前は必須です}}","Name is required"],["{{基準点}}","Reference Point"],["{{自由変形ツール}}","Free Transform Tool"],["{{キーフレームに変換}}","Convert to keyframes"],["{{空のキーフレームに変換}}","Convert to empty keyframes"],["{{最初のフレームに移動}}","Go to First Frame"],["{{最後のフレームに移動}}","Go to Last Frame"],["{{SWFを解析中}}","SWF Being Parsed"],["{{JSONを生成}}","Generate JSON"],["{{ファイルを生成}}","Generate File"],["{{N2Dファイルの読み込み}}","Loading N2D File"],["{{JSONの読み込み}}","Loading JSON"],["{{データを解凍中}}","Decompressing Data"],["{{データを圧縮中}}","Compressing Data"],["{{エンコード}}","Encoding"],["{{外部ファイルの読み込み}}","Reading External Files"],["{{バイナリデータを生成}}","Generating Binary Data"],["{{データベースを起動}}","Starting the Database"],["{{データを保存中}}","Storing Data"],["{{完了}}","Completed"],["{{ステージ左揃え}}","Align Stage Left"],["{{ステージ中央揃え(水平方向)}}","Align Stage Center (Horizontal)"],["{{ステージ右揃え}}","Align Stage Right"],["{{ステージ上揃え}}","Align Stage Top"],["{{ステージ中央揃え(垂直方向)}}","Center Stage (Vertical)"],["{{ステージ下揃え}}","Align Bottom of Stage"],["{{定規}}","Ruler"],["{{表示}}","Display"],["{{ショートカット}}","Shortcut"],["{{レイヤーを複製}}","Duplicate Layer"],["{{未使用のフォルダを削除}}","Delete unused folders"],["{{同名のアイテムが存在します}}","An item of the same name exists"],["{{追加ファイル}}","Additional File"],["{{既存のコンテンツ}}","Existing Content"],["{{上書きするか、ファイル名を変更して追加するか、スキップを選択する事ができます}}","You can choose to overwrite, rename and add files, or skip"],["{{全て上書き}}","Overwrite All"],["{{全てスキップ}}","Skip All"],["{{追加・上書き}}","Add or Overwrite"],["{{スキップ}}","Skip"],["{{表示確認したいフレームを指定}}","Specify the frame you want to check the display"],["{{ファイル名を指定}}","Specify File Name"],["{{ファイル名}}","File Name"],["{{終了フレームを指定}}","Specify End Frame"],["{{開始フレームを指定}}","Specify Start Frame"],["{{フレーム設定}}","Frame Setting"],["{{書き出し設定}}","Export Settings"],["{{ファイル形式の選択}}","Select File Format"],["{{ファイル形式}}","File Formats"],["{{サイズ設定}}","Size Setting"],["{{左上}}","Top Left"],["{{中央上}}","Top Center"],["{{右上}}","Top Right"],["{{中央左}}","Center Left"],["{{中央}}","Center"],["{{中央右}}","Center Right"],["{{左下}}","Bottom Left"],["{{中央下}}","Bottom Center"],["{{右下}}","Bottom Right"],["{{中心点のX座標}}","X coordinate of the center point"],["{{中心点のY座標}}","Y coordinate of the center point"],["{{MovieClipに変換}}","Convert to MovieClip"],["{{変換}}","Conversion"],["{{ループ回数}}","Loop Count"],["{{カーブポインターの削除}}","Delete curve pointer"],["{{ステージ基準}}","Stage Criteria"],["{{閉じる}}","Close"],["{{保存}}","Save"],["{{リセット}}","Reset"],["{{スクリーン}}","Screen"],["{{ショートカット設定}}","Shortcut Settings"],["{{レイヤーカラー}}","Layer Color"],["{{Next2Dを支援する}}","Support Next2D"],["{{サポート}}","Support"],["{{未使用のアイテムを削除}}","Delete unused items"],["{{レイヤーをペースト}}","Paste Layer"],["{{レイヤーをコピー}}","Copy Layer"],["{{フレームをペースト}}","Paste Frame"],["{{フレームをコピー}}","Copy Frame"],["{{キーフレームを削除}}","Delete keyframe"],["{{キーフレームに空のキーフレームを追加できません}}","Cannot add an empty keyframe to a keyframe"],["{{ズームツール}}","Zoom Tool"],["{{タイムライン幅の拡大・縮小}}","Timeline Width Expand/Reduce"],["{{ガイドレイヤー}}","Guide Layer"],["{{音量設定}}","Volume Setting"],["{{サウンドを削除}}","Remove Sound"],["{{カスタムループ}}","Custom Loop"],["{{読込のみ}}","ReadOnly"],["{{書込を許可}}","Writeable"],["{{単一行}}","Single line"],["{{複数行}}","Multiline"],["{{自動で折り返し}}","Auto Wrap"],["{{左寄せ}}","Left"],["{{中央揃え}}","Center"],["{{右寄せ}}","Right"],["{{放射状グラデーション}}","Radial Gradient"],["{{線形グラデーション}}","Linear Gradient"],["{{画像}}","Image"],["{{画像選択}}","Image Selection"],["{{種別}}","Type"],["{{Shapeの色設定}}","Shape color settings"],["{{変形}}","Transform"],["{{カラー効果}}","Color Transform"],["{{フィルター}}","Filter"],["{{Shapeを複製}}","Duplicate Shape"],["{{読み込み}}","Read in"],["{{新規フォルダー}}","Added Folder"],["{{新規MovieClip}}","Added MovieClip"],["{{枠に合わせてテキストをリサイズ}}","Resize text to fit the frame"],["{{テキストに合わせて枠をリサイズ}}","Resize the frame to fit the text"],["{{リサイズしない}}","No Resize"],["{{フォント}}","Font"],["{{テキスト}}","Text"],["{{ループ}}","Loop"],["{{音量}}","Volume"],["{{ビデオ}}","Video"],["{{イージング}}","Easing"],["{{サウンド}}","Sound"],["{{シンボル}}","Symbol"],["{{名前}}","Name"],["{{オブジェクト}}","Object"],["{{ステージ設定}}","Stage Setting"],["{{プレビュー}}","Preview"],["{{削除}}","Delete"],["{{ペースト}}","Paste"],["{{コピー}}","Copy"],["{{プラグインメニュー}}","Plugin Menu"],["{{トゥイーン}}","Tween"],["{{カーブポインターの追加}}","Added Curve Pointer"],["{{パスの結合}}","Integrating paths"],["{{シェイプ}}","Shape"],["{{キーフレームに配分}}","Distribute to Keyframes"],["{{レイヤーに配分}}","Distribute to Layers"],["{{タイムライン}}","Timeline"],["{{整列}}","Align"],["{{最背面}}","Send to Back"],["{{ひとつ背面へ}}","Send to Backward"],["{{ひとつ前面へ}}","Bring to Forward"],["{{最前面}}","Bring to Front"],["{{重ね順}}","Arrange"],["{{プラグイン}}","Plugin"],["{{ライブラリ}}","Library"],["{{プロパティ}}","Property"],["{{マスクレイヤー}}","Mask Layer"],["{{通常レイヤー}}","Normal Layer"],["{{モーショントゥイーンの削除}}","Deleted Motion Tweening"],["{{モーショントゥイーンの追加}}","Added Motion Tweening"],["{{モーダル表示}}","Modal Indication"],["{{言語}}","Language"],["{{フォーマット}}","Format"],["{{含める}}","Include"],["{{含めない}}","Not Including"],["{{使い方、リファレンス}}","Usage, Reference"],["{{非表示レイヤー}}","Hidden Layers"],["{{設定}}","Setting"],["{{デフォルトのループを利用する}}","Use the default loop"],["{{フレームピッカー}}","Frame Picker"],["{{左揃え}}","Left"],["{{中央揃え(水平方向)}}","Center (Horizontal)"],["{{右揃え}}","Right"],["{{上揃え}}","Top"],["{{中央揃え(垂直方向)}}","Center (Vertical)"],["{{下揃え}}","Bottom"],["{{開始フレーム}}","Start Frame"],["{{終了フレーム}}","End Frame"],["{{ループで再生}}","Play in loop"],["{{1回再生}}","1 playback"],["{{指定したフレームで固定}}","Fixed at the specified frame"],["{{1回逆再生}}","1 reverse playback"],["{{逆ループで再生}}","Playback in reverse loop"],["{{画面の拡大・縮小}}","Zoom in/out of screen"],["{{カスタムイージングデータを保存}}","Save custom easing data"],["{{カスタムイージングデータの読込}}","Reading custom easing data"],["{{プレビューのON/OFF}}","Preview on/off"],["{{フォント枠サイズ}}","Font Frame Size"],["{{フォント枠カラー}}","Font Frame Color"],["{{オニオンスキン}}","Onion Skin"],["{{バケツツール}}","Bucket Tools"],["{{ペンツール}}","Pen Tool"],["{{ダブルクリックでカーブポイントが追加されます}}","Double-click to add a curve point"],["{{選択ツール}}","Selection Tool"],["{{Shape変形ツール}}","Shape Transform Tool"],["{{テキストツール}}","Text Tool"],["{{矩形ツール}}","Rectangle Tool"],["{{楕円ツール}}","Ellipse Tool"],["{{角丸矩形ツール}}","Rounded Rectangle Tool"],["{{塗りのカラー}}","Fill Color"],["{{線のカラー}}","Stroke Color"],["{{線の太さ}}","Stroke Width"],["{{プロジェクトデータの読込}}","Loading project data"],["{{プロジェクトデータを保存}}","Save project data"],["{{書き出し}}","Export"],["{{Discordへ移動}}","Go to discord"],["{{バグ報告}}","Bug reports"],["{{設定}}","Setting"],["{{タブを追加}}","Add a tab"],["{{タブの一覧を表示・移動}}","View and move through the list of tabs"],["{{スクリプトを追加}}","Add a script"],["{{キーフレームを追加}}","Add a keyframe"],["{{空のキーフレームを追加}}","Add an empty keyframe"],["{{フレームを追加}}","Add a frame"],["{{フレームを削除}}","Delete frame"],["{{再生}}","Play"],["{{停止}}","Stop"],["{{ループ設定}}","Loop Setting"],["{{レイヤーを追加}}","Add a layer"],["{{レイヤーを削除}}","Delete layer"],["{{全てのレイヤーをハイライト}}","Highlight all layers"],["{{全てのレイヤーを非表示}}","Hide all layers"],["{{全てのレイヤーをロック}}","Lock all layers"],["{{比率を固定}}","Fixed ratio"],["{{ステージの幅}}","Stage Width"],["{{背景色}}","Background Color"],["{{ステージの高さ}}","Stage Height"],["{{フレームレート}}","Frame Rate"],["{{シンボル名}}","Symbol Name"],["{{イージング設定}}","Easing Setting"],["{{ビデオの音量設定}}","Video Volume Setting"],["{{自動再生}}","Auto Play"],["{{テキストエリアのボーダー設定}}","Text Area Border Setting"],["{{テキスト入力設定}}","Text Input Setting"],["{{フォント選択}}","Font Select"],["{{自動サイズ調整}}","Automatic size adjustment"],["{{フォントスタイルタイプ}}","Font Style Type"],["{{行揃え}}","Align"],["{{改行設定}}","Newline Setting"],["{{スクロール設定}}","Scroll Setting"],["{{フォントサイズ}}","Font Size"],["{{フォントカラー}}","Font Color"],["{{行間}}","Line Space"],["{{文字幅}}","Character Width"],["{{左マージン}}","Left Margin"],["{{右マージン}}","Right Margin"],["{{カラー種別の選択}}","Select a color type"],["{{背景画像の選択}}","Selecting a background image"],["{{カラーポインターを追加}}","Add color pointers"],["{{カラー値}}","Color"],["{{アルファ(0%-100%)}}","Alpha(0%-100%)"],["{{アルファ値}}","Alpha"],["{{選択対象の幅}}","Width of the selection object"],["{{選択対象のX座標}}","X coordinate of the selection object"],["{{選択対象の高さ}}","Height  of the selection object"],["{{選択対象のY座標}}","Y coordinate of the selection object"],["{{選択対象の幅の伸縮}}","scaleX of the selected object"],["{{選択対象を回転}}","Rotate the object"],["{{選択対象の高さの伸縮}}","scaleY of the selected object"],["{{アルファオフセット(-255〜255)}}","Alpha Offset(-255〜255)"],["{{赤(0%-100%)}}","Red(0%-100%)"],["{{赤オフセット(-255〜255)}}","Red Offset(-255〜255)"],["{{緑(0%-100%)}}","Green(0%-100%)"],["{{緑オフセット(-255〜255)}}","Green Offset(-255〜255)"],["{{青(0%-100%)}}","Blue(0%-100%)"],["{{青オフセット(-255〜255)}}","Blue Offset(-255〜255)"],["{{ブレンドモード}}","Blend Mode"],["{{フィルターを選択}}","Select a filter"],["{{フィルターを追加}}","Add a filter"],["{{サウンドを追加}}","Add a sound"],["{{フィルターを表示・非表示する}}","Show and Hide filters"],["{{フィルターを削除}}","Delete Filter"],["{{水平方向にぼかす}}","Blur Horizontally"],["{{垂直方向にぼかす}}","Blur Vertically"],["{{フィルター強度}}","Filter Strength"],["{{フィルター角度}}","Filter Angle"],["{{シャドウのアルファ}}","Shadow Alpha"],["{{シャドウのカラー}}","Shadow Color"],["{{フィルター距離}}","Filter Distance"],["{{ハイライトのカラー}}","Highlight Color"],["{{ハイライトのアルファ}}","Highlight Alpha"],["{{グラデーションカラー}}","Gradient Color"],["{{グラデーションのアルファ}}","Gradient Alpha"],["{{タブの移動・名前を変更}}","Move/Rename tabs"],["{{プロジェクトを閉じる}}","Close the project"],["{{上下に移動}}","Move up and down"],["{{レイヤー変更(ダブルクリック)}}","Layer Change(double-click)"],["{{レイヤーをハイライト}}","Highlight Layer"],["{{レイヤーを非表示}}","Hide Layer"],["{{レイヤーをロック}}","Lock the Layer"],["{{カーブポインター(ダブルクリックでON/OFF)}}","Curve Pointer (double click to turn on/off)"],["{{インスタンス名}}","Instance Name"],["{{ライブラリ内の検索}}","Search in the library"],["{{フレームラベル}}","Frame Label"],["{{プロジェクトが保存されていない場合、このタブのプロジェクトデータを復旧する事はできません。タブを削除しますか？}}","If the project is not saved, the project data in this tab cannot be recovered. Do you want to delete the tab?"]])}}class s extends t{createMapping(){return new Map([["{{書き出し先の選択}}","Vientikohteen valitseminen"],["{{画質}}","kuvanlaatu"],["{{座標}}","koordinaatti"],["{{MovieClipを編集}}","Muokkaa MovieClipiä."],["{{親の階層へ移動}}","Siirry vanhemman hierarkiaan"],["{{ロックされたレイヤーです}}","Lukittu kerros."],["{{トゥイーンには複数のオブジェクトを設置できません}}","Useita objekteja ei voi sijoittaa väliin."],["{{名前が重複しています}}","Kaksinkertaiset nimet."],["{{名前は必須です}}","Nimi vaaditaan."],["{{基準点}}","vertailukohta"],["{{自由変形ツール}}","Ilmainen Transform Tool -työkalu"],["{{キーフレームに変換}}","Muunnettu avainkehyksiksi"],["{{空のキーフレームに変換}}","Muunnetaan tyhjiksi avainkehyksiksi."],["{{最初のフレームに移動}}","Siirry ensimmäiseen ruutuun"],["{{最後のフレームに移動}}","Siirry viimeiseen ruutuun"],["{{SWFを解析中}}","Analysoitava SWF."],["{{JSONを生成}}","Luo JSON"],["{{ファイルを生成}}","Luo tiedosto"],["{{N2Dファイルの読み込み}}","N2D-tiedostojen lataaminen."],["{{JSONの読み込み}}","JSONin lukeminen."],["{{データを解凍中}}","Tietoja puretaan."],["{{データを圧縮中}}","Tietojen pakkaaminen."],["{{エンコード}}","koodaa"],["{{外部ファイルの読み込み}}","Ulkoisten tiedostojen lataaminen"],["{{バイナリデータを生成}}","Luo binääritietoja."],["{{データベースを起動}}","Käynnistä tietokanta"],["{{データを保存中}}","Tietojen tallentaminen."],["{{完了}}","valmistuminen"],["{{ステージ左揃え}}","vasemmanpuoleinen linjaus"],["{{ステージ中央揃え(水平方向)}}","Vaihe keskitetty (vaakasuora)"],["{{ステージ右揃え}}","Vaiheen oikea kohdistus"],["{{ステージ上揃え}}","esiintyminen lavalla"],["{{ステージ中央揃え(垂直方向)}}","Lava keskitetty (pystysuora)"],["{{ステージ下揃え}}","perustelut"],["{{定規}}","viivotin"],["{{表示}}","näyttö"],["{{ショートカット}}","pikakuvake"],["{{レイヤーを複製}}","Kaksoiskerros"],["{{未使用のフォルダを削除}}","Poista käyttämättömät kansiot."],["{{同名のアイテムが存在します}}","Samannimisiä kohteita on olemassa."],["{{追加ファイル}}","lisätiedosto"],["{{既存のコンテンツ}}","Olemassa oleva sisältö."],["{{上書きするか、ファイル名を変更して追加するか、スキップを選択する事ができます}}","Voit valita, haluatko korvata, nimetä uudelleen ja lisätä tiedostoja vai ohittaa tiedostot."],["{{全て上書き}}","Korvaa kaikki"],["{{全てスキップ}}","Ohita kaikki."],["{{追加・上書き}}","Lisäykset ja ylikirjoitukset"],["{{スキップ}}","ohita"],["{{表示確認したいフレームを指定}}","Määritä kehys, jonka näytön haluat tarkistaa."],["{{ファイル名を指定}}","Määritä tiedoston nimi"],["{{ファイル名}}","tiedostonimi"],["{{終了フレームを指定}}","Määritä päätykehys"],["{{開始フレームを指定}}","Määritä aloituskehys"],["{{フレーム設定}}","runkoasetus"],["{{書き出し設定}}","Vientiasetukset"],["{{ファイル形式の選択}}","Tiedostomuodon valitseminen"],["{{ファイル形式}}","tiedostomuoto"],["{{サイズ設定}}","Mitoitus"],["{{左上}}","vasen-ylös"],["{{中央上}}","keski-yläosassa"],["{{右上}}","oikeanpuoleinen yläosa"],["{{中央左}}","keskusta-vasemmistolainen"],["{{中央}}","keskus"],["{{中央右}}","keskustaoikeisto"],["{{左下}}","alhaalla vasemmalla"],["{{中央下}}","alempi keskitaso"],["{{右下}}","oikean alakulman"],["{{中心点のX座標}}","Keskipisteen X-koordinaatti"],["{{中心点のY座標}}","Keskipisteen Y-koordinaatti"],["{{MovieClipに変換}}","Muunna MovieClipiksi"],["{{変換}}","transformaatio"],["{{ループ回数}}","Silmukoiden määrä"],["{{カーブポインターの削除}}","Poista käyrän osoitin."],["{{ステージ基準}}","Vaiheen kriteerit"],["{{閉じる}}","lähellä"],["{{保存}}","varastointi"],["{{リセット}}","nollaa"],["{{スクリーン}}","näyttö"],["{{ショートカット設定}}","Pikavalinta-asetukset"],["{{レイヤーカラー}}","kerroksellinen väri"],["{{Next2Dを支援する}}","Tuki Next2D."],["{{サポート}}","tuki"],["{{未使用のアイテムを削除}}","Poista käyttämättömät tuotteet"],["{{レイヤーをペースト}}","Liisterikerros."],["{{レイヤーをコピー}}","Kopioi kerros"],["{{フレームをペースト}}","Liitä kehys."],["{{フレームをコピー}}","Kopioi kehys."],["{{キーフレームを削除}}","Poista avainkehykset."],["{{キーフレームに空のキーフレームを追加できません}}","Tyhjiä avainkehyksiä ei voi lisätä avainkehyksiin"],["{{ズームツール}}","Zoom-työkalu"],["{{タイムライン幅の拡大・縮小}}","Aikajanan leveyden laajentaminen ja pienentäminen"],["{{ガイドレイヤー}}","ohjaava kerros"],["{{音量設定}}","Äänenvoimakkuuden asetus"],["{{サウンドを削除}}","Poista ääni."],["{{カスタムループ}}","räätälöity silmukka"],["{{読込のみ}}","Vain luku"],["{{書込を許可}}","postituslupa"],["{{単一行}}","yksinkertainen linja"],["{{複数行}}","monirivinen"],["{{自動で折り返し}}","Automaattinen kääntyminen"],["{{左寄せ}}","vasemmalle tasattu"],["{{中央揃え}}","keskitys"],["{{右寄せ}}","oikealle tasattu"],["{{放射状グラデーション}}","säteittäinen porrastus"],["{{線形グラデーション}}","lineaarinen gradientti"],["{{画像}}","Kuva."],["{{画像選択}}","Kuvan valinta"],["{{種別}}","luokitus"],["{{Shapeの色設定}}","Muodon väriasetukset"],["{{変形}}","muodonmuutos"],["{{カラー効果}}","värivaikutus"],["{{フィルター}}","suodatin"],["{{Shapeを複製}}","Duplicate Shape."],["{{読み込み}}","Lue sisään"],["{{新規フォルダー}}","Uusi kansio"],["{{新規MovieClip}}","Uusi MovieClip."],["{{枠に合わせてテキストをリサイズ}}","Muuta tekstin kokoa kehykseen sopivaksi."],["{{テキストに合わせて枠をリサイズ}}","Muuta kehyksen kokoa tekstin mukaan."],["{{リサイズしない}}","Ei koon muuttamista"],["{{フォント}}","fontti"],["{{テキスト}}","Teksti."],["{{ループ}}","silmukka"],["{{音量}}","äänenvoimakkuus"],["{{ビデオ}}","Video."],["{{イージング}}","helpottaminen"],["{{サウンド}}","ääni"],["{{シンボル}}","symboli"],["{{名前}}","Nimi."],["{{オブジェクト}}","kohde"],["{{ステージ設定}}","Lavastus"],["{{プレビュー}}","esikatselu"],["{{削除}}","poisto"],["{{ペースト}}","liitä"],["{{コピー}}","kopioi"],["{{プラグインメニュー}}","Plug-in-valikko"],["{{トゥイーン}}","tween"],["{{カーブポインターの追加}}","Lisäkäyrän osoitin."],["{{パスの結合}}","Polkujen yhdistäminen"],["{{シェイプ}}","muoto"],["{{キーフレームに配分}}","Allokointi avainkehyksille"],["{{レイヤーに配分}}","Jakaminen kerroksille"],["{{タイムライン}}","Aikajana"],["{{整列}}","linjaus"],["{{最背面}}","viimeisin"],["{{ひとつ背面へ}}","Yksi takana."],["{{ひとつ前面へ}}","Yksi eteen."],["{{最前面}}","tärkein"],["{{重ね順}}","superpositio"],["{{プラグイン}}","plug-in"],["{{ライブラリ}}","kirjasto"],["{{プロパティ}}","omaisuus"],["{{マスクレイヤー}}","naamiokerros"],["{{通常レイヤー}}","Normaali kerros"],["{{モーショントゥイーンの削除}}","Liikkeeseen liittyvien tweens-elementtien poistaminen."],["{{モーショントゥイーンの追加}}","Lisäliike tweens."],["{{モーダル表示}}","modaalinen merkintä"],["{{言語}}","Kieli."],["{{フォーマット}}","muoto"],["{{含める}}","sisältää"],["{{含めない}}","ei sisällä"],["{{使い方、リファレンス}}","Käyttö, viite."],["{{非表示レイヤー}}","piilokerros"],["{{設定}}","asetus"],["{{デフォルトのループを利用する}}","Käytä oletussilmukkaa."],["{{フレームピッカー}}","kehyksen poiminta"],["{{左揃え}}","vasen oikeutus"],["{{中央揃え(水平方向)}}","Keskitetty (vaakasuora)"],["{{右揃え}}","oikea perustelu"],["{{上揃え}}","perustelut"],["{{中央揃え(垂直方向)}}","Keskitetty (pystysuora)"],["{{下揃え}}","perustelut"],["{{開始フレーム}}","aloituskehys"],["{{終了フレーム}}","päätykehys"],["{{ループで再生}}","Toista silmukassa"],["{{1回再生}}","1 toisto"],["{{指定したフレームで固定}}","Kiinnitetty määritettyyn kehykseen."],["{{1回逆再生}}","1 käänteinen toisto"],["{{逆ループで再生}}","Toisto käänteisessä silmukassa."],["{{画面の拡大・縮小}}","Näytön zoomaaminen sisään ja ulos"],["{{カスタムイージングデータを保存}}","Tallenna mukautetut easing-tiedot."],["{{カスタムイージングデータの読込}}","Mukautettujen helpotustietojen lukeminen."],["{{プレビューのON/OFF}}","Esikatselu päälle/pois."],["{{フォント枠サイズ}}","fontin runkokoko"],["{{フォント枠カラー}}","Fontin kehyksen väri"],["{{オニオンスキン}}","sipulikuori"],["{{バケツツール}}","Kauhatyökalut"],["{{ペンツール}}","kynätyökalu"],["{{ダブルクリックでカーブポイントが追加されます}}","Lisää käyrän piste kaksoisnapsauttamalla"],["{{選択ツール}}","valintatyökalu"],["{{Shape変形ツール}}","Muodonmuodostustyökalut"],["{{テキストツール}}","tekstityökalu"],["{{矩形ツール}}","Suorakulmio-työkalu"],["{{楕円ツール}}","Elliptiset työkalut"],["{{角丸矩形ツール}}","Pyöristetty kulma suorakulmio työkalu"],["{{塗りのカラー}}","Maalin väri"],["{{線のカラー}}","Viivan väri"],["{{線の太さ}}","viivan paksuus"],["{{プロジェクトデータの読込}}","Projektin tietojen lukeminen"],["{{プロジェクトデータを保存}}","Tallenna projektin tiedot."],["{{書き出し}}","avauslause tai -kappale"],["{{Discordへ移動}}","Siirry Discordiin"],["{{バグ報告}}","vikailmoitus"],["{{設定}}","asetus (tietokoneen tai tiedoston jne.)"],["{{タブを追加}}","Lisää välilehti."],["{{タブの一覧を表示・移動}}","Välilehtien luettelon näyttäminen ja siirtäminen"],["{{スクリプトを追加}}","Lisää käsikirjoitus."],["{{キーフレームを追加}}","Lisää avainkehyksiä."],["{{空のキーフレームを追加}}","Lisää tyhjiä avainkehyksiä."],["{{フレームを追加}}","Lisää kehys."],["{{フレームを削除}}","Irrota kehys."],["{{再生}}","uudistuminen"],["{{停止}}","musiikin, tanssin jne. keskeyttäminen surun merkkinä."],["{{ループ設定}}","Silmukka-asetukset"],["{{レイヤーを追加}}","Lisää kerros."],["{{レイヤーを削除}}","Poista kerros."],["{{全てのレイヤーをハイライト}}","Korosta kaikki kerrokset"],["{{全てのレイヤーを非表示}}","Piilota kaikki kerrokset"],["{{全てのレイヤーをロック}}","Lukitse kaikki kerrokset."],["{{比率を固定}}","Kiinteä suhde"],["{{ステージの幅}}","Lavan leveys"],["{{背景色}}","taustaväri"],["{{ステージの高さ}}","Lavan korkeus."],["{{フレームレート}}","kuvataajuus"],["{{シンボル名}}","symbolin nimi"],["{{イージング設定}}","Rauhoittamisasetus"],["{{ビデオの音量設定}}","Videon äänenvoimakkuuden asetukset"],["{{自動再生}}","automaattinen toisto"],["{{テキストエリアのボーダー設定}}","Tekstialueiden reunusasetukset."],["{{テキスト入力設定}}","tekstinsyöttöasetus"],["{{フォント選択}}","Fontin valinta"],["{{自動サイズ調整}}","Automaattinen koon muuttaminen"],["{{フォントスタイルタイプ}}","fontin tyyli tyyppi"],["{{行揃え}}","perustella"],["{{改行設定}}","rivinvaihdon asetus"],["{{スクロール設定}}","Vieritysasetukset"],["{{フォントサイズ}}","fonttikoko"],["{{フォントカラー}}","fontin väri"],["{{行間}}","rivien välissä"],["{{文字幅}}","merkin leveys"],["{{左マージン}}","vasen marginaali"],["{{右マージン}}","oikea marginaali"],["{{カラー種別の選択}}","Valitse värityyppi"],["{{背景画像の選択}}","Taustakuvan valitseminen"],["{{カラーポインターを追加}}","Lisäväriosoitin."],["{{カラー値}}","väriarvo"],["{{アルファ(0%-100%)}}","Alpha (0%-100%)"],["{{アルファ値}}","alfa-arvo"],["{{選択対象の幅}}","Valintakohteen leveys"],["{{選択対象のX座標}}","Valintakohteen X-koordinaatti"],["{{選択対象の高さ}}","Valintakohteen korkeus"],["{{選択対象のY座標}}","Valintakohteen Y-koordinaatti"],["{{選択対象の幅の伸縮}}","Valintakohteen leveyden venyttäminen ja kutistaminen"],["{{選択対象を回転}}","Kierrä valinta"],["{{選択対象の高さの伸縮}}","Valintakohteen korkeuden laajentaminen ja supistaminen."],["{{アルファオフセット(-255〜255)}}","Alpha offset (-255-255)"],["{{赤(0%-100%)}}","Punainen (0%-100%)"],["{{赤オフセット(-255〜255)}}","Punainen offset (-255-255)"],["{{緑(0%-100%)}}","Vihreä (0%-100%)"],["{{緑オフセット(-255〜255)}}","Vihreä offset (-255-255)"],["{{青(0%-100%)}}","Sininen (0%-100%)"],["{{青オフセット(-255〜255)}}","Sininen offset (-255-255)"],["{{ブレンドモード}}","sekoitustila"],["{{フィルターを選択}}","Valitse suodatin"],["{{フィルターを追加}}","Lisää suodatin."],["{{サウンドを追加}}","Lisää ääntä."],["{{フィルターを表示・非表示する}}","Näytä/piilota suodattimet"],["{{フィルターを削除}}","Poista suodattimet."],["{{水平方向にぼかす}}","Sameus vaakasuunnassa."],["{{垂直方向にぼかす}}","Pystysuora sumeus."],["{{フィルター強度}}","Suodattimen vahvuus"],["{{フィルター角度}}","Suodatinkulma"],["{{シャドウのアルファ}}","Shadow's Alpha."],["{{シャドウのカラー}}","Varjojen värit."],["{{フィルター距離}}","Suodattimen etäisyys"],["{{ハイライトのカラー}}","Värilliset korostukset"],["{{ハイライトのアルファ}}","Korosta Alpha."],["{{グラデーションカラー}}","Gradation väri"],["{{グラデーションのアルファ}}","Gradientin alfa"],["{{タブの移動・名前を変更}}","Välilehtien siirtäminen ja uudelleennimeäminen"],["{{プロジェクトを閉じる}}","Sulje projekti"],["{{上下に移動}}","Siirry ylös ja alas"],["{{レイヤー変更(ダブルクリック)}}","Kerroksen vaihto (kaksoisnapsautus)"],["{{レイヤーをハイライト}}","Korosta kerrokset."],["{{レイヤーを非表示}}","Piilota kerrokset."],["{{レイヤーをロック}}","Lukitse kerrokset."],["{{カーブポインター(ダブルクリックでON/OFF)}}","Käyräosoitin (kaksoisnapsauttamalla voit kytkeä sen päälle/pois)."],["{{インスタンス名}}","instanssin nimi"],["{{ライブラリ内の検索}}","Haku kirjastossa"],["{{フレームラベル}}","kehyksen etiketti"],["{{プロジェクトが保存されていない場合、このタブのプロジェクトデータを復旧する事はできません。タブを削除しますか？}}}}","Jos projektia ei tallenneta, tämän välilehden projektitietoja ei voida palauttaa. Haluatko poistaa välilehden?}}"]])}}class n extends t{createMapping(){return new Map([["{{書き出し先の選択}}","Lieu d'exportation"],["{{画質}}","Qualité"],["{{座標}}","Coordonnées"],["{{MovieClipを編集}}","Modifier le MovieClip"],["{{親の階層へ移動}}","Passer à la hiérarchie parentale"],["{{ロックされたレイヤーです}}","Couche verrouillée"],["{{トゥイーンには複数のオブジェクトを設置できません}}","Il n'est pas possible de placer plusieurs objets sur un tween"],["{{名前が重複しています}}","Nom en double"],["{{名前は必須です}}","Le nom est obligatoire"],["{{名前が重複しています}}","Duplicate Name"],["{{名前は必須です}}","Name is required"],["{{自由変形ツール}}","Outil de transformation gratuit"],["{{キーフレームに変換}}","Convertir en image clé"],["{{空のキーフレームに変換}}","Convertir en images clés vides"],["{{最初のフレームに移動}}","Aller au premier cadre"],["{{最後のフレームに移動}}","Aller à la dernière image"],["{{SWFを解析中}}","SWF en cours d'analyse"],["{{JSONを生成}}","Générer JSON"],["{{ファイルを生成}}","Générer un fichier"],["{{N2Dファイルの読み込み}}","Chargement des fichiers N2D"],["{{JSONの読み込み}}","Chargement de JSON"],["{{データを解凍中}}","Décompression des données"],["{{データを圧縮中}}","Compression des données"],["{{エンコード}}","Encodage"],["{{外部ファイルの読み込み}}","Lecture de fichiers externes"],["{{バイナリデータを生成}}","Génération de données binaires"],["{{データベースを起動}}","Démarrage de la base de données"],["{{データを保存中}}","Stockage des données en cours"],["{{完了}}","Complété"],["{{ステージ左揃え}}","Aligner la scène à gauche"],["{{ステージ中央揃え(水平方向)}}","Aligner le centre de la scène (horizontal)"],["{{ステージ右揃え}}","Aligner la scène à droite"],["{{ステージ上揃え}}","Aligner la scène vers le haut"],["{{ステージ中央揃え(垂直方向)}}","Aligner le centre de la scène (vertical)"],["{{ステージ下揃え}}","Aligner le fond de la scène"],["{{定規}}","Règle"],["{{表示}}","Afficher"],["{{ショートカット}}","Raccourci"],["{{レイヤーを複製}}","Dupliquer la couche"],["{{未使用のフォルダを削除}}","Supprimez les dossiers inutilisés"],["{{同名のアイテムが存在します}}","Un ou plusieurs articles du même nom existent"],["{{追加ファイル}}","Fichier supplémentaire"],["{{既存のコンテンツ}}","Contenu existant"],["{{上書きするか、ファイル名を変更して追加するか、スキップを選択する事ができます}}","Vous pouvez choisir d'écraser, de renommer et d'ajouter des fichiers, ou de ne pas le faire"],["{{全て上書き}}","Ecraser tout"],["{{全てスキップ}}","Ignorer tout"],["{{追加・上書き}}","Ajouter ou Écraser"],["{{スキップ}}","Ignorer"],["{{表示確認したいフレームを指定}}","Specify the frame you want to check the display"],["{{ファイル名を指定}}","Spécifier le nom du fichier"],["{{ファイル名}}","nom du fichier"],["{{終了フレームを指定}}","Spécifier le cadre de fin"],["{{開始フレームを指定}}","Spécifier le cadre de départ"],["{{フレーム設定}}","Réglage du cadre"],["{{書き出し設定}}","Paramètres d'exportation"],["{{ファイル形式の選択}}","Sélectionner le format du fichier"],["{{ファイル形式}}","Formats de fichiers"],["{{サイズ設定}}","Réglage de la taille"],["{{左上}}","En haut à gauche"],["{{中央上}}","Centre supérieur"],["{{右上}}","Haut Droite"],["{{中央左}}","Centre gauche"],["{{中央}}","Centre"],["{{中央右}}","Centre droit"],["{{左下}}","Bas gauche"],["{{中央下}}","Bas Centre"],["{{右下}}","Bas droit"],["{{中心点のX座標}}","Coordonnée X du point central"],["{{中心点のY座標}}","Coordonnée Y du point central"],["{{MovieClipに変換}}","Convertir en MovieClip"],["{{変換}}","transformation"],["{{ループ回数}}","Nombre de boucles"],["{{カーブポインターの削除}}","Supprimer le pointeur de courbe"],["{{ステージ基準}}","Critères d'étape"],["{{閉じる}}","Fermer"],["{{保存}}","Sauvez"],["{{リセット}}","réinitialiser"],["{{スクリーン}}","Écran"],["{{ショートカット設定}}","Paramètres des raccourcis"],["{{レイヤーカラー}}","couleur superposée"],["{{Next2Dを支援する}}","Soutenez Next2D"],["{{サポート}}","soutien"],["{{未使用のアイテムを削除}}","Retirer les articles non utilisés"],["{{レイヤーをペースト}}","Couche de pâte"],["{{レイヤーをコピー}}","Copie de la couche"],["{{フレームをペースト}}","Coller le cadre"],["{{フレームをコピー}}","Cadre de copie"],["{{キーフレームを削除}}","Supprimez les images clés"],["{{キーフレームに空のキーフレームを追加できません}}","Impossible d'ajouter des images clés vides à des images clés"],["{{ズームツール}}","Outil de zoom"],["{{タイムライン幅の拡大・縮小}}","Largeur de la ligne de temps Développer/réduire"],["{{ガイドレイヤー}}","couche de guidage"],["{{音量設定}}","Réglage du volume"],["{{サウンドを削除}}","Supprimer le son"],["{{カスタムループ}}","boucle personnalisée"],["{{読込のみ}}","Lecture seulement"],["{{書込を許可}}","autorisation de poste"],["{{単一行}}","Ligne unique"],["{{複数行}}","Multiline"],["{{自動で折り返し}}","Enveloppe automatique"],["{{左寄せ}}","Gauche"],["{{中央揃え}}","Centre"],["{{右寄せ}}","Droite"],["{{放射状グラデーション}}","gradation radiale"],["{{線形グラデーション}}","gradient linéaire"],["{{画像}}","Image"],["{{画像選択}}","Sélection d'images"],["{{種別}}","Type"],["{{Shapeの色設定}}","Paramètres de couleur de la forme"],["{{変形}}","déformation"],["{{カラー効果}}","Transformation des couleurs"],["{{フィルター}}","filtre"],["{{Shapeを複製}}","Dupliquer la forme"],["{{読み込み}}","lire dans"],["{{新規フォルダー}}","Nouveau dossier"],["{{新規MovieClip}}","Nouveau MovieClip"],["{{枠に合わせてテキストをリサイズ}}","Redimensionnez le texte pour l'adapter au cadre"],["{{テキストに合わせて枠をリサイズ}}","Redimensionnez le cadre pour l'adapter au texte"],["{{リサイズしない}}","Pas de redimensionnement"],["{{フォント}}","police"],["{{テキスト}}","Texte"],["{{ループ}}","boucle"],["{{音量}}","volume"],["{{ビデオ}}","Vidéo"],["{{イージング}}","facilitant"],["{{サウンド}}","son"],["{{シンボル}}","Symbole"],["{{名前}}","Nom"],["{{オブジェクト}}","objet"],["{{ステージ設定}}","Mise en scène"],["{{プレビュー}}","Prévisualisation"],["{{削除}}","Supprimer"],["{{ペースト}}","Pâte"],["{{コピー}}","Copie"],["{{プラグインメニュー}}","Menu plug-in"],["{{トゥイーン}}","entre"],["{{カーブポインターの追加}}","Pointeur de courbe supplémentaire"],["{{パスの結合}}","Fusion de chemins"],["{{シェイプ}}","forme"],["{{キーフレームに配分}}","Attribution aux images clés"],["{{レイヤーに配分}}","Affectation aux couches"],["{{タイムライン}}","chronologie"],["{{整列}}","Aligner"],["{{最背面}}","La plupart des dos"],["{{ひとつ背面へ}}","Un à l'arrière"],["{{ひとつ前面へ}}","Un front"],["{{最前面}}","Frontmost"],["{{重ね順}}","Organiser"],["{{プラグイン}}","plug-in"],["{{ライブラリ}}","bibliothèque"],["{{プロパティ}}","propriété"],["{{マスクレイヤー}}","couche de masque"],["{{通常レイヤー}}","Couche normale"],["{{モーショントゥイーンの削除}}","Suppression des tweens de mouvement"],["{{モーショントゥイーンの追加}}","Des tweens de mouvement supplémentaires"],["{{モーダル表示}}","indication modale"],["{{言語}}","Langue"],["{{フォーマット}}","format"],["{{含める}}","inclure"],["{{含めない}}","à ne pas inclure"],["{{使い方、リファレンス}}","Utilisation, référence"],["{{非表示レイヤー}}","couche cachée"],["{{設定}}","configuration"],["{{デフォルトのループを利用する}}","Utilisez la boucle par défaut"],["{{フレームピッカー}}","ramasseur de cadres"],["{{左揃え}}","Gauche"],["{{中央揃え(水平方向)}}","Centre(sens horizontal)"],["{{右揃え}}","Droit"],["{{上揃え}}","Top"],["{{中央揃え(垂直方向)}}","Centre(Vertical)"],["{{下揃え}}","Fond"],["{{開始フレーム}}","cadre de départ"],["{{終了フレーム}}","cadre terminal"],["{{ループで再生}}","Lecture en boucle"],["{{1回再生}}","1 lecture"],["{{指定したフレームで固定}}","Fixé dans le cadre spécifié"],["{{1回逆再生}}","1 lecture en sens inverse"],["{{逆ループで再生}}","Lecture en boucle inversée"],["{{画面の拡大・縮小}}","Zoom avant et arrière sur l'écran"],["{{カスタムイージングデータを保存}}","Enregistrez les données d'assouplissement personnalisées"],["{{カスタムイージングデータの読込}}","Lecture des données de l'assouplissement personnalisé"],["{{プレビューのON/OFF}}","Activation/désactivation de la prévisualisation"],["{{フォント枠サイズ}}","Taille du cadre de la police"],["{{フォント枠カラー}}","Couleur du cadre de la police"],["{{オニオンスキン}}","Peau d'oignon"],["{{バケツツール}}","Outils à godets"],["{{ペンツール}}","Outil stylo"],["{{ダブルクリックでカーブポイントが追加されます}}","Double-cliquez pour ajouter un point de courbe"],["{{選択ツール}}","Outils de sélection"],["{{Shape変形ツール}}","Outil de transformation des formes"],["{{テキストツール}}","Outil texte"],["{{矩形ツール}}","Outil Rectangle"],["{{楕円ツール}}","Outil Ellipse"],["{{角丸矩形ツール}}","Outil Rectangle arrondi"],["{{塗りのカラー}}","Couleur de remplissage"],["{{線のカラー}}","Couleur du trait"],["{{線の太さ}}","Largeur de course"],["{{プロジェクトデータの読込}}","Chargement des données du projet"],["{{プロジェクトデータを保存}}","Sauvegarder les données du projet"],["{{書き出し}}","Exportation"],["{{Discordへ移動}}","Aller sur le discord"],["{{バグ報告}}","Rapports de bogue"],["{{設定}}","Réglage de"],["{{タブを追加}}","Ajouter un onglet"],["{{タブの一覧を表示・移動}}","Visualiser et se déplacer dans la liste des onglets"],["{{スクリプトを追加}}","Ajouter un script"],["{{キーフレームを追加}}","Ajouter une image clé"],["{{空のキーフレームを追加}}","Ajouter une image clé vide"],["{{フレームを追加}}","Ajouter un cadre"],["{{フレームを削除}}","Supprimer le cadre"],["{{再生}}","Jouer"],["{{停止}}","Stop"],["{{ループ設定}}","Réglage de la boucle"],["{{レイヤーを追加}}","Ajouter une couche"],["{{レイヤーを削除}}","Supprimer la couche"],["{{全てのレイヤーをハイライト}}","Mettez en évidence toutes les couches"],["{{全てのレイヤーを非表示}}","Cacher toutes les couches"],["{{全てのレイヤーをロック}}","Verrouiller toutes les couches"],["{{比率を固定}}","Ratio fixe"],["{{ステージの幅}}","Largeur de la scène"],["{{背景色}}","Couleur de fond"],["{{ステージの高さ}}","Hauteur de la scène"],["{{フレームレート}}","Fréquence d'images"],["{{シンボル名}}","Nom du symbole"],["{{イージング設定}}","Réglage de l'assouplissement"],["{{ビデオの音量設定}}","Réglage du volume vidéo"],["{{自動再生}}","Lecture automatique"],["{{テキストエリアのボーダー設定}}","Réglage de la bordure de la zone de texte"],["{{テキスト入力設定}}","Réglage de la saisie du texte"],["{{フォント選択}}","Sélection de la police"],["{{自動サイズ調整}}","Ajustement automatique de la taille"],["{{フォントスタイルタイプ}}","Type de police"],["{{行揃え}}","Aligner"],["{{改行設定}}","Réglage des nouvelles lignes"],["{{スクロール設定}}","Réglage du défilement"],["{{フォントサイズ}}","Taille de la police"],["{{フォントカラー}}","Couleur de la police"],["{{行間}}","Espace linéaire"],["{{文字幅}}","Largeur des caractères"],["{{左マージン}}","Marge gauche"],["{{右マージン}}","Marge droite"],["{{カラー種別の選択}}","Sélectionnez un type de couleur"],["{{背景画像の選択}}","Sélection d'une image de fond"],["{{カラーポインターを追加}}","Ajouter des pointeurs de couleur"],["{{カラー値}}","Couleur"],["{{アルファ(0%-100%)}}","Alpha(0%-100%)"],["{{アルファ値}}","Alpha"],["{{選択対象の幅}}","Largeur de l'objet de sélection"],["{{選択対象のX座標}}","Coordonnée X de l'objet de sélection"],["{{選択対象の高さ}}","Hauteur de l'objet de sélection"],["{{選択対象のY座標}}","Coordonnée Y de l'objet de sélection"],["{{選択対象の幅の伸縮}}","scaleX de l'objet sélectionné"],["{{選択対象を回転}}","Faire pivoter l'objet"],["{{選択対象の高さの伸縮}}","scaleY de l'objet sélectionné"],["{{アルファオフセット(-255〜255)}}","Décalage alpha(-255〜255)"],["{{赤(0%-100%)}}","Rouge(0%-100%)"],["{{赤オフセット(-255〜255)}}","Décalage rouge(-255〜255)"],["{{緑(0%-100%)}}","Vert(0%-100%)"],["{{緑オフセット(-255〜255)}}","Compensation verte(-255〜255)"],["{{青(0%-100%)}}","Bleu(0%-100%)"],["{{青オフセット(-255〜255)}}","Décalage bleu(-255〜255)"],["{{ブレンドモード}}","Mode de mélange"],["{{フィルターを選択}}","Sélectionnez un filtre"],["{{フィルターを追加}}","Ajouter un filtre"],["{{サウンドを追加}}","Ajouter un son"],["{{フィルターを表示・非表示する}}","Afficher et masquer les filtres"],["{{フィルターを削除}}","Supprimer le filtre"],["{{水平方向にぼかす}}","Flou horizontal"],["{{垂直方向にぼかす}}","Flou vertical"],["{{フィルター強度}}","Résistance du filtre"],["{{フィルター角度}}","Angle du filtre"],["{{シャドウのアルファ}}","Shadow Alpha"],["{{シャドウのカラー}}","Couleur de l'ombre"],["{{フィルター距離}}","Distance du filtre"],["{{ハイライトのカラー}}","Couleur de mise en évidence"],["{{ハイライトのアルファ}}","Highlight Alpha"],["{{グラデーションカラー}}","Couleur dégradée"],["{{グラデーションのアルファ}}","Gradient Alpha"],["{{タブの移動・名前を変更}}","Déplacer/Renommer les onglets"],["{{プロジェクトを閉じる}}","Fermer le projet"],["{{上下に移動}}","Déplacement vers le haut et le bas"],["{{レイヤー変更(ダブルクリック)}}","Changement de couche (double-clic)"],["{{レイヤーをハイライト}}","Couche de mise en évidence"],["{{レイヤーを非表示}}","Masquer la couche"],["{{レイヤーをロック}}","Verrouiller le calque"],["{{カーブポインター(ダブルクリックでON/OFF)}}","Pointeur de courbe (double-cliquez pour l'activer ou le désactiver)"],["{{インスタンス名}}","Nom de l'instance"],["{{ライブラリ内の検索}}","Recherche dans la bibliothèque"],["{{フレームラベル}}","Étiquette du cadre"],["{{プロジェクトが保存されていない場合、このタブのプロジェクトデータを復旧する事はできません。タブを削除しますか？}}","Si le projet n'est pas sauvegardé, les données du projet dans cet onglet ne peuvent pas être récupérées. Voulez-vous supprimer l'onglet ?"]])}}class o extends t{createMapping(){return new Map([["{{書き出し先の選択}}","Auswählen des Exportziels"],["{{画質}}","Bildqualität"],["{{座標}}","koordinieren"],["{{MovieClipを編集}}","MovieClip bearbeiten."],["{{親の階層へ移動}}","Zur übergeordneten Hierarchie wechseln"],["{{ロックされたレイヤーです}}","Gesperrte Ebene."],["{{トゥイーンには複数のオブジェクトを設置できません}}","Es können nicht mehrere Objekte auf einem Tween platziert werden."],["{{名前が重複しています}}","Doppelte Namen."],["{{名前は必須です}}","Name erforderlich."],["{{基準点}}","Referenzpunkt"],["{{自由変形ツール}}","Kostenloses Transformationswerkzeug"],["{{キーフレームに変換}}","In Keyframes umgewandelt"],["{{空のキーフレームに変換}}","In leere Keyframes umgewandelt."],["{{最初のフレームに移動}}","Zum ersten Bild gehen"],["{{最後のフレームに移動}}","Zum letzten Bild gehen"],["{{SWFを解析中}}","SWF wird analysiert."],["{{JSONを生成}}","JSON generieren"],["{{ファイルを生成}}","Datei generieren"],["{{N2Dファイルの読み込み}}","Laden von N2D-Dateien."],["{{JSONの読み込み}}","JSON lesen."],["{{データを解凍中}}","Daten werden entpackt."],["{{データを圧縮中}}","Daten komprimieren."],["{{エンコード}}","verschlüsseln"],["{{外部ファイルの読み込み}}","Laden externer Dateien"],["{{バイナリデータを生成}}","Erzeugen von Binärdaten."],["{{データベースを起動}}","Datenbank starten"],["{{データを保存中}}","Speichern von Daten."],["{{完了}}","Fertigstellung"],["{{ステージ左揃え}}","Ausrichtung der Bühne links"],["{{ステージ中央揃え(水平方向)}}","Bühne zentriert (horizontal)"],["{{ステージ右揃え}}","Ausrichtung der Bühne rechts"],["{{ステージ上揃え}}","Bühnenauftritt"],["{{ステージ中央揃え(垂直方向)}}","Bühne zentriert (vertikal)"],["{{ステージ下揃え}}","Rechtfertigung"],["{{定規}}","Lineal"],["{{表示}}","Anzeige"],["{{ショートカット}}","Abkürzung"],["{{レイヤーを複製}}","Ebene duplizieren"],["{{未使用のフォルダを削除}}","Löschen Sie nicht verwendete Ordner."],["{{同名のアイテムが存在します}}","Es gibt Artikel mit demselben Namen."],["{{追加ファイル}}","zusätzliche Datei"],["{{既存のコンテンツ}}","Vorhandene Inhalte."],["{{上書きするか、ファイル名を変更して追加するか、スキップを選択する事ができます}}","Sie können wählen, ob Sie Dateien überschreiben, umbenennen, hinzufügen oder überspringen wollen."],["{{全て上書き}}","Überschreiben Sie alle"],["{{全てスキップ}}","Alles überspringen."],["{{追加・上書き}}","Hinzufügungen und Überschreibungen"],["{{スキップ}}","überspringen"],["{{表示確認したいフレームを指定}}","Geben Sie den Rahmen an, dessen Anzeige Sie überprüfen möchten."],["{{ファイル名を指定}}","Dateiname angeben"],["{{ファイル名}}","Dateiname"],["{{終了フレームを指定}}","Endrahmen angeben"],["{{開始フレームを指定}}","Startrahmen angeben"],["{{フレーム設定}}","Rahmeneinstellung"],["{{書き出し設定}}","Einstellungen exportieren"],["{{ファイル形式の選択}}","Auswählen des Dateiformats"],["{{ファイル形式}}","Dateiformat"],["{{サイズ設定}}","Größenbestimmung"],["{{左上}}","links-oben"],["{{中央上}}","Mitte-oben"],["{{右上}}","rechts-oben"],["{{中央左}}","Mitte-Links"],["{{中央}}","zentral"],["{{中央右}}","Mitte-Rechts"],["{{左下}}","unten links"],["{{中央下}}","unteres Mittelmaß"],["{{右下}}","rechts-unten"],["{{中心点のX座標}}","X-Koordinate des Mittelpunkts"],["{{中心点のY座標}}","Y-Koordinate des Mittelpunkts"],["{{MovieClipに変換}}","In MovieClip umwandeln"],["{{変換}}","Transformation"],["{{ループ回数}}","Anzahl der Schleifen"],["{{カーブポインターの削除}}","Kurvenzeiger löschen."],["{{ステージ基準}}","Kriterien für die Stufe"],["{{閉じる}}","schließen"],["{{保存}}","Speicherung"],["{{リセット}}","zurücksetzen"],["{{スクリーン}}","Bildschirm"],["{{ショートカット設定}}","Shortcut-Einstellungen"],["{{レイヤーカラー}}","geschichtete Farbe"],["{{Next2Dを支援する}}","Unterstützen Sie Next2D."],["{{サポート}}","Unterstützung"],["{{未使用のアイテムを削除}}","Unbenutzte Artikel entfernen"],["{{レイヤーをペースト}}","Schicht einfügen."],["{{レイヤーをコピー}}","Ebene kopieren"],["{{フレームをペースト}}","Rahmen einfügen."],["{{フレームをコピー}}","Rahmen kopieren."],["{{キーフレームを削除}}","Keyframes löschen."],["{{キーフレームに空のキーフレームを追加できません}}","Leere Keyframes können nicht zu Keyframes hinzugefügt werden"],["{{ズームツール}}","Zoom-Werkzeug"],["{{タイムライン幅の拡大・縮小}}","Erweitern und Verringern der Breite der Zeitleiste"],["{{ガイドレイヤー}}","Führungsschicht"],["{{音量設定}}","Einstellung der Lautstärke"],["{{サウンドを削除}}","Ton entfernen."],["{{カスタムループ}}","benutzerdefinierte Schleife"],["{{読込のみ}}","Nur lesen"],["{{書込を許可}}","Postzulassung"],["{{単一行}}","einfache Linie"],["{{複数行}}","mehrzeilig"],["{{自動で折り返し}}","Automatischer Umschwung"],["{{左寄せ}}","linksbündig"],["{{中央揃え}}","Zentrierung"],["{{右寄せ}}","rechtsbündig"],["{{放射状グラデーション}}","radiale Abstufung"],["{{線形グラデーション}}","lineare Steigung"],["{{画像}}","Bild."],["{{画像選択}}","Bildauswahl"],["{{種別}}","Klassifizierung"],["{{Shapeの色設定}}","Farbeinstellungen für die Form"],["{{変形}}","Verformung"],["{{カラー効果}}","Farbwirkung"],["{{フィルター}}","Filter"],["{{Shapeを複製}}","Form duplizieren."],["{{読み込み}}","eingelesen"],["{{新規フォルダー}}","Neue Mappe"],["{{新規MovieClip}}","Neuer MovieClip."],["{{枠に合わせてテキストをリサイズ}}","Ändern Sie die Größe des Textes, damit er in den Rahmen passt."],["{{テキストに合わせて枠をリサイズ}}","Passen Sie die Größe des Rahmens an den Text an."],["{{リサイズしない}}","Keine Größenänderung"],["{{フォント}}","Schriftart"],["{{テキスト}}","Text."],["{{ループ}}","Schleife"],["{{音量}}","Lautstärke"],["{{ビデオ}}","Video."],["{{イージング}}","Erleichterung"],["{{サウンド}}","Klang"],["{{シンボル}}","Symbol"],["{{名前}}","Name."],["{{オブジェクト}}","Objekt"],["{{ステージ設定}}","Bühnenbild"],["{{プレビュー}}","Vorschau"],["{{削除}}","Löschung"],["{{ペースト}}","einfügen"],["{{コピー}}","kopieren."],["{{プラグインメニュー}}","Plug-in-Menü"],["{{トゥイーン}}","tween"],["{{カーブポインターの追加}}","Zusätzlicher Kurvenzeiger."],["{{パスの結合}}","Zusammenführung von Pfaden"],["{{シェイプ}}","Form"],["{{キーフレームに配分}}","Zuweisung zu Keyframes"],["{{レイヤーに配分}}","Zuweisung zu Schichten"],["{{タイムライン}}","Zeitleiste"],["{{整列}}","Ausrichtung"],["{{最背面}}","am aktuellsten"],["{{ひとつ背面へ}}","Eine auf der Rückseite."],["{{ひとつ前面へ}}","Einer nach vorne."],["{{最前面}}","in erster Linie"],["{{重ね順}}","Überlagerung"],["{{プラグイン}}","Plug-in"],["{{ライブラリ}}","Bibliothek"],["{{プロパティ}}","Eigenschaft"],["{{マスクレイヤー}}","Maskenschicht"],["{{通常レイヤー}}","Normale Schicht"],["{{モーショントゥイーンの削除}}","Löschung von Bewegungs-Tweens."],["{{モーショントゥイーンの追加}}","Zusätzliche Bewegungs-Tweens."],["{{モーダル表示}}","Modalanzeige"],["{{言語}}","Sprache."],["{{フォーマット}}","Format"],["{{含める}}","einschließen"],["{{含めない}}","nicht enthalten"],["{{使い方、リファレンス}}","Verwendung, Verweis."],["{{非表示レイヤー}}","ausgeblendete Schicht"],["{{設定}}","Einstellung"],["{{デフォルトのループを利用する}}","Verwenden Sie die Standardschleife."],["{{フレームピッカー}}","Rahmenkommissionierer"],["{{左揃え}}","linker Blocksatz"],["{{中央揃え(水平方向)}}","Zentriert (horizontal)"],["{{右揃え}}","richtige Rechtfertigung"],["{{上揃え}}","Rechtfertigung"],["{{中央揃え(垂直方向)}}","Zentriert (vertikal)"],["{{下揃え}}","Rechtfertigung"],["{{開始フレーム}}","Startbild"],["{{終了フレーム}}","Endrahmen"],["{{ループで再生}}","In einer Schleife abspielen"],["{{1回再生}}","1 Playback"],["{{指定したフレームで固定}}","Im angegebenen Rahmen fixiert."],["{{1回逆再生}}","1 Rückwärtswiedergabe"],["{{逆ループで再生}}","Wiedergabe in Rückwärtsschleife."],["{{画面の拡大・縮小}}","Vergrößern und Verkleinern des Bildschirms"],["{{カスタムイージングデータを保存}}","Benutzerdefinierte Lockerungsdaten speichern."],["{{カスタムイージングデータの読込}}","Lesen von benutzerdefinierten Lockerungsdaten."],["{{プレビューのON/OFF}}","Vorschau ein/aus."],["{{フォント枠サイズ}}","Schriftart Rahmengröße"],["{{フォント枠カラー}}","Farbe des Schriftrahmens"],["{{オニオンスキン}}","Zwiebelschale"],["{{バケツツール}}","Schaufelwerkzeuge"],["{{ペンツール}}","Stiftwerkzeug"],["{{ダブルクリックでカーブポイントが追加されます}}","Doppelklicken Sie, um einen Kurvenpunkt hinzuzufügen."],["{{選択ツール}}","Auswahlwerkzeug"],["{{Shape変形ツール}}","Werkzeuge zur Formveränderung"],["{{テキストツール}}","Textwerkzeug"],["{{矩形ツール}}","Rechteck-Werkzeug"],["{{楕円ツール}}","Elliptische Werkzeuge"],["{{角丸矩形ツール}}","Werkzeug für abgerundete Rechtecke"],["{{塗りのカラー}}","Farbe des Anstrichs"],["{{線のカラー}}","Farbe der Linie"],["{{線の太さ}}","Linienstärke"],["{{プロジェクトデータの読込}}","Lesen von Projektdaten"],["{{プロジェクトデータを保存}}","Projektdaten speichern."],["{{書き出し}}","Einleitungssatz oder Absatz"],["{{Discordへ移動}}","Zu Discord gehen"],["{{バグ報告}}","Fehlerbericht"],["{{設定}}","Einstellung"],["{{タブを追加}}","Registerkarte hinzufügen."],["{{タブの一覧を表示・移動}}","Anzeigen und Verschieben der Liste der Registerkarten"],["{{スクリプトを追加}}","Skript hinzufügen."],["{{キーフレームを追加}}","Keyframes hinzufügen."],["{{空のキーフレームを追加}}","Leere Keyframes hinzufügen."],["{{フレームを追加}}","Rahmen hinzufügen."],["{{フレームを削除}}","Rahmen entfernen."],["{{再生}}","Regenerierung"],["{{停止}}","Einstellung von Musik, Tanz usw. als Zeichen der Trauer"],["{{ループ設定}}","Schleifeneinstellungen"],["{{レイヤーを追加}}","Ebene hinzufügen."],["{{レイヤーを削除}}","Ebene löschen."],["{{全てのレイヤーをハイライト}}","Alle Ebenen hervorheben"],["{{全てのレイヤーを非表示}}","Alle Ebenen ausblenden"],["{{全てのレイヤーをロック}}","Sperren Sie alle Ebenen."],["{{比率を固定}}","Festes Verhältnis"],["{{ステージの幅}}","Breite der Bühne"],["{{背景色}}","Hintergrundfarbe"],["{{ステージの高さ}}","Höhe der Bühne."],["{{フレームレート}}","Bildrate"],["{{シンボル名}}","Symbolname"],["{{イージング設定}}","Erleichternde Einstellung"],["{{ビデオの音量設定}}","Einstellungen der Videolautstärke"],["{{自動再生}}","Autoplay"],["{{テキストエリアのボーダー設定}}","Randeinstellungen für Textbereiche."],["{{テキスト入力設定}}","Einstellung der Texteingabe"],["{{フォント選択}}","Auswahl der Schriftart"],["{{自動サイズ調整}}","Automatische Größenänderung"],["{{フォントスタイルタイプ}}","Schriftstil Typ"],["{{行揃え}}","rechtfertigen"],["{{改行設定}}","Zeilenumbruch einrichten"],["{{スクロール設定}}","Scroll-Einstellungen"],["{{フォントサイズ}}","Schriftgröße"],["{{フォントカラー}}","Schriftfarbe"],["{{行間}}","zwischen den Zeilen"],["{{文字幅}}","Zeichenbreite"],["{{左マージン}}","linker Rand"],["{{右マージン}}","rechter Rand"],["{{カラー種別の選択}}","Farbtyp auswählen"],["{{背景画像の選択}}","Auswählen eines Hintergrundbildes"],["{{カラーポインターを追加}}","Zusätzlicher Farbzeiger."],["{{カラー値}}","Farbwert"],["{{アルファ(0%-100%)}}","Alpha (0%-100%)"],["{{アルファ値}}","Alphawert"],["{{選択対象の幅}}","Breite der Auswahlscheibe"],["{{選択対象のX座標}}","X-Koordinate des Auswahlziels"],["{{選択対象の高さ}}","Höhe des Auswahlziels"],["{{選択対象のY座標}}","Y-Koordinate des Auswahlziels"],["{{選択対象の幅の伸縮}}","Dehnen und Verkleinern der Breite des Auswahlziels"],["{{選択対象を回転}}","Auswahl rotieren"],["{{選択対象の高さの伸縮}}","Vergrößern und Verkleinern der Höhe der Auswahlscheibe."],["{{アルファオフセット(-255〜255)}}","Alpha-Offset (-255 bis 255)"],["{{赤(0%-100%)}}","Rot (0%-100%)"],["{{赤オフセット(-255〜255)}}","Rot-Offset (-255 bis 255)"],["{{緑(0%-100%)}}","Grün (0%-100%)"],["{{緑オフセット(-255〜255)}}","Grüner Offset (-255 bis 255)"],["{{青(0%-100%)}}","Blau (0%-100%)"],["{{青オフセット(-255〜255)}}","Blau-Offset (-255 bis 255)"],["{{ブレンドモード}}","Mischmodus"],["{{フィルターを選択}}","Filter auswählen"],["{{フィルターを追加}}","Filter hinzufügen."],["{{サウンドを追加}}","Ton hinzufügen."],["{{フィルターを表示・非表示する}}","Filter ein-/ausblenden"],["{{フィルターを削除}}","Filter entfernen."],["{{水平方向にぼかす}}","Horizontal verwischen."],["{{垂直方向にぼかす}}","Vertikale Unschärfe."],["{{フィルター強度}}","Filterstärke"],["{{フィルター角度}}","Filterwinkel"],["{{シャドウのアルファ}}","Schattens Alpha."],["{{シャドウのカラー}}","Schattenfarben."],["{{フィルター距離}}","Filterabstand"],["{{ハイライトのカラー}}","Farbige Highlights"],["{{ハイライトのアルファ}}","Highlight Alpha."],["{{グラデーションカラー}}","Abstufungsfarbe"],["{{グラデーションのアルファ}}","Alpha des Gradienten"],["{{タブの移動・名前を変更}}","Verschieben und Umbenennen von Registerkarten"],["{{プロジェクトを閉じる}}","Projekt schließen"],["{{上下に移動}}","Nach oben und unten bewegen"],["{{レイヤー変更(ダブルクリック)}}","Ebenenwechsel (Doppelklick)"],["{{レイヤーをハイライト}}","Ebenen hervorheben."],["{{レイヤーを非表示}}","Ebenen ausblenden."],["{{レイヤーをロック}}","Schichten sperren."],["{{カーブポインター(ダブルクリックでON/OFF)}}","Kurvenzeiger (Doppelklick zum Ein- und Ausschalten)"],["{{インスタンス名}}","Instanzname"],["{{ライブラリ内の検索}}","Suche in der Bibliothek"],["{{フレームラベル}}","Rahmenetikett"],["{{プロジェクトが保存されていない場合、このタブのプロジェクトデータを復旧する事はできません。タブを削除しますか？}}}}","Wenn das Projekt nicht gespeichert wird, können die Projektdaten für diese Registerkarte nicht wiederhergestellt werden. Möchten Sie die Registerkarte löschen?}}"]])}}class l extends t{createMapping(){return new Map([["{{書き出し先の選択}}","Az exportálási célállomás kiválasztása"],["{{画質}}","képminőség"],["{{座標}}","koordináta"],["{{MovieClipを編集}}","MovieClip szerkesztése."],["{{親の階層へ移動}}","Mozgás a szülői hierarchiába"],["{{ロックされたレイヤーです}}","Zárolt réteg."],["{{トゥイーンには複数のオブジェクトを設置できません}}","Több objektum nem helyezhető egy tweenre."],["{{名前が重複しています}}","Duplikált nevek."],["{{名前は必須です}}","Szükséges név."],["{{基準点}}","referenciapont"],["{{自由変形ツール}}","Ingyenes transzformációs eszköz"],["{{キーフレームに変換}}","Kulcskockákká konvertálva"],["{{空のキーフレームに変換}}","Üres kulcskockákká alakítva."],["{{最初のフレームに移動}}","Menj az első képkockára"],["{{最後のフレームに移動}}","Menj az utolsó képkockára"],["{{SWFを解析中}}","SWF elemzése."],["{{JSONを生成}}","JSON generálása"],["{{ファイルを生成}}","Fájl generálása"],["{{N2Dファイルの読み込み}}","N2D fájlok betöltése."],["{{JSONの読み込み}}","JSON olvasása."],["{{データを解凍中}}","Az adatok kicsomagolása."],["{{データを圧縮中}}","Adatok tömörítése."],["{{エンコード}}","kódolás"],["{{外部ファイルの読み込み}}","Külső fájlok betöltése"],["{{バイナリデータを生成}}","Bináris adatok generálása."],["{{データベースを起動}}","Adatbázis indítása"],["{{データを保存中}}","Adatok tárolása."],["{{完了}}","befejezés"],["{{ステージ左揃え}}","színpad balra igazítás"],["{{ステージ中央揃え(水平方向)}}","Színpadközéppontú (vízszintes)"],["{{ステージ右揃え}}","Színpad jobbra igazítása"],["{{ステージ上揃え}}","színpadi fellépés"],["{{ステージ中央揃え(垂直方向)}}","Színpadközéppontú (függőleges)"],["{{ステージ下揃え}}","indoklás"],["{{定規}}","vonalzó"],["{{表示}}","megjelenítés"],["{{ショートカット}}","rövidítés"],["{{レイヤーを複製}}","Duplikált réteg"],["{{未使用のフォルダを削除}}","Törölje a nem használt mappákat."],["{{同名のアイテムが存在します}}","Léteznek azonos nevű tétel"],["{{追加ファイル}}","további fájl"],["{{既存のコンテンツ}}","Meglévő tartalom."],["{{上書きするか、ファイル名を変更して追加するか、スキップを選択する事ができます}}","Kiválaszthatja, hogy felülírja, átnevezze és hozzáadja a fájlokat, vagy kihagyja a"],["{{全て上書き}}","Az összes felülírása"],["{{全てスキップ}}","Ugorj át mindent."],["{{追加・上書き}}","Hozzáadások és felülírások"],["{{スキップ}}","ugorj át"],["{{表示確認したいフレームを指定}}","Adja meg a keretet, amelynek kijelzését ellenőrizni kívánja."],["{{ファイル名を指定}}","Fájlnév megadása"],["{{ファイル名}}","fájlnév"],["{{終了フレームを指定}}","Adja meg a végkeretet"],["{{開始フレームを指定}}","A kezdőkeret megadása"],["{{フレーム設定}}","keret beállítása"],["{{書き出し設定}}","Exportálási beállítások"],["{{ファイル形式の選択}}","A fájlformátum kiválasztása"],["{{ファイル形式}}","fájlformátum"],["{{サイズ設定}}","Méretezés"],["{{左上}}","bal-felül"],["{{中央上}}","középső-felső"],["{{右上}}","jobb felső"],["{{中央左}}","balközép"],["{{中央}}","központi"],["{{中央右}}","jobbközép"],["{{左下}}","balra lent"],["{{中央下}}","alsó-közép"],["{{右下}}","jobb alsó"],["{{中心点のX座標}}","A középpont X-koordinátája"],["{{中心点のY座標}}","A középpont Y-koordinátája"],["{{MovieClipに変換}}","Átalakítás MovieClip-be"],["{{変換}}","átalakulás"],["{{ループ回数}}","Hurokszám"],["{{カーブポインターの削除}}","Görbe mutató törlése."],["{{ステージ基準}}","Szakasz kritériumai"],["{{閉じる}}","közel"],["{{保存}}","tárolás"],["{{リセット}}","reset"],["{{スクリーン}}","képernyő"],["{{ショートカット設定}}","Shortcut beállítások"],["{{レイヤーカラー}}","réteges szín"],["{{Next2Dを支援する}}","Next2D támogatás."],["{{サポート}}","támogatás"],["{{未使用のアイテムを削除}}","A nem használt elemek eltávolítása"],["{{レイヤーをペースト}}","Paszta réteg."],["{{レイヤーをコピー}}","Réteg másolása"],["{{フレームをペースト}}","Beillesztési keret."],["{{フレームをコピー}}","Keret másolása."],["{{キーフレームを削除}}","Kulcskockák törlése."],["{{キーフレームに空のキーフレームを追加できません}}","Nem lehet üres kulcskockákat hozzáadni a kulcskockákhoz"],["{{ズームツール}}","Zoom eszköz"],["{{タイムライン幅の拡大・縮小}}","Az idővonal szélességének bővítése és csökkentése"],["{{ガイドレイヤー}}","vezető réteg"],["{{音量設定}}","Hangerő beállítása"],["{{サウンドを削除}}","Hang eltávolítása."],["{{カスタムループ}}","testreszabott hurok"],["{{読込のみ}}","Csak olvasás"],["{{書込を許可}}","postai engedély"],["{{単一行}}","egyszerű vonal"],["{{複数行}}","többsoros"],["{{自動で折り返し}}","Automatikus fordulat"],["{{左寄せ}}","balra igazított"],["{{中央揃え}}","centrírozás"],["{{右寄せ}}","jobbra igazított"],["{{放射状グラデーション}}","radiális gradáció"],["{{線形グラデーション}}","lineáris gradiens"],["{{画像}}","Kép."],["{{画像選択}}","Kép kiválasztása"],["{{種別}}","osztályozás"],["{{Shapeの色設定}}","Alak színbeállítások"],["{{変形}}","deformáció"],["{{カラー効果}}","színhatás"],["{{フィルター}}","szűrő"],["{{Shapeを複製}}","Duplikált alakzat."],["{{読み込み}}","beolvasni"],["{{新規フォルダー}}","Új mappa"],["{{新規MovieClip}}","Új MovieClip."],["{{枠に合わせてテキストをリサイズ}}","A szöveg méretének módosítása a keretbe való illesztéshez."],["{{テキストに合わせて枠をリサイズ}}","Méretezze át a keretet a szöveghez illeszkedőre."],["{{リサイズしない}}","Nincs átméretezés"],["{{フォント}}","betűtípus"],["{{テキスト}}","Szöveg."],["{{ループ}}","loop"],["{{音量}}","hangerő"],["{{ビデオ}}","Videó."],["{{イージング}}","enyhítés"],["{{サウンド}}","hang"],["{{シンボル}}","szimbólum"],["{{名前}}","Név."],["{{オブジェクト}}","objektum"],["{{ステージ設定}}","Színpadkép"],["{{プレビュー}}","előnézet"],["{{削除}}","törlés"],["{{ペースト}}","paste"],["{{コピー}}","másolat"],["{{プラグインメニュー}}","Plug-in menü"],["{{トゥイーン}}","tween"],["{{カーブポインターの追加}}","További görbe mutató."],["{{パスの結合}}","Útvonal összevonása"],["{{シェイプ}}","shape"],["{{キーフレームに配分}}","Hozzárendelés a kulcskockákhoz"],["{{レイヤーに配分}}","Hozzárendelés a rétegekhez"],["{{タイムライン}}","idővonal"],["{{整列}}","igazítás"],["{{最背面}}","legfrissebb"],["{{ひとつ背面へ}}","Az egyik hátul."],["{{ひとつ前面へ}}","Egyet előre."],["{{最前面}}","legfontosabb"],["{{重ね順}}","szuperpozíció"],["{{プラグイン}}","plug-in"],["{{ライブラリ}}","könyvtár"],["{{プロパティ}}","ingatlan"],["{{マスクレイヤー}}","maszk réteg"],["{{通常レイヤー}}","Normál réteg"],["{{モーショントゥイーンの削除}}","Mozgótweens törlése."],["{{モーショントゥイーンの追加}}","További mozgás tweens."],["{{モーダル表示}}","modális jelzés"],["{{言語}}","Nyelv."],["{{フォーマット}}","formátum"],["{{含める}}","include"],["{{含めない}}","nem tartalmazza"],["{{使い方、リファレンス}}","Használat, hivatkozás."],["{{非表示レイヤー}}","rejtett réteg"],["{{設定}}","beállítás"],["{{デフォルトのループを利用する}}","Használja az alapértelmezett hurkot."],["{{フレームピッカー}}","keretválasztó"],["{{左揃え}}","bal oldali igazítás"],["{{中央揃え(水平方向)}}","Középre állítva (vízszintes)"],["{{右揃え}}","megfelelő indoklás"],["{{上揃え}}","indoklás"],["{{中央揃え(垂直方向)}}","Középre állítva (függőlegesen)"],["{{下揃え}}","indoklás"],["{{開始フレーム}}","kezdőkeret"],["{{終了フレーム}}","végkeret"],["{{ループで再生}}","Lejátszás hurokban"],["{{1回再生}}","1 lejátszás"],["{{指定したフレームで固定}}","A megadott keretben rögzítve."],["{{1回逆再生}}","1 fordított lejátszás"],["{{逆ループで再生}}","Visszafordított hurokban történő lejátszás."],["{{画面の拡大・縮小}}","A képernyő nagyítása és kicsinyítése"],["{{カスタムイージングデータを保存}}","Egyéni enyhítési adatok mentése."],["{{カスタムイージングデータの読込}}","Egyéni enyhítési adatok olvasása."],["{{プレビューのON/OFF}}","Előnézet be/ki."],["{{フォント枠サイズ}}","betűtípus keretméret"],["{{フォント枠カラー}}","Betűkeret színe"],["{{オニオンスキン}}","hagymahéj"],["{{バケツツール}}","Vödrös szerszámok"],["{{ペンツール}}","tollszerszám"],["{{ダブルクリックでカーブポイントが追加されます}}","Dupla kattintás görbepont hozzáadásához"],["{{選択ツール}}","kiválasztó eszköz"],["{{Shape変形ツール}}","Alakdeformáló eszközök"],["{{テキストツール}}","szöveges eszköz"],["{{矩形ツール}}","Téglalap eszköz"],["{{楕円ツール}}","Elliptikus eszközök"],["{{角丸矩形ツール}}","Lekerekített sarok téglalap eszköz"],["{{塗りのカラー}}","A festék színe"],["{{線のカラー}}","Vonal színe"],["{{線の太さ}}","vonalvastagság"],["{{プロジェクトデータの読込}}","Projektadatok olvasása"],["{{プロジェクトデータを保存}}","Projektadatok mentése."],["{{書き出し}}","nyitó mondat vagy bekezdés"],["{{Discordへ移動}}","Menj a Discordra"],["{{バグ報告}}","hibajelentés"],["{{設定}}","beállítás (egy számítógép vagy fájl stb.)"],["{{タブを追加}}","Hozzáadás lap."],["{{タブの一覧を表示・移動}}","A lapok listájának megjelenítése és mozgatása"],["{{スクリプトを追加}}","Szkript hozzáadása."],["{{キーフレームを追加}}","Kulcskockák hozzáadása."],["{{空のキーフレームを追加}}","Üres kulcskockák hozzáadása."],["{{フレームを追加}}","Keret hozzáadása."],["{{フレームを削除}}","Távolítsa el a keretet."],["{{再生}}","regeneráció"],["{{停止}}","a zene, a tánc stb. felfüggesztése a gyász jeleként"],["{{ループ設定}}","Hurok beállítások"],["{{レイヤーを追加}}","Réteg hozzáadása."],["{{レイヤーを削除}}","Réteg törlése."],["{{全てのレイヤーをハイライト}}","Minden réteg kiemelése"],["{{全てのレイヤーを非表示}}","Minden réteg elrejtése"],["{{全てのレイヤーをロック}}","Zárja le az összes réteget."],["{{比率を固定}}","Fix arány"],["{{ステージの幅}}","Színpad szélessége"],["{{背景色}}","háttérszín"],["{{ステージの高さ}}","Színpadmagasság."],["{{フレームレート}}","képkocka sebesség"],["{{シンボル名}}","szimbólum neve"],["{{イージング設定}}","Enyhítő beállítás"],["{{ビデオの音量設定}}","Videó hangerő beállítások"],["{{自動再生}}","automatikus lejátszás"],["{{テキストエリアのボーダー設定}}","Szövegterületek keretbeállításai."],["{{テキスト入力設定}}","szövegbeviteli beállítás"],["{{フォント選択}}","Betűtípus kiválasztása"],["{{自動サイズ調整}}","Automatikus átméretezés"],["{{フォントスタイルタイプ}}","betűtípus stílus típusa"],["{{行揃え}}","igazolja a"],["{{改行設定}}","sortörés beállítása"],["{{スクロール設定}}","Görgetési beállítások"],["{{フォントサイズ}}","betűméret"],["{{フォントカラー}}","betűszín"],["{{行間}}","a sorok között"],["{{文字幅}}","karakterszélesség"],["{{左マージン}}","bal oldali margó"],["{{右マージン}}","jobb oldali margó"],["{{カラー種別の選択}}","Színtípus kiválasztása"],["{{背景画像の選択}}","Háttérkép kiválasztása"],["{{カラーポインターを追加}}","További színes mutató."],["{{カラー値}}","színérték"],["{{アルファ(0%-100%)}}","Alfa (0%-100%)"],["{{アルファ値}}","alfa-érték"],["{{選択対象の幅}}","A kiválasztási cél szélessége"],["{{選択対象のX座標}}","A kiválasztási cél X-koordinátája"],["{{選択対象の高さ}}","A kiválasztási célpont magassága"],["{{選択対象のY座標}}","A kiválasztási cél Y-koordinátája"],["{{選択対象の幅の伸縮}}","A kiválasztási célpont szélességének nyújtása és szűkítése"],["{{選択対象を回転}}","Forgassa a kiválasztást"],["{{選択対象の高さの伸縮}}","A kiválasztási célpont magasságának meghosszabbítása és összehúzása."],["{{アルファオフセット(-255〜255)}}","Alfa eltolás (-255 és 255 között)"],["{{赤(0%-100%)}}","Piros (0%-100%)"],["{{赤オフセット(-255〜255)}}","Vörös offset (-255 és 255 között)"],["{{緑(0%-100%)}}","Zöld (0%-100%)"],["{{緑オフセット(-255〜255)}}","Zöld offset (-255 és 255 között)"],["{{青(0%-100%)}}","Kék (0%-100%)"],["{{青オフセット(-255〜255)}}","Kék eltolás (-255 és 255 között)"],["{{ブレンドモード}}","keverési mód"],["{{フィルターを選択}}","Szűrő kiválasztása"],["{{フィルターを追加}}","Szűrő hozzáadása."],["{{サウンドを追加}}","Hang hozzáadása."],["{{フィルターを表示・非表示する}}","Szűrők megjelenítése/elrejtése"],["{{フィルターを削除}}","Szűrők eltávolítása."],["{{水平方向にぼかす}}","Elmosódás vízszintesen."],["{{垂直方向にぼかす}}","Függőleges elmosódás."],["{{フィルター強度}}","Szűrőerősség"],["{{フィルター角度}}","Szűrő szöge"],["{{シャドウのアルファ}}","Shadow alfája."],["{{シャドウのカラー}}","Árnyékszínek."],["{{フィルター距離}}","Szűrő távolság"],["{{ハイライトのカラー}}","Színes kiemelések"],["{{ハイライトのアルファ}}","Alfa kiemelése."],["{{グラデーションカラー}}","gradáció színe"],["{{グラデーションのアルファ}}","A gradiens alfája"],["{{タブの移動・名前を変更}}","Lapok áthelyezése és átnevezése"],["{{プロジェクトを閉じる}}","Projekt lezárása"],["{{上下に移動}}","Mozgás fel és le"],["{{レイヤー変更(ダブルクリック)}}","Rétegváltás (dupla kattintás)"],["{{レイヤーをハイライト}}","Kiemelő rétegek."],["{{レイヤーを非表示}}","Rétegek elrejtése."],["{{レイヤーをロック}}","Rétegek lezárása."],["{{カーブポインター(ダブルクリックでON/OFF)}}","Görbe mutató (dupla kattintás a be/ki kapcsoláshoz)"],["{{インスタンス名}}","példa neve"],["{{ライブラリ内の検索}}","Keresés a könyvtárban"],["{{フレームラベル}}","keretcímke"],["{{プロジェクトが保存されていない場合、このタブのプロジェクトデータを復旧する事はできません。タブを削除しますか？}}}}","Ha a projekt nem kerül mentésre, az adott lap projektadatai nem állíthatók helyre. Szeretné törölni a lapot?}}"]])}}class c extends t{createMapping(){return new Map([["{{書き出し先の選択}}","Memilih tujuan ekspor"],["{{画質}}","kualitas gambar"],["{{座標}}","mengkoordinasikan"],["{{MovieClipを編集}}","Edit MovieClip."],["{{親の階層へ移動}}","Pindah ke hierarki induk"],["{{ロックされたレイヤーです}}","Lapisan terkunci."],["{{トゥイーンには複数のオブジェクトを設置できません}}","Beberapa objek tidak dapat ditempatkan pada tween."],["{{名前が重複しています}}","Nama duplikat."],["{{名前は必須です}}","Nama harus diisi."],["{{基準点}}","titik referensi"],["{{自由変形ツール}}","Alat Transformasi Gratis"],["{{キーフレームに変換}}","Dikonversi ke bingkai utama"],["{{空のキーフレームに変換}}","Dikonversi ke keyframe kosong."],["{{最初のフレームに移動}}","Pergi ke bingkai pertama"],["{{最後のフレームに移動}}","Pergi ke bingkai terakhir"],["{{SWFを解析中}}","SWF sedang dianalisis."],["{{JSONを生成}}","Menghasilkan JSON"],["{{ファイルを生成}}","Hasilkan file"],["{{N2Dファイルの読み込み}}","Memuat file N2D."],["{{JSONの読み込み}}","Membaca JSON."],["{{データを解凍中}}","Data sedang dibongkar."],["{{データを圧縮中}}","Mengompresi data."],["{{エンコード}}","menyandikan"],["{{外部ファイルの読み込み}}","Memuat file eksternal"],["{{バイナリデータを生成}}","Menghasilkan data biner."],["{{データベースを起動}}","Mulai basis data"],["{{データを保存中}}","Menyimpan data."],["{{完了}}","penyelesaian"],["{{ステージ左揃え}}","perataan kiri panggung"],["{{ステージ中央揃え(水平方向)}}","Panggung terpusat (horizontal)"],["{{ステージ右揃え}}","Perataan kanan panggung"],["{{ステージ上揃え}}","penampilan di atas panggung"],["{{ステージ中央揃え(垂直方向)}}","Panggung terpusat (vertikal)"],["{{ステージ下揃え}}","pembenaran"],["{{定規}}","penggaris"],["{{表示}}","tampilan"],["{{ショートカット}}","jalan pintas"],["{{レイヤーを複製}}","Lapisan duplikat"],["{{未使用のフォルダを削除}}","Menghapus folder yang tidak digunakan."],["{{同名のアイテムが存在します}}","Ada beberapa item dengan nama yang sama."],["{{追加ファイル}}","file tambahan"],["{{既存のコンテンツ}}","Konten yang ada."],["{{上書きするか、ファイル名を変更して追加するか、スキップを選択する事ができます}}","Anda dapat memilih untuk menimpa, mengganti nama, dan menambahkan file atau melewatkan"],["{{全て上書き}}","Menimpa semua"],["{{全てスキップ}}","Lewati semua."],["{{追加・上書き}}","Penambahan dan penimpaan"],["{{スキップ}}","melewatkan"],["{{表示確認したいフレームを指定}}","Tentukan bingkai yang ingin Anda periksa tampilannya."],["{{ファイル名を指定}}","Menentukan nama file"],["{{ファイル名}}","nama-file"],["{{終了フレームを指定}}","Tentukan bingkai akhir"],["{{開始フレームを指定}}","Menentukan bingkai awal"],["{{フレーム設定}}","pengaturan bingkai"],["{{書き出し設定}}","Pengaturan ekspor"],["{{ファイル形式の選択}}","Memilih format file"],["{{ファイル形式}}","format file"],["{{サイズ設定}}","Ukuran"],["{{左上}}","kiri-atas"],["{{中央上}}","tengah-atas"],["{{右上}}","kanan-atas"],["{{中央左}}","kiri tengah"],["{{中央}}","pusat"],["{{中央右}}","kanan tengah"],["{{左下}}","kiri bawah"],["{{中央下}}","menengah ke bawah"],["{{右下}}","kanan-bawah"],["{{中心点のX座標}}","Koordinat X dari titik tengah"],["{{中心点のY座標}}","Koordinat Y dari titik tengah"],["{{MovieClipに変換}}","Konversi ke MovieClip"],["{{変換}}","transformasi"],["{{ループ回数}}","Jumlah putaran"],["{{カーブポインターの削除}}","Menghapus penunjuk kurva."],["{{ステージ基準}}","Kriteria Tahap"],["{{閉じる}}","dekat"],["{{保存}}","penyimpanan"],["{{リセット}}","mengatur ulang"],["{{スクリーン}}","layar"],["{{ショートカット設定}}","Pengaturan pintasan"],["{{レイヤーカラー}}","warna berlapis"],["{{Next2Dを支援する}}","Mendukung Next2D."],["{{サポート}}","dukungan"],["{{未使用のアイテムを削除}}","Menghapus item yang tidak digunakan"],["{{レイヤーをペースト}}","Menempelkan lapisan."],["{{レイヤーをコピー}}","Salin lapisan"],["{{フレームをペースト}}","Rekatkan bingkai."],["{{フレームをコピー}}","Salin bingkai."],["{{キーフレームを削除}}","Menghapus bingkai kunci."],["{{キーフレームに空のキーフレームを追加できません}}","Tidak dapat menambahkan bingkai utama kosong ke bingkai utama"],["{{ズームツール}}","Alat zoom"],["{{タイムライン幅の拡大・縮小}}","Memperluas dan mengurangi lebar garis waktu"],["{{ガイドレイヤー}}","lapisan panduan"],["{{音量設定}}","Pengaturan volume"],["{{サウンドを削除}}","Menghilangkan suara."],["{{カスタムループ}}","loop yang disesuaikan"],["{{読込のみ}}","Hanya baca"],["{{書込を許可}}","izin posting"],["{{単一行}}","garis sederhana"],["{{複数行}}","multiline"],["{{自動で折り返し}}","Perputaran otomatis"],["{{左寄せ}}","rata kiri"],["{{中央揃え}}","pemusatan"],["{{右寄せ}}","rata kanan"],["{{放射状グラデーション}}","gradasi radial"],["{{線形グラデーション}}","gradien linier"],["{{画像}}","Gambar."],["{{画像選択}}","Pemilihan gambar"],["{{種別}}","klasifikasi"],["{{Shapeの色設定}}","Pengaturan warna bentuk"],["{{変形}}","deformasi"],["{{カラー効果}}","efek warna"],["{{フィルター}}","filter"],["{{Shapeを複製}}","Bentuk duplikat."],["{{読み込み}}","baca di"],["{{新規フォルダー}}","Folder Baru"],["{{新規MovieClip}}","MovieClip baru."],["{{枠に合わせてテキストをリサイズ}}","Mengubah ukuran teks agar sesuai dengan bingkai."],["{{テキストに合わせて枠をリサイズ}}","Mengubah ukuran bingkai agar sesuai dengan teks."],["{{リサイズしない}}","Tidak ada pengubahan ukuran"],["{{フォント}}","font"],["{{テキスト}}","Teks."],["{{ループ}}","lingkaran"],["{{音量}}","volume"],["{{ビデオ}}","Video."],["{{イージング}}","pelonggaran"],["{{サウンド}}","suara"],["{{シンボル}}","simbol"],["{{名前}}","Nama."],["{{オブジェクト}}","objek"],["{{ステージ設定}}","Pengaturan panggung"],["{{プレビュー}}","pratinjau"],["{{削除}}","penghapusan"],["{{ペースト}}","tempel"],["{{コピー}}","salin"],["{{プラグインメニュー}}","Menu plug-in"],["{{トゥイーン}}","tween"],["{{カーブポインターの追加}}","Penunjuk kurva tambahan."],["{{パスの結合}}","Penggabungan jalur"],["{{シェイプ}}","bentuk"],["{{キーフレームに配分}}","Alokasi ke bingkai utama"],["{{レイヤーに配分}}","Alokasi ke lapisan"],["{{タイムライン}}","garis waktu"],["{{整列}}","penyelarasan"],["{{最背面}}","terbaru"],["{{ひとつ背面へ}}","Satu ke belakang."],["{{ひとつ前面へ}}","Satu ke depan."],["{{最前面}}","terpenting"],["{{重ね順}}","superposisi"],["{{プラグイン}}","plug-in"],["{{ライブラリ}}","perpustakaan"],["{{プロパティ}}","properti"],["{{マスクレイヤー}}","lapisan topeng"],["{{通常レイヤー}}","Lapisan Normal"],["{{モーショントゥイーンの削除}}","Penghapusan tweens gerak."],["{{モーショントゥイーンの追加}}","Tweens gerakan tambahan."],["{{モーダル表示}}","indikasi modal"],["{{言語}}","Bahasa."],["{{フォーマット}}","format"],["{{含める}}","termasuk"],["{{含めない}}","tidak termasuk"],["{{使い方、リファレンス}}","Penggunaan, referensi."],["{{非表示レイヤー}}","lapisan tersembunyi"],["{{設定}}","pengaturan"],["{{デフォルトのループを利用する}}","Gunakan loop default."],["{{フレームピッカー}}","pemetik bingkai"],["{{左揃え}}","pembenaran kiri"],["{{中央揃え(水平方向)}}","Terpusat (horizontal)"],["{{右揃え}}","pembenaran yang tepat"],["{{上揃え}}","pembenaran"],["{{中央揃え(垂直方向)}}","Terpusat (vertikal)"],["{{下揃え}}","pembenaran"],["{{開始フレーム}}","bingkai awal"],["{{終了フレーム}}","bingkai akhir"],["{{ループで再生}}","Putar dalam lingkaran"],["{{1回再生}}","1 pemutaran"],["{{指定したフレームで固定}}","Diperbaiki dalam bingkai yang ditentukan."],["{{1回逆再生}}","1 pemutaran mundur"],["{{逆ループで再生}}","Pemutaran dalam putaran balik."],["{{画面の拡大・縮小}}","Memperbesar dan memperkecil layar"],["{{カスタムイージングデータを保存}}","Menyimpan data pelonggaran khusus."],["{{カスタムイージングデータの読込}}","Membaca data pelonggaran khusus."],["{{プレビューのON/OFF}}","Pratinjau aktif/nonaktif."],["{{フォント枠サイズ}}","ukuran bingkai font"],["{{フォント枠カラー}}","Warna bingkai font"],["{{オニオンスキン}}","kulit bawang"],["{{バケツツール}}","Alat ember"],["{{ペンツール}}","alat pena"],["{{ダブルクリックでカーブポイントが追加されます}}","Klik dua kali untuk menambahkan titik kurva"],["{{選択ツール}}","alat seleksi"],["{{Shape変形ツール}}","Alat deformasi bentuk"],["{{テキストツール}}","alat teks"],["{{矩形ツール}}","Alat Persegi Panjang"],["{{楕円ツール}}","Alat elips"],["{{角丸矩形ツール}}","Alat persegi panjang sudut membulat"],["{{塗りのカラー}}","Warna cat"],["{{線のカラー}}","Warna garis"],["{{線の太さ}}","ketebalan garis"],["{{プロジェクトデータの読込}}","Membaca data proyek"],["{{プロジェクトデータを保存}}","Menyimpan data proyek."],["{{書き出し}}","kalimat atau paragraf pembuka"],["{{Discordへ移動}}","Pergi ke Discord"],["{{バグ報告}}","laporan bug"],["{{設定}}","pengaturan"],["{{タブを追加}}","Tab Tambah."],["{{タブの一覧を表示・移動}}","Menampilkan dan memindahkan daftar tab"],["{{スクリプトを追加}}","Tambahkan skrip."],["{{キーフレームを追加}}","Menambahkan bingkai kunci."],["{{空のキーフレームを追加}}","Menambahkan keyframe kosong."],["{{フレームを追加}}","Tambahkan bingkai."],["{{フレームを削除}}","Lepaskan bingkai."],["{{再生}}","regenerasi"],["{{停止}}","penghentian musik, tarian, dll. sebagai tanda berkabung"],["{{ループ設定}}","Pengaturan putaran"],["{{レイヤーを追加}}","Tambahkan lapisan."],["{{レイヤーを削除}}","Menghapus lapisan."],["{{全てのレイヤーをハイライト}}","Sorot semua lapisan"],["{{全てのレイヤーを非表示}}","Sembunyikan semua lapisan"],["{{全てのレイヤーをロック}}","Kunci semua lapisan."],["{{比率を固定}}","Rasio tetap"],["{{ステージの幅}}","Lebar panggung"],["{{背景色}}","warna latar belakang"],["{{ステージの高さ}}","Ketinggian panggung."],["{{フレームレート}}","kecepatan bingkai"],["{{シンボル名}}","nama simbol"],["{{イージング設定}}","Pengaturan pelonggaran"],["{{ビデオの音量設定}}","Pengaturan volume video"],["{{自動再生}}","putar otomatis"],["{{テキストエリアのボーダー設定}}","Pengaturan batas untuk area teks."],["{{テキスト入力設定}}","pengaturan entri teks"],["{{フォント選択}}","Pemilihan font"],["{{自動サイズ調整}}","Pengubahan ukuran otomatis"],["{{フォントスタイルタイプ}}","jenis gaya font"],["{{行揃え}}","membenarkan"],["{{改行設定}}","pengaturan jeda baris"],["{{スクロール設定}}","Pengaturan gulir"],["{{フォントサイズ}}","ukuran font"],["{{フォントカラー}}","warna font"],["{{行間}}","yang tersirat"],["{{文字幅}}","lebar karakter"],["{{左マージン}}","margin kiri"],["{{右マージン}}","margin kanan"],["{{カラー種別の選択}}","Pilih jenis warna"],["{{背景画像の選択}}","Memilih gambar latar belakang"],["{{カラーポインターを追加}}","Penunjuk warna tambahan."],["{{カラー値}}","nilai warna"],["{{アルファ(0%-100%)}}","Alpha (0%-100%)"],["{{アルファ値}}","nilai alfa"],["{{選択対象の幅}}","Lebar target seleksi"],["{{選択対象のX座標}}","Koordinat X dari target seleksi"],["{{選択対象の高さ}}","Ketinggian target seleksi"],["{{選択対象のY座標}}","Koordinat Y dari target seleksi"],["{{選択対象の幅の伸縮}}","Meregangkan dan mengecilkan lebar target seleksi"],["{{選択対象を回転}}","Putar pilihan"],["{{選択対象の高さの伸縮}}","Perpanjangan dan kontraksi ketinggian target seleksi."],["{{アルファオフセット(-255〜255)}}","Alfa offset (-255 hingga 255)"],["{{赤(0%-100%)}}","Merah (0%-100%)"],["{{赤オフセット(-255〜255)}}","Offset merah (-255 hingga 255)"],["{{緑(0%-100%)}}","Hijau (0%-100%)"],["{{緑オフセット(-255〜255)}}","Offset hijau (-255 hingga 255)"],["{{青(0%-100%)}}","Biru (0%-100%)"],["{{青オフセット(-255〜255)}}","Offset biru (-255 hingga 255)"],["{{ブレンドモード}}","mode campuran"],["{{フィルターを選択}}","Pilih filter"],["{{フィルターを追加}}","Tambahkan filter."],["{{サウンドを追加}}","Tambahkan suara."],["{{フィルターを表示・非表示する}}","Menampilkan/menyembunyikan filter"],["{{フィルターを削除}}","Menghapus filter."],["{{水平方向にぼかす}}","Memburamkan secara horizontal."],["{{垂直方向にぼかす}}","Keburaman vertikal."],["{{フィルター強度}}","Kekuatan filter"],["{{フィルター角度}}","Sudut filter"],["{{シャドウのアルファ}}","Shadow's Alpha."],["{{シャドウのカラー}}","Warna bayangan."],["{{フィルター距離}}","Jarak filter"],["{{ハイライトのカラー}}","Sorotan warna"],["{{ハイライトのアルファ}}","Sorot Alpha."],["{{グラデーションカラー}}","warna gradasi"],["{{グラデーションのアルファ}}","Alfa dari gradien"],["{{タブの移動・名前を変更}}","Memindahkan dan mengganti nama tab"],["{{プロジェクトを閉じる}}","Tutup proyek"],["{{上下に移動}}","Bergerak ke atas dan ke bawah"],["{{レイヤー変更(ダブルクリック)}}","Perubahan lapisan (klik dua kali)"],["{{レイヤーをハイライト}}","Menyorot lapisan."],["{{レイヤーを非表示}}","Menyembunyikan lapisan."],["{{レイヤーをロック}}","Mengunci lapisan."],["{{カーブポインター(ダブルクリックでON/OFF)}}","Penunjuk kurva (klik dua kali untuk menghidupkan/mematikan)"],["{{インスタンス名}}","nama contoh"],["{{ライブラリ内の検索}}","Mencari di perpustakaan"],["{{フレームラベル}}","label bingkai"],["{{プロジェクトが保存されていない場合、このタブのプロジェクトデータを復旧する事はできません。タブを削除しますか？}}}}","Jika proyek tidak disimpan, data proyek untuk tab ini tidak dapat dipulihkan. Apakah Anda ingin menghapus tab ini?}"]])}}class d extends t{createMapping(){return new Map([["{{書き出し先の選択}}","Posizione di esportazione"],["{{画質}}","Qualità"],["{{座標}}","Coordinate"],["{{MovieClipを編集}}","Modifica del MovieClip"],["{{親の階層へ移動}}","Sposta nella gerarchia dei genitori"],["{{ロックされたレイヤーです}}","Strato bloccato"],["{{トゥイーンには複数のオブジェクトを設置できません}}","Non è possibile inserire più oggetti in un tween"],["{{名前が重複しています}}","Nome duplicato"],["{{名前は必須です}}","Il nome è obbligatorio"],["{{基準点}}","punto di riferimento"],["{{自由変形ツール}}","Strumento di trasformazione gratuito"],["{{キーフレームに変換}}","Convertire in keyframe"],["{{空のキーフレームに変換}}","Convertire in fotogrammi chiave vuoti"],["{{最初のフレームに移動}}","Vai al primo fotogramma"],["{{最後のフレームに移動}}","Vai all'ultimo fotogramma"],["{{SWFを解析中}}","SWF in analisi"],["{{JSONを生成}}","Generare JSON"],["{{ファイルを生成}}","Generare il file"],["{{N2Dファイルの読み込み}}","Caricamento dei file N2D"],["{{JSONの読み込み}}","Caricamento di JSON"],["{{データを解凍中}}","Decomprimere i dati"],["{{データを圧縮中}}","Comprimere i dati"],["{{エンコード}}","Codifica"],["{{外部ファイルの読み込み}}","Lettura di file esterni"],["{{バイナリデータを生成}}","Generazione di dati binari"],["{{データベースを起動}}","Avvio del database"],["{{データを保存中}}","Memorizzazione dei dati in corso"],["{{完了}}","Completato"],["{{ステージ左揃え}}","Allineare il palco a sinistra"],["{{ステージ中央揃え(水平方向)}}","Allineare il centro del palco (orizzontale)"],["{{ステージ右揃え}}","Allineare il palco a destra"],["{{ステージ上揃え}}","Allineare il palco in alto"],["{{ステージ中央揃え(垂直方向)}}","Allineare il centro del palco (verticale)"],["{{ステージ下揃え}}","Allineare il fondo del palco"],["{{定規}}","Righello"],["{{表示}}","Display"],["{{ショートカット}}","scorciatoia"],["{{レイヤーを複製}}","Duplicare il livello"],["{{未使用のフォルダを削除}}","Eliminare le cartelle inutilizzate"],["{{同名のアイテムが存在します}}","Esistono voci con lo stesso nome"],["{{追加ファイル}}","File aggiuntivo"],["{{既存のコンテンツ}}","Contenuto esistente"],["{{上書きするか、ファイル名を変更して追加するか、スキップを選択する事ができます}}","È possibile scegliere di sovrascrivere, rinominare e aggiungere i file, o di saltare"],["{{全て上書き}}","Sovrascrivi tutto"],["{{全てスキップ}}","Salta tutto"],["{{追加・上書き}}","Aggiungi o sovrascrivi"],["{{スキップ}}","Salta"],["{{表示確認したいフレームを指定}}","Specificare la cornice di cui si desidera controllare la visualizzazione"],["{{ファイル名を指定}}","Specificare il nome del file"],["{{ファイル名}}","nome del file"],["{{終了フレームを指定}}","Specificare la cornice finale"],["{{開始フレームを指定}}","Specificare il fotogramma iniziale"],["{{フレーム設定}}","Impostazione del telaio"],["{{書き出し設定}}","Impostazioni di esportazione"],["{{ファイル形式の選択}}","Selezionare il formato del file"],["{{ファイル形式}}","Formati dei file"],["{{サイズ設定}}","Impostazione delle dimensioni"],["{{左上}}","In alto a sinistra"],["{{中央上}}","In alto al centro"],["{{右上}}","In alto a destra"],["{{中央左}}","Centro Sinistra"],["{{中央}}","Centro"],["{{中央右}}","Centro Destra"],["{{左下}}","In basso a sinistra"],["{{中央下}}","In basso al centro"],["{{右下}}","In basso a destra"],["{{中心点のX座標}}","Coordinata X del punto centrale"],["{{中心点のY座標}}","Coordinata Y del punto centrale"],["{{MovieClipに変換}}","Convertire in MovieClip"],["{{変換}}","trasformazione"],["{{ループ回数}}","Conteggio dei cicli"],["{{カーブポインターの削除}}","Elimina il puntatore di curva"],["{{ステージ基準}}","Criteri di fase"],["{{閉じる}}","Chiudere"],["{{保存}}","Risparmiare"],["{{リセット}}","azzeramento"],["{{スクリーン}}","Schermo"],["{{ショートカット設定}}","Impostazioni delle scorciatoie"],["{{レイヤーカラー}}","colore stratificato"],["{{Next2Dを支援する}}","Supporto Next2D"],["{{サポート}}","supporto"],["{{未使用のアイテムを削除}}","Rimuovere gli articoli inutilizzati"],["{{レイヤーをペースト}}","Strato di pasta"],["{{レイヤーをコピー}}","Copiare il livello"],["{{フレームをペースト}}","Incolla la cornice"],["{{フレームをコピー}}","Cornice di copia"],["{{キーフレームを削除}}","Elimina i fotogrammi chiave"],["{{キーフレームに空のキーフレームを追加できません}}","Impossibile aggiungere keyframes vuoti ai keyframes"],["{{ズームツール}}","Strumento zoom"],["{{タイムライン幅の拡大・縮小}}","Larghezza della timeline Espandere/ridurre"],["{{ガイドレイヤー}}","strato guida"],["{{音量設定}}","Regolazione del volume"],["{{サウンドを削除}}","Rimuovere il suono"],["{{カスタムループ}}","anello personalizzato"],["{{読込のみ}}","Leggere solo"],["{{書込を許可}}","autorizzazione del post"],["{{単一行}}","Linea singola"],["{{複数行}}","Multiline"],["{{自動で折り返し}}","Avvolgimento automatico"],["{{左寄せ}}","Sinistra"],["{{中央揃え}}","Centro"],["{{右寄せ}}","Destra"],["{{放射状グラデーション}}","gradazione radiale"],["{{線形グラデーション}}","gradiente lineare"],["{{画像}}","Immagine"],["{{画像選択}}","Selezione dell'immagine"],["{{種別}}","Tipo"],["{{Shapeの色設定}}","Impostazioni del colore della forma"],["{{変形}}","deformazione"],["{{カラー効果}}","Trasformazione del colore"],["{{フィルター}}","filtro"],["{{Shapeを複製}}","Forma duplicata"],["{{読み込み}}","leggere in"],["{{新規フォルダー}}","Nuova cartella"],["{{新規MovieClip}}","Nuovo MovieClip"],["{{枠に合わせてテキストをリサイズ}}","Ridimensiona il testo per adattarlo alla cornice"],["{{テキストに合わせて枠をリサイズ}}","Ridimensiona la cornice per adattarla al testo"],["{{リサイズしない}}","Nessun ridimensionamento"],["{{フォント}}","font"],["{{テキスト}}","Testo"],["{{ループ}}","loop"],["{{音量}}","volume"],["{{ビデオ}}","Video"],["{{イージング}}","facilitando"],["{{サウンド}}","suono"],["{{シンボル}}","Simbolo"],["{{名前}}","Nome"],["{{オブジェクト}}","oggetto"],["{{ステージ設定}}","Scenario"],["{{プレビュー}}","Anteprima"],["{{削除}}","Cancellare"],["{{ペースト}}","Incolla"],["{{コピー}}","Copia"],["{{プラグインメニュー}}","Menu del plug-in"],["{{トゥイーン}}","tween"],["{{カーブポインターの追加}}","Puntatore di curva supplementare"],["{{パスの結合}}","Fusione di percorsi"],["{{シェイプ}}","forma"],["{{キーフレームに配分}}","Assegnazione ai fotogrammi chiave"],["{{レイヤーに配分}}","Assegnazione ai livelli"],["{{タイムライン}}","Timeline"],["{{整列}}","Allineare"],["{{最背面}}","La maggior parte della schiena"],["{{ひとつ背面へ}}","Uno sul retro"],["{{ひとつ前面へ}}","Una parte anteriore"],["{{最前面}}","In prima linea"],["{{重ね順}}","Organizzare"],["{{プラグイン}}","plug-in"],["{{ライブラリ}}","biblioteca"],["{{プロパティ}}","proprietà"],["{{マスクレイヤー}}","strato di maschera"],["{{通常レイヤー}}","Strato normale"],["{{モーショントゥイーンの削除}}","Soppressione dei tweens di movimento"],["{{モーショントゥイーンの追加}}","Ulteriori tween di movimento"],["{{モーダル表示}}","indicazione modale"],["{{言語}}","Lingua"],["{{フォーマット}}","formato"],["{{含める}}","includere"],["{{含めない}}","non includere"],["{{使い方、リファレンス}}","Uso, riferimento"],["{{非表示レイヤー}}","strato nascosto"],["{{設定}}","setup"],["{{デフォルトのループを利用する}}","Utilizzare il ciclo predefinito"],["{{フレームピッカー}}","raccoglitore di cornici"],["{{左揃え}}","Sinistra"],["{{中央揃え(水平方向)}}","Centro (Orizzontalità)"],["{{右揃え}}","Destra"],["{{上揃え}}","Top"],["{{中央揃え(垂直方向)}}","Centro (Verticale)"],["{{下揃え}}","Fondo"],["{{開始フレーム}}","telaio di partenza"],["{{終了フレーム}}","telaio finale"],["{{ループで再生}}","Gioca in loop"],["{{1回再生}}","1 riproduzione"],["{{指定したフレームで固定}}","Fissato nella cornice specificata"],["{{1回逆再生}}","1 riproduzione inversa"],["{{逆ループで再生}}","Riproduzione in loop inverso"],["{{画面の拡大・縮小}}","Ingrandire e rimpicciolire lo schermo"],["{{カスタムイージングデータを保存}}","Salva i dati di easing personalizzati"],["{{カスタムイージングデータの読込}}","Lettura dei dati di easing personalizzati"],["{{プレビューのON/OFF}}","Anteprima on/off"],["{{フォント枠サイズ}}","Dimensione della cornice del carattere"],["{{フォント枠カラー}}","Colore della cornice del carattere"],["{{オニオンスキン}}","Pelle di cipolla"],["{{バケツツール}}","Strumenti a secchiello"],["{{ペンツール}}","Strumento penna"],["{{ダブルクリックでカーブポイントが追加されます}}","Doppio clic per aggiungere un punto di curva"],["{{選択ツール}}","Strumenti di selezione"],["{{Shape変形ツール}}","Strumento di trasformazione della forma"],["{{テキストツール}}","Text Tool"],["{{矩形ツール}}","Strumento di testo"],["{{楕円ツール}}","Strumento Ellisse"],["{{角丸矩形ツール}}","Strumento Rettangolo arrotondato"],["{{塗りのカラー}}","Colore di riempimento"],["{{線のカラー}}","Colore del tratto"],["{{線の太さ}}","Larghezza della corsa"],["{{プロジェクトデータの読込}}","Caricamento dei dati del progetto"],["{{プロジェクトデータを保存}}","Salvare i dati del progetto"],["{{書き出し}}","Esportazione"],["{{Discordへ移動}}","Vai su discordia"],["{{バグ報告}}","Segnalazioni di bug"],["{{設定}}","Impostazione"],["{{タブを追加}}","Aggiungere una scheda"],["{{タブの一覧を表示・移動}}","Visualizzare e spostarsi attraverso l'elenco delle schede"],["{{スクリプトを追加}}","Aggiungere uno script"],["{{キーフレームを追加}}","Aggiungere un keyframe"],["{{空のキーフレームを追加}}","Aggiungere un keyframe vuoto"],["{{フレームを追加}}","Aggiungere una cornice"],["{{フレームを削除}}","Cancellare la cornice"],["{{再生}}","Gioca"],["{{停止}}","Fermare"],["{{ループ設定}}","Impostazione del loop"],["{{レイヤーを追加}}","Aggiungere uno strato"],["{{レイヤーを削除}}","Cancellare il livello"],["{{全てのレイヤーをハイライト}}","Evidenzia tutti i livelli"],["{{全てのレイヤーを非表示}}","Nascondi tutti i livelli"],["{{全てのレイヤーをロック}}","Blocca tutti i livelli"],["{{比率を固定}}","Rapporto fisso"],["{{ステージの幅}}","Larghezza del palco"],["{{背景色}}","Colore di sfondo"],["{{ステージの高さ}}","Altezza del palco"],["{{フレームレート}}","Frame Rate"],["{{シンボル名}}","Nome del simbolo"],["{{イージング設定}}","Impostazione di rilassamento"],["{{ビデオの音量設定}}","Impostazione del volume video"],["{{自動再生}}","Riproduzione automatica"],["{{テキストエリアのボーダー設定}}","Impostazione del bordo dell'area di testo"],["{{テキスト入力設定}}","Impostazione dell'inserimento del testo"],["{{フォント選択}}","Seleziona il carattere"],["{{自動サイズ調整}}","Regolazione automatica delle dimensioni"],["{{フォントスタイルタイプ}}","Tipo di stile di carattere"],["{{行揃え}}","Allineare"],["{{改行設定}}","Impostazione Newline"],["{{スクロール設定}}","Impostazione dello scorrimento"],["{{フォントサイズ}}","Dimensione del carattere"],["{{フォントカラー}}","Colore del carattere"],["{{行間}}","Spazio di linea"],["{{文字幅}}","Larghezza del carattere"],["{{左マージン}}","Margine sinistro"],["{{右マージン}}","Margine destro"],["{{カラー種別の選択}}","Seleziona un tipo di colore"],["{{背景画像の選択}}","Selezionare un'immagine di sfondo"],["{{カラーポインターを追加}}","Aggiungere i puntatori di colore"],["{{カラー値}}","Colore"],["{{アルファ(0%-100%)}}","Alpha(0%-100%)"],["{{アルファ値}}","Alpha"],["{{選択対象の幅}}","Larghezza dell'oggetto di selezione"],["{{選択対象のX座標}}","Coordinata X dell'oggetto di selezione"],["{{選択対象の高さ}}","Altezza dell'oggetto di selezione"],["{{選択対象のY座標}}","Coordinata Y dell'oggetto di selezione"],["{{選択対象の幅の伸縮}}","scaleX dell'oggetto selezionato"],["{{選択対象を回転}}","Ruotare l'oggetto"],["{{選択対象の高さの伸縮}}","scalaY dell'oggetto selezionato"],["{{アルファオフセット(-255〜255)}}","Offset alfa(-255〜255)"],["{{赤(0%-100%)}}","Rosso(0%-100%)"],["{{赤オフセット(-255〜255)}}","Offset rosso(-255〜255)"],["{{緑(0%-100%)}}","Verde(0%-100%)"],["{{緑オフセット(-255〜255)}}","Offset Verde(-255〜255)"],["{{青(0%-100%)}}","Blu(0%-100%)"],["{{青オフセット(-255〜255)}}","Offset Blu(-255〜255)"],["{{ブレンドモード}}","Modalità di fusione"],["{{フィルターを選択}}","Seleziona un filtro"],["{{フィルターを追加}}","Aggiungere un filtro"],["{{サウンドを追加}}","Aggiungere un suono"],["{{フィルターを表示・非表示する}}","Mostrare e nascondere i filtri"],["{{フィルターを削除}}","Cancellare il filtro"],["{{水平方向にぼかす}}","Sfocatura orizzontale"],["{{垂直方向にぼかす}}","Sfocatura verticale"],["{{フィルター強度}}","Forza del filtro"],["{{フィルター角度}}","Angolo del filtro"],["{{シャドウのアルファ}}","Ombra alfa"],["{{シャドウのカラー}}","Colore dell'ombra"],["{{フィルター距離}}","Distanza del filtro"],["{{ハイライトのカラー}}","Colore in evidenza"],["{{ハイライトのアルファ}}","Evidenziare l'alfa"],["{{グラデーションカラー}}","Colore sfumato"],["{{グラデーションのアルファ}}","Gradiente alfa"],["{{タブの移動・名前を変更}}","Spostare/rinominare le schede"],["{{プロジェクトを閉じる}}","Chiudere il progetto"],["{{上下に移動}}","Sposta su e giù"],["{{レイヤー変更(ダブルクリック)}}","Cambio di livello (doppio clic)"],["{{レイヤーをハイライト}}","Strato di evidenziazione"],["{{レイヤーを非表示}}","Nascondere lo strato"],["{{レイヤーをロック}}","Bloccare il livello"],["{{カーブポインター(ダブルクリックでON/OFF)}}","Curve Pointer (doppio clic per attivare/disattivare)"],["{{インスタンス名}}","Nome dell'istanza"],["{{ライブラリ内の検索}}","Cerca nella biblioteca"],["{{フレームラベル}}","Etichetta del telaio"],["{{プロジェクトが保存されていない場合、このタブのプロジェクトデータを復旧する事はできません。タブを削除しますか？}}","Se il progetto non viene salvato, i dati del progetto in questa scheda non possono essere recuperati. Vuoi cancellare la scheda?"]])}}class h extends t{createMapping(){return new Map([["{{書き出し先の選択}}","書き出し先の選択"],["{{画質}}","画質"],["{{座標}}","座標"],["{{MovieClipを編集}}","MovieClipを編集"],["{{親の階層へ移動}}","親の階層へ移動"],["{{ロックされたレイヤーです}}","ロックされたレイヤーです"],["{{トゥイーンには複数のオブジェクトを設置できません}}","トゥイーンには複数のオブジェクトを設置できません"],["{{名前が重複しています}}","名前が重複しています"],["{{名前は必須です}}","名前は必須です"],["{{基準点}}","基準点"],["{{自由変形ツール}}","自由変形ツール"],["{{キーフレームに変換}}","キーフレームに変換"],["{{空のキーフレームに変換}}","空のキーフレームに変換"],["{{最初のフレームに移動}}","最初のフレームに移動"],["{{最後のフレームに移動}}","最後のフレームに移動"],["{{SWFを解析中}}","SWFを解析中"],["{{JSONを生成}}","JSONを生成"],["{{ファイルを生成}}","ファイルを生成"],["{{N2Dファイルの読み込み}}","N2Dファイルの読み込み"],["{{JSONの読み込み}}","JSONの読み込み"],["{{データを解凍中}}","データを解凍中"],["{{データを圧縮中}}","データを圧縮中"],["{{エンコード}}","エンコード"],["{{外部ファイルの読み込み}}","外部ファイルの読み込み"],["{{バイナリデータを生成}}","バイナリデータを生成"],["{{データベースを起動}}","データベースを起動"],["{{データを保存中}}","データを保存中"],["{{完了}}","完了"],["{{ステージ左揃え}}","ステージ左揃え"],["{{ステージ中央揃え(水平方向)}}","ステージ中央揃え(水平方向)"],["{{ステージ右揃え}}","ステージ右揃え"],["{{ステージ上揃え}}","ステージ上揃え"],["{{ステージ中央揃え(垂直方向)}}","ステージ中央揃え(垂直方向)"],["{{ステージ下揃え}}","ステージ下揃え"],["{{定規}}","定規"],["{{表示}}","表示"],["{{ショートカット}}","ショートカット"],["{{レイヤーを複製}}","レイヤーを複製"],["{{未使用のフォルダを削除}}","未使用のフォルダを削除"],["{{同名のアイテムが存在します}}","同名のアイテムが存在します"],["{{追加ファイル}}","追加ファイル"],["{{既存のコンテンツ}}","既存のコンテンツ"],["{{上書きするか、ファイル名を変更して追加するか、スキップを選択する事ができます}}","上書きするか、ファイル名を変更して追加するか、スキップを選択する事ができます"],["{{全て上書き}}","全て上書き"],["{{全てスキップ}}","全てスキップ"],["{{追加・上書き}}","追加・上書き"],["{{スキップ}}","スキップ"],["{{表示確認したいフレームを指定}}","表示確認したいフレームを指定"],["{{ファイル名を指定}}","ファイル名を指定"],["{{ファイル名}}","ファイル名"],["{{終了フレームを指定}}","終了フレームを指定"],["{{開始フレームを指定}}","開始フレームを指定"],["{{フレーム設定}}","フレーム設定"],["{{書き出し設定}}","書き出し設定"],["{{ファイル形式の選択}}","ファイル形式の選択"],["{{ファイル形式}}","ファイル形式"],["{{サイズ設定}}","サイズ設定"],["{{左上}}","左上"],["{{中央上}}","中央上"],["{{右上}}","右上"],["{{中央左}}","中央左"],["{{中央}}","中央"],["{{中央右}}","中央右"],["{{左下}}","左下"],["{{中央下}}","中央下"],["{{右下}}","右下"],["{{中心点のX座標}}","中心点のX座標"],["{{中心点のY座標}}","中心点のY座標"],["{{MovieClipに変換}}","MovieClipに変換"],["{{変換}}","変換"],["{{ループ回数}}","ループ回数"],["{{カーブポインターの削除}}","カーブポインターの削除"],["{{ステージ基準}}","ステージ基準"],["{{閉じる}}","閉じる"],["{{保存}}","保存"],["{{リセット}}","リセット"],["{{スクリーン}}","スクリーン"],["{{ショートカット設定}}","ショートカット設定"],["{{レイヤーカラー}}","レイヤーカラー"],["{{Next2Dを支援する}}","Next2Dを支援する"],["{{サポート}}","サポート"],["{{未使用のアイテムを削除}}","未使用のアイテムを削除"],["{{レイヤーをペースト}}","レイヤーをペースト"],["{{レイヤーをコピー}}","レイヤーをコピー"],["{{フレームをペースト}}","フレームをペースト"],["{{フレームをコピー}}","フレームをコピー"],["{{キーフレームを削除}}","キーフレームを削除"],["{{キーフレームに空のキーフレームを追加できません}}","キーフレームに空のキーフレームを追加できません"],["{{ズームツール}}","ズームツール"],["{{タイムライン幅の拡大・縮小}}","タイムライン幅の拡大・縮小"],["{{ガイドレイヤー}}","ガイドレイヤー"],["{{音量設定}}","音量設定"],["{{サウンドを削除}}","サウンドを削除"],["{{カスタムループ}}","カスタムループ"],["{{読込のみ}}","読込のみ"],["{{書込を許可}}","書込を許可"],["{{単一行}}","単一行"],["{{複数行}}","複数行"],["{{自動で折り返し}}","自動で折り返し"],["{{左寄せ}}","左寄せ"],["{{中央揃え}}","中央揃え"],["{{右寄せ}}","右寄せ"],["{{放射状グラデーション}}","放射状グラデーション"],["{{線形グラデーション}}","線形グラデーション"],["{{画像}}","画像"],["{{画像選択}}","画像選択"],["{{種別}}","種別"],["{{Shapeの色設定}}","Shapeの色設定"],["{{変形}}","変形"],["{{カラー効果}}","カラー効果"],["{{フィルター}}","フィルター"],["{{Shapeを複製}}","Shapeを複製"],["{{読み込み}}","読み込み"],["{{新規フォルダー}}","新規フォルダー"],["{{新規MovieClip}}","新規MovieClip"],["{{枠に合わせてテキストをリサイズ}}","枠に合わせてテキストをリサイズ"],["{{テキストに合わせて枠をリサイズ}}","テキストに合わせて枠をリサイズ"],["{{リサイズしない}}","リサイズしない"],["{{フォント}}","フォント"],["{{テキスト}}","テキスト"],["{{ループ}}","ループ"],["{{音量}}","音量"],["{{ビデオ}}","ビデオ"],["{{イージング}}","イージング"],["{{サウンド}}","サウンド"],["{{シンボル}}","シンボル"],["{{名前}}","名前"],["{{オブジェクト}}","オブジェクト"],["{{ステージ設定}}","ステージ設定"],["{{プレビュー}}","プレビュー"],["{{削除}}","削除"],["{{ペースト}}","ペースト"],["{{コピー}}","コピー"],["{{プラグインメニュー}}","プラグインメニュー"],["{{トゥイーン}}","トゥイーン"],["{{カーブポインターの追加}}","カーブポインターの追加"],["{{パスの結合}}","パスの結合"],["{{シェイプ}}","シェイプ"],["{{キーフレームに配分}}","キーフレームに配分"],["{{レイヤーに配分}}","レイヤーに配分"],["{{タイムライン}}","タイムライン"],["{{整列}}","整列"],["{{最背面}}","最背面"],["{{ひとつ背面へ}}","ひとつ背面へ"],["{{ひとつ前面へ}}","ひとつ前面へ"],["{{最前面}}","最前面"],["{{重ね順}}","重ね順"],["{{プラグイン}}","プラグイン"],["{{ライブラリ}}","ライブラリ"],["{{プロパティ}}","プロパティ"],["{{マスクレイヤー}}","マスクレイヤー"],["{{通常レイヤー}}","通常レイヤー"],["{{モーショントゥイーンの削除}}","モーショントゥイーンの削除"],["{{モーショントゥイーンの追加}}","モーショントゥイーンの追加"],["{{モーダル表示}}","モーダル表示"],["{{言語}}","言語"],["{{フォーマット}}","フォーマット"],["{{含める}}","含める"],["{{含めない}}","含めない"],["{{使い方、リファレンス}}","使い方、リファレンス"],["{{非表示レイヤー}}","非表示レイヤー"],["{{設定}}","設定"],["{{デフォルトのループを利用する}}","デフォルトのループを利用する"],["{{フレームピッカー}}","フレームピッカー"],["{{左揃え}}","左揃え"],["{{中央揃え(水平方向)}}","中央揃え(水平方向)"],["{{右揃え}}","右揃え"],["{{上揃え}}","上揃え"],["{{中央揃え(垂直方向)}}","中央揃え(垂直方向)"],["{{下揃え}}","下揃え"],["{{開始フレーム}}","開始フレーム"],["{{終了フレーム}}","終了フレーム"],["{{ループで再生}}","ループで再生"],["{{1回再生}}","1回再生"],["{{指定したフレームで固定}}","指定したフレームで固定"],["{{1回逆再生}}","1回逆再生"],["{{逆ループで再生}}","逆ループで再生"],["{{画面の拡大・縮小}}","画面の拡大・縮小"],["{{カスタムイージングデータを保存}}","カスタムイージングデータを保存"],["{{カスタムイージングデータの読込}}","カスタムイージングデータの読込"],["{{プレビューのON/OFF}}","プレビューのON/OFF"],["{{フォント枠サイズ}}","フォント枠サイズ"],["{{フォント枠カラー}}","フォント枠カラー"],["{{オニオンスキン}}","オニオンスキン"],["{{バケツツール}}","バケツツール"],["{{ペンツール}}","ペンツール"],["{{ダブルクリックでカーブポイントが追加されます}}","ダブルクリックでカーブポイントが追加されます"],["{{選択ツール}}","選択ツール"],["{{Shape変形ツール}}","Shape変形ツール"],["{{テキストツール}}","テキストツール"],["{{矩形ツール}}","矩形ツール"],["{{楕円ツール}}","楕円ツール"],["{{角丸矩形ツール}}","角丸矩形ツール"],["{{塗りのカラー}}","塗りのカラー"],["{{線のカラー}}","線のカラー"],["{{線の太さ}}","線の太さ"],["{{プロジェクトデータの読込}}","プロジェクトデータの読込"],["{{プロジェクトデータを保存}}","プロジェクトデータを保存"],["{{書き出し}}","書き出し"],["{{Discordへ移動}}","Discordへ移動"],["{{バグ報告}}","バグ報告"],["{{設定}}","設定"],["{{タブを追加}}","タブを追加"],["{{タブの一覧を表示・移動}}","タブの一覧を表示・移動"],["{{スクリプトを追加}}","スクリプトを追加"],["{{キーフレームを追加}}","キーフレームを追加"],["{{空のキーフレームを追加}}","空のキーフレームを追加"],["{{フレームを追加}}","フレームを追加"],["{{フレームを削除}}","フレームを削除"],["{{再生}}","再生"],["{{停止}}","停止"],["{{ループ設定}}","ループ設定"],["{{レイヤーを追加}}","レイヤーを追加"],["{{レイヤーを削除}}","レイヤーを削除"],["{{全てのレイヤーをハイライト}}","全てのレイヤーをハイライト"],["{{全てのレイヤーを非表示}}","全てのレイヤーを非表示"],["{{全てのレイヤーをロック}}","全てのレイヤーをロック"],["{{比率を固定}}","比率を固定"],["{{ステージの幅}}","ステージの幅"],["{{背景色}}","背景色"],["{{ステージの高さ}}","ステージの高さ"],["{{フレームレート}}","フレームレート"],["{{シンボル名}}","シンボル名"],["{{イージング設定}}","イージング設定"],["{{ビデオの音量設定}}","ビデオの音量設定"],["{{自動再生}}","自動再生"],["{{テキストエリアのボーダー設定}}","テキストエリアのボーダー設定"],["{{テキスト入力設定}}","テキスト入力設定"],["{{フォント選択}}","フォント選択"],["{{自動サイズ調整}}","自動サイズ調整"],["{{フォントスタイルタイプ}}","フォントスタイルタイプ"],["{{行揃え}}","行揃え"],["{{改行設定}}","改行設定"],["{{スクロール設定}}","スクロール設定"],["{{フォントサイズ}}","フォントサイズ"],["{{フォントカラー}}","フォントカラー"],["{{行間}}","行間"],["{{文字幅}}","文字幅"],["{{左マージン}}","左マージン"],["{{右マージン}}","右マージン"],["{{カラー種別の選択}}","カラー種別の選択"],["{{背景画像の選択}}","背景画像の選択"],["{{カラーポインターを追加}}","カラーポインターを追加"],["{{カラー値}}","カラー値"],["{{アルファ(0%-100%)}}","アルファ(0%-100%)"],["{{アルファ値}}","アルファ値"],["{{選択対象の幅}}","選択対象の幅"],["{{選択対象のX座標}}","選択対象のX座標"],["{{選択対象の高さ}}","選択対象の高さ"],["{{選択対象のY座標}}","選択対象のY座標"],["{{選択対象の幅の伸縮}}","選択対象の幅の伸縮"],["{{選択対象を回転}}","選択対象を回転"],["{{選択対象の高さの伸縮}}","選択対象の高さの伸縮"],["{{アルファオフセット(-255〜255)}}","アルファオフセット(-255〜255)"],["{{赤(0%-100%)}}","赤(0%-100%)"],["{{赤オフセット(-255〜255)}}","赤オフセット(-255〜255)"],["{{緑(0%-100%)}}","緑(0%-100%)"],["{{緑オフセット(-255〜255)}}","緑オフセット(-255〜255)"],["{{青(0%-100%)}}","青(0%-100%)"],["{{青オフセット(-255〜255)}}","青オフセット(-255〜255)"],["{{ブレンドモード}}","ブレンドモード"],["{{フィルターを選択}}","フィルターを選択"],["{{フィルターを追加}}","フィルターを追加"],["{{サウンドを追加}}","サウンドを追加"],["{{フィルターを表示・非表示する}}","フィルターを表示・非表示する"],["{{フィルターを削除}}","フィルターを削除"],["{{水平方向にぼかす}}","水平方向にぼかす"],["{{垂直方向にぼかす}}","垂直方向にぼかす"],["{{フィルター強度}}","フィルター強度"],["{{フィルター角度}}","フィルター角度"],["{{シャドウのアルファ}}","シャドウのアルファ"],["{{シャドウのカラー}}","シャドウのカラー"],["{{フィルター距離}}","フィルター距離"],["{{ハイライトのカラー}}","ハイライトのカラー"],["{{ハイライトのアルファ}}","ハイライトのアルファ"],["{{グラデーションカラー}}","グラデーションカラー"],["{{グラデーションのアルファ}}","グラデーションのアルファ"],["{{タブの移動・名前を変更}}","タブの移動・名前を変更"],["{{プロジェクトを閉じる}}","プロジェクトを閉じる"],["{{上下に移動}}","上下に移動"],["{{レイヤー変更(ダブルクリック)}}","レイヤー変更(ダブルクリック)"],["{{レイヤーをハイライト}}","レイヤーをハイライト"],["{{レイヤーを非表示}}","レイヤーを非表示"],["{{レイヤーをロック}}","レイヤーをロック"],["{{カーブポインター(ダブルクリックでON/OFF)}}","カーブポインター(ダブルクリックでON/OFF)"],["{{インスタンス名}}","インスタンス名"],["{{ライブラリ内の検索}}","ライブラリ内の検索"],["{{フレームラベル}}","フレームラベル"],["{{プロジェクトが保存されていない場合、このタブのプロジェクトデータを復旧する事はできません。タブを削除しますか？}}","プロジェクトが保存されていない場合、このタブのプロジェクトデータを復旧する事はできません。タブを削除しますか？"]])}}class u extends t{createMapping(){return new Map([["{{書き出し先の選択}}","내보내기 대상 선택"],["{{画質}}","화질"],["{{座標}}","좌표"],["{{MovieClipを編集}}","MovieClip 편집하기"],["{{親の階層へ移動}}","부모 계층으로 이동"],["{{ロックされたレイヤーです}}","잠긴 레이어입니다."],["{{トゥイーンには複数のオブジェクトを設置できません}}","트윈에는 여러 개의 오브젝트를 설치할 수 없습니다."],["{{名前が重複しています}}","이름이 중복되었습니다"],["{{名前は必須です}}","이름은 필수입니다"],["{{基準点}}","기준점"],["{{自由変形ツール}}","자유 변형 도구"],["{{キーフレームに変換}}","키프레임으로 변환"],["{{空のキーフレームに変換}}","빈 키프레임으로 변환"],["{{最初のフレームに移動}}","첫 번째 프레임으로 이동"],["{{最後のフレームに移動}}","마지막 프레임으로 이동"],["{{SWFを解析中}}","SWF 분석 중"],["{{JSONを生成}}","JSON 생성"],["{{ファイルを生成}}","파일 생성"],["{{N2Dファイルの読み込み}}","N2D 파일 불러오기"],["{{JSONの読み込み}}","JSON 불러오기"],["{{データを解凍中}}","데이터 압축 해제 중"],["{{データを圧縮中}}","데이터 압축 중"],["{{エンコード}}","인코딩"],["{{外部ファイルの読み込み}}","외부 파일 불러오기"],["{{バイナリデータを生成}}","바이너리 데이터 생성"],["{{データベースを起動}}","데이터베이스 시작"],["{{データを保存中}}","데이터 저장 중"],["{{完了}}","완료"],["{{ステージ左揃え}}","무대 왼쪽 정렬"],["{{ステージ中央揃え(水平方向)}}","스테이지 중앙 정렬(수평 방향)"],["{{ステージ右揃え}}","무대 오른쪽 정렬"],["{{ステージ上揃え}}","무대 위 정렬"],["{{ステージ中央揃え(垂直方向)}}","스테이지 중앙 정렬(수직 방향)"],["{{ステージ下揃え}}","무대 아래 정렬"],["{{定規}}","눈금자"],["{{表示}}","디스플레이"],["{{ショートカット}}","바로가기"],["{{レイヤーを複製}}","레이어 복제"],["{{未使用のフォルダを削除}}","사용하지 않는 폴더 삭제"],["{{同名のアイテムが存在します}}","동명의 아이템이 존재합니다"],["{{追加ファイル}}","추가 파일"],["{{既存のコンテンツ}}","기존 콘텐츠"],["{{上書きするか、ファイル名を変更して追加するか、スキップを選択する事ができます}}","덮어쓰기, 파일 이름 변경 및 추가 또는 건너뛰기를 선택할 수 있습니다."],["{{全て上書き}}","모두 덮어쓰기"],["{{全てスキップ}}","모두 건너뛰기"],["{{追加・上書き}}","추가 및 덮어쓰기"],["{{スキップ}}","건너뛰기"],["{{表示確認したいフレームを指定}}","확인하고자 하는 프레임을 지정"],["{{ファイル名を指定}}","파일명 지정"],["{{ファイル名}}","파일명"],["{{終了フレームを指定}}","종료 프레임 지정"],["{{開始フレームを指定}}","시작 프레임 지정"],["{{フレーム設定}}","프레임 설정"],["{{書き出し設定}}","내보내기 설정"],["{{ファイル形式の選択}}","파일 형식 선택"],["{{ファイル形式}}","파일 형식"],["{{サイズ設定}}","사이즈 설정"],["{{左上}}","왼쪽 위"],["{{中央上}}","중앙 위"],["{{右上}}","오른쪽 위"],["{{中央左}}","중앙 왼쪽"],["{{中央}}","중앙"],["{{中央右}}","중앙 오른쪽"],["{{左下}}","왼쪽 아래"],["{{中央下}}","중앙 아래"],["{{右下}}","오른쪽 아래"],["{{中心点のX座標}}","중심점의 X 좌표"],["{{中心点のY座標}}","중심점의 Y 좌표"],["{{MovieClipに変換}}","MovieClip으로 변환"],["{{変換}}","변환"],["{{ループ回数}}","루프 횟수"],["{{カーブポインターの削除}}","커브 포인터 제거"],["{{ステージ基準}}","스테이지 기준"],["{{閉じる}}","닫기"],["{{保存}}","보존"],["{{リセット}}","리셋"],["{{スクリーン}}","스크린"],["{{ショートカット設定}}","단축키 설정"],["{{レイヤーカラー}}","레이어드 컬러"],["{{Next2Dを支援する}}","Next2D 지원"],["{{サポート}}","지원"],["{{未使用のアイテムを削除}}","사용하지 않는 항목 삭제"],["{{レイヤーをペースト}}","레이어 붙여넣기"],["{{レイヤーをコピー}}","레이어 복사"],["{{フレームをペースト}}","프레임 붙여넣기"],["{{フレームをコピー}}","프레임 복사"],["{{キーフレームを削除}}","키 프레임 삭제"],["{{キーフレームに空のキーフレームを追加できません}}","키 프레임에 빈 키 프레임을 추가할 수 없습니다"],["{{ズームツール}}","확대/축소 도구"],["{{タイムライン幅の拡大・縮小}}","타임라인 폭 확대/축소"],["{{ガイドレイヤー}}","가이드 레이어"],["{{音量設定}}","볼륨 설정"],["{{サウンドを削除}}","사운드 삭제"],["{{カスタムループ}}","커스텀 루프"],["{{読込のみ}}","읽기 전용"],["{{書込を許可}}","쓰기 허용"],["{{単一行}}","단일 라인"],["{{複数行}}","여러 줄"],["{{自動で折り返し}}","자동 접기"],["{{左寄せ}}","왼쪽 정렬"],["{{中央揃え}}","중앙 정렬"],["{{右寄せ}}","오른쪽 정렬"],["{{放射状グラデーション}}","방사형 그라데이션"],["{{線形グラデーション}}","선형 그라데이션"],["{{画像}}","이미지"],["{{画像選択}}","이미지 선택"],["{{種別}}","종류"],["{{Shapeの色設定}}","Shape의 색상 설정"],["{{変形}}","변형"],["{{カラー効果}}","컬러 효과"],["{{フィルター}}","필터"],["{{Shapeを複製}}","Shape 복제"],["{{読み込み}}","읽기"],["{{新規フォルダー}}","새 폴더"],["{{新規MovieClip}}","신규 MovieClip"],["{{枠に合わせてテキストをリサイズ}}","프레임에 맞게 텍스트 크기 조정"],["{{テキストに合わせて枠をリサイズ}}","텍스트에 맞게 테두리 크기 조정"],["{{リサイズしない}}","크기 조정하지 않음"],["{{フォント}}","폰트"],["{{テキスト}}","텍스트"],["{{ループ}}","루프"],["{{音量}}","음량"],["{{ビデオ}}","동영상"],["{{イージング}}","에이징"],["{{サウンド}}","사운드"],["{{シンボル}}","심볼"],["{{名前}}","이름"],["{{オブジェクト}}","오브젝트"],["{{ステージ設定}}","스테이지 설정"],["{{プレビュー}}","미리보기"],["{{削除}}","삭제"],["{{ペースト}}","붙여넣기"],["{{コピー}}","복사"],["{{プラグインメニュー}}","플러그인 메뉴"],["{{トゥイーン}}","트윈"],["{{カーブポインターの追加}}","커브 포인터 추가"],["{{パスの結合}}","경로 결합"],["{{シェイプ}}","셰이프"],["{{キーフレームに配分}}","키 프레임에 할당"],["{{レイヤーに配分}}","레이어에 배분"],["{{タイムライン}}","타임라인"],["{{整列}}","정렬"],["{{最背面}}","가장 뒷면"],["{{ひとつ背面へ}}","하나 뒷면으로"],["{{ひとつ前面へ}}","하나 앞으로"],["{{最前面}}","최전방"],["{{重ね順}}","중첩 순서"],["{{プラグイン}}","플러그인"],["{{ライブラリ}}","라이브러리"],["{{プロパティ}}","속성"],["{{マスクレイヤー}}","마스크 레이어"],["{{通常レイヤー}}","일반 레이어"],["{{モーショントゥイーンの削除}}","모션 트윈 삭제"],["{{モーショントゥイーンの追加}}","모션 트윈 추가"],["{{モーダル表示}}","모달 디스플레이"],["{{言語}}","언어"],["{{フォーマット}}","형식"],["{{含める}}","포함하다"],["{{含めない}}","포함하지 않음"],["{{使い方、リファレンス}}","사용법, 참고자료"],["{{非表示レイヤー}}","숨겨진 레이어"],["{{設定}}","설정"],["{{デフォルトのループを利用する}}","기본 루프 사용"],["{{フレームピッカー}}","프레임 피커"],["{{左揃え}}","왼쪽 정렬"],["{{中央揃え(水平方向)}}","중앙 정렬(수평 방향)"],["{{右揃え}}","오른쪽 정렬"],["{{上揃え}}","상단 정렬"],["{{中央揃え(垂直方向)}}","중앙 정렬(수직 방향)"],["{{下揃え}}","하단 정렬"],["{{開始フレーム}}","시작 프레임"],["{{終了フレーム}}","종료 프레임"],["{{ループで再生}}","루프 재생"],["{{1回再生}}","1회 재생"],["{{指定したフレームで固定}}","지정한 프레임으로 고정"],["{{1回逆再生}}","1회 역재생"],["{{逆ループで再生}}","역루프로 재생"],["{{画面の拡大・縮小}}","화면 확대/축소"],["{{カスタムイージングデータを保存}}","커스텀 에이징 데이터 저장"],["{{カスタムイージングデータの読込}}","커스텀 에이징 데이터 불러오기"],["{{プレビューのON/OFF}}","미리보기 ON/OFF"],["{{フォント枠サイズ}}","폰트 테두리 크기"],["{{フォント枠カラー}}","폰트 테두리 색상"],["{{オニオンスキン}}","양파 껍질"],["{{バケツツール}}","버킷 도구"],["{{ペンツール}}","펜 도구"],["{{ダブルクリックでカーブポイントが追加されます}}","더블 클릭하면 커브 포인트가 추가됩니다."],["{{選択ツール}}","선택 도구"],["{{Shape変形ツール}}","Shape 변형 도구"],["{{テキストツール}}","텍스트 도구"],["{{矩形ツール}}","직사각형 도구"],["{{楕円ツール}}","타원형 도구"],["{{角丸矩形ツール}}","사각형 원형 직사각형 도구"],["{{塗りのカラー}}","도장 색상"],["{{線のカラー}}","선의 색상"],["{{線の太さ}}","선의 굵기"],["{{プロジェクトデータの読込}}","프로젝트 데이터 불러오기"],["{{プロジェクトデータを保存}}","프로젝트 데이터 저장"],["{{書き出し}}","내보내기"],["{{Discordへ移動}}","Discord로 이동"],["{{バグ報告}}","버그 보고"],["{{設定}}","설정"],["{{タブを追加}}","탭 추가"],["{{タブの一覧を表示・移動}}","탭 목록 표시 및 이동"],["{{スクリプトを追加}}","스크립트 추가"],["{{キーフレームを追加}}","키 프레임 추가"],["{{空のキーフレームを追加}}","빈 키 프레임 추가"],["{{フレームを追加}}","프레임 추가"],["{{フレームを削除}}","프레임 삭제"],["{{再生}}","재생"],["{{停止}}","정지"],["{{ループ設定}}","루프 설정"],["{{レイヤーを追加}}","레이어 추가"],["{{レイヤーを削除}}","레이어 삭제"],["{{全てのレイヤーをハイライト}}","모든 레이어 하이라이트"],["{{全てのレイヤーを非表示}}","모든 레이어 숨기기"],["{{全てのレイヤーをロック}}","모든 레이어 잠금"],["{{比率を固定}}","비율 고정"],["{{ステージの幅}}","무대 폭"],["{{背景色}}","배경색"],["{{ステージの高さ}}","무대 높이"],["{{フレームレート}}","프레임 속도"],["{{シンボル名}}","기호명"],["{{イージング設定}}","이징 설정"],["{{ビデオの音量設定}}","비디오 볼륨 설정"],["{{自動再生}}","자동 재생"],["{{テキストエリアのボーダー設定}}","텍스트 영역의 테두리 설정"],["{{テキスト入力設定}}","텍스트 입력 설정"],["{{フォント選択}}","폰트 선택"],["{{自動サイズ調整}}","자동 크기 조정"],["{{フォントスタイルタイプ}}","폰트 스타일 유형"],["{{行揃え}}","라인 정렬"],["{{改行設定}}","줄 바꿈 설정"],["{{スクロール設定}}","스크롤 설정"],["{{フォントサイズ}}","글꼴 크기"],["{{フォントカラー}}","폰트 색상"],["{{行間}}","행간"],["{{文字幅}}","문자 폭"],["{{左マージン}}","왼쪽 여백"],["{{右マージン}}","오른쪽 여백"],["{{カラー種別の選択}}","색상 종류 선택"],["{{背景画像の選択}}","배경 이미지 선택"],["{{カラーポインターを追加}}","컬러 포인터 추가"],["{{カラー値}}","색상 값"],["{{アルファ(0%-100%)}}","알파 (0%-100%)"],["{{アルファ値}}","알파 값"],["{{選択対象の幅}}","선택 대상의 폭"],["{{選択対象のX座標}}","선택된 X 좌표"],["{{選択対象の高さ}}","선택 가능한 높이"],["{{選択対象のY座標}}","선택 대상의 Y 좌표"],["{{選択対象の幅の伸縮}}","선택 가능한 폭의 신축성"],["{{選択対象を回転}}","선택 대상 회전"],["{{選択対象の高さの伸縮}}","선택 가능한 높이의 신축성"],["{{アルファオフセット(-255〜255)}}","알파 오프셋(-255~255)"],["{{赤(0%-100%)}}","빨간색(0%-100%)"],["{{赤オフセット(-255〜255)}}","적색 오프셋(-255~255)"],["{{緑(0%-100%)}}","녹색(0%-100%)"],["{{緑オフセット(-255〜255)}}","녹색 오프셋(-255~255)"],["{{青(0%-100%)}}","파란색(0%-100%)"],["{{青オフセット(-255〜255)}}","청색 오프셋(-255~255)"],["{{ブレンドモード}}","블렌딩 모드"],["{{フィルターを選択}}","필터 선택"],["{{フィルターを追加}}","필터 추가"],["{{サウンドを追加}}","사운드 추가"],["{{フィルターを表示・非表示する}}","필터 표시/숨기기"],["{{フィルターを削除}}","필터 제거"],["{{水平方向にぼかす}}","수평으로 흐림"],["{{垂直方向にぼかす}}","수직으로 흐림"],["{{フィルター強度}}","필터 강도"],["{{フィルター角度}}","필터 각도"],["{{シャドウのアルファ}}","그림자의 알파"],["{{シャドウのカラー}}","그림자 색상"],["{{フィルター距離}}","필터 거리"],["{{ハイライトのカラー}}","하이라이트 색상"],["{{ハイライトのアルファ}}","하이라이트 알파"],["{{グラデーションカラー}}","그라데이션 컬러"],["{{グラデーションのアルファ}}","그라데이션의 알파"],["{{タブの移動・名前を変更}}","탭 이동 및 이름 변경"],["{{プロジェクトを閉じる}}","프로젝트 닫기"],["{{上下に移動}}","위아래로 이동"],["{{レイヤー変更(ダブルクリック)}}","레이어 변경(더블 클릭)"],["{{レイヤーをハイライト}}","하이라이트 레이어"],["{{レイヤーを非表示}}","레이어 숨기기"],["{{レイヤーをロック}}","레이어 잠금"],["{{カーブポインター(ダブルクリックでON/OFF)}}","커브 포인터(더블클릭으로 ON/OFF)"],["{{インスタンス名}}","인스턴스 이름"],["{{ライブラリ内の検索}}","라이브러리 내 검색"],["{{フレームラベル}}","프레임 라벨"],["{{プロジェクトが保存されていない場合、このタブのプロジェクトデータを復旧する事はできません。タブを削除しますか？}}}}","프로젝트가 저장되지 않은 경우 이 탭의 프로젝트 데이터를 복구할 수 없습니다. 탭을 삭제하시겠습니까?}"]])}}class m extends t{createMapping(){return new Map([["{{書き出し先の選択}}","Eksporta galamērķa izvēle"],["{{画質}}","attēla kvalitāte"],["{{座標}}","koordinātes"],["{{MovieClipを編集}}","Edit MovieClip."],["{{親の階層へ移動}}","Pārcelšanās uz hierarhiju"],["{{ロックされたレイヤーです}}","Bloķēts slānis."],["{{トゥイーンには複数のオブジェクトを設置できません}}","Vienā tween nav iespējams novietot vairākus objektus."],["{{名前が重複しています}}","Nosaukumu dublēšanās."],["{{名前は必須です}}","Nepieciešamais nosaukums."],["{{基準点}}","atskaites punkts"],["{{自由変形ツール}}","Bezmaksas transformēšanas rīks"],["{{キーフレームに変換}}","Konvertēt uz atslēgas kadriem"],["{{空のキーフレームに変換}}","Pārvērsts uz tukšiem atslēgas kadriem."],["{{最初のフレームに移動}}","Pāreja uz pirmo kadru"],["{{最後のフレームに移動}}","Pāreja uz pēdējo kadru"],["{{SWFを解析中}}","Analizējamie SWF."],["{{JSONを生成}}","JSON ģenerēšana"],["{{ファイルを生成}}","Izveidot failu"],["{{N2Dファイルの読み込み}}","N2D failu ielādēšana."],["{{JSONの読み込み}}","JSON lasīšana."],["{{データを解凍中}}","Izpakoti dati."],["{{データを圧縮中}}","Datu saspiešana."],["{{エンコード}}","kodēt"],["{{外部ファイルの読み込み}}","Ārējo failu ielādēšana"],["{{バイナリデータを生成}}","Ģenerēt bināros datus."],["{{データベースを起動}}","Sākuma datubāze"],["{{データを保存中}}","Datu glabāšana."],["{{完了}}","pabeigšana"],["{{ステージ左揃え}}","izlīdzināšana pa kreisi"],["{{ステージ中央揃え(水平方向)}}","Posms centrēts (horizontāli)"],["{{ステージ右揃え}}","Saskaņošana pa labi uz skatuves"],["{{ステージ上揃え}}","uzstāšanās uz skatuves"],["{{ステージ中央揃え(垂直方向)}}","Posms centrēts (vertikāli)"],["{{ステージ下揃え}}","pamatojums"],["{{定規}}","lineāls"],["{{表示}}","displejs"],["{{ショートカット}}","saīsnes"],["{{レイヤーを複製}}","Slāņa dublēšana"],["{{未使用のフォルダを削除}}","Izdzēsiet neizmantotās mapes."],["{{同名のアイテムが存在します}}","Pastāv tāda paša nosaukuma vienība"],["{{追加ファイル}}","papildu fails"],["{{既存のコンテンツ}}","Esošais saturs."],["{{上書きするか、ファイル名を変更して追加するか、スキップを選択する事ができます}}","Varat izvēlēties pārrakstīt, pārdēvēt un pievienot failus vai izlaist."],["{{全て上書き}}","Pārrakstīt visus"],["{{全てスキップ}}","Izlaist visu."],["{{追加・上書き}}","Papildinājumi un pārrakstīšana"],["{{スキップ}}","izlaist"],["{{表示確認したいフレームを指定}}","Norādiet rāmi, kura rādījumu vēlaties pārbaudīt."],["{{ファイル名を指定}}","Norādiet faila nosaukumu"],["{{ファイル名}}","faila nosaukums"],["{{終了フレームを指定}}","Norādiet gala rāmi"],["{{開始フレームを指定}}","Norādiet sākuma rāmi"],["{{フレーム設定}}","rāmja iestatīšana"],["{{書き出し設定}}","Eksporta iestatījumi"],["{{ファイル形式の選択}}","Faila formāta izvēle"],["{{ファイル形式}}","faila formāts"],["{{サイズ設定}}","Sizing"],["{{左上}}","kreisais augšējais"],["{{中央上}}","centrs-augšējais"],["{{右上}}","labajā augšējā pusē"],["{{中央左}}","kreisi centriskais"],["{{中央}}","centrālais"],["{{中央右}}","centriski labējie"],["{{左下}}","apakšējā kreisajā pusē"],["{{中央下}}","zemākā vidējā"],["{{右下}}","labajā apakšējā pusē"],["{{中心点のX座標}}","Centra punkta X koordināta"],["{{中心点のY座標}}","centra punkta Y koordināta"],["{{MovieClipに変換}}","Konvertēt uz MovieClip"],["{{変換}}","transformācija"],["{{ループ回数}}","Cilpu skaits"],["{{カーブポインターの削除}}","Dzēst līknes rādītāju."],["{{ステージ基準}}","Posma kritēriji"],["{{閉じる}}","tuvu"],["{{保存}}","uzglabāšana"],["{{リセット}}","atiestatīt"],["{{スクリーン}}","ekrāns"],["{{ショートカット設定}}","Īsceļu iestatījumi"],["{{レイヤーカラー}}","daudzslāņaina krāsa"],["{{Next2Dを支援する}}","Atbalsts Next2D."],["{{サポート}}","atbalsts"],["{{未使用のアイテムを削除}}","Neizmantoto elementu noņemšana"],["{{レイヤーをペースト}}","Paste slānis."],["{{レイヤーをコピー}}","Kopēt slāni"],["{{フレームをペースト}}","Ielīmējiet rāmi."],["{{フレームをコピー}}","Kopēšanas rāmis."],["{{キーフレームを削除}}","Dzēst atslēgas kadrus."],["{{キーフレームに空のキーフレームを追加できません}}","Nevar pievienot tukšus atslēgas kadrus atslēgas kadriem"],["{{ズームツール}}","Palielināšanas rīks"],["{{タイムライン幅の拡大・縮小}}","Laika joslas platuma paplašināšana un samazināšana"],["{{ガイドレイヤー}}","vadošais slānis"],["{{音量設定}}","Skaļuma iestatījums"],["{{サウンドを削除}}","Noņemt skaņu."],["{{カスタムループ}}","pielāgota cilpa"],["{{読込のみ}}","Tikai lasīt"],["{{書込を許可}}","publicēt atļauju"],["{{単一行}}","vienkārša līnija"],["{{複数行}}","daudzrindu"],["{{自動で折り返し}}","Automātiska apgriešanās"],["{{左寄せ}}","izlīdzināts pa kreisi"],["{{中央揃え}}","centrēšana"],["{{右寄せ}}","labajā pusē izlīdzināts"],["{{放射状グラデーション}}","radiālā gradācija"],["{{線形グラデーション}}","lineārais gradients"],["{{画像}}","Attēls."],["{{画像選択}}","Attēlu atlase"],["{{種別}}","klasifikācija"],["{{Shapeの色設定}}","Formas krāsu iestatījumi"],["{{変形}}","deformācija"],["{{カラー効果}}","krāsu efekts"],["{{フィルター}}","filtrs"],["{{Shapeを複製}}","Dublikāta forma."],["{{読み込み}}","lasīt"],["{{新規フォルダー}}","Jauna mape"],["{{新規MovieClip}}","Jauns videoklips."],["{{枠に合わせてテキストをリサイズ}}","Mainiet teksta izmēru, lai tas atbilstu rāmim."],["{{テキストに合わせて枠をリサイズ}}","Mainiet rāmja lielumu, lai tas atbilstu tekstam."],["{{リサイズしない}}","Izmēru maiņa nav iespējama"],["{{フォント}}","fontu"],["{{テキスト}}","Teksts."],["{{ループ}}","cilpa"],["{{音量}}","skaļums"],["{{ビデオ}}","Video."],["{{イージング}}","atvieglojot"],["{{サウンド}}","skaņa"],["{{シンボル}}","simbols"],["{{名前}}","Nosaukums."],["{{オブジェクト}}","objekts"],["{{ステージ設定}}","Skatuves uzstādīšana"],["{{プレビュー}}","priekšskatījums"],["{{削除}}","dzēšana"],["{{ペースト}}","ielīmēt"],["{{コピー}}","kopēt"],["{{プラグインメニュー}}","Plug-in izvēlne"],["{{トゥイーン}}","starp"],["{{カーブポインターの追加}}","Papildu līknes rādītājs."],["{{パスの結合}}","Ceļu apvienošana"],["{{シェイプ}}","forma"],["{{キーフレームに配分}}","Piešķiršana atslēgas kadriem"],["{{レイヤーに配分}}","Piešķiršana slāņiem"],["{{タイムライン}}","laika grafiks"],["{{整列}}","izlīdzināšana"],["{{最背面}}","jaunākais"],["{{ひとつ背面へ}}","Viens aizmugurē."],["{{ひとつ前面へ}}","Viens uz priekšu."],["{{最前面}}","galvenais"],["{{重ね順}}","superpozīcijas"],["{{プラグイン}}","spraudnis"],["{{ライブラリ}}","bibliotēka"],["{{プロパティ}}","īpašums"],["{{マスクレイヤー}}","maskas slānis"],["{{通常レイヤー}}","Parasts slānis"],["{{モーショントゥイーンの削除}}","Kustību tweens dzēšana."],["{{モーショントゥイーンの追加}}","Papildu kustību tweens."],["{{モーダル表示}}","modāla norāde"],["{{言語}}","Valoda."],["{{フォーマット}}","formāts"],["{{含める}}","iekļaut"],["{{含めない}}","neiekļaut"],["{{使い方、リファレンス}}","Lietošana, atsauce."],["{{非表示レイヤー}}","slēptais slānis"],["{{設定}}","iestatījumi"],["{{デフォルトのループを利用する}}","Izmantojiet noklusējuma cilpu."],["{{フレームピッカー}}","rāmju atlasītājs"],["{{左揃え}}","kreisais pamatojums"],["{{中央揃え(水平方向)}}","Centrēts (horizontāli)"],["{{右揃え}}","pareizais pamatojums"],["{{上揃え}}","pamatojums"],["{{中央揃え(垂直方向)}}","Centrēts (vertikāli)"],["{{下揃え}}","pamatojums"],["{{開始フレーム}}","sākuma rāmis"],["{{終了フレーム}}","gala rāmis"],["{{ループで再生}}","Atskaņošana cilpā"],["{{1回再生}}","1 atskaņošana"],["{{指定したフレームで固定}}","Fiksēts norādītajā rāmī."],["{{1回逆再生}}","1 reversā atskaņošana"],["{{逆ループで再生}}","Atskaņošana reversajā cilpā."],["{{画面の拡大・縮小}}","Ekrāna pietuvināšana un attālināšana"],["{{カスタムイージングデータを保存}}","Saglabāt pielāgotus atvieglojumu datus."],["{{カスタムイージングデータの読込}}","Pielāgotu atvieglojumu datu lasīšana."],["{{プレビューのON/OFF}}","Priekšskatījuma ieslēgšana/izslēgšana."],["{{フォント枠サイズ}}","fonta rāmja izmērs"],["{{フォント枠カラー}}","Fonta rāmja krāsa"],["{{オニオンスキン}}","sīpolu mizas"],["{{バケツツール}}","Kausveida darbarīki"],["{{ペンツール}}","pildspalvas rīks"],["{{ダブルクリックでカーブポイントが追加されます}}","Divreiz noklikšķiniet, lai pievienotu līknes punktu"],["{{選択ツール}}","atlases rīks"],["{{Shape変形ツール}}","Formas deformācijas rīki"],["{{テキストツール}}","teksta rīks"],["{{矩形ツール}}","Taisnstūra rīks"],["{{楕円ツール}}","Elipsveida instrumenti"],["{{角丸矩形ツール}}","Noapaļota stūra taisnstūra rīks"],["{{塗りのカラー}}","Krāsas krāsa"],["{{線のカラー}}","Līniju krāsa"],["{{線の太さ}}","līnijas biezums"],["{{プロジェクトデータの読込}}","Projekta datu lasīšana"],["{{プロジェクトデータを保存}}","Saglabājiet projekta datus."],["{{書き出し}}","ievadteikums vai rindkopa"],["{{Discordへ移動}}","Dodieties uz Discord"],["{{バグ報告}}","ziņojums par kļūdu"],["{{設定}}","iestatījumi"],["{{タブを追加}}","Pievienot cilni."],["{{タブの一覧を表示・移動}}","Rādīt un pārvietot cilņu sarakstu"],["{{スクリプトを追加}}","Pievienot skriptu."],["{{キーフレームを追加}}","Pievienojiet atslēgas kadrus."],["{{空のキーフレームを追加}}","Pievienojiet tukšus atslēgas kadrus."],["{{フレームを追加}}","Pievienot rāmi."],["{{フレームを削除}}","Noņemiet rāmi."],["{{再生}}","reģenerācija"],["{{停止}}","mūzikas, deju u. c. pasākumu pārtraukšana kā sēru zīme."],["{{ループ設定}}","Cilpas iestatījumi"],["{{レイヤーを追加}}","Pievienot slāni."],["{{レイヤーを削除}}","Slāņa dzēšana."],["{{全てのレイヤーをハイライト}}","Izcelt visus slāņus"],["{{全てのレイヤーを非表示}}","Paslēpt visus slāņus"],["{{全てのレイヤーをロック}}","Bloķējiet visus slāņus."],["{{比率を固定}}","Fiksētā attiecība"],["{{ステージの幅}}","Skatuves platums"],["{{背景色}}","fona krāsa"],["{{ステージの高さ}}","Skatuves augstums."],["{{フレームレート}}","kadru nomaiņas ātrums"],["{{シンボル名}}","simbola nosaukums"],["{{イージング設定}}","Atvieglošanas iestatījums"],["{{ビデオの音量設定}}","Video skaļuma iestatījumi"],["{{自動再生}}","automātiskā atskaņošana"],["{{テキストエリアのボーダー設定}}","Robežu iestatījumi teksta apgabaliem."],["{{テキスト入力設定}}","teksta ievades iestatījumi"],["{{フォント選択}}","Fontu izvēle"],["{{自動サイズ調整}}","Automātiska lieluma maiņa"],["{{フォントスタイルタイプ}}","fonta stila veids"],["{{行揃え}}","attaisnot"],["{{改行設定}}","rindas pārtraukuma iestatīšana"],["{{スクロール設定}}","Ritināšanas iestatījumi"],["{{フォントサイズ}}","fonta lielums"],["{{フォントカラー}}","fonta krāsa"],["{{行間}}","starp rindiņām"],["{{文字幅}}","rakstzīmju platums"],["{{左マージン}}","kreisā mala"],["{{右マージン}}","labās malas"],["{{カラー種別の選択}}","Izvēlieties krāsas tipu"],["{{背景画像の選択}}","Fona attēla atlase"],["{{カラーポインターを追加}}","Papildu krāsu rādītājs."],["{{カラー値}}","krāsas vērtība"],["{{アルファ(0%-100%)}}","Alfa (0%-100%)"],["{{アルファ値}}","alfa vērtība"],["{{選択対象の幅}}","Atlases mērķa platums"],["{{選択対象のX座標}}","Atlases mērķa X koordināta"],["{{選択対象の高さ}}","Atlases mērķa augstums"],["{{選択対象のY座標}}","Atlases mērķa Y koordināta"],["{{選択対象の幅の伸縮}}","Atlases mērķa platuma izstiepšana un samazināšana"],["{{選択対象を回転}}","Izvēles pagriešana"],["{{選択対象の高さの伸縮}}","Atlases mērķa augstuma pagarināšana un samazināšana."],["{{アルファオフセット(-255〜255)}}","Alpha nobīde (-255 līdz 255)"],["{{赤(0%-100%)}}","Sarkans (0%-100%)"],["{{赤オフセット(-255〜255)}}","Sarkanais nobīde (-255 līdz 255)"],["{{緑(0%-100%)}}","Zaļš (0%-100%)"],["{{緑オフセット(-255〜255)}}","Zaļās krāsas nobīde (-255 līdz 255)"],["{{青(0%-100%)}}","Zils (0%-100%)"],["{{青オフセット(-255〜255)}}","Zilais nobīde (-255 līdz 255)"],["{{ブレンドモード}}","blendēšanas režīms"],["{{フィルターを選択}}","Atlasiet filtru"],["{{フィルターを追加}}","Pievienot filtru."],["{{サウンドを追加}}","Pievienojiet skaņu."],["{{フィルターを表示・非表示する}}","Rādīt/noslēpt filtrus"],["{{フィルターを削除}}","Noņemt filtrus."],["{{水平方向にぼかす}}","Izplūšana horizontāli."],["{{垂直方向にぼかす}}","Vertikālais izplūdums."],["{{フィルター強度}}","Filtra stiprums"],["{{フィルター角度}}","Filtra leņķis"],["{{シャドウのアルファ}}","Ēnu alfa."],["{{シャドウのカラー}}","Ēnu krāsas."],["{{フィルター距離}}","Filtrēšanas attālums"],["{{ハイライトのカラー}}","Krāsu izcēlumi"],["{{ハイライトのアルファ}}","Izcelt Alpha."],["{{グラデーションカラー}}","gradācijas krāsa"],["{{グラデーションのアルファ}}","Gradienta alfa"],["{{タブの移動・名前を変更}}","Cilnes cilņu pārvietošana un pārdēvēšana"],["{{プロジェクトを閉じる}}","Aizvērt projektu"],["{{上下に移動}}","Pārvietojiet uz augšu un uz leju"],["{{レイヤー変更(ダブルクリック)}}","Slāņa maiņa (dubultklikšķis)"],["{{レイヤーをハイライト}}","Izcelt slāņus."],["{{レイヤーを非表示}}","Slēpt slāņus."],["{{レイヤーをロック}}","Bloķēšanas slāņi."],["{{カーブポインター(ダブルクリックでON/OFF)}}","Līknes rādītājs (divreiz noklikšķiniet, lai ieslēgtu/izslēgtu)"],["{{インスタンス名}}","instances nosaukums"],["{{ライブラリ内の検索}}","Meklēšana bibliotēkā"],["{{フレームラベル}}","rāmja etiķete"],["{{プロジェクトが保存されていない場合、このタブのプロジェクトデータを復旧する事はできません。タブを削除しますか？}}}}","Ja projekts nav saglabāts, šīs cilnes projekta datus nav iespējams atjaunot. Vai vēlaties dzēst šo cilni?}}"]])}}class g extends t{createMapping(){return new Map([["{{書き出し先の選択}}","Eksporto paskirties vietos pasirinkimas"],["{{画質}}","vaizdo kokybė"],["{{座標}}","koordinatės"],["{{MovieClipを編集}}",'Redaguoti "MovieClip".'],["{{親の階層へ移動}}","Perkelti į pirminę hierarchiją"],["{{ロックされたレイヤーです}}","Užrakintas sluoksnis."],["{{トゥイーンには複数のオブジェクトを設置できません}}","Keli objektai negali būti patalpinti ant tween."],["{{名前が重複しています}}","Dubliuojasi pavadinimai."],["{{名前は必須です}}","Reikalingas vardas."],["{{基準点}}","atskaitos taškas"],["{{自由変形ツール}}","Nemokamas transformavimo įrankis"],["{{キーフレームに変換}}","Konvertuota į raktinius kadrus"],["{{空のキーフレームに変換}}","Konvertuojama į tuščius raktinius kadrus."],["{{最初のフレームに移動}}","Pereikite prie pirmojo kadro"],["{{最後のフレームに移動}}","Pereiti į paskutinį kadrą"],["{{SWFを解析中}}","Analizuojami SWF."],["{{JSONを生成}}","Generuoti JSON"],["{{ファイルを生成}}","Sukurti failą"],["{{N2Dファイルの読み込み}}","N2D failų įkėlimas."],["{{JSONの読み込み}}","JSON skaitymas."],["{{データを解凍中}}","Išpakuojami duomenys."],["{{データを圧縮中}}","Duomenų suspaudimas."],["{{エンコード}}","koduoti"],["{{外部ファイルの読み込み}}","Išorinių failų įkėlimas"],["{{バイナリデータを生成}}","Generuoti dvejetainius duomenis."],["{{データベースを起動}}","Duomenų bazės paleidimas"],["{{データを保存中}}","Duomenų saugojimas."],["{{完了}}","užbaigimas"],["{{ステージ左揃え}}","derinimas kairėje pusėje"],["{{ステージ中央揃え(水平方向)}}","Scenos centras (horizontalus)"],["{{ステージ右揃え}}","Scenos dešinės pusės derinimas"],["{{ステージ上揃え}}","pasirodymas scenoje"],["{{ステージ中央揃え(垂直方向)}}","Scenos centravimas (vertikalus)"],["{{ステージ下揃え}}","pagrindimas"],["{{定規}}","liniuotė"],["{{表示}}","rodyti"],["{{ショートカット}}","spartusis klavišas"],["{{レイヤーを複製}}","Dubliuoti sluoksnį"],["{{未使用のフォルダを削除}}","Ištrinkite nenaudojamus aplankus."],["{{同名のアイテムが存在します}}","Yra to paties pavadinimo elementas (-ai)."],["{{追加ファイル}}","papildomas failas"],["{{既存のコンテンツ}}","Esamas turinys."],["{{上書きするか、ファイル名を変更して追加するか、スキップを選択する事ができます}}","Galite pasirinkti perrašyti, pervadinti ir pridėti failus arba praleisti"],["{{全て上書き}}","Perrašyti visus"],["{{全てスキップ}}","Praleisti visus."],["{{追加・上書き}}","Papildymai ir perrašymai"],["{{スキップ}}","praleisti"],["{{表示確認したいフレームを指定}}","Nurodykite rėmelį, kurio rodinį norite patikrinti."],["{{ファイル名を指定}}","Nurodykite failo pavadinimą"],["{{ファイル名}}","failo pavadinimas"],["{{終了フレームを指定}}","Nurodykite galinį rėmelį"],["{{開始フレームを指定}}","Nurodykite pradžios rėmelį"],["{{フレーム設定}}","rėmo nustatymas"],["{{書き出し設定}}","Eksporto nustatymai"],["{{ファイル形式の選択}}","Failo formato pasirinkimas"],["{{ファイル形式}}","failo formatas"],["{{サイズ設定}}","Dydžio nustatymas"],["{{左上}}","kairė-viršutinė"],["{{中央上}}","centras-viršutinis"],["{{右上}}","Dešinysis-viršutinis"],["{{中央左}}","kairiojo centro"],["{{中央}}","centrinis"],["{{中央右}}","centro dešinės"],["{{左下}}","apačioje kairėje"],["{{中央下}}","žemesnio vidurkio"],["{{右下}}","Dešinysis apatinis"],["{{中心点のX座標}}","centro taško X koordinatė"],["{{中心点のY座標}}","centro taško Y koordinatė"],["{{MovieClipに変換}}","Konvertuoti į MovieClip"],["{{変換}}","transformacija"],["{{ループ回数}}","Kilpų skaičius"],["{{カーブポインターの削除}}","Ištrinkite kreivės rodyklę."],["{{ステージ基準}}","Etapo kriterijai"],["{{閉じる}}","arti"],["{{保存}}","saugykla"],["{{リセット}}","iš naujo nustatyti"],["{{スクリーン}}","ekranas"],["{{ショートカット設定}}","Spartieji nustatymai"],["{{レイヤーカラー}}","sluoksniuota spalva"],["{{Next2Dを支援する}}",'Palaikykite "Next2D".'],["{{サポート}}","parama"],["{{未使用のアイテムを削除}}","Pašalinti nenaudojamus elementus"],["{{レイヤーをペースト}}","Pastos sluoksnis."],["{{レイヤーをコピー}}","Kopijuoti sluoksnį"],["{{フレームをペースト}}","Įklijuokite rėmelį."],["{{フレームをコピー}}","Kopijavimo rėmelis."],["{{キーフレームを削除}}","Ištrinkite raktinius kadrus."],["{{キーフレームに空のキーフレームを追加できません}}","Negalima pridėti tuščių raktinių kadrų prie raktinių kadrų"],["{{ズームツール}}","Padidinimo įrankis"],["{{タイムライン幅の拡大・縮小}}","Laiko juostos pločio didinimas ir mažinimas"],["{{ガイドレイヤー}}","kreipiamasis sluoksnis"],["{{音量設定}}","Garsumo nustatymas"],["{{サウンドを削除}}","Pašalinti garsą."],["{{カスタムループ}}","pritaikyta kilpa"],["{{読込のみ}}","Tik skaityti"],["{{書込を許可}}","pašto leidimas"],["{{単一行}}","paprasta linija"],["{{複数行}}","kelių eilučių"],["{{自動で折り返し}}","Automatinis apsisukimas"],["{{左寄せ}}","kairiuoju lygiu"],["{{中央揃え}}","centravimas"],["{{右寄せ}}","dešinėje sulygiuotas"],["{{放射状グラデーション}}","radialinė gradacija"],["{{線形グラデーション}}","linijinis gradientas"],["{{画像}}","Vaizdas."],["{{画像選択}}","Vaizdų pasirinkimas"],["{{種別}}","klasifikacija"],["{{Shapeの色設定}}","Formos spalvos nustatymai"],["{{変形}}","deformacija"],["{{カラー効果}}","spalvų efektas"],["{{フィルター}}","filtras"],["{{Shapeを複製}}","Dubliuoti formą."],["{{読み込み}}","skaityti"],["{{新規フォルダー}}","Naujas aplankas"],["{{新規MovieClip}}","Naujas filmo klipas."],["{{枠に合わせてテキストをリサイズ}}","Pakeiskite teksto dydį, kad jis tilptų į rėmelį."],["{{テキストに合わせて枠をリサイズ}}","Pakeiskite rėmelio dydį, kad jame tilptų tekstas."],["{{リサイズしない}}","Nėra dydžio keitimo"],["{{フォント}}","šriftas"],["{{テキスト}}","Tekstas."],["{{ループ}}","kilpa"],["{{音量}}","garsumas"],["{{ビデオ}}","Vaizdo įrašas."],["{{イージング}}","palengvinimas"],["{{サウンド}}","garsas"],["{{シンボル}}","simbolis"],["{{名前}}","Vardas ir pavardė."],["{{オブジェクト}}","objektas"],["{{ステージ設定}}","Scenografija"],["{{プレビュー}}","peržiūra"],["{{削除}}","ištrynimas"],["{{ペースト}}","įklijuokite"],["{{コピー}}","kopijuoti"],["{{プラグインメニュー}}","Įskiepių meniu"],["{{トゥイーン}}","tarp"],["{{カーブポインターの追加}}","Papildoma kreivės rodyklė."],["{{パスの結合}}","Kelių sujungimas"],["{{シェイプ}}","forma"],["{{キーフレームに配分}}","Priskyrimas raktiniams kadrams"],["{{レイヤーに配分}}","Priskyrimas sluoksniams"],["{{タイムライン}}","laiko juosta"],["{{整列}}","derinimas"],["{{最背面}}","naujausias"],["{{ひとつ背面へ}}","Vienas iš jų yra gale."],["{{ひとつ前面へ}}","Vienas į priekį."],["{{最前面}}","svarbiausias"],["{{重ね順}}","tvarka"],["{{プラグイン}}","papildinys"],["{{ライブラリ}}","biblioteka"],["{{プロパティ}}","nuosavybė"],["{{マスクレイヤー}}","kaukės sluoksnis"],["{{通常レイヤー}}","Normalus sluoksnis"],["{{モーショントゥイーンの削除}}","Judesio porūšių pašalinimas."],["{{モーショントゥイーンの追加}}","Papildomi judesio dvyniai."],["{{モーダル表示}}","modalinė indikacija"],["{{言語}}","Kalba."],["{{フォーマット}}","formatas"],["{{含める}}","įtraukti"],["{{含めない}}","neįtraukti"],["{{使い方、リファレンス}}","Naudojimas, nuoroda."],["{{非表示レイヤー}}","paslėptas sluoksnis"],["{{設定}}","nustatymas"],["{{デフォルトのループを利用する}}","Naudokite numatytąją kilpą."],["{{フレームピッカー}}","rėmo rinktuvas"],["{{左揃え}}","kairysis pagrindimas"],["{{中央揃え(水平方向)}}","Centruotas (horizontalus)"],["{{右揃え}}","teisingas pagrindimas"],["{{上揃え}}","pagrindimas"],["{{中央揃え(垂直方向)}}","Centruotas (vertikalus)"],["{{下揃え}}","pagrindimas"],["{{開始フレーム}}","pradžios rėmas"],["{{終了フレーム}}","Galinis rėmas"],["{{ループで再生}}","Groti pagal kilpą"],["{{1回再生}}","1 atkūrimas"],["{{指定したフレームで固定}}","Fiksuojama nurodytame rėmelyje."],["{{1回逆再生}}","1 atvirkštinis atkūrimas"],["{{逆ループで再生}}","Atkūrimas atvirkštine kilpa."],["{{画面の拡大・縮小}}","Ekrano priartinimas ir atitolinimas"],["{{カスタムイージングデータを保存}}","Įrašykite pasirinktinio palengvinimo duomenis."],["{{カスタムイージングデータの読込}}","Pasirinktinio palengvinimo duomenų skaitymas."],["{{プレビューのON/OFF}}","Peržiūros įjungimas / išjungimas."],["{{フォント枠サイズ}}","šrifto rėmelio dydis"],["{{フォント枠カラー}}","Šrifto rėmelio spalva"],["{{オニオンスキン}}","svogūnų lukštai"],["{{バケツツール}}","Kibiriniai įrankiai"],["{{ペンツール}}","rašiklio įrankis"],["{{ダブルクリックでカーブポイントが追加されます}}","Dukart spustelėkite, kad pridėtumėte kreivės tašką"],["{{選択ツール}}","atrankos įrankis"],["{{Shape変形ツール}}","Formos deformacijos įrankiai"],["{{テキストツール}}","teksto įrankis"],["{{矩形ツール}}","Stačiakampio įrankis"],["{{楕円ツール}}","Elipsiniai įrankiai"],["{{角丸矩形ツール}}","Užapvalinto stačiakampio kampų įrankis"],["{{塗りのカラー}}","Dažų spalva"],["{{線のカラー}}","Linijos spalva"],["{{線の太さ}}","linijos storis"],["{{プロジェクトデータの読込}}","Projekto duomenų skaitymas"],["{{プロジェクトデータを保存}}","Išsaugoti projekto duomenis."],["{{書き出し}}","įžanginis sakinys arba pastraipa"],["{{Discordへ移動}}",'Eikite į "Discord'],["{{バグ報告}}","pranešimas apie klaidą"],["{{設定}}","nustatymas (kompiuterio, failo ir pan.)"],["{{タブを追加}}","Pridėti skirtuką."],["{{タブの一覧を表示・移動}}","Skirtukų sąrašo rodymas ir perkėlimas"],["{{スクリプトを追加}}","Pridėti scenarijų."],["{{キーフレームを追加}}","Pridėti raktinius kadrus."],["{{空のキーフレームを追加}}","Pridėkite tuščių raktinių kadrų."],["{{フレームを追加}}","Pridėti rėmelį."],["{{フレームを削除}}","Išimkite rėmą."],["{{再生}}","regeneracija"],["{{停止}}","muzikos, šokių ir kt. sustabdymas kaip gedulo ženklas."],["{{ループ設定}}","Kilpos nustatymai"],["{{レイヤーを追加}}","Pridėti sluoksnį."],["{{レイヤーを削除}}","Ištrinkite sluoksnį."],["{{全てのレイヤーをハイライト}}","Paryškinkite visus sluoksnius"],["{{全てのレイヤーを非表示}}","Paslėpti visus sluoksnius"],["{{全てのレイヤーをロック}}","Užrakinkite visus sluoksnius."],["{{比率を固定}}","Fiksuotas santykis"],["{{ステージの幅}}","Scenos plotis"],["{{背景色}}","fono spalva"],["{{ステージの高さ}}","Scenos aukštis."],["{{フレームレート}}","kadrų dažnis"],["{{シンボル名}}","simbolio pavadinimas"],["{{イージング設定}}","Lengvesnis nustatymas"],["{{ビデオの音量設定}}","Vaizdo įrašų garsumo nustatymai"],["{{自動再生}}","automatinis paleidimas"],["{{テキストエリアのボーダー設定}}","Teksto sričių ribų nustatymai."],["{{テキスト入力設定}}","teksto įvedimo nustatymas"],["{{フォント選択}}","Šrifto pasirinkimas"],["{{自動サイズ調整}}","Automatinis dydžio keitimas"],["{{フォントスタイルタイプ}}","šrifto stiliaus tipas"],["{{行揃え}}","pateisinti"],["{{改行設定}}","eilutės pertraukos nustatymas"],["{{スクロール設定}}","Slinkimo nustatymai"],["{{フォントサイズ}}","šrifto dydis"],["{{フォントカラー}}","šrifto spalva"],["{{行間}}","tarp eilučių"],["{{文字幅}}","simbolių plotis"],["{{左マージン}}","kairioji paraštė"],["{{右マージン}}","dešinioji paraštė"],["{{カラー種別の選択}}","Pasirinkite spalvos tipą"],["{{背景画像の選択}}","Fono vaizdo pasirinkimas"],["{{カラーポインターを追加}}","Papildoma spalvų rodyklė."],["{{カラー値}}","spalvos vertė"],["{{アルファ(0%-100%)}}","Alfa (0%-100%)"],["{{アルファ値}}","alfa reikšmė"],["{{選択対象の幅}}","Atrankos tikslo plotis"],["{{選択対象のX座標}}","Atrankos tikslo X koordinatė"],["{{選択対象の高さ}}","Atrankos tikslo aukštis"],["{{選択対象のY座標}}","Atrankos tikslo Y koordinatė"],["{{選択対象の幅の伸縮}}","Pasirinkimo taikinio pločio didinimas ir mažinimas"],["{{選択対象を回転}}","Pasirinkimo pasukimas"],["{{選択対象の高さの伸縮}}","Atrankos taikinio aukščio didinimas ir mažinimas."],["{{アルファオフセット(-255〜255)}}","Alfa poslinkis (nuo -255 iki 255)"],["{{赤(0%-100%)}}","Raudona (0-100 %)"],["{{赤オフセット(-255〜255)}}","Raudonos spalvos poslinkis (nuo -255 iki 255)"],["{{緑(0%-100%)}}","Žalia (0-100 %)"],["{{緑オフセット(-255〜255)}}","Žalios spalvos poslinkis (nuo -255 iki 255)"],["{{青(0%-100%)}}","Mėlyna (0-100 %)"],["{{青オフセット(-255〜255)}}","Mėlynos spalvos poslinkis (nuo -255 iki 255)"],["{{ブレンドモード}}","maišymo režimas"],["{{フィルターを選択}}","Pasirinkite filtrą"],["{{フィルターを追加}}","Pridėti filtrą."],["{{サウンドを追加}}","Pridėkite garsą."],["{{フィルターを表示・非表示する}}","Rodyti / slėpti filtrus"],["{{フィルターを削除}}","Pašalinti filtrus."],["{{水平方向にぼかす}}","Horizontaliai išsklaidykite vaizdą."],["{{垂直方向にぼかす}}","Vertikalus suliejimas."],["{{フィルター強度}}","Filtro stiprumas"],["{{フィルター角度}}","Filtro kampas"],["{{シャドウのアルファ}}","Šešėlių Alfa."],["{{シャドウのカラー}}","Šešėlių spalvos."],["{{フィルター距離}}","Atstumas iki filtro"],["{{ハイライトのカラー}}","Spalviniai akcentai"],["{{ハイライトのアルファ}}",'Svarbiausias "Alpha".'],["{{グラデーションカラー}}","gradacijos spalva"],["{{グラデーションのアルファ}}","gradiento alfa"],["{{タブの移動・名前を変更}}","Skirtukų perkėlimas ir pervadinimas"],["{{プロジェクトを閉じる}}","Uždaryti projektą"],["{{上下に移動}}","Judėjimas aukštyn ir žemyn"],["{{レイヤー変更(ダブルクリック)}}","Sluoksnio keitimas (dukart spustelėkite)"],["{{レイヤーをハイライト}}","Paryškinti sluoksniai."],["{{レイヤーを非表示}}","Paslėpti sluoksnius."],["{{レイヤーをロック}}","Užrakto sluoksniai."],["{{カーブポインター(ダブルクリックでON/OFF)}}","Kreivinė rodyklė (dukart spustelėkite, kad įjungtumėte / išjungtumėte)"],["{{インスタンス名}}","egzemplioriaus pavadinimas"],["{{ライブラリ内の検索}}","Paieška bibliotekoje"],["{{フレームラベル}}","rėmo etiketė"],["{{プロジェクトが保存されていない場合、このタブのプロジェクトデータを復旧する事はできません。タブを削除しますか？}}}}","Jei projektas neišsaugotas, šio skirtuko projekto duomenų atkurti neįmanoma. Ar norite ištrinti skirtuką?}}"]])}}class p extends t{createMapping(){return new Map([["{{書き出し先の選択}}","De uitvoerbestemming selecteren"],["{{画質}}","beeldkwaliteit"],["{{座標}}","coördinaat"],["{{MovieClipを編集}}","Bewerk MovieClip."],["{{親の階層へ移動}}","Ga naar de bovenliggende hiërarchie"],["{{ロックされたレイヤーです}}","Gesloten laag."],["{{トゥイーンには複数のオブジェクトを設置できません}}","Meerdere objecten kunnen niet op een tween geplaatst worden."],["{{名前が重複しています}}","Dubbele namen."],["{{名前は必須です}}","Naam nodig."],["{{基準点}}","referentiepunt"],["{{自由変形ツール}}","Gratis transformatiegereedschap"],["{{キーフレームに変換}}","Geconverteerd naar keyframes"],["{{空のキーフレームに変換}}","Geconverteerd naar lege keyframes."],["{{最初のフレームに移動}}","Ga naar het eerste frame"],["{{最後のフレームに移動}}","Ga naar het laatste frame"],["{{SWFを解析中}}","SWF die wordt geanalyseerd."],["{{JSONを生成}}","JSON genereren"],["{{ファイルを生成}}","Bestand genereren"],["{{N2Dファイルの読み込み}}","Laden van N2D bestanden."],["{{JSONの読み込み}}","JSON lezen."],["{{データを解凍中}}","Gegevens worden uitgepakt."],["{{データを圧縮中}}","Gegevens comprimeren."],["{{エンコード}}","encodeer"],["{{外部ファイルの読み込み}}","Laden van externe bestanden"],["{{バイナリデータを生成}}","Genereer binaire gegevens."],["{{データベースを起動}}","Start database"],["{{データを保存中}}","Gegevens opslaan."],["{{完了}}","voltooiing"],["{{ステージ左揃え}}","toneel links uitlijnen"],["{{ステージ中央揃え(水平方向)}}","Stadium gecentreerd (horizontaal)"],["{{ステージ右揃え}}","Rechts uitlijnen"],["{{ステージ上揃え}}","optreden op het podium"],["{{ステージ中央揃え(垂直方向)}}","Podium gecentreerd (verticaal)"],["{{ステージ下揃え}}","verantwoording"],["{{定規}}","liniaal"],["{{表示}}","display"],["{{ショートカット}}","snelkoppeling"],["{{レイヤーを複製}}","Dupliceer laag"],["{{未使用のフォルダを削除}}","Verwijder ongebruikte mappen."],["{{同名のアイテムが存在します}}","Item(s) met dezelfde naam bestaan."],["{{追加ファイル}}","aanvullend bestand"],["{{既存のコンテンツ}}","Bestaande inhoud."],["{{上書きするか、ファイル名を変更して追加するか、スキップを選択する事ができます}}","U kunt bestanden overschrijven, hernoemen en toevoegen of overslaan."],["{{全て上書き}}","Alles overschrijven"],["{{全てスキップ}}","Sla alles over."],["{{追加・上書き}}","Toevoegingen en overschrijvingen"],["{{スキップ}}","skip"],["{{表示確認したいフレームを指定}}","Specificeer het frame waarvan u de weergave wilt controleren."],["{{ファイル名を指定}}","Bestandsnaam opgeven"],["{{ファイル名}}","bestandsnaam"],["{{終了フレームを指定}}","Eindlijst opgeven"],["{{開始フレームを指定}}","Bepaal het startframe"],["{{フレーム設定}}","frame-instelling"],["{{書き出し設定}}","Exportinstellingen"],["{{ファイル形式の選択}}","Selectie van het bestandsformaat"],["{{ファイル形式}}","bestandsformaat"],["{{サイズ設定}}","Dimensionering"],["{{左上}}","links-boven"],["{{中央上}}","midden-boven"],["{{右上}}","rechts-boven"],["{{中央左}}","centrum-links"],["{{中央}}","centraal"],["{{中央右}}","centrumrechts"],["{{左下}}","linksonder"],["{{中央下}}","lager middelbaar"],["{{右下}}","rechtsonder"],["{{中心点のX座標}}","X-coördinaat van het middelpunt"],["{{中心点のY座標}}","Y-coördinaat van het middelpunt"],["{{MovieClipに変換}}","Omzetten naar MovieClip"],["{{変換}}","transformatie"],["{{ループ回数}}","Aantal lussen"],["{{カーブポインターの削除}}","Wis curve pointer."],["{{ステージ基準}}","Stadium Criteria"],["{{閉じる}}","dichtbij"],["{{保存}}","opslag"],["{{リセット}}","reset"],["{{スクリーン}}","scherm"],["{{ショートカット設定}}","Snelkoppelingsinstellingen"],["{{レイヤーカラー}}","gelaagde kleur"],["{{Next2Dを支援する}}","Steun Next2D."],["{{サポート}}","steun"],["{{未使用のアイテムを削除}}","Verwijder ongebruikte items"],["{{レイヤーをペースト}}","Plaklaag."],["{{レイヤーをコピー}}","Kopieer laag"],["{{フレームをペースト}}","Frame plakken."],["{{フレームをコピー}}","Kopieerframe."],["{{キーフレームを削除}}","Verwijder keyframes."],["{{キーフレームに空のキーフレームを追加できません}}","Kan geen lege keyframes toevoegen aan keyframes"],["{{ズームツール}}","Zoom gereedschap"],["{{タイムライン幅の拡大・縮小}}","De breedte van de tijdlijn vergroten en verkleinen"],["{{ガイドレイヤー}}","gidslaag"],["{{音量設定}}","Volume-instelling"],["{{サウンドを削除}}","Verwijder het geluid."],["{{カスタムループ}}","aangepaste lus"],["{{読込のみ}}","Alleen lezen"],["{{書込を許可}}","postvergunning"],["{{単一行}}","eenvoudige lijn"],["{{複数行}}","meerregelig"],["{{自動で折り返し}}","Automatische ommekeer"],["{{左寄せ}}","links uitgelijnd"],["{{中央揃え}}","centrering"],["{{右寄せ}}","rechts uitgelijnd"],["{{放射状グラデーション}}","radiale gradatie"],["{{線形グラデーション}}","lineair verloop"],["{{画像}}","Beeld."],["{{画像選択}}","Afbeelding selectie"],["{{種別}}","classificatie"],["{{Shapeの色設定}}","Vorm kleur instellingen"],["{{変形}}","vervorming"],["{{カラー効果}}","kleureffect"],["{{フィルター}}","filter"],["{{Shapeを複製}}","Dubbele vorm."],["{{読み込み}}","lees in"],["{{新規フォルダー}}","Nieuwe map"],["{{新規MovieClip}}","Nieuwe MovieClip."],["{{枠に合わせてテキストをリサイズ}}","Formaat van de tekst aanpassen aan het kader."],["{{テキストに合わせて枠をリサイズ}}","Formaat van het kader aanpassen aan de tekst."],["{{リサイズしない}}","Geen resizing"],["{{フォント}}","lettertype"],["{{テキスト}}","Tekst."],["{{ループ}}","lus"],["{{音量}}","volume"],["{{ビデオ}}","Video."],["{{イージング}}","versoepeling van"],["{{サウンド}}","geluid"],["{{シンボル}}","symbool"],["{{名前}}","Naam."],["{{オブジェクト}}","object"],["{{ステージ設定}}","Decor"],["{{プレビュー}}","voorbeeld"],["{{削除}}","verwijdering"],["{{ペースト}}","pasta"],["{{コピー}}","kopie"],["{{プラグインメニュー}}","Insteekmenu"],["{{トゥイーン}}","tween"],["{{カーブポインターの追加}}","Extra kromme wijzer."],["{{パスの結合}}","Samenvoegen van paden"],["{{シェイプ}}","vorm"],["{{キーフレームに配分}}","Toewijzing aan keyframes"],["{{レイヤーに配分}}","Toewijzing aan lagen"],["{{タイムライン}}","tijdlijn"],["{{整列}}","uitlijning"],["{{最背面}}","meest recente"],["{{ひとつ背面へ}}","Eén aan de achterkant."],["{{ひとつ前面へ}}","Eén naar voren."],["{{最前面}}","voorname"],["{{重ね順}}","superpositie"],["{{プラグイン}}","plug-in"],["{{ライブラリ}}","bibliotheek"],["{{プロパティ}}","eigendom"],["{{マスクレイヤー}}","maskerlaag"],["{{通常レイヤー}}","Normale laag"],["{{モーショントゥイーンの削除}}","Schrappen van motion tweens."],["{{モーショントゥイーンの追加}}","Extra motion tweens."],["{{モーダル表示}}","modale aanduiding"],["{{言語}}","Taal."],["{{フォーマット}}","formaat"],["{{含める}}","omvatten"],["{{含めない}}","niet op te nemen"],["{{使い方、リファレンス}}","Gebruik, referentie."],["{{非表示レイヤー}}","verborgen laag"],["{{設定}}","instelling"],["{{デフォルトのループを利用する}}","Gebruik de standaard lus."],["{{フレームピッカー}}","lijsttrekker"],["{{左揃え}}","linkse rechtvaardiging"],["{{中央揃え(水平方向)}}","Gecentreerd (horizontaal)"],["{{右揃え}}","juiste rechtvaardiging"],["{{上揃え}}","verantwoording"],["{{中央揃え(垂直方向)}}","Gecentreerd (verticaal)"],["{{下揃え}}","verantwoording"],["{{開始フレーム}}","startframe"],["{{終了フレーム}}","eindframe"],["{{ループで再生}}","Afspelen in lus"],["{{1回再生}}","1 playback"],["{{指定したフレームで固定}}","Vast in het opgegeven kader."],["{{1回逆再生}}","1 omgekeerde weergave"],["{{逆ループで再生}}","Afspelen in omgekeerde lus."],["{{画面の拡大・縮小}}","In- en uitzoomen op het scherm"],["{{カスタムイージングデータを保存}}","Aangepaste versoepelingsgegevens opslaan."],["{{カスタムイージングデータの読込}}","Inlezen van aangepaste versoepelingsgegevens."],["{{プレビューのON/OFF}}","Preview aan/uit."],["{{フォント枠サイズ}}","lettergrootte frame"],["{{フォント枠カラー}}","Kleur van het lettertype"],["{{オニオンスキン}}","uienhuid"],["{{バケツツール}}","Emmer gereedschap"],["{{ペンツール}}","pengereedschap"],["{{ダブルクリックでカーブポイントが追加されます}}","Dubbelklik om een curvepunt toe te voegen"],["{{選択ツール}}","selectiegereedschap"],["{{Shape変形ツール}}","Gereedschappen voor vormvervorming"],["{{テキストツール}}","teksttool"],["{{矩形ツール}}","Rechthoek Gereedschap"],["{{楕円ツール}}","Elliptisch gereedschap"],["{{角丸矩形ツール}}","Afgeronde hoek rechthoek gereedschap"],["{{塗りのカラー}}","Kleur van de verf"],["{{線のカラー}}","Lijnkleur"],["{{線の太さ}}","lijndikte"],["{{プロジェクトデータの読込}}","Projectgegevens lezen"],["{{プロジェクトデータを保存}}","Projectgegevens opslaan."],["{{書き出し}}","openingszin of -alinea"],["{{Discordへ移動}}","Ga naar Discord"],["{{バグ報告}}","bugrapport"],["{{設定}}","instelling"],["{{タブを追加}}","Tabblad toevoegen."],["{{タブの一覧を表示・移動}}","De lijst met tabbladen weergeven en verplaatsen"],["{{スクリプトを追加}}","Voeg script toe."],["{{キーフレームを追加}}","Voeg keyframes toe."],["{{空のキーフレームを追加}}","Voeg lege keyframes toe."],["{{フレームを追加}}","Frame toevoegen."],["{{フレームを削除}}","Verwijder het frame."],["{{再生}}","regeneratie"],["{{停止}}","opschorting van muziek, dans, enz. als teken van rouw"],["{{ループ設定}}","Lusinstellingen"],["{{レイヤーを追加}}","Voeg laag toe."],["{{レイヤーを削除}}","Laag verwijderen."],["{{全てのレイヤーをハイライト}}","Markeer alle lagen"],["{{全てのレイヤーを非表示}}","Alle lagen verbergen"],["{{全てのレイヤーをロック}}","Zet alle lagen op slot."],["{{比率を固定}}","Vaste verhouding"],["{{ステージの幅}}","Breedte van het podium"],["{{背景色}}","achtergrondkleur"],["{{ステージの高さ}}","Hoogte van het podium."],["{{フレームレート}}","beeldsnelheid"],["{{シンボル名}}","symboolnaam"],["{{イージング設定}}","Gemakkelijke instelling"],["{{ビデオの音量設定}}","Instellingen videovolume"],["{{自動再生}}","autoplay"],["{{テキストエリアのボーダー設定}}","Randinstellingen voor tekstgebieden."],["{{テキスト入力設定}}","instelling voor tekstinvoer"],["{{フォント選択}}","Selectie van het lettertype"],["{{自動サイズ調整}}","Auto resizing"],["{{フォントスタイルタイプ}}","lettertype stijl"],["{{行揃え}}","rechtvaardigen"],["{{改行設定}}","regelafbreking instellen"],["{{スクロール設定}}","Scroll-instellingen"],["{{フォントサイズ}}","lettergrootte"],["{{フォントカラー}}","letterkleur"],["{{行間}}","tussen de lijnen"],["{{文字幅}}","karakterbreedte"],["{{左マージン}}","linkermarge"],["{{右マージン}}","rechtermarge"],["{{カラー種別の選択}}","Selecteer een kleurtype"],["{{背景画像の選択}}","Een achtergrondafbeelding kiezen"],["{{カラーポインターを追加}}","Extra kleurenwijzer."],["{{カラー値}}","kleurwaarde"],["{{アルファ(0%-100%)}}","Alfa (0%-100%)"],["{{アルファ値}}","alfa-waarde"],["{{選択対象の幅}}","Breedte van selectiedoel"],["{{選択対象のX座標}}","X-coördinaat van het selectiedoel"],["{{選択対象の高さ}}","Hoogte van het selectiedoel"],["{{選択対象のY座標}}","Y-coördinaat van het selectiedoel"],["{{選択対象の幅の伸縮}}","Uitrekken en verkleinen van de breedte van het selectiedoel"],["{{選択対象を回転}}","Selectie draaien"],["{{選択対象の高さの伸縮}}","Uitbreiding en inkrimping van de hoogte van het selectiedoel."],["{{アルファオフセット(-255〜255)}}","Alpha offset (-255 tot 255)"],["{{赤(0%-100%)}}","Rood (0%-100%)"],["{{赤オフセット(-255〜255)}}","Rode offset (-255 tot 255)"],["{{緑(0%-100%)}}","Groen (0%-100%)"],["{{緑オフセット(-255〜255)}}","Groene compensatie (-255 tot 255)"],["{{青(0%-100%)}}","Blauw (0%-100%)"],["{{青オフセット(-255〜255)}}","Blauw offset (-255 tot 255)"],["{{ブレンドモード}}","mengmodus"],["{{フィルターを選択}}","Filter selecteren"],["{{フィルターを追加}}","Filter toevoegen."],["{{サウンドを追加}}","Voeg geluid toe."],["{{フィルターを表示・非表示する}}","Filters tonen/verbergen"],["{{フィルターを削除}}","Verwijder filters."],["{{水平方向にぼかす}}","Horizontaal vervagen."],["{{垂直方向にぼかす}}","Verticale onscherpte."],["{{フィルター強度}}","Filtersterkte"],["{{フィルター角度}}","Filterhoek"],["{{シャドウのアルファ}}","Shadow's Alpha."],["{{シャドウのカラー}}","Schaduwkleuren."],["{{フィルター距離}}","Filterafstand"],["{{ハイライトのカラー}}","Kleur highlights"],["{{ハイライトのアルファ}}","Highlight Alpha."],["{{グラデーションカラー}}","gradatie kleur"],["{{グラデーションのアルファ}}","Alfa van het verloop"],["{{タブの移動・名前を変更}}","Tabbladen verplaatsen en hernoemen"],["{{プロジェクトを閉じる}}","Project afsluiten"],["{{上下に移動}}","Op en neer bewegen"],["{{レイヤー変更(ダブルクリック)}}","Laag wijzigen (dubbelklikken)"],["{{レイヤーをハイライト}}","Markeer lagen."],["{{レイヤーを非表示}}","Lagen verbergen."],["{{レイヤーをロック}}","Slotlagen."],["{{カーブポインター(ダブルクリックでON/OFF)}}","Kromme aanwijzer (dubbelklik om aan/uit te zetten)"],["{{インスタンス名}}","instantie-naam"],["{{ライブラリ内の検索}}","Zoeken in de bibliotheek"],["{{フレームラベル}}","framelabel"],["{{プロジェクトが保存されていない場合、このタブのプロジェクトデータを復旧する事はできません。タブを削除しますか？}}}}","Als het project niet wordt opgeslagen, kunnen de projectgegevens voor dit tabblad niet worden hersteld. Wilt u het tabblad verwijderen?}"]])}}class f extends t{createMapping(){return new Map([["{{書き出し先の選択}}","Wybór miejsca przeznaczenia eksportu"],["{{画質}}","jakość obrazu"],["{{座標}}","współrzędna"],["{{MovieClipを編集}}","Edytuj MovieClip."],["{{親の階層へ移動}}","Przejdź do hierarchii nadrzędnej"],["{{ロックされたレイヤーです}}","Zablokowana warstwa."],["{{トゥイーンには複数のオブジェクトを設置できません}}","Nie można umieścić wielu obiektów na tweenze."],["{{名前が重複しています}}","Duplikaty nazwisk."],["{{名前は必須です}}","Wymagana nazwa."],["{{基準点}}","punkt odniesienia"],["{{自由変形ツール}}","Darmowe narzędzie do transformacji"],["{{キーフレームに変換}}","Przekształcone w klatki kluczowe"],["{{空のキーフレームに変換}}","Konwersja na puste klatki kluczowe."],["{{最初のフレームに移動}}","Przejdź do pierwszej klatki"],["{{最後のフレームに移動}}","Przejdź do ostatniej klatki"],["{{SWFを解析中}}","Analizowane PFM."],["{{JSONを生成}}","Wygeneruj JSON"],["{{ファイルを生成}}","Wygenerować plik"],["{{N2Dファイルの読み込み}}","Ładowanie plików N2D."],["{{JSONの読み込み}}","Czytanie JSON."],["{{データを解凍中}}","Dane w trakcie rozpakowywania."],["{{データを圧縮中}}","Kompresja danych."],["{{エンコード}}","kodować"],["{{外部ファイルの読み込み}}","Ładowanie plików zewnętrznych"],["{{バイナリデータを生成}}","Generowanie danych binarnych."],["{{データベースを起動}}","Uruchomić bazę danych"],["{{データを保存中}}","Przechowywanie danych."],["{{完了}}","uzupełnienie"],["{{ステージ左揃え}}","wyrównanie do lewej sceny"],["{{ステージ中央揃え(水平方向)}}","Scena wyśrodkowana (pozioma)"],["{{ステージ右揃え}}","Ustawienie w prawo na scenie"],["{{ステージ上揃え}}","występ na scenie"],["{{ステージ中央揃え(垂直方向)}}","Scena wyśrodkowana (pionowa)"],["{{ステージ下揃え}}","uzasadnienie"],["{{定規}}","linijka"],["{{表示}}","wyświetlacz"],["{{ショートカット}}","skrót"],["{{レイヤーを複製}}","Powielanie warstwy"],["{{未使用のフォルダを削除}}","Usuń nieużywane foldery."],["{{同名のアイテムが存在します}}","Pozycja(y) o tej samej nazwie istnieje(ą)."],["{{追加ファイル}}","dodatkowy plik"],["{{既存のコンテンツ}}","Treść istniejąca."],["{{上書きするか、ファイル名を変更して追加するか、スキップを選択する事ができます}}","Możesz wybrać nadpisanie, zmianę nazwy i dodanie plików lub pominięcie"],["{{全て上書き}}","Nadpisz wszystkie"],["{{全てスキップ}}","Pomiń wszystkie."],["{{追加・上書き}}","Uzupełnienia i nadpisania"],["{{スキップ}}","pomiń"],["{{表示確認したいフレームを指定}}","Określ ramkę, której wyświetlanie chcesz sprawdzić."],["{{ファイル名を指定}}","Określenie nazwy pliku"],["{{ファイル名}}","nazwa pliku"],["{{終了フレームを指定}}","Określenie ramy końcowej"],["{{開始フレームを指定}}","Określenie ramki początkowej"],["{{フレーム設定}}","ustawienie ramy"],["{{書き出し設定}}","Ustawienia eksportu"],["{{ファイル形式の選択}}","Wybór formatu pliku"],["{{ファイル形式}}","format pliku"],["{{サイズ設定}}","Sizing"],["{{左上}}","lewy górny"],["{{中央上}}","środek-góra"],["{{右上}}","prawy górny"],["{{中央左}}","centrolewicowy"],["{{中央}}","centralny"],["{{中央右}}","centroprawica"],["{{左下}}","lewa dolna"],["{{中央下}}","niższy-średni"],["{{右下}}","prawy dolny"],["{{中心点のX座標}}","Współrzędna X punktu środkowego"],["{{中心点のY座標}}","Współrzędna Y punktu środkowego"],["{{MovieClipに変換}}","Konwertowanie do formatu MovieClip"],["{{変換}}","transformacja"],["{{ループ回数}}","Liczba pętli"],["{{カーブポインターの削除}}","Usuń wskaźnik krzywej."],["{{ステージ基準}}","Kryteria etapowe"],["{{閉じる}}","blisko"],["{{保存}}","magazynowanie"],["{{リセット}}","resetowanie"],["{{スクリーン}}","ekran"],["{{ショートカット設定}}","Ustawienia skrótów"],["{{レイヤーカラー}}","kolor warstwowy"],["{{Next2Dを支援する}}","Wspieraj Next2D."],["{{サポート}}","wsparcie"],["{{未使用のアイテムを削除}}","Usuń nieużywane elementy"],["{{レイヤーをペースト}}","Warstwa pasty."],["{{レイヤーをコピー}}","Kopiuj warstwę"],["{{フレームをペースト}}","Wklej ramkę."],["{{フレームをコピー}}","Kopia ramki."],["{{キーフレームを削除}}","Usuń klatki kluczowe."],["{{キーフレームに空のキーフレームを追加できません}}","Nie można dodać pustych klatek kluczowych do klatek kluczowych"],["{{ズームツール}}","Narzędzie powiększające"],["{{タイムライン幅の拡大・縮小}}","Rozszerzanie i zmniejszanie szerokości osi czasu"],["{{ガイドレイヤー}}","warstwa prowadząca"],["{{音量設定}}","Ustawienie głośności"],["{{サウンドを削除}}","Usuń dźwięk."],["{{カスタムループ}}","indywidualna pętla"],["{{読込のみ}}","Tylko do odczytu"],["{{書込を許可}}","zezwolenie na post"],["{{単一行}}","prosta linia"],["{{複数行}}","wielowierszowy"],["{{自動で折り返し}}","Automatyczny zwrot"],["{{左寄せ}}","wyrównany do lewej"],["{{中央揃え}}","centrowanie"],["{{右寄せ}}","wyrównany do prawej"],["{{放射状グラデーション}}","gradacja promieniowa"],["{{線形グラデーション}}","gradient liniowy"],["{{画像}}","Obraz."],["{{画像選択}}","Wybór obrazu"],["{{種別}}","klasyfikacja"],["{{Shapeの色設定}}","Ustawienia kolorów kształtu"],["{{変形}}","deformacja"],["{{カラー効果}}","efekt kolorystyczny"],["{{フィルター}}","filtr"],["{{Shapeを複製}}","Duplikat kształtu."],["{{読み込み}}","wczytany"],["{{新規フォルダー}}","Nowy Folder"],["{{新規MovieClip}}","Nowy MovieClip."],["{{枠に合わせてテキストをリサイズ}}","Zmień rozmiar tekstu, aby dopasować go do ramki."],["{{テキストに合わせて枠をリサイズ}}","Zmień rozmiar ramki, aby dopasować ją do tekstu."],["{{リサイズしない}}","Brak zmiany rozmiaru"],["{{フォント}}","czcionka"],["{{テキスト}}","Tekst."],["{{ループ}}","pętla"],["{{音量}}","głośność"],["{{ビデオ}}","Video."],["{{イージング}}","ułatwienie"],["{{サウンド}}","dźwięk"],["{{シンボル}}","symbol"],["{{名前}}","Nazwa."],["{{オブジェクト}}","obiekt"],["{{ステージ設定}}","Ustawienie sceny"],["{{プレビュー}}","podgląd"],["{{削除}}","usunięcie"],["{{ペースト}}","pasta"],["{{コピー}}","kopia"],["{{プラグインメニュー}}","Menu wtyczek"],["{{トゥイーン}}","między"],["{{カーブポインターの追加}}","Dodatkowy wskaźnik krzywizny."],["{{パスの結合}}","Łączenie ścieżek"],["{{シェイプ}}","kształt"],["{{キーフレームに配分}}","Przydział do klatek kluczowych"],["{{レイヤーに配分}}","Przydział do warstw"],["{{タイムライン}}","oś czasu"],["{{整列}}","wyrównanie"],["{{最背面}}","najnowszy"],["{{ひとつ背面へ}}","Jeden do tyłu."],["{{ひとつ前面へ}}","Jeden do przodu."],["{{最前面}}","przede wszystkim"],["{{重ね順}}","superpozycji"],["{{プラグイン}}","wtyczka"],["{{ライブラリ}}","biblioteka"],["{{プロパティ}}","nieruchomość"],["{{マスクレイヤー}}","warstwa maski"],["{{通常レイヤー}}","Warstwa normalna"],["{{モーショントゥイーンの削除}}","Usunięcie tweeterów ruchu."],["{{モーショントゥイーンの追加}}","Dodatkowy tweens ruchu."],["{{モーダル表示}}","wskazanie modalne"],["{{言語}}","Język."],["{{フォーマット}}","format"],["{{含める}}","zawierać"],["{{含めない}}","nie zawierać"],["{{使い方、リファレンス}}","Zastosowanie, odniesienie."],["{{非表示レイヤー}}","warstwa ukryta"],["{{設定}}","ustawienie"],["{{デフォルトのループを利用する}}","Użyj domyślnej pętli."],["{{フレームピッカー}}","chwytak do ram"],["{{左揃え}}","lewe justowanie"],["{{中央揃え(水平方向)}}","Wyśrodkowany (poziomy)"],["{{右揃え}}","właściwe uzasadnienie"],["{{上揃え}}","uzasadnienie"],["{{中央揃え(垂直方向)}}","Wyśrodkowany (pionowy)"],["{{下揃え}}","uzasadnienie"],["{{開始フレーム}}","ramka początkowa"],["{{終了フレーム}}","rama końcowa"],["{{ループで再生}}","Odtwarzanie w pętli"],["{{1回再生}}","1 odtwarzanie"],["{{指定したフレームで固定}}","Stała w określonej ramce."],["{{1回逆再生}}","1 odtwarzanie wsteczne"],["{{逆ループで再生}}","Odtwarzanie w pętli wstecznej."],["{{画面の拡大・縮小}}","Przybliżanie i oddalanie ekranu"],["{{カスタムイージングデータを保存}}","Zapisz niestandardowe dane easingowe."],["{{カスタムイージングデータの読込}}","Odczyt niestandardowych danych dotyczących luzowania."],["{{プレビューのON/OFF}}","Włączenie/wyłączenie podglądu."],["{{フォント枠サイズ}}","wielkość ramki czcionki"],["{{フォント枠カラー}}","Kolor ramki czcionki"],["{{オニオンスキン}}","cebulka"],["{{バケツツール}}","Narzędzia z łyżką"],["{{ペンツール}}","narzędzie piórkowe"],["{{ダブルクリックでカーブポイントが追加されます}}","Kliknij dwukrotnie, aby dodać punkt krzywej"],["{{選択ツール}}","narzędzie wyboru"],["{{Shape変形ツール}}","Narzędzia do deformacji kształtu"],["{{テキストツール}}","narzędzie tekstowe"],["{{矩形ツール}}","Narzędzie Prostokąt"],["{{楕円ツール}}","Narzędzia eliptyczne"],["{{角丸矩形ツール}}","Narzędzie prostokąt o zaokrąglonym rogu"],["{{塗りのカラー}}","Kolor farby"],["{{線のカラー}}","Kolor linii"],["{{線の太さ}}","grubość linii"],["{{プロジェクトデータの読込}}","Odczytywanie danych projektowych"],["{{プロジェクトデータを保存}}","Zapisz dane projektu."],["{{書き出し}}","zdanie wstępne lub akapit"],["{{Discordへ移動}}","Idź do Discorda"],["{{バグ報告}}","raport o błędzie"],["{{設定}}","ustawienie (komputera lub pliku itp.)"],["{{タブを追加}}","Dodaj zakładkę."],["{{タブの一覧を表示・移動}}","Wyświetlanie i przesuwanie listy kart"],["{{スクリプトを追加}}","Dodaj scenariusz."],["{{キーフレームを追加}}","Dodaj klatki kluczowe."],["{{空のキーフレームを追加}}","Dodaj puste klatki kluczowe."],["{{フレームを追加}}","Dodaj ramkę."],["{{フレームを削除}}","Zdjąć ramę."],["{{再生}}","regeneracja"],["{{停止}}","zawieszenie muzyki, tańca itp. na znak żałoby"],["{{ループ設定}}","Ustawienia pętli"],["{{レイヤーを追加}}","Dodaj warstwę."],["{{レイヤーを削除}}","Usuń warstwę."],["{{全てのレイヤーをハイライト}}","Podświetlić wszystkie warstwy"],["{{全てのレイヤーを非表示}}","Ukryj wszystkie warstwy"],["{{全てのレイヤーをロック}}","Zablokuj wszystkie warstwy."],["{{比率を固定}}","Stały wskaźnik"],["{{ステージの幅}}","Szerokość sceny"],["{{背景色}}","kolor tła"],["{{ステージの高さ}}","Wysokość sceny."],["{{フレームレート}}","częstotliwość odświeżania"],["{{シンボル名}}","nazwa symbolu"],["{{イージング設定}}","Ustawienie łagodzące"],["{{ビデオの音量設定}}","Ustawienia głośności wideo"],["{{自動再生}}","autoplay"],["{{テキストエリアのボーダー設定}}","Ustawienia obramowania dla obszarów tekstowych."],["{{テキスト入力設定}}","ustawienie wprowadzania tekstu"],["{{フォント選択}}","Wybór czcionki"],["{{自動サイズ調整}}","Automatyczna zmiana rozmiaru"],["{{フォントスタイルタイプ}}","styl czcionki typ"],["{{行揃え}}","uzasadnić"],["{{改行設定}}","ustawienie łamania linii"],["{{スクロール設定}}","Ustawienia przewijania"],["{{フォントサイズ}}","rozmiar czcionki"],["{{フォントカラー}}","kolor czcionki"],["{{行間}}","między wierszami"],["{{文字幅}}","szerokość znaków"],["{{左マージン}}","lewy margines"],["{{右マージン}}","prawy margines"],["{{カラー種別の選択}}","Wybierz typ koloru"],["{{背景画像の選択}}","Wybieranie obrazu tła"],["{{カラーポインターを追加}}","Dodatkowy wskaźnik koloru."],["{{カラー値}}","wartość koloru"],["{{アルファ(0%-100%)}}","Alfa (0%-100%)"],["{{アルファ値}}","wartość alfa"],["{{選択対象の幅}}","Szerokość celu selekcji"],["{{選択対象のX座標}}","Współrzędna X celu selekcji"],["{{選択対象の高さ}}","Wysokość celu selekcji"],["{{選択対象のY座標}}","Współrzędna Y celu selekcji"],["{{選択対象の幅の伸縮}}","Rozciąganie i zmniejszanie szerokości celu selekcji"],["{{選択対象を回転}}","Obróć wybór"],["{{選択対象の高さの伸縮}}","Rozszerzanie i kurczenie się wysokości celu selekcji."],["{{アルファオフセット(-255〜255)}}","Przesunięcie alfa (-255 do 255)"],["{{赤(0%-100%)}}","Czerwony (0%-100%)"],["{{赤オフセット(-255〜255)}}","Przesunięcie czerwieni (-255 do 255)"],["{{緑(0%-100%)}}","Zielony (0%-100%)"],["{{緑オフセット(-255〜255)}}","Offset koloru zielonego (-255 do 255)"],["{{青(0%-100%)}}","Niebieski (0%-100%)"],["{{青オフセット(-255〜255)}}","Przesunięcie koloru niebieskiego (-255 do 255)"],["{{ブレンドモード}}","tryb mieszania"],["{{フィルターを選択}}","Wybierz filtr"],["{{フィルターを追加}}","Dodaj filtr."],["{{サウンドを追加}}","Dodaj dźwięk."],["{{フィルターを表示・非表示する}}","Pokaż/ukryj filtry"],["{{フィルターを削除}}","Usuń filtry."],["{{水平方向にぼかす}}","Rozmycie w poziomie."],["{{垂直方向にぼかす}}","Rozmycie pionowe."],["{{フィルター強度}}","Wytrzymałość filtra"],["{{フィルター角度}}","Kąt nachylenia filtra"],["{{シャドウのアルファ}}","Shadow's Alpha."],["{{シャドウのカラー}}","Kolory cieni."],["{{フィルター距離}}","Odległość między filtrami"],["{{ハイライトのカラー}}","Podkreślenia kolorów"],["{{ハイライトのアルファ}}","Highlight Alpha."],["{{グラデーションカラー}}","kolor gradacji"],["{{グラデーションのアルファ}}","Alfa gradientu"],["{{タブの移動・名前を変更}}","Przenoszenie i zmiana nazw kart"],["{{プロジェクトを閉じる}}","Zamknij projekt"],["{{上下に移動}}","Przesuń w górę i w dół"],["{{レイヤー変更(ダブルクリック)}}","Zmiana warstwy (podwójne kliknięcie)"],["{{レイヤーをハイライト}}","Warstwy Highlight."],["{{レイヤーを非表示}}","Ukryj warstwy."],["{{レイヤーをロック}}","Warstwy zamka."],["{{カーブポインター(ダブルクリックでON/OFF)}}","Wskaźnik krzywej (podwójne kliknięcie włącza/wyłącza)"],["{{インスタンス名}}","nazwa instancji"],["{{ライブラリ内の検索}}","Wyszukiwanie w bibliotece"],["{{フレームラベル}}","etykieta ramowa"],["{{プロジェクトが保存されていない場合、このタブのプロジェクトデータを復旧する事はできません。タブを削除しますか？}}}}","Jeśli projekt nie zostanie zapisany, nie można odzyskać danych projektu dla tej zakładki. Czy chcesz usunąć tę kartę?}}"]])}}class $ extends t{createMapping(){return new Map([["{{書き出し先の選択}}","Selectarea destinației de export"],["{{画質}}","calitatea imaginii"],["{{座標}}","coordonate"],["{{MovieClipを編集}}","Editați MovieClip."],["{{親の階層へ移動}}","Mutarea în ierarhia părintească"],["{{ロックされたレイヤーです}}","Strat blocat."],["{{トゥイーンには複数のオブジェクトを設置できません}}","Nu pot fi plasate mai multe obiecte pe un tween."],["{{名前が重複しています}}","Nume duplicate."],["{{名前は必須です}}","Numele este obligatoriu."],["{{基準点}}","punct de referință"],["{{自由変形ツール}}","Instrument gratuit de transformare"],["{{キーフレームに変換}}","Convertit în cadre cheie"],["{{空のキーフレームに変換}}","Convertit în cadre cheie goale."],["{{最初のフレームに移動}}","Mergeți la primul cadru"],["{{最後のフレームに移動}}","Mergeți la ultimul cadru"],["{{SWFを解析中}}","SWF analizat."],["{{JSONを生成}}","Generați JSON"],["{{ファイルを生成}}","Generarea fișierului"],["{{N2Dファイルの読み込み}}","Încărcarea fișierelor N2D."],["{{JSONの読み込み}}","Citirea JSON."],["{{データを解凍中}}","Datele sunt despachetate."],["{{データを圧縮中}}","Comprimarea datelor."],["{{エンコード}}","codificați"],["{{外部ファイルの読み込み}}","Încărcarea fișierelor externe"],["{{バイナリデータを生成}}","Generarea de date binare."],["{{データベースを起動}}","Începeți baza de date"],["{{データを保存中}}","Stocarea datelor."],["{{完了}}","finalizare"],["{{ステージ左揃え}}","alinierea la stânga scenei"],["{{ステージ中央揃え(水平方向)}}","Scenă centrată (orizontală)"],["{{ステージ右揃え}}","Alinierea la dreapta scenei"],["{{ステージ上揃え}}","performanță pe scenă"],["{{ステージ中央揃え(垂直方向)}}","Scenă centrată (verticală)"],["{{ステージ下揃え}}","justificare"],["{{定規}}","riglă"],["{{表示}}","afișare"],["{{ショートカット}}","comandă rapidă"],["{{レイヤーを複製}}","Duplicarea stratului"],["{{未使用のフォルダを削除}}","Ștergeți folderele nefolosite."],["{{同名のアイテムが存在します}}","Există un element cu același nume."],["{{追加ファイル}}","fișier suplimentar"],["{{既存のコンテンツ}}","Conținutul existent."],["{{上書きするか、ファイル名を変更して追加するか、スキップを選択する事ができます}}","Puteți alege să suprascrieți, să redenumiți și să adăugați fișiere sau să săriți"],["{{全て上書き}}","Suprascrie toate"],["{{全てスキップ}}","Treci peste toate."],["{{追加・上書き}}","Adăugiri și suprascrieri"],["{{スキップ}}","skip"],["{{表示確認したいフレームを指定}}","Specificați cadrul pentru care doriți să verificați afișajul."],["{{ファイル名を指定}}","Specificați numele fișierului"],["{{ファイル名}}","nume de fișier"],["{{終了フレームを指定}}","Specificați cadrul final"],["{{開始フレームを指定}}","Specificați cadrul de pornire"],["{{フレーム設定}}","configurația cadrului"],["{{書き出し設定}}","Setări de export"],["{{ファイル形式の選択}}","Selectarea formatului de fișier"],["{{ファイル形式}}","format de fișier"],["{{サイズ設定}}","Dimensionarea"],["{{左上}}","stânga-sus"],["{{中央上}}","centru-superioară"],["{{右上}}","dreapta-sus"],["{{中央左}}","centru-stânga"],["{{中央}}","central"],["{{中央右}}","centru-dreapta"],["{{左下}}","stânga jos"],["{{中央下}}","mediu-jos"],["{{右下}}","dreapta-jos"],["{{中心点のX座標}}","Coordonata X a punctului central"],["{{中心点のY座標}}","Coordonata Y a punctului central"],["{{MovieClipに変換}}","Conversia în MovieClip"],["{{変換}}","transformare"],["{{ループ回数}}","Număr de bucle"],["{{カーブポインターの削除}}","Ștergeți indicatorul de curbă."],["{{ステージ基準}}","Criterii de etapă"],["{{閉じる}}","aproape"],["{{保存}}","depozitare"],["{{リセット}}","resetare"],["{{スクリーン}}","ecran"],["{{ショートカット設定}}","Setări de comenzi rapide"],["{{レイヤーカラー}}","culoare stratificată"],["{{Next2Dを支援する}}","Sprijină Next2D."],["{{サポート}}","suport"],["{{未使用のアイテムを削除}}","Îndepărtați articolele neutilizate"],["{{レイヤーをペースト}}","Strat de pastă."],["{{レイヤーをコピー}}","Copiere strat"],["{{フレームをペースト}}","Lipiți cadrul."],["{{フレームをコピー}}","Cadru de copiere."],["{{キーフレームを削除}}","Ștergeți cadrele cheie."],["{{キーフレームに空のキーフレームを追加できません}}","Nu se pot adăuga cadre cheie goale la cadrele cheie"],["{{ズームツール}}","Instrumentul Zoom"],["{{タイムライン幅の拡大・縮小}}","Extinderea și reducerea lățimii liniei de timp"],["{{ガイドレイヤー}}","strat de ghidare"],["{{音量設定}}","Setarea volumului"],["{{サウンドを削除}}","Îndepărtați sunetul."],["{{カスタムループ}}","buclă personalizată"],["{{読込のみ}}","Doar citire"],["{{書込を許可}}","permisiunea de postare"],["{{単一行}}","linie simplă"],["{{複数行}}","multiline"],["{{自動で折り返し}}","Întoarcere automată"],["{{左寄せ}}","aliniate la stânga"],["{{中央揃え}}","centrare"],["{{右寄せ}}","aliniate la dreapta"],["{{放射状グラデーション}}","gradație radială"],["{{線形グラデーション}}","gradient liniar"],["{{画像}}","Imagine."],["{{画像選択}}","Selecția imaginii"],["{{種別}}","clasificare"],["{{Shapeの色設定}}","Setări pentru culoarea formei"],["{{変形}}","deformare"],["{{カラー効果}}","efect de culoare"],["{{フィルター}}","filtru"],["{{Shapeを複製}}","Forma duplicată."],["{{読み込み}}","citiți în"],["{{新規フォルダー}}","Dosar nou"],["{{新規MovieClip}}","Noul MovieClip."],["{{枠に合わせてテキストをリサイズ}}","Redimensionați textul pentru a se potrivi cadrului."],["{{テキストに合わせて枠をリサイズ}}","Redimensionați cadrul pentru a se potrivi cu textul."],["{{リサイズしない}}","Fără redimensionare"],["{{フォント}}","font"],["{{テキスト}}","Text."],["{{ループ}}","bucla"],["{{音量}}","volum"],["{{ビデオ}}","Video."],["{{イージング}}","relaxare"],["{{サウンド}}","sunet"],["{{シンボル}}","simbol"],["{{名前}}","Numele."],["{{オブジェクト}}","obiect"],["{{ステージ設定}}","Reglare scenică"],["{{プレビュー}}","previzualizare"],["{{削除}}","ștergere"],["{{ペースト}}","pasta"],["{{コピー}}","copie"],["{{プラグインメニュー}}","Meniul Plug-in"],["{{トゥイーン}}","între"],["{{カーブポインターの追加}}","Indicator de curbă suplimentar."],["{{パスの結合}}","Îmbinarea căilor de acces"],["{{シェイプ}}","formă"],["{{キーフレームに配分}}","Alocarea la cadrele cheie"],["{{レイヤーに配分}}","Alocarea pe straturi"],["{{タイムライン}}","cronologie"],["{{整列}}","aliniere"],["{{最背面}}","cel mai recent"],["{{ひとつ背面へ}}","Una în spate."],["{{ひとつ前面へ}}","Unul în față."],["{{最前面}}","cel mai important"],["{{重ね順}}","suprapunere"],["{{プラグイン}}","plug-in"],["{{ライブラリ}}","bibliotecă"],["{{プロパティ}}","proprietate"],["{{マスクレイヤー}}","strat de mască"],["{{通常レイヤー}}","Strat normal"],["{{モーショントゥイーンの削除}}","Ștergerea tween-urilor de mișcare."],["{{モーショントゥイーンの追加}}","Prelungirea mișcării suplimentare."],["{{モーダル表示}}","indicație modală"],["{{言語}}","Limba"],["{{フォーマット}}","Format"],["{{含める}}","include"],["{{含めない}}","să nu includă"],["{{使い方、リファレンス}}","Utilizare, referință."],["{{非表示レイヤー}}","strat ascuns"],["{{設定}}","setare"],["{{デフォルトのループを利用する}}","Utilizați bucla implicită."],["{{フレームピッカー}}","selector de cadre"],["{{左揃え}}","justificare stânga"],["{{中央揃え(水平方向)}}","Centrat (orizontal)"],["{{右揃え}}","justificarea corectă"],["{{上揃え}}","justificare"],["{{中央揃え(垂直方向)}}","Centrat (vertical)"],["{{下揃え}}","justificare"],["{{開始フレーム}}","cadru de pornire"],["{{終了フレーム}}","cadru final"],["{{ループで再生}}","Redare în buclă"],["{{1回再生}}","1 redare"],["{{指定したフレームで固定}}","Fixat în cadrul specificat."],["{{1回逆再生}}","1 redare inversă"],["{{逆ループで再生}}","Redare în buclă inversă."],["{{画面の拡大・縮小}}","Apropierea și îndepărtarea ecranului"],["{{カスタムイージングデータを保存}}","Salvare date personalizate de relaxare."],["{{カスタムイージングデータの読込}}","Citirea datelor de relaxare personalizate."],["{{プレビューのON/OFF}}","Preview on/off."],["{{フォント枠サイズ}}","dimensiunea cadrului fontului"],["{{フォント枠カラー}}","Culoarea cadrului fontului"],["{{オニオンスキン}}","ceapă de ceapă"],["{{バケツツール}}","Unelte cu găleată"],["{{ペンツール}}","instrument stilou"],["{{ダブルクリックでカーブポイントが追加されます}}","Faceți dublu clic pentru a adăuga un punct de curbă"],["{{選択ツール}}","instrument de selecție"],["{{Shape変形ツール}}","Instrumente de deformare a formei"],["{{テキストツール}}","instrument de text"],["{{矩形ツール}}","Instrumentul Dreptunghi"],["{{楕円ツール}}","Instrumente eliptice"],["{{角丸矩形ツール}}","Instrument dreptunghiular cu colț rotunjit"],["{{塗りのカラー}}","Culoarea vopselei"],["{{線のカラー}}","Culoarea liniei"],["{{線の太さ}}","grosimea liniei"],["{{プロジェクトデータの読込}}","Citirea datelor proiectului"],["{{プロジェクトデータを保存}}","Salvați datele proiectului."],["{{書き出し}}","propoziție sau paragraf de deschidere"],["{{Discordへ移動}}","Mergeți la Discord"],["{{バグ報告}}","raport de eroare"],["{{設定}}","setare"],["{{タブを追加}}","Adăugați fila."],["{{タブの一覧を表示・移動}}","Afișarea și deplasarea listei de file"],["{{スクリプトを追加}}","Adăugați un script."],["{{キーフレームを追加}}","Adăugați cadre cheie."],["{{空のキーフレームを追加}}","Adăugați cadre cheie goale."],["{{フレームを追加}}","Adăugați rama."],["{{フレームを削除}}","Îndepărtați rama."],["{{再生}}","regenerare"],["{{停止}}","suspendarea muzicii, a dansului etc. în semn de doliu"],["{{ループ設定}}","Setări de buclă"],["{{レイヤーを追加}}","Se adaugă un strat."],["{{レイヤーを削除}}","Ștergeți stratul."],["{{全てのレイヤーをハイライト}}","Evidențiați toate straturile"],["{{全てのレイヤーを非表示}}","Ascundeți toate straturile"],["{{全てのレイヤーをロック}}","Blocați toate straturile."],["{{比率を固定}}","Raport fix"],["{{ステージの幅}}","Lățimea scenei"],["{{背景色}}","culoarea de fundal"],["{{ステージの高さ}}","Înălțimea scenei."],["{{フレームレート}}","rata de cadre"],["{{シンボル名}}","numele simbolului"],["{{イージング設定}}","Setare de relaxare"],["{{ビデオの音量設定}}","Setări de volum video"],["{{自動再生}}","autoplay"],["{{テキストエリアのボーダー設定}}","Setări de margini pentru zonele de text."],["{{テキスト入力設定}}","setarea introducerii textului"],["{{フォント選択}}","Selectarea fontului"],["{{自動サイズ調整}}","Redimensionare automată"],["{{フォントスタイルタイプ}}","tip de stil de font"],["{{行揃え}}","justifică"],["{{改行設定}}","configurare pauză de linie"],["{{スクロール設定}}","Setări de defilare"],["{{フォントサイズ}}","dimensiunea fontului"],["{{フォントカラー}}","culoarea fontului"],["{{行間}}","între linii"],["{{文字幅}}","lățimea caracterelor"],["{{左マージン}}","marja stângă"],["{{右マージン}}","marja dreaptă"],["{{カラー種別の選択}}","Selectați tipul de culoare"],["{{背景画像の選択}}","Selectarea unei imagini de fundal"],["{{カラーポインターを追加}}","Indicator de culoare suplimentar."],["{{カラー値}}","valoarea culorii"],["{{アルファ(0%-100%)}}","Alfa (0%-100%)"],["{{アルファ値}}","valoarea alfa"],["{{選択対象の幅}}","Lățimea țintei de selecție"],["{{選択対象のX座標}}","Coordonata X a țintei de selecție"],["{{選択対象の高さ}}","Înălțimea țintei de selecție"],["{{選択対象のY座標}}","Coordonata Y a țintei de selecție"],["{{選択対象の幅の伸縮}}","Extinderea și micșorarea lățimii țintei de selecție"],["{{選択対象を回転}}","Rotiți selecția"],["{{選択対象の高さの伸縮}}","Extinderea și contracția înălțimii obiectivului de selecție."],["{{アルファオフセット(-255〜255)}}","Decalaj alfa (de la -255 la 255)"],["{{赤(0%-100%)}}","Roșu (0%-100%)"],["{{赤オフセット(-255〜255)}}","Decalaj roșu (-255 la 255)"],["{{緑(0%-100%)}}","Verde (0%-100%)"],["{{緑オフセット(-255〜255)}}","Offset verde (-255 la 255)"],["{{青(0%-100%)}}","Albastru (0%-100%)"],["{{青オフセット(-255〜255)}}","Decalaj albastru (-255 la 255)"],["{{ブレンドモード}}","modul de amestecare"],["{{フィルターを選択}}","Selectați filtrul"],["{{フィルターを追加}}","Adăugați un filtru."],["{{サウンドを追加}}","Adăugați sunet."],["{{フィルターを表示・非表示する}}","Afișați / ascundeți filtrele"],["{{フィルターを削除}}","Eliminați filtrele."],["{{水平方向にぼかす}}","Estomparea pe orizontală."],["{{垂直方向にぼかす}}","Neclaritate verticală."],["{{フィルター強度}}","Puterea filtrului"],["{{フィルター角度}}","Unghiul de filtrare"],["{{シャドウのアルファ}}","Shadow's Alpha."],["{{シャドウのカラー}}","Culori de umbre."],["{{フィルター距離}}","Distanța de filtrare"],["{{ハイライトのカラー}}","Evidențe de culoare"],["{{ハイライトのアルファ}}","Evidențiați Alpha."],["{{グラデーションカラー}}","culoare de gradație"],["{{グラデーションのアルファ}}","Alpha a gradientului"],["{{タブの移動・名前を変更}}","Mutarea și redenumirea filelor"],["{{プロジェクトを閉じる}}","Închideți proiectul"],["{{上下に移動}}","Mutarea în sus și în jos"],["{{レイヤー変更(ダブルクリック)}}","Schimbarea stratului (dublu clic)"],["{{レイヤーをハイライト}}","Straturi de evidențiere."],["{{レイヤーを非表示}}","Ascundeți straturile."],["{{レイヤーをロック}}","Blocați straturile de blocare."],["{{カーブポインター(ダブルクリックでON/OFF)}}","Indicatorul de curbă (faceți dublu clic pentru a activa/dezactiva)"],["{{インスタンス名}}","numele instanței"],["{{ライブラリ内の検索}}","Căutare în bibliotecă"],["{{フレームラベル}}","eticheta cadrului"],["{{プロジェクトが保存されていない場合、このタブのプロジェクトデータを復旧する事はできません。タブを削除しますか？}}}}","Dacă proiectul nu este salvat, datele proiectului pentru această filă nu pot fi recuperate. Doriți să ștergeți fila?}}}."]])}}class y extends t{createMapping(){return new Map([["{{書き出し先の選択}}","Место экспорта"],["{{画質}}","Качество"],["{{座標}}","Координаты"],["{{MovieClipを編集}}","Редактирование видеоклипа"],["{{親の階層へ移動}}","Перемещение в родительскую иерархию"],["{{ロックされたレイヤーです}}","Заблокированный слой"],["{{トゥイーンには複数のオブジェクトを設置できません}}","Несколько объектов не могут быть помещены в твин"],["{{名前が重複しています}}","Дублирующее имя"],["{{名前は必須です}}","Имя обязательно"],["{{基準点}}","точка отсчёта"],["{{自由変形ツール}}","Бесплатный инструмент трансформации"],["{{キーフレームに変換}}","Преобразование в ключевые кадры"],["{{空のキーフレームに変換}}","Преобразование в пустые ключевые кадры"],["{{最初のフレームに移動}}","Переход к первому кадру"],["{{最後のフレームに移動}}","Переход к последнему кадру"],["{{SWFを解析中}}","Анализируемые SWF"],["{{JSONを生成}}","Сгенерировать JSON"],["{{ファイルを生成}}","Создать файл"],["{{N2Dファイルの読み込み}}","Загрузка файлов N2D"],["{{JSONの読み込み}}","Загрузка JSON"],["{{データを解凍中}}","Декомпрессия данных"],["{{データを圧縮中}}","Сжатие данных"],["{{エンコード}}","Кодирование"],["{{外部ファイルの読み込み}}","Чтение внешних файлов"],["{{バイナリデータを生成}}","Генерация двоичных данных"],["{{データベースを起動}}","Запуск базы данных"],["{{データを保存中}}","Хранение данных в процессе работы"],["{{完了}}","Завершено"],["{{ステージ左揃え}}","Выровнять сцену слева"],["{{ステージ中央揃え(水平方向)}}","Выровняйте центр сцены (горизонтально)"],["{{ステージ右揃え}}","Выровнять сцену вправо"],["{{ステージ上揃え}}","Выровнять сцену вверх"],["{{ステージ中央揃え(垂直方向)}}","Выровняйте центр сцены (вертикально)"],["{{ステージ下揃え}}","Выровнять дно сцены"],["{{定規}}","Линейка"],["{{表示}}","Дисплей"],["{{ショートカット}}","ярлык"],["{{レイヤーを複製}}","Дублирование слоя"],["{{未使用のフォルダを削除}}","Удалите неиспользуемые папки"],["{{同名のアイテムが存在します}}","Существуют предметы с таким же названием"],["{{追加ファイル}}","Дополнительный файл"],["{{既存のコンテンツ}}","Существующее содержание"],["{{上書きするか、ファイル名を変更して追加するか、スキップを選択する事ができます}}","Вы можете выбрать перезапись, переименование и добавление файлов или пропуск"],["{{全て上書き}}","Переписать все"],["{{全てスキップ}}","Пропустить все"],["{{追加・上書き}}","Добавить или перезаписать"],["{{スキップ}}","Пропустить"],["{{表示確認したいフレームを指定}}","Укажите кадр, отображение которого вы хотите проверить"],["{{ファイル名を指定}}","Укажите имя файла"],["{{ファイル名}}","имя файла"],["{{終了フレームを指定}}","Укажите конечную рамку"],["{{開始フレームを指定}}","Укажите начальный кадр"],["{{フレーム設定}}","Установка рамы"],["{{書き出し設定}}","Настройки экспорта"],["{{ファイル形式の選択}}","Выберите формат файла"],["{{ファイル形式}}","Форматы файлов"],["{{サイズ設定}}","Установка размера"],["{{左上}}","Вверху слева"],["{{中央上}}","Вверху по центру"],["{{右上}}","Верхний правый"],["{{中央左}}","Центр Левый"],["{{中央}}","Центр"],["{{中央右}}","Центр Правый"],["{{左下}}","Низ Левый"],["{{中央下}}","Нижняя часть Центр"],["{{右下}}","Дно справа"],["{{中心点のX座標}}","X-координата центральной точки"],["{{中心点のY座標}}","Y-координата центральной точки"],["{{MovieClipに変換}}","Конвертировать в MovieClip"],["{{変換}}","трансформация"],["{{ループ回数}}","Количество циклов"],["{{カーブポインターの削除}}","Удалить указатель кривой"],["{{ステージ基準}}","Критерии этапа"],["{{閉じる}}","Закрыть"],["{{保存}}","Сохранить"],["{{リセット}}","сброс"],["{{スクリーン}}","Экран"],["{{ショートカット設定}}","Настройки ярлыков"],["{{レイヤーカラー}}","слоистый цвет"],["{{Next2Dを支援する}}","Поддержите Next2D"],["{{サポート}}","поддержка"],["{{未使用のアイテムを削除}}","Удалите неиспользуемые предметы"],["{{レイヤーをペースト}}","Слой пасты"],["{{レイヤーをコピー}}","Копирование слоя"],["{{フレームをペースト}}","Вставить рамку"],["{{フレームをコピー}}","Копировальная рама"],["{{キーフレームを削除}}","Удалить ключевые кадры"],["{{キーフレームに空のキーフレームを追加できません}}","Невозможно добавить пустые ключевые кадры в ключевые кадры"],["{{ズームツール}}","Инструмент масштабирования"],["{{タイムライン幅の拡大・縮小}}","Ширина временной шкалы Расширение/сокращение"],["{{ガイドレイヤー}}","направляющий слой"],["{{音量設定}}","Настройка громкости"],["{{サウンドを削除}}","Удалить звук"],["{{カスタムループ}}","индивидуальная петля"],["{{読込のみ}}","Только чтение"],["{{書込を許可}}","разрешение на публикацию"],["{{単一行}}","Одиночная линия"],["{{複数行}}","Многолинейный"],["{{自動で折り返し}}","Автоматический обхват"],["{{左寄せ}}","Слева"],["{{中央揃え}}","Центр"],["{{右寄せ}}","Правый"],["{{放射状グラデーション}}","радиальная градация"],["{{線形グラデーション}}","линейный градиент"],["{{画像}}","Изображение"],["{{画像選択}}","Выбор изображения"],["{{種別}}","Тип"],["{{Shapeの色設定}}","Настройки цвета формы"],["{{変形}}","деформация"],["{{カラー効果}}","Трансформация цвета"],["{{フィルター}}","фильтр"],["{{Shapeを複製}}","Дублировать форму"],["{{読み込み}}","читать в"],["{{新規フォルダー}}","Новая папка"],["{{新規MovieClip}}","Новый MovieClip"],["{{枠に合わせてテキストをリサイズ}}","Измените размер текста, чтобы он поместился в рамку"],["{{テキストに合わせて枠をリサイズ}}","Измените размер рамки, чтобы вместить текст"],["{{リサイズしない}}","Отсутствие изменения размера"],["{{フォント}}","шрифт"],["{{テキスト}}","Текст"],["{{ループ}}","петля"],["{{音量}}","громкость"],["{{ビデオ}}","Видео"],["{{イージング}}","облегчение"],["{{サウンド}}","звук"],["{{シンボル}}","Символ"],["{{名前}}","Имя"],["{{オブジェクト}}","объект"],["{{ステージ設定}}","Постановка сцены"],["{{プレビュー}}","Предварительный просмотр"],["{{削除}}","Удалить"],["{{ペースト}}","Паста"],["{{コピー}}","Копировать"],["{{プラグインメニュー}}","Меню подключаемых модулей"],["{{トゥイーン}}","между"],["{{カーブポインターの追加}}","Дополнительный указатель кривой"],["{{パスの結合}}","Объединение путей"],["{{シェイプ}}","форма"],["{{キーフレームに配分}}","Распределение по ключевым кадрам"],["{{レイヤーに配分}}","Распределение по слоям"],["{{タイムライン}}","временная шкала"],["{{整列}}","Выровнять"],["{{最背面}}","Большая часть спины"],["{{ひとつ背面へ}}","Один в задней части"],["{{ひとつ前面へ}}","Один фронт"],["{{最前面}}","На переднем крае"],["{{重ね順}}","Организуйте"],["{{プラグイン}}","плагин"],["{{ライブラリ}}","библиотека"],["{{プロパティ}}","собственность"],["{{マスクレイヤー}}","слой маски"],["{{通常レイヤー}}","Нормальный слой"],["{{モーショントゥイーンの削除}}","Удаление твинов движения"],["{{モーショントゥイーンの追加}}","Дополнительные твины движения"],["{{モーダル表示}}","модальная индикация"],["{{言語}}","Язык"],["{{フォーマット}}","формат"],["{{含める}}","включать"],["{{含めない}}","не включать"],["{{使い方、リファレンス}}","Использование, ссылка"],["{{非表示レイヤー}}","скрытый слой"],["{{設定}}","настройка"],["{{デフォルトのループを利用する}}","Используйте цикл по умолчанию"],["{{フレームピッカー}}","подборщик рам"],["{{左揃え}}","Слева"],["{{中央揃え(水平方向)}}","Центр (горизонтальность)"],["{{右揃え}}","Справа"],["{{上揃え}}","Топ"],["{{中央揃え(垂直方向)}}","Центр (вертикальный)"],["{{下揃え}}","Дно"],["{{開始フレーム}}","начальная рамка"],["{{終了フレーム}}","торцевая рама"],["{{ループで再生}}","Воспроизведение по кругу"],["{{1回再生}}","1 воспроизведение"],["{{指定したフレームで固定}}","Фиксируется в указанном кадре"],["{{1回逆再生}}","1 воспроизведение в обратном направлении"],["{{逆ループで再生}}","Воспроизведение в обратном цикле"],["{{画面の拡大・縮小}}","Увеличение и уменьшение масштаба экрана"],["{{カスタムイージングデータを保存}}","Сохраните данные пользовательского смягчения"],["{{カスタムイージングデータの読込}}","Чтение пользовательских данных о смягчении"],["{{プレビューのON/OFF}}","Включение/выключение предварительного просмотра"],["{{フォント枠サイズ}}","Размер рамки шрифта"],["{{フォント枠カラー}}","Цвет шрифтовой рамки"],["{{オニオンスキン}}","Луковая шкурка"],["{{バケツツール}}","Ведерные инструменты"],["{{ペンツール}}",'Инструмент "Перо'],["{{ダブルクリックでカーブポイントが追加されます}}","Дважды щелкните, чтобы добавить точку кривой"],["{{選択ツール}}","Инструменты выбора"],["{{Shape変形ツール}}","Инструмент преобразования формы"],["{{テキストツール}}","Текстовый инструмент"],["{{矩形ツール}}",'Инструмент "Прямоугольник'],["{{楕円ツール}}",'Инструмент "Эллипс'],["{{角丸矩形ツール}}",'Инструмент "Скругленный прямоугольник'],["{{塗りのカラー}}","Цвет заливки"],["{{線のカラー}}","Цвет штриха"],["{{線の太さ}}","Ширина штриха"],["{{プロジェクトデータの読込}}","Загрузка данных проекта"],["{{プロジェクトデータを保存}}","Сохранить данные проекта"],["{{書き出し}}","Экспорт"],["{{Discordへ移動}}","Зайдите в дискорд"],["{{バグ報告}}","Сообщения об ошибках"],["{{設定}}","Настройка"],["{{タブを追加}}","Добавить вкладку"],["{{タブの一覧を表示・移動}}","Просмотр и перемещение по списку вкладок"],["{{スクリプトを追加}}","Добавить сценарий"],["{{キーフレームを追加}}","Добавить ключевой кадр"],["{{空のキーフレームを追加}}","Добавьте пустой ключевой кадр"],["{{フレームを追加}}","Добавить рамку"],["{{フレームを削除}}","Удалить рамку"],["{{再生}}","Играть"],["{{停止}}","Остановить"],["{{ループ設定}}","Настройка контура"],["{{レイヤーを追加}}","Добавить слой"],["{{レイヤーを削除}}","Удалить слой"],["{{全てのレイヤーをハイライト}}","Выделите все слои"],["{{全てのレイヤーを非表示}}","Скрыть все слои"],["{{全てのレイヤーをロック}}","Заблокируйте все слои"],["{{比率を固定}}","Фиксированный коэффициент"],["{{ステージの幅}}","Ширина сцены"],["{{背景色}}","Цвет фона"],["{{ステージの高さ}}","Высота сцены"],["{{フレームレート}}","Частота кадров"],["{{シンボル名}}","Название символа"],["{{イージング設定}}","Установка облегчения"],["{{ビデオの音量設定}}","Настройка громкости видео"],["{{自動再生}}","Автоматическое воспроизведение"],["{{テキストエリアのボーダー設定}}","Настройка границ текстовой области"],["{{テキスト入力設定}}","Настройка ввода текста"],["{{フォント選択}}","Выбор шрифта"],["{{自動サイズ調整}}","Автоматическая регулировка размера"],["{{フォントスタイルタイプ}}","Тип стиля шрифта"],["{{行揃え}}","Выровнять"],["{{改行設定}}","Установка новой строки"],["{{スクロール設定}}","Настройка прокрутки"],["{{フォントサイズ}}","Размер шрифта"],["{{フォントカラー}}","Цвет шрифта"],["{{行間}}","Пространство линии"],["{{文字幅}}","Ширина символа"],["{{左マージン}}","Левое поле"],["{{右マージン}}","Правая граница"],["{{カラー種別の選択}}","Выберите тип цвета"],["{{背景画像の選択}}","Выбор фонового изображения"],["{{カラーポインターを追加}}","Добавьте указатели цвета"],["{{カラー値}}","Цвет"],["{{アルファ(0%-100%)}}","Альфа(0%-100%)"],["{{アルファ値}}","Альфа"],["{{選択対象の幅}}","Ширина объекта выделения"],["{{選択対象のX座標}}","X координата объекта выделения"],["{{選択対象の高さ}}","Высота объекта выделения"],["{{選択対象のY座標}}","Y координата объекта выделения"],["{{選択対象の幅の伸縮}}","масштабX выбранного объекта"],["{{選択対象を回転}}","Повернуть объект"],["{{選択対象の高さの伸縮}}","scaleY выбранного объекта"],["{{アルファオフセット(-255〜255)}}","Альфа-смещение(-255〜255)"],["{{赤(0%-100%)}}","Красный(0%-100%)"],["{{赤オフセット(-255〜255)}}","Красное смещение(-255〜255)"],["{{緑(0%-100%)}}","Зеленый(0%-100%)"],["{{緑オフセット(-255〜255)}}","Зеленый зачет(-255〜255)"],["{{青(0%-100%)}}","Голубой(0%-100%)"],["{{青オフセット(-255〜255)}}","Синее смещение(-255〜255)"],["{{ブレンドモード}}","Режим наложения"],["{{フィルターを選択}}","Выберите фильтр"],["{{フィルターを追加}}","Добавить фильтр"],["{{サウンドを追加}}","Добавить звук"],["{{フィルターを表示・非表示する}}","Показать и скрыть фильтры"],["{{フィルターを削除}}","Удалить фильтр"],["{{水平方向にぼかす}}","Размытие по горизонтали"],["{{垂直方向にぼかす}}","Размытие по вертикали"],["{{フィルター強度}}","Прочность фильтра"],["{{フィルター角度}}","Угол фильтрации"],["{{シャドウのアルファ}}","Тень Альфа"],["{{シャドウのカラー}}","Цвет теней"],["{{フィルター距離}}","Расстояние между фильтрами"],["{{ハイライトのカラー}}","Цвет подсветки"],["{{ハイライトのアルファ}}","Выделение Альфа"],["{{グラデーションカラー}}","Цвет градиента"],["{{グラデーションのアルファ}}","Градиент Альфа"],["{{タブの移動・名前を変更}}","Переместить/именовать вкладки"],["{{プロジェクトを閉じる}}","Закрыть проект"],["{{上下に移動}}","Двигайтесь вверх и вниз"],["{{レイヤー変更(ダブルクリック)}}","Смена слоя (двойной щелчок)"],["{{レイヤーをハイライト}}","Выделительный слой"],["{{レイヤーを非表示}}","Скрыть слой"],["{{レイヤーをロック}}","Заблокировать слой"],["{{カーブポインター(ダブルクリックでON/OFF)}}","Указатель кривой (двойной щелчок для включения/выключения)"],["{{インスタンス名}}","Имя экземпляра"],["{{ライブラリ内の検索}}","Поиск в библиотеке"],["{{フレームラベル}}","Рамочная этикетка"],["{{プロジェクトが保存されていない場合、このタブのプロジェクトデータを復旧する事はできません。タブを削除しますか？}}","Если проект не сохранен, данные проекта на этой вкладке не могут быть восстановлены. Вы хотите удалить вкладку?"]])}}class _ extends t{createMapping(){return new Map([["{{書き出し先の選択}}","Výber cieľa exportu"],["{{画質}}","kvalita obrazu"],["{{座標}}","súradnice"],["{{MovieClipを編集}}","Upraviť filmový klip."],["{{親の階層へ移動}}","Presun do nadradenej hierarchie"],["{{ロックされたレイヤーです}}","Uzamknutá vrstva."],["{{トゥイーンには複数のオブジェクトを設置できません}}","Na tween nie je možné umiestniť viacero objektov."],["{{名前が重複しています}}","Duplicitné názvy."],["{{名前は必須です}}","Požadované meno."],["{{基準点}}","referenčný bod"],["{{自由変形ツール}}","Bezplatný nástroj na transformáciu"],["{{キーフレームに変換}}","Prevedené na kľúčové snímky"],["{{空のキーフレームに変換}}","Prevedené na prázdne kľúčové snímky."],["{{最初のフレームに移動}}","Prejsť na prvý snímok"],["{{最後のフレームに移動}}","Prejdite na poslednú snímku."],["{{SWFを解析中}}","Analyzované SWF."],["{{JSONを生成}}","Generovanie JSON"],["{{ファイルを生成}}","Generovanie súboru"],["{{N2Dファイルの読み込み}}","Načítanie súborov N2D."],["{{JSONの読み込み}}","Čítanie JSON."],["{{データを解凍中}}","Rozbaľovanie údajov."],["{{データを圧縮中}}","Kompresia údajov."],["{{エンコード}}","kódovanie"],["{{外部ファイルの読み込み}}","Načítanie externých súborov"],["{{バイナリデータを生成}}","Generovanie binárnych údajov."],["{{データベースを起動}}","Spustenie databázy"],["{{データを保存中}}","Ukladanie údajov."],["{{完了}}","dokončenie"],["{{ステージ左揃え}}","zarovnanie doľava"],["{{ステージ中央揃え(水平方向)}}","Fáza vycentrovaná (horizontálne)"],["{{ステージ右揃え}}","Zarovnanie vpravo na javisku"],["{{ステージ上揃え}}","vystúpenie na javisku"],["{{ステージ中央揃え(垂直方向)}}","Fáza vycentrovaná (vertikálna)"],["{{ステージ下揃え}}","odôvodnenie"],["{{定規}}","pravítko"],["{{表示}}","zobrazenie"],["{{ショートカット}}","skratka"],["{{レイヤーを複製}}","Duplikovanie vrstvy"],["{{未使用のフォルダを削除}}","Odstránenie nepoužívaných priečinkov."],["{{同名のアイテムが存在します}}","Existujú položky s rovnakým názvom."],["{{追加ファイル}}","ďalší súbor"],["{{既存のコンテンツ}}","Existujúci obsah."],["{{上書きするか、ファイル名を変更して追加するか、スキップを選択する事ができます}}","Môžete si vybrať, či chcete prepísať, premenovať a pridať súbory alebo preskočiť"],["{{全て上書き}}","Prepísať všetky"],["{{全てスキップ}}","Preskočiť všetko."],["{{追加・上書き}}","Pridávanie a prepisovanie"],["{{スキップ}}","preskočiť"],["{{表示確認したいフレームを指定}}","Zadajte rám, ktorého zobrazenie chcete skontrolovať."],["{{ファイル名を指定}}","Zadajte názov súboru"],["{{ファイル名}}","názov súboru"],["{{終了フレームを指定}}","Zadajte koncový rám"],["{{開始フレームを指定}}","Zadajte počiatočný rámec"],["{{フレーム設定}}","nastavenie rámu"],["{{書き出し設定}}","Nastavenia exportu"],["{{ファイル形式の選択}}","Výber formátu súboru"],["{{ファイル形式}}","formát súboru"],["{{サイズ設定}}","Dimenzovanie"],["{{左上}}","vľavo hore"],["{{中央上}}","stred-horná časť"],["{{右上}}","vpravo hore"],["{{中央左}}","ľavý stred"],["{{中央}}","centrálna"],["{{中央右}}","Pravý stred"],["{{左下}}","vľavo dole"],["{{中央下}}","nižšia stredná"],["{{右下}}","pravá dolná časť"],["{{中心点のX座標}}","X-ová súradnica stredového bodu"],["{{中心点のY座標}}","Y-ová súradnica stredového bodu"],["{{MovieClipに変換}}","Konvertovať do MovieClip"],["{{変換}}","transformácia"],["{{ループ回数}}","Počet slučiek"],["{{カーブポインターの削除}}","Odstránenie ukazovateľa krivky."],["{{ステージ基準}}","Kritériá etapy"],["{{閉じる}}","blízko"],["{{保存}}","skladovanie"],["{{リセット}}","resetovanie"],["{{スクリーン}}","obrazovka"],["{{ショートカット設定}}","Nastavenia skratiek"],["{{レイヤーカラー}}","vrstvená farba"],["{{Next2Dを支援する}}","Podpora Next2D."],["{{サポート}}","podpora"],["{{未使用のアイテムを削除}}","Odstránenie nepoužívaných položiek"],["{{レイヤーをペースト}}","Vložiť vrstvu."],["{{レイヤーをコピー}}","Kopírovanie vrstvy"],["{{フレームをペースト}}","Vložiť rám."],["{{フレームをコピー}}","Rámček na kopírovanie."],["{{キーフレームを削除}}","Odstránenie kľúčových snímok."],["{{キーフレームに空のキーフレームを追加できません}}","Nie je možné pridať prázdne kľúčové snímky do kľúčových snímok"],["{{ズームツール}}","Nástroj na zväčšenie"],["{{タイムライン幅の拡大・縮小}}","Rozšírenie a zmenšenie šírky časovej osi"],["{{ガイドレイヤー}}","vodiaca vrstva"],["{{音量設定}}","Nastavenie hlasitosti"],["{{サウンドを削除}}","Odstráňte zvuk."],["{{カスタムループ}}","prispôsobená slučka"],["{{読込のみ}}","Len na čítanie"],["{{書込を許可}}","povolenie na vysielanie"],["{{単一行}}","jednoduchý riadok"],["{{複数行}}","multiline"],["{{自動で折り返し}}","Automatický obrat"],["{{左寄せ}}","zarovnanie doľava"],["{{中央揃え}}","centrovanie"],["{{右寄せ}}","zarovnanie doprava"],["{{放射状グラデーション}}","radiálna gradácia"],["{{線形グラデーション}}","lineárny gradient"],["{{画像}}","Obrázok."],["{{画像選択}}","Výber obrázkov"],["{{種別}}","klasifikácia"],["{{Shapeの色設定}}","Nastavenia farieb tvaru"],["{{変形}}","deformácia"],["{{カラー効果}}","farebný efekt"],["{{フィルター}}","filter"],["{{Shapeを複製}}","Duplikovaný tvar."],["{{読み込み}}","prečítajte si"],["{{新規フォルダー}}","Nový priečinok"],["{{新規MovieClip}}","Nový filmový klip."],["{{枠に合わせてテキストをリサイズ}}","Zmeňte veľkosť textu tak, aby sa zmestil do rámu."],["{{テキストに合わせて枠をリサイズ}}","Zmeňte veľkosť rámu tak, aby sa doň zmestil text."],["{{リサイズしない}}","Žiadna zmena veľkosti"],["{{フォント}}","písmo"],["{{テキスト}}","Text."],["{{ループ}}","slučka"],["{{音量}}","hlasitosť"],["{{ビデオ}}","Video."],["{{イージング}}","uľahčenie"],["{{サウンド}}","zvuk"],["{{シンボル}}","symbol"],["{{名前}}","Názov."],["{{オブジェクト}}","objekt"],["{{ステージ設定}}","Nastavenie scény"],["{{プレビュー}}","náhľad"],["{{削除}}","vymazanie"],["{{ペースト}}","vložte"],["{{コピー}}","kopírovať"],["{{プラグインメニュー}}","Ponuka zásuvných modulov"],["{{トゥイーン}}","medzi"],["{{カーブポインターの追加}}","Dodatočný ukazovateľ krivky."],["{{パスの結合}}","Spájanie ciest"],["{{シェイプ}}","tvar"],["{{キーフレームに配分}}","Priradenie ku kľúčovým snímkam"],["{{レイヤーに配分}}","Priradenie vrstvám"],["{{タイムライン}}","časová os"],["{{整列}}","zarovnanie"],["{{最背面}}","najnovšie"],["{{ひとつ背面へ}}","Jeden vzadu."],["{{ひとつ前面へ}}","Jeden dopredu."],["{{最前面}}","Predný"],["{{重ね順}}","superpozície"],["{{プラグイン}}","zásuvný modul"],["{{ライブラリ}}","knižnica"],["{{プロパティ}}","majetok"],["{{マスクレイヤー}}","vrstva masky"],["{{通常レイヤー}}","Normálna vrstva"],["{{モーショントゥイーンの削除}}","Odstránenie pohybových tweensov."],["{{モーショントゥイーンの追加}}","Ďalšie pohybové tweety."],["{{モーダル表示}}","modálne označenie"],["{{言語}}","Jazyk."],["{{フォーマット}}","formát"],["{{含める}}","zahŕňať"],["{{含めない}}","nezahŕňať"],["{{使い方、リファレンス}}","Použitie, odkaz."],["{{非表示レイヤー}}","skrytá vrstva"],["{{設定}}","nastavenie"],["{{デフォルトのループを利用する}}","Použite predvolenú slučku."],["{{フレームピッカー}}","vyberač rámov"],["{{左揃え}}","ľavé ospravedlnenie"],["{{中央揃え(水平方向)}}","Centrované (horizontálne)"],["{{右揃え}}","správne odôvodnenie"],["{{上揃え}}","odôvodnenie"],["{{中央揃え(垂直方向)}}","Vystredené (vertikálne)"],["{{下揃え}}","odôvodnenie"],["{{開始フレーム}}","počiatočný rámec"],["{{終了フレーム}}","koncový rám"],["{{ループで再生}}","Prehrávanie v slučke"],["{{1回再生}}","1 prehrávanie"],["{{指定したフレームで固定}}","Opravené v zadanom ráme."],["{{1回逆再生}}","1 spätné prehrávanie"],["{{逆ループで再生}}","Prehrávanie v spätnej slučke."],["{{画面の拡大・縮小}}","Približovanie a odďaľovanie obrazovky"],["{{カスタムイージングデータを保存}}","Uloženie vlastných údajov o zmiernení."],["{{カスタムイージングデータの読込}}","Čítanie vlastných údajov o uvoľnení."],["{{プレビューのON/OFF}}","Zapnutie/vypnutie náhľadu."],["{{フォント枠サイズ}}","veľkosť rámčeka písma"],["{{フォント枠カラー}}","Farba rámu písma"],["{{オニオンスキン}}","cibuľová šupka"],["{{バケツツール}}","Náradie s vedrom"],["{{ペンツール}}","nástroj pero"],["{{ダブルクリックでカーブポイントが追加されます}}","Dvojitým kliknutím pridáte bod krivky"],["{{選択ツール}}","nástroj na výber"],["{{Shape変形ツール}}","Nástroje na deformáciu tvaru"],["{{テキストツール}}","textový nástroj"],["{{矩形ツール}}","Nástroj obdĺžnik"],["{{楕円ツール}}","Eliptické nástroje"],["{{角丸矩形ツール}}","Nástroj zaoblený rohový obdĺžnik"],["{{塗りのカラー}}","Farba farby"],["{{線のカラー}}","Farba čiary"],["{{線の太さ}}","hrúbka čiary"],["{{プロジェクトデータの読込}}","Čítanie údajov o projekte"],["{{プロジェクトデータを保存}}","Uloženie údajov o projekte."],["{{書き出し}}","úvodná veta alebo odsek"],["{{Discordへ移動}}","Prejsť na službu Discord"],["{{バグ報告}}","hlásenie chyby"],["{{設定}}","nastavenie (počítača alebo súboru atď.)"],["{{タブを追加}}","Pridať kartu."],["{{タブの一覧を表示・移動}}","Zobrazenie a presun zoznamu kariet"],["{{スクリプトを追加}}","Pridať skript."],["{{キーフレームを追加}}","Pridanie kľúčových snímok."],["{{空のキーフレームを追加}}","Pridanie prázdnych kľúčových snímok."],["{{フレームを追加}}","Pridať rám."],["{{フレームを削除}}","Odstráňte rám."],["{{再生}}","regenerácia"],["{{停止}}","pozastavenie hudby, tanca atď. na znak smútku"],["{{ループ設定}}","Nastavenia slučky"],["{{レイヤーを追加}}","Pridať vrstvu."],["{{レイヤーを削除}}","Odstrániť vrstvu."],["{{全てのレイヤーをハイライト}}","Zvýraznenie všetkých vrstiev"],["{{全てのレイヤーを非表示}}","Skryť všetky vrstvy"],["{{全てのレイヤーをロック}}","Uzamknite všetky vrstvy."],["{{比率を固定}}","Pevný pomer"],["{{ステージの幅}}","Šírka javiska"],["{{背景色}}","farba pozadia"],["{{ステージの高さ}}","Výška javiska."],["{{フレームレート}}","snímková frekvencia"],["{{シンボル名}}","názov symbolu"],["{{イージング設定}}","Uľahčenie nastavenia"],["{{ビデオの音量設定}}","Nastavenia hlasitosti videa"],["{{自動再生}}","automatické prehrávanie"],["{{テキストエリアのボーダー設定}}","Nastavenia hraníc pre textové oblasti."],["{{テキスト入力設定}}","nastavenie zadávania textu"],["{{フォント選択}}","Výber písma"],["{{自動サイズ調整}}","Automatická zmena veľkosti"],["{{フォントスタイルタイプ}}","typ štýlu písma"],["{{行揃え}}","zdôvodniť"],["{{改行設定}}","nastavenie prerušenia riadku"],["{{スクロール設定}}","Nastavenia posúvania"],["{{フォントサイズ}}","veľkosť písma"],["{{フォントカラー}}","farba písma"],["{{行間}}","medzi riadkami"],["{{文字幅}}","šírka znaku"],["{{左マージン}}","ľavý okraj"],["{{右マージン}}","pravý okraj"],["{{カラー種別の選択}}","Vyberte typ farby"],["{{背景画像の選択}}","Výber obrázka na pozadí"],["{{カラーポインターを追加}}","Dodatočný farebný ukazovateľ."],["{{カラー値}}","hodnota farby"],["{{アルファ(0%-100%)}}","Alfa (0%-100%)"],["{{アルファ値}}","hodnota alfa"],["{{選択対象の幅}}","Šírka cieľa výberu"],["{{選択対象のX座標}}","X-ová súradnica cieľa výberu"],["{{選択対象の高さ}}","Výška cieľa výberu"],["{{選択対象のY座標}}","Y-ová súradnica cieľa výberu"],["{{選択対象の幅の伸縮}}","Rozťahovanie a zmenšovanie šírky cieľa výberu"],["{{選択対象を回転}}","Výber otáčania"],["{{選択対象の高さの伸縮}}","Rozšírenie a zmenšenie výšky cieľa výberu."],["{{アルファオフセット(-255〜255)}}","Alpha offset (-255 až 255)"],["{{赤(0%-100%)}}","Červená (0%-100%)"],["{{赤オフセット(-255〜255)}}","Červený posun (-255 až 255)"],["{{緑(0%-100%)}}","Zelená (0%-100%)"],["{{緑オフセット(-255〜255)}}","Zelený posun (-255 až 255)"],["{{青(0%-100%)}}","Modrá (0%-100%)"],["{{青オフセット(-255〜255)}}","Modrý posun (-255 až 255)"],["{{ブレンドモード}}","režim prelínania"],["{{フィルターを選択}}","Vyberte filter"],["{{フィルターを追加}}","Pridať filter."],["{{サウンドを追加}}","Pridajte zvuk."],["{{フィルターを表示・非表示する}}","Zobrazenie/skrytie filtrov"],["{{フィルターを削除}}","Odstrániť filtre."],["{{水平方向にぼかす}}","Rozmazanie vo vodorovnom smere."],["{{垂直方向にぼかす}}","Vertikálne rozmazanie."],["{{フィルター強度}}","Pevnosť filtra"],["{{フィルター角度}}","Uhol filtra"],["{{シャドウのアルファ}}","Stínová Alfa."],["{{シャドウのカラー}}","Farby tieňov."],["{{フィルター距離}}","Vzdialenosť filtra"],["{{ハイライトのカラー}}","Farebné zvýraznenia"],["{{ハイライトのアルファ}}","Zvýraznenie Alpha."],["{{グラデーションカラー}}","farba gradácie"],["{{グラデーションのアルファ}}","Alfa gradientu"],["{{タブの移動・名前を変更}}","Presúvanie a premenovanie kariet"],["{{プロジェクトを閉じる}}","Uzavrieť projekt"],["{{上下に移動}}","Pohyb hore a dole"],["{{レイヤー変更(ダブルクリック)}}","Zmena vrstvy (dvojité kliknutie)"],["{{レイヤーをハイライト}}","Vrstvy zvýraznenia."],["{{レイヤーを非表示}}","Skryť vrstvy."],["{{レイヤーをロック}}","Vrstvy zámku."],["{{カーブポインター(ダブルクリックでON/OFF)}}","Ukazovateľ krivky (dvojitým kliknutím ho zapnete/vypnete)"],["{{インスタンス名}}","názov inštancie"],["{{ライブラリ内の検索}}","Vyhľadávanie v knižnici"],["{{フレームラベル}}","Štítok rámu"],["{{プロジェクトが保存されていない場合、このタブのプロジェクトデータを復旧する事はできません。タブを削除しますか？}}}}","Ak projekt nie je uložený, údaje projektu pre túto kartu nie je možné obnoviť. Chcete kartu vymazať?}}"]])}}class b extends t{createMapping(){return new Map([["{{書き出し先の選択}}","Lugar de exportación"],["{{画質}}","Calidad"],["{{座標}}","Coordenadas"],["{{MovieClipを編集}}","Editar MovieClip"],["{{親の階層へ移動}}","Mover a jerarquía padre"],["{{ロックされたレイヤーです}}","Capa bloqueada"],["{{トゥイーンには複数のオブジェクトを設置できません}}","No se pueden colocar varios objetos en una interpolación"],["{{名前が重複しています}}","Nombre duplicado"],["{{名前は必須です}}","El nombre es obligatorio"],["{{基準点}}","punto de referencia"],["{{自由変形ツール}}","Herramienta de transformación gratuita"],["{{キーフレームに変換}}","Convertir en fotogramas clave"],["{{空のキーフレームに変換}}","Convertir en fotogramas clave vacíos"],["{{最初のフレームに移動}}","Ir al primer cuadro"],["{{最後のフレームに移動}}","Ir al último cuadro"],["{{SWFを解析中}}","SWF que se está analizando"],["{{JSONを生成}}","Generar JSON"],["{{ファイルを生成}}","Generar archivo"],["{{N2Dファイルの読み込み}}","Carga de archivos N2D"],["{{JSONの読み込み}}","Carga de JSON"],["{{データを解凍中}}","Descompresión de datos"],["{{データを圧縮中}}","Compresión de datos"],["{{エンコード}}","Codificación"],["{{外部ファイルの読み込み}}","Lectura de archivos externos"],["{{バイナリデータを生成}}","Generación de datos binarios"],["{{データベースを起動}}","Iniciar la base de datos"],["{{データを保存中}}","Almacenamiento de datos en curso"],["{{完了}}","Completado"],["{{ステージ左揃え}}","Alinear el escenario a la izquierda"],["{{ステージ中央揃え(水平方向)}}","Alinear el centro del escenario (horizontal)"],["{{ステージ右揃え}}","Alinear el escenario a la derecha"],["{{ステージ上揃え}}","Alinear el escenario hacia arriba"],["{{ステージ中央揃え(垂直方向)}}","Alinear el centro del escenario (vertical)"],["{{ステージ下揃え}}","Alinear el fondo del escenario"],["{{定規}}","Regla"],["{{表示}}","Mostrar"],["{{ショートカット}}","acceso directo"],["{{レイヤーを複製}}","Duplicar capa"],["{{未使用のフォルダを削除}}","Eliminar las carpetas no utilizadas"],["{{同名のアイテムが存在します}}","Existen artículos con el mismo nombre"],["{{追加ファイル}}","Archivo adicional"],["{{既存のコンテンツ}}","Contenido existente"],["{{上書きするか、ファイル名を変更して追加するか、スキップを選択する事ができます}}","Puede elegir entre sobrescribir, renombrar y añadir archivos, u omitir"],["{{全て上書き}}","Sobrescribir todo"],["{{全てスキップ}}","Omitir todo"],["{{追加・上書き}}","Añadir o sobrescribir"],["{{スキップ}}","Omitir"],["{{表示確認したいフレームを指定}}","Especifique el marco del que desea comprobar la visualización"],["{{ファイル名を指定}}","Especifique el nombre del archivo"],["{{ファイル名}}","nombre del archivo"],["{{終了フレームを指定}}","Especifique el marco final"],["{{開始フレームを指定}}","Especifique el marco de inicio"],["{{フレーム設定}}","Ajuste del marco"],["{{書き出し設定}}","Configuración de la exportación"],["{{ファイル形式の選択}}","Seleccione el formato de archivo"],["{{ファイル形式}}","Formatos de archivo"],["{{サイズ設定}}","Ajuste del tamaño"],["{{左上}}","Arriba a la izquierda"],["{{中央上}}","Centro superior"],["{{右上}}","Arriba Derecha"],["{{中央左}}","Centro Izquierda"],["{{中央}}","Centro"],["{{中央右}}","Centro derecha"],["{{左下}}","Abajo a la izquierda"],["{{中央下}}","Abajo Centro"],["{{右下}}","Abajo a la derecha"],["{{中心点のX座標}}","Coordenada X del punto central"],["{{中心点のY座標}}","Coordenada Y del punto central"],["{{MovieClipに変換}}","Convertir a MovieClip"],["{{変換}}","transformación"],["{{ループ回数}}","Recuento de bucles"],["{{カーブポインターの削除}}","Borrar el puntero de la curva"],["{{ステージ基準}}","Criterios de la etapa"],["{{閉じる}}","Cerrar"],["{{保存}}","Guardar"],["{{リセット}}","restablecer"],["{{スクリーン}}","Pantalla"],["{{ショートカット設定}}","Configuración de los accesos directos"],["{{レイヤーカラー}}","color en capas"],["{{Next2Dを支援する}}","Apoya a Next2D"],["{{サポート}}","soporte"],["{{未使用のアイテムを削除}}","Eliminar los elementos no utilizados"],["{{レイヤーをペースト}}","Capa de pasta"],["{{レイヤーをコピー}}","Copiar capa"],["{{フレームをペースト}}","Pegar el marco"],["{{フレームをコピー}}","Copiar marco"],["{{キーフレームを削除}}","Eliminar fotogramas clave"],["{{キーフレームに空のキーフレームを追加できません}}","No se pueden añadir fotogramas clave vacíos a los fotogramas clave"],["{{ズームツール}}","Herramienta de zoom"],["{{タイムライン幅の拡大・縮小}}","Anchura de la línea de tiempo Ampliar/reducir"],["{{ガイドレイヤー}}","capa de guía"],["{{音量設定}}","Ajuste del volumen"],["{{サウンドを削除}}","Eliminar el sonido"],["{{カスタムループ}}","bucle personalizado"],["{{読込のみ}}","Sólo para leer"],["{{書込を許可}}","permiso de correos"],["{{単一行}}","Línea única"],["{{複数行}}","Multilínea"],["{{自動で折り返し}}","Envoltura automática"],["{{左寄せ}}","Izquierda"],["{{中央揃え}}","Centro"],["{{右寄せ}}","Derecha"],["{{放射状グラデーション}}","gradación radial"],["{{線形グラデーション}}","gradiente lineal"],["{{画像}}","Imagen"],["{{画像選択}}","Selección de imágenes"],["{{種別}}","Tipo"],["{{Shapeの色設定}}","Configuración del color de la forma"],["{{変形}}","deformación"],["{{カラー効果}}","Transformación del color"],["{{フィルター}}","filtro"],["{{Shapeを複製}}","Duplicar la forma"],["{{読み込み}}","leer en"],["{{新規フォルダー}}","Carpeta nueva"],["{{新規MovieClip}}","Nuevo MovieClip"],["{{枠に合わせてテキストをリサイズ}}","Cambia el tamaño del texto para que se ajuste al marco"],["{{テキストに合わせて枠をリサイズ}}","Cambia el tamaño del marco para que se ajuste al texto"],["{{リサイズしない}}","No hay cambio de tamaño"],["{{フォント}}","fuente"],["{{テキスト}}","Texto"],["{{ループ}}","bucle"],["{{音量}}","volumen"],["{{ビデオ}}","Vídeo"],["{{イージング}}","facilitando"],["{{サウンド}}","sonido"],["{{シンボル}}","Símbolo"],["{{名前}}","Nombre"],["{{オブジェクト}}","objeto"],["{{ステージ設定}}","Puesta en escena"],["{{プレビュー}}","Previsualización"],["{{削除}}","Borrar"],["{{ペースト}}","Pegar"],["{{コピー}}","Copiar"],["{{プラグインメニュー}}","Menú de complementos"],["{{トゥイーン}}","tween"],["{{カーブポインターの追加}}","Puntero de curva adicional"],["{{パスの結合}}","Fusión de caminos"],["{{シェイプ}}","forma"],["{{キーフレームに配分}}","Asignación a los fotogramas clave"],["{{レイヤーに配分}}","Asignación a las capas"],["{{タイムライン}}","línea de tiempo"],["{{整列}}","Alinear"],["{{最背面}}","La mayor parte de la espalda"],["{{ひとつ背面へ}}","Uno en la parte trasera"],["{{ひとつ前面へ}}","Un frente"],["{{最前面}}","Frontmost"],["{{重ね順}}","Organice"],["{{プラグイン}}","plug-in"],["{{ライブラリ}}","biblioteca"],["{{プロパティ}}","propiedad"],["{{マスクレイヤー}}","capa de máscara"],["{{通常レイヤー}}","Capa normal"],["{{モーショントゥイーンの削除}}","Supresión de los tweens de movimiento"],["{{モーショントゥイーンの追加}}","Tweens de movimiento adicionales"],["{{モーダル表示}}","indicación modal"],["{{言語}}","El idioma"],["{{フォーマット}}","formato"],["{{含める}}","incluir"],["{{含めない}}","no incluir"],["{{使い方、リファレンス}}","Uso, referencia"],["{{非表示レイヤー}}","capa oculta"],["{{設定}}","configuración"],["{{デフォルトのループを利用する}}","Utiliza el bucle por defecto"],["{{フレームピッカー}}","Recogedor de marcos"],["{{左揃え}}","Izquierda"],["{{中央揃え(水平方向)}}","Centro (Horizontal)"],["{{右揃え}}","Derecho"],["{{上揃え}}","Arriba"],["{{中央揃え(垂直方向)}}","Centro (Vertical)"],["{{下揃え}}","Fondo"],["{{開始フレーム}}","marco de inicio"],["{{終了フレーム}}","marco final"],["{{ループで再生}}","Reproducir en bucle"],["{{1回再生}}","1 reproducción"],["{{指定したフレームで固定}}","Fijado en el marco especificado"],["{{1回逆再生}}","1 reproducción inversa"],["{{逆ループで再生}}","Reproducción en bucle invertido"],["{{画面の拡大・縮小}}","Acercar y alejar la pantalla"],["{{カスタムイージングデータを保存}}","Guarda los datos de la flexión personalizada"],["{{カスタムイージングデータの読込}}","Lectura de datos de flexibilización personalizados"],["{{プレビューのON/OFF}}","Activación/desactivación de la vista previa"],["{{フォント枠サイズ}}","Tamaño del marco de la fuente"],["{{フォント枠カラー}}","Color del marco de la fuente"],["{{オニオンスキン}}","Piel de cebolla"],["{{バケツツール}}","Herramientas para cubos"],["{{ペンツール}}","Herramienta de la pluma"],["{{ダブルクリックでカーブポイントが追加されます}}","Haga doble clic para añadir un punto de curva"],["{{選択ツール}}","Herramientas de selección"],["{{Shape変形ツール}}","Herramienta de transformación de formas"],["{{テキストツール}}","Herramienta de texto"],["{{矩形ツール}}","Herramienta Rectángulo"],["{{楕円ツール}}","Herramienta Elipse"],["{{角丸矩形ツール}}","Herramienta Rectángulo Redondeado"],["{{塗りのカラー}}","Color de relleno"],["{{線のカラー}}","Color del trazo"],["{{線の太さ}}","Anchura de la carrera"],["{{プロジェクトデータの読込}}","Carga de los datos del proyecto"],["{{プロジェクトデータを保存}}","Guardar los datos del proyecto"],["{{書き出し}}","Exportar"],["{{Discordへ移動}}","Ir a la discordia"],["{{バグ報告}}","Informes de errores"],["{{設定}}","Configuración"],["{{タブを追加}}","Añadir una pestaña"],["{{タブの一覧を表示・移動}}","Ver y desplazarse por la lista de pestañas"],["{{スクリプトを追加}}","Añadir una secuencia de comandos"],["{{キーフレームを追加}}","Añadir un fotograma clave"],["{{空のキーフレームを追加}}","Añadir un fotograma clave vacío"],["{{フレームを追加}}","Añadir un marco"],["{{フレームを削除}}","Borrar el marco"],["{{再生}}","Juega a"],["{{停止}}","Detener"],["{{ループ設定}}","Ajuste del bucle"],["{{レイヤーを追加}}","Añadir una capa"],["{{レイヤーを削除}}","Eliminar la capa"],["{{全てのレイヤーをハイライト}}","Resaltar todas las capas"],["{{全てのレイヤーを非表示}}","Ocultar todas las capas"],["{{全てのレイヤーをロック}}","Bloquear todas las capas"],["{{比率を固定}}","Relación fija"],["{{ステージの幅}}","Anchura del escenario"],["{{背景色}}","Color de fondo"],["{{ステージの高さ}}","Altura del escenario"],["{{フレームレート}}","Velocidad de fotogramas"],["{{シンボル名}}","Nombre del símbolo"],["{{イージング設定}}","Ajuste de la flexibilización"],["{{ビデオの音量設定}}","Ajuste del volumen de vídeo"],["{{自動再生}}","Reproducción automática"],["{{テキストエリアのボーダー設定}}","Configuración del borde del área de texto"],["{{テキスト入力設定}}","Ajuste de la entrada de texto"],["{{フォント選択}}","Selección de fuentes"],["{{自動サイズ調整}}","Ajuste automático del tamaño"],["{{フォントスタイルタイプ}}","Tipo de letra"],["{{行揃え}}","Alinear"],["{{改行設定}}","Ajuste de la nueva línea"],["{{スクロール設定}}","Ajuste de desplazamiento"],["{{フォントサイズ}}","Tamaño de la fuente"],["{{フォントカラー}}","Color de la fuente"],["{{行間}}","Espacio de la línea"],["{{文字幅}}","Anchura de los caracteres"],["{{左マージン}}","Margen izquierdo"],["{{右マージン}}","Margen derecho"],["{{カラー種別の選択}}","Seleccione un tipo de color"],["{{背景画像の選択}}","Seleccionar una imagen de fondo"],["{{カラーポインターを追加}}","Añadir punteros de color"],["{{カラー値}}","Color"],["{{アルファ(0%-100%)}}","Alpha(0%-100%)"],["{{アルファ値}}","Alpha"],["{{選択対象の幅}}","Anchura del objeto de selección"],["{{選択対象のX座標}}","Coordenada X del objeto de selección"],["{{選択対象の高さ}}","Altura del objeto de selección"],["{{選択対象のY座標}}","Coordenada Y del objeto de selección"],["{{選択対象の幅の伸縮}}","scaleX del objeto seleccionado"],["{{選択対象を回転}}","Girar el objeto"],["{{選択対象の高さの伸縮}}","escalaY del objeto seleccionado"],["{{アルファオフセット(-255〜255)}}","Desplazamiento alfa(-255〜255)"],["{{赤(0%-100%)}}","Rojo(0%-100%)"],["{{赤オフセット(-255〜255)}}","Compensación roja(-255〜255)"],["{{緑(0%-100%)}}","Verde(0%-100%)"],["{{緑オフセット(-255〜255)}}","Compensación verde(-255〜255)"],["{{青(0%-100%)}}","Azul(0%-100%)"],["{{青オフセット(-255〜255)}}","Offset azul(-255〜255)"],["{{ブレンドモード}}","Modo de fusión"],["{{フィルターを選択}}","Seleccione un filtro"],["{{フィルターを追加}}","Añadir un filtro"],["{{サウンドを追加}}","Añadir un sonido"],["{{フィルターを表示・非表示する}}","Mostrar y ocultar filtros"],["{{フィルターを削除}}","Eliminar el filtro"],["{{水平方向にぼかす}}","Desenfoque horizontal"],["{{垂直方向にぼかす}}","Desenfoque vertical"],["{{フィルター強度}}","Fuerza del filtro"],["{{フィルター角度}}","Ángulo del filtro"],["{{シャドウのアルファ}}","Sombra Alfa"],["{{シャドウのカラー}}","Color de la sombra"],["{{フィルター距離}}","Distancia del filtro"],["{{ハイライトのカラー}}","Color de realce"],["{{ハイライトのアルファ}}","Resaltar Alpha"],["{{グラデーションカラー}}","Color degradado"],["{{グラデーションのアルファ}}","Gradiente Alfa"],["{{タブの移動・名前を変更}}","Mover/Renombrar pestañas"],["{{プロジェクトを閉じる}}","Cerrar el proyecto"],["{{上下に移動}}","Subir y bajar"],["{{レイヤー変更(ダブルクリック)}}","Cambio de capa (doble clic)"],["{{レイヤーをハイライト}}","Capa de resaltado"],["{{レイヤーを非表示}}","Ocultar capa"],["{{レイヤーをロック}}","Bloquear la capa"],["{{カーブポインター(ダブルクリックでON/OFF)}}","Puntero de curva (doble clic para activar/desactivar)"],["{{インスタンス名}}","Nombre de la instancia"],["{{ライブラリ内の検索}}","Buscar en la biblioteca"],["{{フレームラベル}}","Etiqueta del marco"],["{{プロジェクトが保存されていない場合、このタブのプロジェクトデータを復旧する事はできません。タブを削除しますか？}}","Si el proyecto no se guarda, los datos del proyecto en esta pestaña no se pueden recuperar. ¿Desea eliminar la pestaña?"]])}}class v extends t{createMapping(){return new Map([["{{書き出し先の選択}}","Dışa aktarma hedefinin seçilmesi"],["{{画質}}","görüntü kalitesi"],["{{座標}}","Koordinat"],["{{MovieClipを編集}}","MovieClip'i Düzenle."],["{{親の階層へ移動}}","Üst hiyerarşiye geç"],["{{ロックされたレイヤーです}}","Kilitli katman."],["{{トゥイーンには複数のオブジェクトを設置できません}}","Bir tween üzerine birden fazla nesne yerleştirilemez."],["{{名前が重複しています}}","Mükerrer isimler."],["{{名前は必須です}}","İsim gerekli."],["{{基準点}}","referans noktası"],["{{自由変形ツール}}","Ücretsiz Dönüştürme Aracı"],["{{キーフレームに変換}}","Anahtar karelere dönüştürüldü"],["{{空のキーフレームに変換}}","Boş anahtar karelere dönüştürülür."],["{{最初のフレームに移動}}","İlk kareye git"],["{{最後のフレームに移動}}","Son kareye git"],["{{SWFを解析中}}","SWF analiz ediliyor."],["{{JSONを生成}}","JSON Oluşturma"],["{{ファイルを生成}}","Dosya oluştur"],["{{N2Dファイルの読み込み}}","N2D dosyaları yükleniyor."],["{{JSONの読み込み}}","JSON okuma."],["{{データを解凍中}}","Veri paketinden çıkarılıyor."],["{{データを圧縮中}}","Veri sıkıştırma."],["{{エンコード}}","encode"],["{{外部ファイルの読み込み}}","Harici dosyaları yükleme"],["{{バイナリデータを生成}}","İkili veri oluşturun."],["{{データベースを起動}}","Veritabanını başlat"],["{{データを保存中}}","Veri depolama."],["{{完了}}","tamamlanması"],["{{ステージ左揃え}}","sahne sol hizalama"],["{{ステージ中央揃え(水平方向)}}","Sahne merkezli (yatay)"],["{{ステージ右揃え}}","Sahne sağ hizalama"],["{{ステージ上揃え}}","sahnede performans"],["{{ステージ中央揃え(垂直方向)}}","Sahne merkezli (dikey)"],["{{ステージ下揃え}}","gerekçe"],["{{定規}}","cetveli"],["{{表示}}","ekran"],["{{ショートカット}}","kısayol"],["{{レイヤーを複製}}","Katmanı çoğalt"],["{{未使用のフォルダを削除}}","Kullanılmayan klasörleri silin."],["{{同名のアイテムが存在します}}","Aynı isimde öğe(ler) mevcuttur."],["{{追加ファイル}}","ek dosya"],["{{既存のコンテンツ}}","Mevcut içerik."],["{{上書きするか、ファイル名を変更して追加するか、スキップを選択する事ができます}}","Dosyaların üzerine yazmayı, yeniden adlandırmayı ve eklemeyi seçebilir veya atlayabilirsiniz"],["{{全て上書き}}","Tümünün üzerine yaz"],["{{全てスキップ}}","Hepsini atla."],["{{追加・上書き}}","Eklemeler ve üzerine yazmalar"],["{{スキップ}}","atlamak"],["{{表示確認したいフレームを指定}}","Görüntüsünü kontrol etmek istediğiniz çerçeveyi belirtin."],["{{ファイル名を指定}}","Dosya adını belirtin"],["{{ファイル名}}","dosya-adı"],["{{終了フレームを指定}}","Uç çerçevesini belirtin"],["{{開始フレームを指定}}","Başlangıç çerçevesini belirtin"],["{{フレーム設定}}","çerçeve kurulumu"],["{{書き出し設定}}","Dışa aktarma ayarları"],["{{ファイル形式の選択}}","Dosya formatının seçilmesi"],["{{ファイル形式}}","dosya formatı"],["{{サイズ設定}}","Boyutlandırma"],["{{左上}}","sol-üst"],["{{中央上}}","merkez-üst"],["{{右上}}","sağ-üst"],["{{中央左}}","merkez-sol"],["{{中央}}","merkezi"],["{{中央右}}","merkez sağ"],["{{左下}}","sol alt"],["{{中央下}}","alt-orta"],["{{右下}}","sağ-alt"],["{{中心点のX座標}}","Merkez noktasının X-koordinatı"],["{{中心点のY座標}}","Merkez noktasının Y-koordinatı"],["{{MovieClipに変換}}","MovieClip'e Dönüştür"],["{{変換}}","dönüşüm"],["{{ループ回数}}","Döngü sayısı"],["{{カーブポインターの削除}}","Eğri işaretçisini silin."],["{{ステージ基準}}","Aşama Kriterleri"],["{{閉じる}}","yakın"],["{{保存}}","depolama"],["{{リセット}}","Sıfırla"],["{{スクリーン}}","ekran"],["{{ショートカット設定}}","Kısayol ayarları"],["{{レイヤーカラー}}","katmanlı renk"],["{{Next2Dを支援する}}","Next2D'yi destekleyin."],["{{サポート}}","destek"],["{{未使用のアイテムを削除}}","Kullanılmayan öğeleri kaldırın"],["{{レイヤーをペースト}}","Yapıştır katmanı."],["{{レイヤーをコピー}}","Katmanı kopyala"],["{{フレームをペースト}}","Çerçeveyi yapıştır."],["{{フレームをコピー}}","Çerçeveyi kopyala."],["{{キーフレームを削除}}","Anahtar kareleri silin."],["{{キーフレームに空のキーフレームを追加できません}}","Ana karelere boş ana kareler eklenemiyor"],["{{ズームツール}}","Yakınlaştırma aracı"],["{{タイムライン幅の拡大・縮小}}","Zaman çizelgesi genişliğini genişletme ve daraltma"],["{{ガイドレイヤー}}","kılavuz katman"],["{{音量設定}}","Ses ayarı"],["{{サウンドを削除}}","Sesi kaldırın."],["{{カスタムループ}}","özelleştirilmiş döngü"],["{{読込のみ}}","Sadece okuyun"],["{{書込を許可}}","izin gönder"],["{{単一行}}","basit çizgi"],["{{複数行}}","çok satırlı"],["{{自動で折り返し}}","Otomatik geri dönüş"],["{{左寄せ}}","sola hizalı"],["{{中央揃え}}","merkezleme"],["{{右寄せ}}","sağa hizalı"],["{{放射状グラデーション}}","radyal derecelendirme"],["{{線形グラデーション}}","doğrusal gradyan"],["{{画像}}","Resim."],["{{画像選択}}","Resim seçimi"],["{{種別}}","sınıflandırma"],["{{Shapeの色設定}}","Şekil renk ayarları"],["{{変形}}","deformasyon"],["{{カラー効果}}","renk efekti"],["{{フィルター}}","filtre"],["{{Shapeを複製}}","Şekli çoğaltın."],["{{読み込み}}","okuyun"],["{{新規フォルダー}}","Yeni Klasör"],["{{新規MovieClip}}","Yeni MovieClip."],["{{枠に合わせてテキストをリサイズ}}","Metni çerçeveye sığacak şekilde yeniden boyutlandırın."],["{{テキストに合わせて枠をリサイズ}}","Çerçeveyi metne uyacak şekilde yeniden boyutlandırın."],["{{リサイズしない}}","Yeniden boyutlandırma yok"],["{{フォント}}","yazı tipi"],["{{テキスト}}","Metin."],["{{ループ}}","döngü"],["{{音量}}","ses seviyesi"],["{{ビデオ}}","Video."],["{{イージング}}","KOLAYLAŞTIRMA"],["{{サウンド}}","ses"],["{{シンボル}}","sembolü"],["{{名前}}","İsim."],["{{オブジェクト}}","nesne"],["{{ステージ設定}}","Sahne düzeni"],["{{プレビュー}}","önizleme"],["{{削除}}","silme"],["{{ペースト}}","macun"],["{{コピー}}","kopya"],["{{プラグインメニュー}}","Eklenti menüsü"],["{{トゥイーン}}","ARA"],["{{カーブポインターの追加}}","Ek eğri işaretçisi."],["{{パスの結合}}","Yol birleştirme"],["{{シェイプ}}","şekil"],["{{キーフレームに配分}}","Anahtar karelere atama"],["{{レイヤーに配分}}","Katmanlara tahsis"],["{{タイムライン}}","zaman çizelgesi"],["{{整列}}","Hizalama"],["{{最背面}}","en son"],["{{ひとつ背面へ}}","Biri arkada."],["{{ひとつ前面へ}}","Biri öne."],["{{最前面}}","en başta"],["{{重ね順}}","süperpozisyon"],["{{プラグイン}}","eklenti"],["{{ライブラリ}}","kütüphane"],["{{プロパティ}}","mülkiyet"],["{{マスクレイヤー}}","maske katmanı"],["{{通常レイヤー}}","Normal Katman"],["{{モーショントゥイーンの削除}}","Hareket aralarının silinmesi."],["{{モーショントゥイーンの追加}}","Ek hareket araları."],["{{モーダル表示}}","modal gösterge"],["{{言語}}","Dil."],["{{フォーマット}}","formatı"],["{{含める}}","dahil etmek"],["{{含めない}}","dahil etmemek"],["{{使い方、リファレンス}}","Kullanım, referans."],["{{非表示レイヤー}}","gizli katman"],["{{設定}}","ayar"],["{{デフォルトのループを利用する}}","Varsayılan döngüyü kullanın."],["{{フレームピッカー}}","çerçeve toplayıcı"],["{{左揃え}}","sol gerekçe"],["{{中央揃え(水平方向)}}","Merkezlenmiş (yatay)"],["{{右揃え}}","doğru gerekçe"],["{{上揃え}}","gerekçe"],["{{中央揃え(垂直方向)}}","Merkezlenmiş (dikey)"],["{{下揃え}}","gerekçe"],["{{開始フレーム}}","başlangıç çerçevesi"],["{{終了フレーム}}","uç çerçeve"],["{{ループで再生}}","Döngüde oynat"],["{{1回再生}}","1 oynatma"],["{{指定したフレームで固定}}","Belirtilen çerçevede sabitlendi."],["{{1回逆再生}}","1 geri oynatma"],["{{逆ループで再生}}","Ters döngüde oynatma."],["{{画面の拡大・縮小}}","Ekranı yakınlaştırma ve uzaklaştırma"],["{{カスタムイージングデータを保存}}","Özel hafifletme verilerini kaydedin."],["{{カスタムイージングデータの読込}}","Özel gevşeme verilerini okuma."],["{{プレビューのON/OFF}}","Önizleme açık/kapalı."],["{{フォント枠サイズ}}","yazı tipi çerçeve boyutu"],["{{フォント枠カラー}}","Yazı çerçevesi rengi"],["{{オニオンスキン}}","soğan derisi"],["{{バケツツール}}","Kova aletleri"],["{{ペンツール}}","kalem aracı"],["{{ダブルクリックでカーブポイントが追加されます}}","Eğri noktası eklemek için çift tıklayın"],["{{選択ツール}}","seçim aracı"],["{{Shape変形ツール}}","Şekil deformasyon araçları"],["{{テキストツール}}","metin aracı"],["{{矩形ツール}}","Dikdörtgen Aracı"],["{{楕円ツール}}","Eliptik aletler"],["{{角丸矩形ツール}}","Yuvarlatılmış köşe dikdörtgen aracı"],["{{塗りのカラー}}","Boya rengi"],["{{線のカラー}}","Çizgi rengi"],["{{線の太さ}}","çizgi kalınlığı"],["{{プロジェクトデータの読込}}","Proje verilerinin okunması"],["{{プロジェクトデータを保存}}","Proje verilerini kaydedin."],["{{書き出し}}","açılış cümlesi veya paragrafı"],["{{Discordへ移動}}","Discord'a git"],["{{バグ報告}}","hata raporu"],["{{設定}}","ayar (bir bilgisayarın veya dosyanın vb.)"],["{{タブを追加}}","Sekme ekle."],["{{タブの一覧を表示・移動}}","Sekmeler listesini görüntüleme ve taşıma"],["{{スクリプトを追加}}","Senaryo ekle."],["{{キーフレームを追加}}","Anahtar kareler ekleyin."],["{{空のキーフレームを追加}}","Boş anahtar kareler ekleyin."],["{{フレームを追加}}","Çerçeve ekle."],["{{フレームを削除}}","Çerçeveyi çıkarın."],["{{再生}}","rejenerasyon"],["{{停止}}","yas işareti olarak müziğin, dansın vb. askıya alınması"],["{{ループ設定}}","Döngü ayarları"],["{{レイヤーを追加}}","Katman ekle."],["{{レイヤーを削除}}","Katmanı sil."],["{{全てのレイヤーをハイライト}}","Tüm katmanları vurgulayın"],["{{全てのレイヤーを非表示}}","Tüm katmanları gizle"],["{{全てのレイヤーをロック}}","Tüm katmanları kilitleyin."],["{{比率を固定}}","Sabit oran"],["{{ステージの幅}}","Sahne genişliği"],["{{背景色}}","arka plan rengi"],["{{ステージの高さ}}","Sahne yüksekliği."],["{{フレームレート}}","kare hızı"],["{{シンボル名}}","sembol adı"],["{{イージング設定}}","Hafifletme ayarı"],["{{ビデオの音量設定}}","Video ses seviyesi ayarları"],["{{自動再生}}","otomatik oynatma"],["{{テキストエリアのボーダー設定}}","Metin alanları için kenarlık ayarları."],["{{テキスト入力設定}}","metin giriş ayarı"],["{{フォント選択}}","Yazı tipi seçimi"],["{{自動サイズ調整}}","Otomatik yeniden boyutlandırma"],["{{フォントスタイルタイプ}}","yazı tipi stili türü"],["{{行揃え}}","haklı çıkar"],["{{改行設定}}","satır sonu kurulumu"],["{{スクロール設定}}","Kaydırma ayarları"],["{{フォントサイズ}}","yazı tipi boyutu"],["{{フォントカラー}}","yazı tipi rengi"],["{{行間}}","satırlar arasında"],["{{文字幅}}","karakter genişliği"],["{{左マージン}}","sol kenar boşluğu"],["{{右マージン}}","sağ kenar boşluğu"],["{{カラー種別の選択}}","Renk türünü seçin"],["{{背景画像の選択}}","Arka plan resmi seçme"],["{{カラーポインターを追加}}","Ek renk işaretçisi."],["{{カラー値}}","renk değeri"],["{{アルファ(0%-100%)}}","Alfa (%0-%100)"],["{{アルファ値}}","alfa değeri"],["{{選択対象の幅}}","Seçim hedefinin genişliği"],["{{選択対象のX座標}}","Seçim hedefinin X-koordinatı"],["{{選択対象の高さ}}","Seçim hedefinin yüksekliği"],["{{選択対象のY座標}}","Seçim hedefinin Y-koordinatı"],["{{選択対象の幅の伸縮}}","Seçim hedefinin genişliğini uzatma ve daraltma"],["{{選択対象を回転}}","Seçimi döndür"],["{{選択対象の高さの伸縮}}","Seçim hedefinin yüksekliğinin uzatılması ve daraltılması."],["{{アルファオフセット(-255〜255)}}","Alfa ofseti (-255 ila 255)"],["{{赤(0%-100%)}}","Kırmızı (%0-%100)"],["{{赤オフセット(-255〜255)}}","Kırmızı ofset (-255 ila 255)"],["{{緑(0%-100%)}}","Yeşil (%0-%100)"],["{{緑オフセット(-255〜255)}}","Yeşil ofset (-255 ila 255)"],["{{青(0%-100%)}}","Mavi (%0-%100)"],["{{青オフセット(-255〜255)}}","Mavi ofset (-255 ila 255)"],["{{ブレンドモード}}","Karışım Modu"],["{{フィルターを選択}}","Filtre seçin"],["{{フィルターを追加}}","Filtre ekleyin."],["{{サウンドを追加}}","Ses ekle."],["{{フィルターを表示・非表示する}}","Filtreleri göster/gizle"],["{{フィルターを削除}}","Filtreleri kaldırın."],["{{水平方向にぼかす}}","Yatay olarak bulanıklaştırın."],["{{垂直方向にぼかす}}","Dikey bulanıklık."],["{{フィルター強度}}","Filtre gücü"],["{{フィルター角度}}","Filtre açısı"],["{{シャドウのアルファ}}","Shadow's Alpha."],["{{シャドウのカラー}}","Gölge renkleri."],["{{フィルター距離}}","Filtre mesafesi"],["{{ハイライトのカラー}}","Renk vurguları"],["{{ハイライトのアルファ}}","Alfa'yı vurgulayın."],["{{グラデーションカラー}}","tonlama rengi"],["{{グラデーションのアルファ}}","Gradyanın alfa değeri"],["{{タブの移動・名前を変更}}","Sekmeleri taşıma ve yeniden adlandırma"],["{{プロジェクトを閉じる}}","Projeyi kapatın"],["{{上下に移動}}","Yukarı ve aşağı hareket et"],["{{レイヤー変更(ダブルクリック)}}","Katman değiştirme (çift tıklama)"],["{{レイヤーをハイライト}}","Katmanları vurgulayın."],["{{レイヤーを非表示}}","Katmanları gizle."],["{{レイヤーをロック}}","Katmanları kilitleyin."],["{{カーブポインター(ダブルクリックでON/OFF)}}","Eğri işaretçisi (açmak/kapatmak için çift tıklayın)"],["{{インスタンス名}}","örnek adı"],["{{ライブラリ内の検索}}","Kütüphanede arama yapın"],["{{フレームラベル}}","çerçeve etiketi"],["{{プロジェクトが保存されていない場合、このタブのプロジェクトデータを復旧する事はできません。タブを削除しますか？}}}}","Proje kaydedilmezse, bu sekme için proje verileri kurtarılamaz. Sekmeyi silmek istiyor musunuz?}}"]])}}const k={VERSION:1,PREFIX:"__next2d-tools__",DATABASE_NAME:"save-data",STORE_KEY:"local",REVISION_LIMIT:100,$activeWorkSpaceId:0,$activeCharacterIds:[],$workSpaces:[],$readStatus:0,$readEnd:1,$shiftKey:!1,$ctrlKey:!1,$altKey:!1,$zoomScale:1,$currentFrame:1,$root:null};k.$Rad2Deg=180/Math.PI,k.$Deg2Rad=Math.PI/180,k.$keyLock=!1,k.$activeScript=!1,k.$previewMode=!1,k.$offsetLeft=0,k.$offsetTop=0,k.$currentCursor="auto",k.$useIds=new Map,k.$symbols=new Map,k.$copyWorkSpaceId=-1,k.$copyLibrary=null,k.$copyLayer=null,k.$copyCharacter=null,k.$canCopyLayer=!1,k.$canCopyCharacter=!1,k.$hitColor=null,k.$updated=!1,k.$languages=new Map,k.$currentLanguage=null,k.$shapePointerColor="#009900",k.$shapeLinkedPointerColor="#ffa500",k.$shortcut=new Map,k.$globalShortcut=new Map,k.$useShortcutSetting=!1,k.$changeLibraryId=0,k.$canvases=[],k.$sleepCanvases=[];const w=window.navigator.userAgentData;w?w.getHighEntropyValues(["platform"]).then((e=>{k.$isMac=e.platform.indexOf("mac")>-1})):k.$isMac=window.navigator.userAgent.indexOf("Mac")>-1;const S=document.createElement("canvas");S.width=1,S.height=1,k.$hitContext=S.getContext("2d"),k.$useOffscreenCanvas="transferControlToOffscreen"in S,k.$getCanvas=()=>k.$canvases.length?k.$canvases.shift():document.createElement("canvas"),k.$poolCanvas=e=>{e instanceof HTMLCanvasElement&&(e.width=e.height=1,e.setAttribute("class",""),e.setAttribute("style",""),k.$canvases.push(e))},k.$cloneMovieClip=(e,t)=>{const a=k.$workSpaces[e],r=k.$currentWorkSpace(),i=k.$activeWorkSpaceId;k.$activeWorkSpaceId=this._$copyWorkSpaceId;const s=t.clone();k.$activeWorkSpaceId=i;for(const t of s._$layers.values()){const n=new T;for(let s=0;s<t._$characters.length;++s){k.$activeWorkSpaceId=e;const o=new M(JSON.parse(JSON.stringify(t._$characters[s].toObject())));o._$id=r._$characterId++,k.$activeWorkSpaceId=i;const l=a.getLibrary(o.libraryId);if(this._$copyMapping.has(l.id)){o.libraryId=this._$copyMapping.get(l.id),n.addCharacter(o);continue}if(l.folderId){const e=[];let t=l;for(;t._$folderId;)t=a.getLibrary(t._$folderId),e.unshift(t);for(let t=0;e.length>t;++t){const i=e[t],s=i.getPathWithWorkSpace(a);if(r._$nameMap.has(s)){this._$instanceMap.has(i.id)||this._$instanceMap.set(i.id,[]),this._$instanceMap.get(i.id).push({layer:null,path:s,character:i});continue}const n=i.clone(),o=r.nextLibraryId;this._$copyMapping.set(n.id,o),n._$id=o,n.folderId&&this._$copyMapping.has(n.folderId)&&(n.folderId=this._$copyMapping.get(n.folderId)),r._$libraries.set(n.id,n),k.$libraryController.createInstance(n.type,n.name,n.id,n.symbol)}}const c=l.getPathWithWorkSpace(a);if(r._$nameMap.has(c)){this._$instanceMap.has(l.id)||this._$instanceMap.set(l.id,[]),this._$instanceMap.get(l.id).push({layer:n,path:c,character:o});continue}const d=l.type===A.MOVIE_CLIP?this.cloneMovieClip(l):l.clone(),h=r.nextLibraryId;this._$copyMapping.set(l.id,h),o.libraryId=h,d._$id=h,r._$libraries.set(d.id,d),d.folderId&&this._$copyMapping.has(d.folderId)&&(d.folderId=this._$copyMapping.get(d.folderId)),k.$libraryController.createInstance(d.type,d.name,d.id,d.symbol),r._$nameMap.set(c,d.id),n.addCharacter(o)}for(let e=0;e<t._$emptys.length;++e)n.addEmptyCharacter(t._$emptys[e].clone());n.id=t.id,s.setLayer(n.id,n)}return s},k.$clamp=(e,t,a)=>{const r=+e;return Math.min(Math.max(t,isNaN(r)||!isFinite(r)?0:r),a)},k.$generateShortcutKey=(e,t=null)=>{let a=1===e.length?e.toLowerCase():e;return t&&(t.shift&&(a+="Shift"),t.alt&&(a+="Alt"),t.ctrl&&(a+="Ctrl")),a},k.$isArray=e=>Array.isArray(e),k.$setCursor=(e="auto")=>{k.$currentCursor!==e&&(k.$currentCursor=e,document.documentElement.style.setProperty("--tool-cursor",e))},k.$addModalEvent=e=>{const t=e.querySelectorAll("[data-detail]");for(let e=0;e<t.length;++e){const a=t[e];a.addEventListener("mouseover",k.$fadeIn),a.addEventListener("mouseout",k.$fadeOut)}},k.$fadeIn=e=>{const t=k.$userSetting.getPublishSetting();if("modal"in t&&!t.modal)return;const a=e.currentTarget;let r=k.$currentLanguage.replace(a.dataset.detail),i=a.dataset.shortcutKey;if(i){const e=k.$shortcutSetting.viewMapping.get(a.dataset.area);r+=` (${e.has(i)?e.get(i).text:a.dataset.shortcutText})`}const s=document.getElementById("detail-modal");switch(s.textContent!==r&&(s.textContent=r),!0){case s.clientWidth+e.pageX-20>window.innerWidth:s.style.left=e.pageX-(s.clientWidth+e.pageX+10-window.innerWidth)+"px";break;case 0>e.pageX-20:s.style.left="10px";break;default:s.style.left=e.pageX-20+"px"}if(!0==s.clientHeight+e.pageY+20>window.innerHeight)s.style.top=e.pageY-s.clientHeight-20+"px";else s.style.top=`${e.pageY+20}px`;s.setAttribute("class","fadeIn"),s.dataset.timerId=setTimeout((()=>{s.classList.contains("fadeOut")||s.setAttribute("class","fadeOut")}),1500)},k.$fadeOut=()=>{const e=k.$userSetting.getPublishSetting();if("modal"in e&&!e.modal)return;const t=document.getElementById("detail-modal");clearTimeout(0|t.dataset.timerId),t.setAttribute("class","fadeOut")},k.$endMenu=e=>{const t=["timeline-menu","library-menu","tab-name-menu","timeline-layer-menu","scene-name-menu","user-setting","screen-menu","editor-modal","plugin-modal","shortcut-setting-menu","library-export-modal","screen-order-menu","screen-align-menu","change-movie-clip"];for(let a=0;a<t.length;++a){const r=t[a];if(r===e)continue;"editor-modal"===r&&k.$javaScriptEditor.active&&k.$javaScriptEditor.hide();const i=document.getElementById(r);i.classList.contains("fadeIn")&&i.setAttribute("class","fadeOut")}},k.$loadSaveData=()=>{k.$saveProgress.start();const e=localStorage.getItem(`${k.PREFIX}@${k.DATABASE_NAME}`);if(e){localStorage.removeItem(`${k.PREFIX}@${k.DATABASE_NAME}`);const t=e.length,a=new Uint8Array(t);for(let r=0;r<t;++r)a[r]=255&e.charCodeAt(r);k.$saveProgress.zlibInflate(),k.$unZlibWorker.postMessage({buffer:a,type:"local"},[a.buffer])}else{k.$saveProgress.launchDatabase(10);k.$launchDB().onsuccess=e=>{const t=e.target.result;t.transaction(`${k.DATABASE_NAME}`,"readonly").objectStore(`${k.DATABASE_NAME}`).get(k.STORE_KEY).onsuccess=e=>{const a=e.target.result;if(a){const e=a.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=255&a.charCodeAt(r);k.$saveProgress.zlibInflate(),k.$unZlibWorker.postMessage({buffer:t,type:"local"},[t.buffer])}else k.$workSpaces.push(new te),k.$screenTab.run(),k.$initializeEnd();t.close()}}}},k.$multiplicationMatrix=(e,t)=>new Float32Array([e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]),k.$setShortcut=(e,t)=>{k.$shortcut.set(e,t)},k.$setGlobalShortcut=(e,t)=>{k.$globalShortcut.set(e,t)},k.$deleteShortcut=e=>{k.$shortcut.has(e)&&k.$shortcut.delete(e)},k.$executeKeyCommand=e=>{if(k.$shiftKey=e.shiftKey,k.$ctrlKey=e.ctrlKey||e.metaKey,k.$altKey=e.altKey,k.$ctrlKey)switch(e.key){case"-":case"+":case";":e.stopPropagation(),e.preventDefault()}const t=k.$generateShortcutKey(e.key,{alt:k.$altKey,shift:k.$shiftKey,ctrl:k.$ctrlKey});return k.$globalShortcut.has(t)?(e.stopPropagation(),e.preventDefault(),void k.$globalShortcut.get(t)(e)):k.$keyLock?void 0:k.$useShortcutSetting?(e.stopPropagation(),void e.preventDefault()):void(k.$shortcut.has(t)&&(e.stopPropagation(),e.preventDefault(),k.$shortcut.get(t)(e)))},k.$loadAudioContext=()=>{window.removeEventListener("click",k.$loadAudioContext),k.$audioContext=new AudioContext,"next2d"in window&&k.$root.stage._$player._$loadWebAudio()},k.$initialize=()=>{"Raven"in window&&(Raven.config("https://ebbc692644d14dddaa6f6fec5a9a2dc6@o4504829779705856.ingest.sentry.io/4504829782458368").install(),window.onerror=(e,t,a,r,i)=>{Raven.captureException(i)}),window.removeEventListener("DOMContentLoaded",k.$initialize),window.addEventListener("mousedown",k.$loadAudioContext),document.body.addEventListener("mouseleave",(()=>{k.$shiftKey=!1,k.$ctrlKey=!1,k.$altKey=!1})),k.$filterClasses={BevelFilter:X,BlurFilter:j,DropShadowFilter:Y,GlowFilter:W,GradientBevelFilter:H,GradientGlowFilter:G},k.$languages.set("Japanese",h),k.$languages.set("English",i),k.$languages.set("Chinese",r),k.$languages.set("Korean",u),k.$languages.set("French",n),k.$languages.set("Russia",y),k.$languages.set("Italiano",d),k.$languages.set("Spanish",b),k.$languages.set("Bulgaria",a),k.$languages.set("Finland",s),k.$languages.set("Germany",o),k.$languages.set("Hungary",l),k.$languages.set("Indonesia",c),k.$languages.set("Latvia",m),k.$languages.set("Lithuania",g),k.$languages.set("Netherlands",p),k.$languages.set("Poland",f),k.$languages.set("Romania",$),k.$languages.set("Slovakia",_),k.$languages.set("Turkey",v);let e=localStorage.getItem(`${k.PREFIX}@language-setting`);if(!e)switch(navigator.language){case"ja":e="Japanese";break;case"ko":e="Korean";break;case"zh":e="Chinese";break;case"fr":e="French";break;case"ru":e="Russia";break;case"it":e="Italiano";break;case"es":e="Spanish";break;case"bg":e="Bulgaria";break;case"fi":e="Finland";break;case"de":e="Germany";break;case"hu":e="Hungary";break;case"id":e="Indonesia";break;case"lv":e="Latvia";break;case"lt":e="Lithuania";break;case"nl":e="Netherlands";break;case"pl":e="Poland";break;case"ro":e="Romania";break;case"sk":e="Slovakia";break;case"tr":e="Turkey";break;default:e="English"}const t=k.$languages.get(e);k.$currentLanguage=new t;const w=N.STAGE_DEFAULT_WIDTH,S=N.STAGE_DEFAULT_HEIGHT,I=N.STAGE_DEFAULT_FPS,E=document.getElementById("preview-display");if(E&&(E.style.width=`${w}px`,E.style.height=`${S}px`),"next2d"in window){window.next2d.createRootMovieClip(w,S,I,{tagId:"preview-display"}).then((e=>{k.$root=e,e.stage._$player.stop(),k.$javaScriptEditor.createEditor()}));const{LoaderInfo:e}=window.next2d.display;k.$loaderInfo=new e}k.$loadSaveData(),window.addEventListener("keydown",k.$executeKeyCommand),window.addEventListener("keyup",(()=>{k.$shiftKey=!1,k.$ctrlKey=!1,k.$altKey=!1})),window.addEventListener("beforeunload",(e=>{if(k.$updated)return e.preventDefault(),e.stopPropagation(),e.returnValue="データ保存中...",k.$autoSave(),!1})),document.documentElement.style.setProperty("--timeline-frame-width",`${We.DEFAULT_TIMELINE_WIDTH}px`),document.documentElement.style.setProperty("--timeline-frame-height",We.DEFAULT_TIMELINE_HEIGHT-1+"px"),document.documentElement.style.setProperty("--screen-height",window.innerHeight-50+"px");const x=document.getElementById("preview-stop");x&&x.addEventListener("click",k.$hidePreview),document.documentElement.style.setProperty("--ad","280px"),k.$initialize=null},window.addEventListener("DOMContentLoaded",k.$initialize),window.addEventListener("resize",(()=>{k.$saveProgress.active||(k.$rebuildTimeline(),k.$rebuildRuler())})),k.$rebuildRuler=()=>{const e=k.$currentWorkSpace();(e._$rulerX.length||e._$rulerY.length)&&k.$screenRuler.rebuild()},k.$rebuildTimeline=()=>{k.$timelineHeader._$currentFrame=-1,k.$timelineHeader.setWidth(),k.$timelineHeader.rebuild(),k.$timelineMarker.resetMarker(),k.$timelineLayer.moveTimeLine(),k.$timelineLayer.updateClientSize()},k.$showPreview=()=>{k.$timelinePlayer.executeTimelineStop(),k.$javaScriptEditor.save(),k.$previewMode=!0,k.$keyLock=!0;const e=document.getElementById("player-preview");e.style.display="",e.style.zIndex="9999";const t=k.$currentWorkSpace(),a=document.getElementById("preview-display");a.style.width=`${t.stage.width}px`,a.style.height=`${t.stage.height}px`;const r=document.getElementById("preview-stop");r.style.top=a.offsetTop-20+"px",r.style.left=`${a.offsetLeft+t.stage.width}px`,r.addEventListener("click",k.$hidePreview);const i=k.$root.stage,s=i._$player;i.clearGlobalVariable(),i._$events=new Map,s._$broadcastEvents=new Map;const n=ce.toJSON();k.$useIds.clear();const{Loader:o}=window.next2d.display,{URLRequest:l}=window.next2d.net,{Event:c}=window.next2d.events,d=new o;d.contentLoaderInfo.addEventListener(c.COMPLETE,(e=>{const t=e.currentTarget,a=k.$root.stage,r=a._$player,i=t._$data;for(r.width=i.stage.width,r.height=i.stage.height,r.stage._$frameRate=i.stage.fps,r._$resize();a.numChildren;)a.removeChildAt(0);k.$root=null,k.$root=t.content,a.addChild(k.$root),r._$setBackgroundColor(0|`0xff${i.stage.bgColor.slice(1)}`),r._$cacheStore.reset(),r.play()})),d.load(new l(URL.createObjectURL(new Blob([n],{type:"application/json"})))),s._$broadcastEvents.clear(),window.next2d.media.SoundMixer.volume=1,s._$loadStatus=1,s._$updateLoadStatus()},k.$hidePreview=()=>{document.getElementById("preview-stop").removeEventListener("click",k.$hidePreview);const e=document.getElementById("player-preview");e.style.display="none",e.style.zIndex="0",k.$previewMode=!1,k.$activeScript||(k.$keyLock=!1);const t=k.$root,a=t.stage._$player;for(;k.$root.numChildren;)t.removeChildAt(0);a._$setBackgroundColor(),a.stop()},k.$toJSON=()=>{const e=k.$activeWorkSpaceId,t=document.getElementById("view-tab-area").children,a=[];for(let e=0;e<t.length;++e){const r=t[e],i=k.$workSpaces[0|r.dataset.tabId];i&&(k.$activeWorkSpaceId=0|r.dataset.tabId,a.push(i.toJSON()))}return k.$activeWorkSpaceId=e,JSON.stringify(a)},k.$autoSave=()=>k.$saveProgress.active?Promise.resolve():(k.$javaScriptEditor.save(),k.$saveProgress.start(),new Promise((e=>{k.$saveProgress.createJson(),setTimeout((()=>{e({object:k.$toJSON(),type:"local"})}),200)})).then((e=>{k.$saveProgress.zlibDeflate(),k.$zlibWorkerActive?k.$zlibQueues.push(e):(k.$zlibWorkerActive=!0,k.$zlibWorker.postMessage(e))}))),k.$inverseMatrix=e=>{const t=e[2]*e[5]-e[3]*e[4],a=e[1]*e[4]-e[0]*e[5];let r=e[0]*e[3]-e[2]*e[1];if(!r||!isFinite(r))return[e[3],-e[1],-e[2],e[0],t,a];const i=1/r;return[e[3]*i,-e[1]*i,-e[2]*i,e[0]*i,t*i,a*i]},k.$toFixed4=e=>{const t=e.toString(),a=t.indexOf("e");return a>-1&&(e=+t.slice(0,a)),+e.toFixed(4)},k.$currentWorkSpace=()=>k.$workSpaces[k.$activeWorkSpaceId],k.$initializeEnd=()=>{k.$readStatus++,k.$readStatus===k.$readEnd&&(k.$saveProgress.end(),k.$addModalEvent(document),k.$currentWorkSpace().run())},k.$changeWorkSpace=e=>{k.$useIds.clear(),k.$symbols.clear(),k.$currentWorkSpace().stop(),k.$activeWorkSpaceId=0|e,k.$currentWorkSpace().run()},k.$unZlibWorker=new Worker(URL.createObjectURL(new Blob(['/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).pako={})}(this,(function(e){"use strict";var t=function(e,t,i,n){for(var a=65535&e|0,r=e>>>16&65535|0,o=0;0!==i;){i-=o=i>2e3?2e3:i;do{r=r+(a=a+t[n++]|0)|0}while(--o);a%=65521,r%=65521}return a|r<<16|0},i=new Uint32Array(function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}()),n=function(e,t,n,a){var r=i,o=a+n;e^=-1;for(var s=a;s<o;s++)e=e>>>8^r[255&(e^t[s])];return-1^e},a=16209,r=function(e,t){var i,n,r,o,s,l,d,f,h,c,u,w,b,m,k,_,v,g,p,y,x,E,A,R,Z=e.state;i=e.next_in,A=e.input,n=i+(e.avail_in-5),r=e.next_out,R=e.output,o=r-(t-e.avail_out),s=r+(e.avail_out-257),l=Z.dmax,d=Z.wsize,f=Z.whave,h=Z.wnext,c=Z.window,u=Z.hold,w=Z.bits,b=Z.lencode,m=Z.distcode,k=(1<<Z.lenbits)-1,_=(1<<Z.distbits)-1;e:do{w<15&&(u+=A[i++]<<w,w+=8,u+=A[i++]<<w,w+=8),v=b[u&k];t:for(;;){if(u>>>=g=v>>>24,w-=g,0==(g=v>>>16&255))R[r++]=65535&v;else{if(!(16&g)){if(0==(64&g)){v=b[(65535&v)+(u&(1<<g)-1)];continue t}if(32&g){Z.mode=16191;break e}e.msg="invalid literal/length code",Z.mode=a;break e}p=65535&v,(g&=15)&&(w<g&&(u+=A[i++]<<w,w+=8),p+=u&(1<<g)-1,u>>>=g,w-=g),w<15&&(u+=A[i++]<<w,w+=8,u+=A[i++]<<w,w+=8),v=m[u&_];i:for(;;){if(u>>>=g=v>>>24,w-=g,!(16&(g=v>>>16&255))){if(0==(64&g)){v=m[(65535&v)+(u&(1<<g)-1)];continue i}e.msg="invalid distance code",Z.mode=a;break e}if(y=65535&v,w<(g&=15)&&(u+=A[i++]<<w,(w+=8)<g&&(u+=A[i++]<<w,w+=8)),(y+=u&(1<<g)-1)>l){e.msg="invalid distance too far back",Z.mode=a;break e}if(u>>>=g,w-=g,y>(g=r-o)){if((g=y-g)>f&&Z.sane){e.msg="invalid distance too far back",Z.mode=a;break e}if(x=0,E=c,0===h){if(x+=d-g,g<p){p-=g;do{R[r++]=c[x++]}while(--g);x=r-y,E=R}}else if(h<g){if(x+=d+h-g,(g-=h)<p){p-=g;do{R[r++]=c[x++]}while(--g);if(x=0,h<p){p-=g=h;do{R[r++]=c[x++]}while(--g);x=r-y,E=R}}}else if(x+=h-g,g<p){p-=g;do{R[r++]=c[x++]}while(--g);x=r-y,E=R}for(;p>2;)R[r++]=E[x++],R[r++]=E[x++],R[r++]=E[x++],p-=3;p&&(R[r++]=E[x++],p>1&&(R[r++]=E[x++]))}else{x=r-y;do{R[r++]=R[x++],R[r++]=R[x++],R[r++]=R[x++],p-=3}while(p>2);p&&(R[r++]=R[x++],p>1&&(R[r++]=R[x++]))}break}}break}}while(i<n&&r<s);i-=p=w>>3,u&=(1<<(w-=p<<3))-1,e.next_in=i,e.next_out=r,e.avail_in=i<n?n-i+5:5-(i-n),e.avail_out=r<s?s-r+257:257-(r-s),Z.hold=u,Z.bits=w},o=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),s=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),l=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),d=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),f=function(e,t,i,n,a,r,f,h){var c,u,w,b,m,k,_,v,g,p=h.bits,y=0,x=0,E=0,A=0,R=0,Z=0,S=0,T=0,O=0,U=0,D=null,B=new Uint16Array(16),C=new Uint16Array(16),N=null;for(y=0;y<=15;y++)B[y]=0;for(x=0;x<n;x++)B[t[i+x]]++;for(R=p,A=15;A>=1&&0===B[A];A--);if(R>A&&(R=A),0===A)return a[r++]=20971520,a[r++]=20971520,h.bits=1,0;for(E=1;E<A&&0===B[E];E++);for(R<E&&(R=E),T=1,y=1;y<=15;y++)if(T<<=1,(T-=B[y])<0)return-1;if(T>0&&(0===e||1!==A))return-1;for(C[1]=0,y=1;y<15;y++)C[y+1]=C[y]+B[y];for(x=0;x<n;x++)0!==t[i+x]&&(f[C[t[i+x]]++]=x);if(0===e?(D=N=f,k=20):1===e?(D=o,N=s,k=257):(D=l,N=d,k=0),U=0,x=0,y=E,m=r,Z=R,S=0,w=-1,b=(O=1<<R)-1,1===e&&O>852||2===e&&O>592)return 1;for(;;){_=y-S,f[x]+1<k?(v=0,g=f[x]):f[x]>=k?(v=N[f[x]-k],g=D[f[x]-k]):(v=96,g=0),c=1<<y-S,E=u=1<<Z;do{a[m+(U>>S)+(u-=c)]=_<<24|v<<16|g|0}while(0!==u);for(c=1<<y-1;U&c;)c>>=1;if(0!==c?(U&=c-1,U+=c):U=0,x++,0==--B[y]){if(y===A)break;y=t[i+f[x]]}if(y>R&&(U&b)!==w){for(0===S&&(S=R),m+=E,T=1<<(Z=y-S);Z+S<A&&!((T-=B[Z+S])<=0);)Z++,T<<=1;if(O+=1<<Z,1===e&&O>852||2===e&&O>592)return 1;a[w=U&b]=R<<24|Z<<16|m-r|0}}return 0!==U&&(a[m+U]=y-S<<24|64<<16|0),h.bits=R,0},h={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},c=h.Z_FINISH,u=h.Z_BLOCK,w=h.Z_TREES,b=h.Z_OK,m=h.Z_STREAM_END,k=h.Z_NEED_DICT,_=h.Z_STREAM_ERROR,v=h.Z_DATA_ERROR,g=h.Z_MEM_ERROR,p=h.Z_BUF_ERROR,y=h.Z_DEFLATED,x=16180,E=16190,A=16191,R=16192,Z=16194,S=16199,T=16200,O=16206,U=16209,D=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function B(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var C,N,I=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||t.mode<x||t.mode>16211?1:0},z=function(e){if(I(e))return _;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=x,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,b},F=function(e){if(I(e))return _;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,z(e)},L=function(e,t){var i;if(I(e))return _;var n=e.state;return t<0?(i=0,t=-t):(i=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?_:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,F(e))},M=function(e,t){if(!e)return _;var i=new B;e.state=i,i.strm=e,i.window=null,i.mode=x;var n=L(e,t);return n!==b&&(e.state=null),n},j=!0,H=function(e){if(j){C=new Int32Array(512),N=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(f(1,e.lens,0,288,C,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;f(2,e.lens,0,32,N,0,e.work,{bits:5}),j=!1}e.lencode=C,e.lenbits=9,e.distcode=N,e.distbits=5},P=function(e,t,i,n){var a,r=e.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),n>=r.wsize?(r.window.set(t.subarray(i-r.wsize,i),0),r.wnext=0,r.whave=r.wsize):((a=r.wsize-r.wnext)>n&&(a=n),r.window.set(t.subarray(i-n,i-n+a),r.wnext),(n-=a)?(r.window.set(t.subarray(i-n,i),0),r.wnext=n,r.whave=r.wsize):(r.wnext+=a,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=a))),0},K=F,Y=M,X=function(e,i){var a,o,s,l,d,h,B,C,N,z,F,L,M,j,K,Y,X,G,W,q,J,Q,V,$,ee=0,te=new Uint8Array(4),ie=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(I(e)||!e.output||!e.input&&0!==e.avail_in)return _;(a=e.state).mode===A&&(a.mode=R),d=e.next_out,s=e.output,B=e.avail_out,l=e.next_in,o=e.input,h=e.avail_in,C=a.hold,N=a.bits,z=h,F=B,Q=b;e:for(;;)switch(a.mode){case x:if(0===a.wrap){a.mode=R;break}for(;N<16;){if(0===h)break e;h--,C+=o[l++]<<N,N+=8}if(2&a.wrap&&35615===C){0===a.wbits&&(a.wbits=15),a.check=0,te[0]=255&C,te[1]=C>>>8&255,a.check=n(a.check,te,2,0),C=0,N=0,a.mode=16181;break}if(a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&C)<<8)+(C>>8))%31){e.msg="incorrect header check",a.mode=U;break}if((15&C)!==y){e.msg="unknown compression method",a.mode=U;break}if(N-=4,J=8+(15&(C>>>=4)),0===a.wbits&&(a.wbits=J),J>15||J>a.wbits){e.msg="invalid window size",a.mode=U;break}a.dmax=1<<a.wbits,a.flags=0,e.adler=a.check=1,a.mode=512&C?16189:A,C=0,N=0;break;case 16181:for(;N<16;){if(0===h)break e;h--,C+=o[l++]<<N,N+=8}if(a.flags=C,(255&a.flags)!==y){e.msg="unknown compression method",a.mode=U;break}if(57344&a.flags){e.msg="unknown header flags set",a.mode=U;break}a.head&&(a.head.text=C>>8&1),512&a.flags&&4&a.wrap&&(te[0]=255&C,te[1]=C>>>8&255,a.check=n(a.check,te,2,0)),C=0,N=0,a.mode=16182;case 16182:for(;N<32;){if(0===h)break e;h--,C+=o[l++]<<N,N+=8}a.head&&(a.head.time=C),512&a.flags&&4&a.wrap&&(te[0]=255&C,te[1]=C>>>8&255,te[2]=C>>>16&255,te[3]=C>>>24&255,a.check=n(a.check,te,4,0)),C=0,N=0,a.mode=16183;case 16183:for(;N<16;){if(0===h)break e;h--,C+=o[l++]<<N,N+=8}a.head&&(a.head.xflags=255&C,a.head.os=C>>8),512&a.flags&&4&a.wrap&&(te[0]=255&C,te[1]=C>>>8&255,a.check=n(a.check,te,2,0)),C=0,N=0,a.mode=16184;case 16184:if(1024&a.flags){for(;N<16;){if(0===h)break e;h--,C+=o[l++]<<N,N+=8}a.length=C,a.head&&(a.head.extra_len=C),512&a.flags&&4&a.wrap&&(te[0]=255&C,te[1]=C>>>8&255,a.check=n(a.check,te,2,0)),C=0,N=0}else a.head&&(a.head.extra=null);a.mode=16185;case 16185:if(1024&a.flags&&((L=a.length)>h&&(L=h),L&&(a.head&&(J=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(o.subarray(l,l+L),J)),512&a.flags&&4&a.wrap&&(a.check=n(a.check,o,L,l)),h-=L,l+=L,a.length-=L),a.length))break e;a.length=0,a.mode=16186;case 16186:if(2048&a.flags){if(0===h)break e;L=0;do{J=o[l+L++],a.head&&J&&a.length<65536&&(a.head.name+=String.fromCharCode(J))}while(J&&L<h);if(512&a.flags&&4&a.wrap&&(a.check=n(a.check,o,L,l)),h-=L,l+=L,J)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=16187;case 16187:if(4096&a.flags){if(0===h)break e;L=0;do{J=o[l+L++],a.head&&J&&a.length<65536&&(a.head.comment+=String.fromCharCode(J))}while(J&&L<h);if(512&a.flags&&4&a.wrap&&(a.check=n(a.check,o,L,l)),h-=L,l+=L,J)break e}else a.head&&(a.head.comment=null);a.mode=16188;case 16188:if(512&a.flags){for(;N<16;){if(0===h)break e;h--,C+=o[l++]<<N,N+=8}if(4&a.wrap&&C!==(65535&a.check)){e.msg="header crc mismatch",a.mode=U;break}C=0,N=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),e.adler=a.check=0,a.mode=A;break;case 16189:for(;N<32;){if(0===h)break e;h--,C+=o[l++]<<N,N+=8}e.adler=a.check=D(C),C=0,N=0,a.mode=E;case E:if(0===a.havedict)return e.next_out=d,e.avail_out=B,e.next_in=l,e.avail_in=h,a.hold=C,a.bits=N,k;e.adler=a.check=1,a.mode=A;case A:if(i===u||i===w)break e;case R:if(a.last){C>>>=7&N,N-=7&N,a.mode=O;break}for(;N<3;){if(0===h)break e;h--,C+=o[l++]<<N,N+=8}switch(a.last=1&C,N-=1,3&(C>>>=1)){case 0:a.mode=16193;break;case 1:if(H(a),a.mode=S,i===w){C>>>=2,N-=2;break e}break;case 2:a.mode=16196;break;case 3:e.msg="invalid block type",a.mode=U}C>>>=2,N-=2;break;case 16193:for(C>>>=7&N,N-=7&N;N<32;){if(0===h)break e;h--,C+=o[l++]<<N,N+=8}if((65535&C)!=(C>>>16^65535)){e.msg="invalid stored block lengths",a.mode=U;break}if(a.length=65535&C,C=0,N=0,a.mode=Z,i===w)break e;case Z:a.mode=16195;case 16195:if(L=a.length){if(L>h&&(L=h),L>B&&(L=B),0===L)break e;s.set(o.subarray(l,l+L),d),h-=L,l+=L,B-=L,d+=L,a.length-=L;break}a.mode=A;break;case 16196:for(;N<14;){if(0===h)break e;h--,C+=o[l++]<<N,N+=8}if(a.nlen=257+(31&C),C>>>=5,N-=5,a.ndist=1+(31&C),C>>>=5,N-=5,a.ncode=4+(15&C),C>>>=4,N-=4,a.nlen>286||a.ndist>30){e.msg="too many length or distance symbols",a.mode=U;break}a.have=0,a.mode=16197;case 16197:for(;a.have<a.ncode;){for(;N<3;){if(0===h)break e;h--,C+=o[l++]<<N,N+=8}a.lens[ie[a.have++]]=7&C,C>>>=3,N-=3}for(;a.have<19;)a.lens[ie[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,V={bits:a.lenbits},Q=f(0,a.lens,0,19,a.lencode,0,a.work,V),a.lenbits=V.bits,Q){e.msg="invalid code lengths set",a.mode=U;break}a.have=0,a.mode=16198;case 16198:for(;a.have<a.nlen+a.ndist;){for(;Y=(ee=a.lencode[C&(1<<a.lenbits)-1])>>>16&255,X=65535&ee,!((K=ee>>>24)<=N);){if(0===h)break e;h--,C+=o[l++]<<N,N+=8}if(X<16)C>>>=K,N-=K,a.lens[a.have++]=X;else{if(16===X){for($=K+2;N<$;){if(0===h)break e;h--,C+=o[l++]<<N,N+=8}if(C>>>=K,N-=K,0===a.have){e.msg="invalid bit length repeat",a.mode=U;break}J=a.lens[a.have-1],L=3+(3&C),C>>>=2,N-=2}else if(17===X){for($=K+3;N<$;){if(0===h)break e;h--,C+=o[l++]<<N,N+=8}N-=K,J=0,L=3+(7&(C>>>=K)),C>>>=3,N-=3}else{for($=K+7;N<$;){if(0===h)break e;h--,C+=o[l++]<<N,N+=8}N-=K,J=0,L=11+(127&(C>>>=K)),C>>>=7,N-=7}if(a.have+L>a.nlen+a.ndist){e.msg="invalid bit length repeat",a.mode=U;break}for(;L--;)a.lens[a.have++]=J}}if(a.mode===U)break;if(0===a.lens[256]){e.msg="invalid code -- missing end-of-block",a.mode=U;break}if(a.lenbits=9,V={bits:a.lenbits},Q=f(1,a.lens,0,a.nlen,a.lencode,0,a.work,V),a.lenbits=V.bits,Q){e.msg="invalid literal/lengths set",a.mode=U;break}if(a.distbits=6,a.distcode=a.distdyn,V={bits:a.distbits},Q=f(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,V),a.distbits=V.bits,Q){e.msg="invalid distances set",a.mode=U;break}if(a.mode=S,i===w)break e;case S:a.mode=T;case T:if(h>=6&&B>=258){e.next_out=d,e.avail_out=B,e.next_in=l,e.avail_in=h,a.hold=C,a.bits=N,r(e,F),d=e.next_out,s=e.output,B=e.avail_out,l=e.next_in,o=e.input,h=e.avail_in,C=a.hold,N=a.bits,a.mode===A&&(a.back=-1);break}for(a.back=0;Y=(ee=a.lencode[C&(1<<a.lenbits)-1])>>>16&255,X=65535&ee,!((K=ee>>>24)<=N);){if(0===h)break e;h--,C+=o[l++]<<N,N+=8}if(Y&&0==(240&Y)){for(G=K,W=Y,q=X;Y=(ee=a.lencode[q+((C&(1<<G+W)-1)>>G)])>>>16&255,X=65535&ee,!(G+(K=ee>>>24)<=N);){if(0===h)break e;h--,C+=o[l++]<<N,N+=8}C>>>=G,N-=G,a.back+=G}if(C>>>=K,N-=K,a.back+=K,a.length=X,0===Y){a.mode=16205;break}if(32&Y){a.back=-1,a.mode=A;break}if(64&Y){e.msg="invalid literal/length code",a.mode=U;break}a.extra=15&Y,a.mode=16201;case 16201:if(a.extra){for($=a.extra;N<$;){if(0===h)break e;h--,C+=o[l++]<<N,N+=8}a.length+=C&(1<<a.extra)-1,C>>>=a.extra,N-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=16202;case 16202:for(;Y=(ee=a.distcode[C&(1<<a.distbits)-1])>>>16&255,X=65535&ee,!((K=ee>>>24)<=N);){if(0===h)break e;h--,C+=o[l++]<<N,N+=8}if(0==(240&Y)){for(G=K,W=Y,q=X;Y=(ee=a.distcode[q+((C&(1<<G+W)-1)>>G)])>>>16&255,X=65535&ee,!(G+(K=ee>>>24)<=N);){if(0===h)break e;h--,C+=o[l++]<<N,N+=8}C>>>=G,N-=G,a.back+=G}if(C>>>=K,N-=K,a.back+=K,64&Y){e.msg="invalid distance code",a.mode=U;break}a.offset=X,a.extra=15&Y,a.mode=16203;case 16203:if(a.extra){for($=a.extra;N<$;){if(0===h)break e;h--,C+=o[l++]<<N,N+=8}a.offset+=C&(1<<a.extra)-1,C>>>=a.extra,N-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){e.msg="invalid distance too far back",a.mode=U;break}a.mode=16204;case 16204:if(0===B)break e;if(L=F-B,a.offset>L){if((L=a.offset-L)>a.whave&&a.sane){e.msg="invalid distance too far back",a.mode=U;break}L>a.wnext?(L-=a.wnext,M=a.wsize-L):M=a.wnext-L,L>a.length&&(L=a.length),j=a.window}else j=s,M=d-a.offset,L=a.length;L>B&&(L=B),B-=L,a.length-=L;do{s[d++]=j[M++]}while(--L);0===a.length&&(a.mode=T);break;case 16205:if(0===B)break e;s[d++]=a.length,B--,a.mode=T;break;case O:if(a.wrap){for(;N<32;){if(0===h)break e;h--,C|=o[l++]<<N,N+=8}if(F-=B,e.total_out+=F,a.total+=F,4&a.wrap&&F&&(e.adler=a.check=a.flags?n(a.check,s,F,d-F):t(a.check,s,F,d-F)),F=B,4&a.wrap&&(a.flags?C:D(C))!==a.check){e.msg="incorrect data check",a.mode=U;break}C=0,N=0}a.mode=16207;case 16207:if(a.wrap&&a.flags){for(;N<32;){if(0===h)break e;h--,C+=o[l++]<<N,N+=8}if(4&a.wrap&&C!==(4294967295&a.total)){e.msg="incorrect length check",a.mode=U;break}C=0,N=0}a.mode=16208;case 16208:Q=m;break e;case U:Q=v;break e;case 16210:return g;default:return _}return e.next_out=d,e.avail_out=B,e.next_in=l,e.avail_in=h,a.hold=C,a.bits=N,(a.wsize||F!==e.avail_out&&a.mode<U&&(a.mode<O||i!==c))&&P(e,e.output,e.next_out,F-e.avail_out),z-=e.avail_in,F-=e.avail_out,e.total_in+=z,e.total_out+=F,a.total+=F,4&a.wrap&&F&&(e.adler=a.check=a.flags?n(a.check,s,F,e.next_out-F):t(a.check,s,F,e.next_out-F)),e.data_type=a.bits+(a.last?64:0)+(a.mode===A?128:0)+(a.mode===S||a.mode===Z?256:0),(0===z&&0===F||i===c)&&Q===b&&(Q=p),Q},G=function(e){if(I(e))return _;var t=e.state;return t.window&&(t.window=null),e.state=null,b},W=function(e,t){if(I(e))return _;var i=e.state;return 0==(2&i.wrap)?_:(i.head=t,t.done=!1,b)},q=function(e,i){var n,a=i.length;return I(e)||0!==(n=e.state).wrap&&n.mode!==E?_:n.mode===E&&t(1,i,a,0)!==n.check?v:P(e,i,a,a)?(n.mode=16210,g):(n.havedict=1,b)};function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}var Q=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},V=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){V=!1}for(var $=new Uint8Array(256),ee=0;ee<256;ee++)$[ee]=ee>=252?6:ee>=248?5:ee>=240?4:ee>=224?3:ee>=192?2:1;$[254]=$[254]=1;var te=function(e,t){var i,n,a=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));var r=new Array(2*a);for(n=0,i=0;i<a;){var o=e[i++];if(o<128)r[n++]=o;else{var s=$[o];if(s>4)r[n++]=65533,i+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&i<a;)o=o<<6|63&e[i++],s--;s>1?r[n++]=65533:o<65536?r[n++]=o:(o-=65536,r[n++]=55296|o>>10&1023,r[n++]=56320|1023&o)}}}return function(e,t){if(t<65534&&e.subarray&&V)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var i="",n=0;n<t;n++)i+=String.fromCharCode(e[n]);return i}(r,n)},ie=function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var i=t-1;i>=0&&128==(192&e[i]);)i--;return i<0||0===i?t:i+$[e[i]]>t?i:t},ne={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ae=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},re=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},oe=Object.prototype.toString,se=h.Z_NO_FLUSH,le=h.Z_FINISH,de=h.Z_OK,fe=h.Z_STREAM_END,he=h.Z_NEED_DICT,ce=h.Z_STREAM_ERROR,ue=h.Z_DATA_ERROR,we=h.Z_MEM_ERROR;function be(e){this.options=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!==J(i))throw new TypeError(i+"must be non-object");for(var n in i)Q(i,n)&&(e[n]=i[n])}}return e}({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ae,this.strm.avail_out=0;var i=Y(this.strm,t.windowBits);if(i!==de)throw new Error(ne[i]);if(this.header=new re,W(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=function(e){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,i,n,a,r,o=e.length,s=0;for(a=0;a<o;a++)55296==(64512&(i=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=e.charCodeAt(a+1)))&&(i=65536+(i-55296<<10)+(n-56320),a++),s+=i<128?1:i<2048?2:i<65536?3:4;for(t=new Uint8Array(s),r=0,a=0;r<s;a++)55296==(64512&(i=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=e.charCodeAt(a+1)))&&(i=65536+(i-55296<<10)+(n-56320),a++),i<128?t[r++]=i:i<2048?(t[r++]=192|i>>>6,t[r++]=128|63&i):i<65536?(t[r++]=224|i>>>12,t[r++]=128|i>>>6&63,t[r++]=128|63&i):(t[r++]=240|i>>>18,t[r++]=128|i>>>12&63,t[r++]=128|i>>>6&63,t[r++]=128|63&i);return t}(t.dictionary):"[object ArrayBuffer]"===oe.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(i=q(this.strm,t.dictionary))!==de))throw new Error(ne[i])}function me(e,t){var i=new be(t);if(i.push(e),i.err)throw i.msg||ne[i.err];return i.result}be.prototype.push=function(e,t){var i,n,a,r=this.strm,o=this.options.chunkSize,s=this.options.dictionary;if(this.ended)return!1;for(n=t===~~t?t:!0===t?le:se,"[object ArrayBuffer]"===oe.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(o),r.next_out=0,r.avail_out=o),(i=X(r,n))===he&&s&&((i=q(r,s))===de?i=X(r,n):i===ue&&(i=he));r.avail_in>0&&i===fe&&r.state.wrap>0&&0!==e[r.next_in];)K(r),i=X(r,n);switch(i){case ce:case ue:case he:case we:return this.onEnd(i),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(0===r.avail_out||i===fe))if("string"===this.options.to){var l=ie(r.output,r.next_out),d=r.next_out-l,f=te(r.output,l);r.next_out=d,r.avail_out=o-d,d&&r.output.set(r.output.subarray(l,l+d),0),this.onData(f)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(i!==de||0!==a){if(i===fe)return i=G(this.strm),this.onEnd(i),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},be.prototype.onData=function(e){this.chunks.push(e)},be.prototype.onEnd=function(e){e===de&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=function(e){for(var t=0,i=0,n=e.length;i<n;i++)t+=e[i].length;for(var a=new Uint8Array(t),r=0,o=0,s=e.length;r<s;r++){var l=e[r];a.set(l,o),o+=l.length}return a}(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ke=be,_e=me,ve=function(e,t){return(t=t||{}).raw=!0,me(e,t)},ge=me,pe=h,ye={Inflate:ke,inflate:_e,inflateRaw:ve,ungzip:ge,constants:pe};e.Inflate=ke,e.constants=pe,e.default=ye,e.inflate=_e,e.inflateRaw=ve,e.ungzip=ge,Object.defineProperty(e,"__esModule",{value:!0})})),this.addEventListener("message",(function(e){const t=pako.inflate(e.data.buffer);let i="";for(let e=0;e<t.length;e+=4096)i+=String.fromCharCode.apply(null,t.slice(e,e+4096));this.postMessage({json:i,name:e.data.name,type:e.data.type})}));'],{type:"text/javascript"}))),k.$unZlibWorker.onmessage=e=>{if("n2d"===e.data.type){k.$saveProgress.loadN2D();const t=new te(decodeURIComponent(e.data.json));t.name=e.data.name,k.$workSpaces.push(t),k.$screenTab.createElement(t,k.$workSpaces.length-1),k.$screenTab.activeTab({currentTarget:{dataset:{tabId:k.$workSpaces.length-1}}}),k.$saveProgress.end()}else{k.$saveProgress.loadJson();const t=JSON.parse(decodeURIComponent(e.data.json));for(let e=0;e<t.length;++e)k.$workSpaces.push(new te(t[e]));k.$workSpaces.length||k.$workSpaces.push(new te),k.$screenTab.run(),k.$initializeEnd()}},k.$zlibWorker=new Worker(URL.createObjectURL(new Blob(['/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).pako={})}(this,(function(t){"use strict";function e(t){for(var e=t.length;--e>=0;)t[e]=0}var a=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),n=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),r=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),i=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=new Array(576);e(s);var _=new Array(60);e(_);var h=new Array(512);e(h);var o=new Array(256);e(o);var l=new Array(29);e(l);var d,u,f,c=new Array(30);function p(t,e,a,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function g(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}e(c);var w=function(t){return t<256?h[t]:h[256+(t>>>7)]},m=function(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},b=function(t,e,a){t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,m(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},v=function(t,e,a){b(t,a[2*e],a[2*e+1])},y=function(t,e){var a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},z=function(t,e,a){var n,r,i=new Array(16),s=0;for(n=1;n<=15;n++)s=s+a[n-1]<<1,i[n]=s;for(r=0;r<=e;r++){var _=t[2*r+1];0!==_&&(t[2*r]=y(i[_]++,_))}},k=function(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},x=function(t){t.bi_valid>8?m(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},A=function(t,e,a,n){var r=2*e,i=2*a;return t[r]<t[i]||t[r]===t[i]&&n[e]<=n[a]},E=function(t,e,a){for(var n=t.heap[a],r=a<<1;r<=t.heap_len&&(r<t.heap_len&&A(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!A(e,n,t.heap[r],t.depth));)t.heap[a]=t.heap[r],a=r,r<<=1;t.heap[a]=n},Z=function(t,e,r){var i,s,_,h,d=0;if(0!==t.sym_next)do{i=255&t.pending_buf[t.sym_buf+d++],i+=(255&t.pending_buf[t.sym_buf+d++])<<8,s=t.pending_buf[t.sym_buf+d++],0===i?v(t,s,e):(_=o[s],v(t,_+256+1,e),0!==(h=a[_])&&(s-=l[_],b(t,s,h)),i--,_=w(i),v(t,_,r),0!==(h=n[_])&&(i-=c[_],b(t,i,h)))}while(d<t.sym_next);v(t,256,e)},U=function(t,e){var a,n,r,i=e.dyn_tree,s=e.stat_desc.static_tree,_=e.stat_desc.has_stree,h=e.stat_desc.elems,o=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<h;a++)0!==i[2*a]?(t.heap[++t.heap_len]=o=a,t.depth[a]=0):i[2*a+1]=0;for(;t.heap_len<2;)i[2*(r=t.heap[++t.heap_len]=o<2?++o:0)]=1,t.depth[r]=0,t.opt_len--,_&&(t.static_len-=s[2*r+1]);for(e.max_code=o,a=t.heap_len>>1;a>=1;a--)E(t,i,a);r=h;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],E(t,i,1),n=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=n,i[2*r]=i[2*a]+i[2*n],t.depth[r]=(t.depth[a]>=t.depth[n]?t.depth[a]:t.depth[n])+1,i[2*a+1]=i[2*n+1]=r,t.heap[1]=r++,E(t,i,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,n,r,i,s,_,h=e.dyn_tree,o=e.max_code,l=e.stat_desc.static_tree,d=e.stat_desc.has_stree,u=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,c=e.stat_desc.max_length,p=0;for(i=0;i<=15;i++)t.bl_count[i]=0;for(h[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<573;a++)(i=h[2*h[2*(n=t.heap[a])+1]+1]+1)>c&&(i=c,p++),h[2*n+1]=i,n>o||(t.bl_count[i]++,s=0,n>=f&&(s=u[n-f]),_=h[2*n],t.opt_len+=_*(i+s),d&&(t.static_len+=_*(l[2*n+1]+s)));if(0!==p){do{for(i=c-1;0===t.bl_count[i];)i--;t.bl_count[i]--,t.bl_count[i+1]+=2,t.bl_count[c]--,p-=2}while(p>0);for(i=c;0!==i;i--)for(n=t.bl_count[i];0!==n;)(r=t.heap[--a])>o||(h[2*r+1]!==i&&(t.opt_len+=(i-h[2*r+1])*h[2*r],h[2*r+1]=i),n--)}}(t,e),z(i,o,t.bl_count)},R=function(t,e,a){var n,r,i=-1,s=e[1],_=0,h=7,o=4;for(0===s&&(h=138,o=3),e[2*(a+1)+1]=65535,n=0;n<=a;n++)r=s,s=e[2*(n+1)+1],++_<h&&r===s||(_<o?t.bl_tree[2*r]+=_:0!==r?(r!==i&&t.bl_tree[2*r]++,t.bl_tree[32]++):_<=10?t.bl_tree[34]++:t.bl_tree[36]++,_=0,i=r,0===s?(h=138,o=3):r===s?(h=6,o=3):(h=7,o=4))},S=function(t,e,a){var n,r,i=-1,s=e[1],_=0,h=7,o=4;for(0===s&&(h=138,o=3),n=0;n<=a;n++)if(r=s,s=e[2*(n+1)+1],!(++_<h&&r===s)){if(_<o)do{v(t,r,t.bl_tree)}while(0!=--_);else 0!==r?(r!==i&&(v(t,r,t.bl_tree),_--),v(t,16,t.bl_tree),b(t,_-3,2)):_<=10?(v(t,17,t.bl_tree),b(t,_-3,3)):(v(t,18,t.bl_tree),b(t,_-11,7));_=0,i=r,0===s?(h=138,o=3):r===s?(h=6,o=3):(h=7,o=4)}},L=!1,O=function(t,e,a,n){b(t,0+(n?1:0),3),x(t),m(t,a),m(t,~a),a&&t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a},T=function(t){L||(function(){var t,e,i,g,w,m=new Array(16);for(i=0,g=0;g<28;g++)for(l[g]=i,t=0;t<1<<a[g];t++)o[i++]=g;for(o[i-1]=g,w=0,g=0;g<16;g++)for(c[g]=w,t=0;t<1<<n[g];t++)h[w++]=g;for(w>>=7;g<30;g++)for(c[g]=w<<7,t=0;t<1<<n[g]-7;t++)h[256+w++]=g;for(e=0;e<=15;e++)m[e]=0;for(t=0;t<=143;)s[2*t+1]=8,t++,m[8]++;for(;t<=255;)s[2*t+1]=9,t++,m[9]++;for(;t<=279;)s[2*t+1]=7,t++,m[7]++;for(;t<=287;)s[2*t+1]=8,t++,m[8]++;for(z(s,287,m),t=0;t<30;t++)_[2*t+1]=5,_[2*t]=y(t,5);d=new p(s,a,257,286,15),u=new p(_,n,0,30,15),f=new p(new Array(0),r,0,19,7)}(),L=!0),t.l_desc=new g(t.dyn_ltree,d),t.d_desc=new g(t.dyn_dtree,u),t.bl_desc=new g(t.bl_tree,f),t.bi_buf=0,t.bi_valid=0,k(t)},F=O,N=function(t,e,a,n){var r,h,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),U(t,t.l_desc),U(t,t.d_desc),o=function(t){var e;for(R(t,t.dyn_ltree,t.l_desc.max_code),R(t,t.dyn_dtree,t.d_desc.max_code),U(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*i[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,(h=t.static_len+3+7>>>3)<=r&&(r=h)):r=h=a+5,a+4<=r&&-1!==e?O(t,e,a,n):4===t.strategy||h===r?(b(t,2+(n?1:0),3),Z(t,s,_)):(b(t,4+(n?1:0),3),function(t,e,a,n){var r;for(b(t,e-257,5),b(t,a-1,5),b(t,n-4,4),r=0;r<n;r++)b(t,t.bl_tree[2*i[r]+1],3);S(t,t.dyn_ltree,e-1),S(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),Z(t,t.dyn_ltree,t.dyn_dtree)),k(t),n&&x(t)},D=function(t,e,a){return t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=a,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(o[a]+256+1)]++,t.dyn_dtree[2*w(e)]++),t.sym_next===t.sym_end},C=function(t){b(t,2,3),v(t,256,s),function(t){16===t.bi_valid?(m(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)},I=function(t,e,a,n){for(var r=65535&t|0,i=t>>>16&65535|0,s=0;0!==a;){a-=s=a>2e3?2e3:a;do{i=i+(r=r+e[n++]|0)|0}while(--s);r%=65521,i%=65521}return r|i<<16|0},B=new Uint32Array(function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}()),M=function(t,e,a,n){var r=B,i=n+a;t^=-1;for(var s=n;s<i;s++)t=t>>>8^r[255&(t^e[s])];return-1^t},H={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},j={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},P=T,K=F,Y=N,X=D,G=C,W=j.Z_NO_FLUSH,J=j.Z_PARTIAL_FLUSH,q=j.Z_FULL_FLUSH,Q=j.Z_FINISH,V=j.Z_BLOCK,$=j.Z_OK,tt=j.Z_STREAM_END,et=j.Z_STREAM_ERROR,at=j.Z_DATA_ERROR,nt=j.Z_BUF_ERROR,rt=j.Z_DEFAULT_COMPRESSION,it=j.Z_FILTERED,st=j.Z_HUFFMAN_ONLY,_t=j.Z_RLE,ht=j.Z_FIXED,ot=j.Z_UNKNOWN,lt=j.Z_DEFLATED,dt=258,ut=262,ft=42,ct=113,pt=666,gt=function(t,e){return t.msg=H[e],e},wt=function(t){return 2*t-(t>4?9:0)},mt=function(t){for(var e=t.length;--e>=0;)t[e]=0},bt=function(t){var e,a,n,r=t.w_size;n=e=t.hash_size;do{a=t.head[--n],t.head[n]=a>=r?a-r:0}while(--e);n=e=r;do{a=t.prev[--n],t.prev[n]=a>=r?a-r:0}while(--e)},vt=function(t,e,a){return(e<<t.hash_shift^a)&t.hash_mask},yt=function(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},zt=function(t,e){Y(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,yt(t.strm)},kt=function(t,e){t.pending_buf[t.pending++]=e},xt=function(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},At=function(t,e,a,n){var r=t.avail_in;return r>n&&(r=n),0===r?0:(t.avail_in-=r,e.set(t.input.subarray(t.next_in,t.next_in+r),a),1===t.state.wrap?t.adler=I(t.adler,e,r,a):2===t.state.wrap&&(t.adler=M(t.adler,e,r,a)),t.next_in+=r,t.total_in+=r,r)},Et=function(t,e){var a,n,r=t.max_chain_length,i=t.strstart,s=t.prev_length,_=t.nice_match,h=t.strstart>t.w_size-ut?t.strstart-(t.w_size-ut):0,o=t.window,l=t.w_mask,d=t.prev,u=t.strstart+dt,f=o[i+s-1],c=o[i+s];t.prev_length>=t.good_match&&(r>>=2),_>t.lookahead&&(_=t.lookahead);do{if(o[(a=e)+s]===c&&o[a+s-1]===f&&o[a]===o[i]&&o[++a]===o[i+1]){i+=2,a++;do{}while(o[++i]===o[++a]&&o[++i]===o[++a]&&o[++i]===o[++a]&&o[++i]===o[++a]&&o[++i]===o[++a]&&o[++i]===o[++a]&&o[++i]===o[++a]&&o[++i]===o[++a]&&i<u);if(n=dt-(u-i),i=u-dt,n>s){if(t.match_start=e,s=n,n>=_)break;f=o[i+s-1],c=o[i+s]}}}while((e=d[e&l])>h&&0!=--r);return s<=t.lookahead?s:t.lookahead},Zt=function(t){var e,a,n,r=t.w_size;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=r+(r-ut)&&(t.window.set(t.window.subarray(r,r+r-a),0),t.match_start-=r,t.strstart-=r,t.block_start-=r,t.insert>t.strstart&&(t.insert=t.strstart),bt(t),a+=r),0===t.strm.avail_in)break;if(e=At(t.strm,t.window,t.strstart+t.lookahead,a),t.lookahead+=e,t.lookahead+t.insert>=3)for(n=t.strstart-t.insert,t.ins_h=t.window[n],t.ins_h=vt(t,t.ins_h,t.window[n+1]);t.insert&&(t.ins_h=vt(t,t.ins_h,t.window[n+3-1]),t.prev[n&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=n,n++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<ut&&0!==t.strm.avail_in)},Ut=function(t,e){var a,n,r,i=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,s=0,_=t.strm.avail_in;do{if(a=65535,r=t.bi_valid+42>>3,t.strm.avail_out<r)break;if(r=t.strm.avail_out-r,a>(n=t.strstart-t.block_start)+t.strm.avail_in&&(a=n+t.strm.avail_in),a>r&&(a=r),a<i&&(0===a&&e!==Q||e===W||a!==n+t.strm.avail_in))break;s=e===Q&&a===n+t.strm.avail_in?1:0,K(t,0,0,s),t.pending_buf[t.pending-4]=a,t.pending_buf[t.pending-3]=a>>8,t.pending_buf[t.pending-2]=~a,t.pending_buf[t.pending-1]=~a>>8,yt(t.strm),n&&(n>a&&(n=a),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+n),t.strm.next_out),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n,t.block_start+=n,a-=n),a&&(At(t.strm,t.strm.output,t.strm.next_out,a),t.strm.next_out+=a,t.strm.avail_out-=a,t.strm.total_out+=a)}while(0===s);return(_-=t.strm.avail_in)&&(_>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=_&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-_,t.strm.next_in),t.strstart),t.strstart+=_,t.insert+=_>t.w_size-t.insert?t.w_size-t.insert:_),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),s?4:e!==W&&e!==Q&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(r=t.window_size-t.strstart,t.strm.avail_in>r&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,r+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),r>t.strm.avail_in&&(r=t.strm.avail_in),r&&(At(t.strm,t.window,t.strstart,r),t.strstart+=r,t.insert+=r>t.w_size-t.insert?t.w_size-t.insert:r),t.high_water<t.strstart&&(t.high_water=t.strstart),r=t.bi_valid+42>>3,i=(r=t.pending_buf_size-r>65535?65535:t.pending_buf_size-r)>t.w_size?t.w_size:r,((n=t.strstart-t.block_start)>=i||(n||e===Q)&&e!==W&&0===t.strm.avail_in&&n<=r)&&(a=n>r?r:n,s=e===Q&&0===t.strm.avail_in&&a===n?1:0,K(t,t.block_start,a,s),t.block_start+=a,yt(t.strm)),s?3:1)},Rt=function(t,e){for(var a,n;;){if(t.lookahead<ut){if(Zt(t),t.lookahead<ut&&e===W)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=vt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-ut&&(t.match_length=Et(t,a)),t.match_length>=3)if(n=X(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=vt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=vt(t,t.ins_h,t.window[t.strstart+1]);else n=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===Q?(zt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(zt(t,!1),0===t.strm.avail_out)?1:2},St=function(t,e){for(var a,n,r;;){if(t.lookahead<ut){if(Zt(t),t.lookahead<ut&&e===W)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=vt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-ut&&(t.match_length=Et(t,a),t.match_length<=5&&(t.strategy===it||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,n=X(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=vt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(zt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=X(t,0,t.window[t.strstart-1]))&&zt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=X(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===Q?(zt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(zt(t,!1),0===t.strm.avail_out)?1:2};function Lt(t,e,a,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=n,this.func=r}var Ot=[new Lt(0,0,0,0,Ut),new Lt(4,4,8,4,Rt),new Lt(4,5,16,8,Rt),new Lt(4,6,32,32,Rt),new Lt(4,4,16,16,St),new Lt(8,16,32,32,St),new Lt(8,16,128,128,St),new Lt(8,32,128,256,St),new Lt(32,128,258,1024,St),new Lt(32,258,258,4096,St)];function Tt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=lt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),mt(this.dyn_ltree),mt(this.dyn_dtree),mt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),mt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),mt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Ft=function(t){if(!t)return 1;var e=t.state;return!e||e.strm!==t||e.status!==ft&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==ct&&e.status!==pt?1:0},Nt=function(t){if(Ft(t))return gt(t,et);t.total_in=t.total_out=0,t.data_type=ot;var e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?ft:ct,t.adler=2===e.wrap?0:1,e.last_flush=-2,P(e),$},Dt=function(t){var e,a=Nt(t);return a===$&&((e=t.state).window_size=2*e.w_size,mt(e.head),e.max_lazy_match=Ot[e.level].max_lazy,e.good_match=Ot[e.level].good_length,e.nice_match=Ot[e.level].nice_length,e.max_chain_length=Ot[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),a},Ct=function(t,e,a,n,r,i){if(!t)return et;var s=1;if(e===rt&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),r<1||r>9||a!==lt||n<8||n>15||e<0||e>9||i<0||i>ht||8===n&&1!==s)return gt(t,et);8===n&&(n=9);var _=new Tt;return t.state=_,_.strm=t,_.status=ft,_.wrap=s,_.gzhead=null,_.w_bits=n,_.w_size=1<<_.w_bits,_.w_mask=_.w_size-1,_.hash_bits=r+7,_.hash_size=1<<_.hash_bits,_.hash_mask=_.hash_size-1,_.hash_shift=~~((_.hash_bits+3-1)/3),_.window=new Uint8Array(2*_.w_size),_.head=new Uint16Array(_.hash_size),_.prev=new Uint16Array(_.w_size),_.lit_bufsize=1<<r+6,_.pending_buf_size=4*_.lit_bufsize,_.pending_buf=new Uint8Array(_.pending_buf_size),_.sym_buf=_.lit_bufsize,_.sym_end=3*(_.lit_bufsize-1),_.level=e,_.strategy=i,_.method=a,Dt(t)},It=Ct,Bt=function(t,e){return Ft(t)||2!==t.state.wrap?et:(t.state.gzhead=e,$)},Mt=function(t,e){if(Ft(t)||e>V||e<0)return t?gt(t,et):et;var a=t.state;if(!t.output||0!==t.avail_in&&!t.input||a.status===pt&&e!==Q)return gt(t,0===t.avail_out?nt:et);var n=a.last_flush;if(a.last_flush=e,0!==a.pending){if(yt(t),0===t.avail_out)return a.last_flush=-1,$}else if(0===t.avail_in&&wt(e)<=wt(n)&&e!==Q)return gt(t,nt);if(a.status===pt&&0!==t.avail_in)return gt(t,nt);if(a.status===ft&&0===a.wrap&&(a.status=ct),a.status===ft){var r=lt+(a.w_bits-8<<4)<<8;if(r|=(a.strategy>=st||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(r|=32),xt(a,r+=31-r%31),0!==a.strstart&&(xt(a,t.adler>>>16),xt(a,65535&t.adler)),t.adler=1,a.status=ct,yt(t),0!==a.pending)return a.last_flush=-1,$}if(57===a.status)if(t.adler=0,kt(a,31),kt(a,139),kt(a,8),a.gzhead)kt(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),kt(a,255&a.gzhead.time),kt(a,a.gzhead.time>>8&255),kt(a,a.gzhead.time>>16&255),kt(a,a.gzhead.time>>24&255),kt(a,9===a.level?2:a.strategy>=st||a.level<2?4:0),kt(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(kt(a,255&a.gzhead.extra.length),kt(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=M(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69;else if(kt(a,0),kt(a,0),kt(a,0),kt(a,0),kt(a,0),kt(a,9===a.level?2:a.strategy>=st||a.level<2?4:0),kt(a,3),a.status=ct,yt(t),0!==a.pending)return a.last_flush=-1,$;if(69===a.status){if(a.gzhead.extra){for(var i=a.pending,s=(65535&a.gzhead.extra.length)-a.gzindex;a.pending+s>a.pending_buf_size;){var _=a.pending_buf_size-a.pending;if(a.pending_buf.set(a.gzhead.extra.subarray(a.gzindex,a.gzindex+_),a.pending),a.pending=a.pending_buf_size,a.gzhead.hcrc&&a.pending>i&&(t.adler=M(t.adler,a.pending_buf,a.pending-i,i)),a.gzindex+=_,yt(t),0!==a.pending)return a.last_flush=-1,$;i=0,s-=_}var h=new Uint8Array(a.gzhead.extra);a.pending_buf.set(h.subarray(a.gzindex,a.gzindex+s),a.pending),a.pending+=s,a.gzhead.hcrc&&a.pending>i&&(t.adler=M(t.adler,a.pending_buf,a.pending-i,i)),a.gzindex=0}a.status=73}if(73===a.status){if(a.gzhead.name){var o,l=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>l&&(t.adler=M(t.adler,a.pending_buf,a.pending-l,l)),yt(t),0!==a.pending)return a.last_flush=-1,$;l=0}o=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,kt(a,o)}while(0!==o);a.gzhead.hcrc&&a.pending>l&&(t.adler=M(t.adler,a.pending_buf,a.pending-l,l)),a.gzindex=0}a.status=91}if(91===a.status){if(a.gzhead.comment){var d,u=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>u&&(t.adler=M(t.adler,a.pending_buf,a.pending-u,u)),yt(t),0!==a.pending)return a.last_flush=-1,$;u=0}d=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,kt(a,d)}while(0!==d);a.gzhead.hcrc&&a.pending>u&&(t.adler=M(t.adler,a.pending_buf,a.pending-u,u))}a.status=103}if(103===a.status){if(a.gzhead.hcrc){if(a.pending+2>a.pending_buf_size&&(yt(t),0!==a.pending))return a.last_flush=-1,$;kt(a,255&t.adler),kt(a,t.adler>>8&255),t.adler=0}if(a.status=ct,yt(t),0!==a.pending)return a.last_flush=-1,$}if(0!==t.avail_in||0!==a.lookahead||e!==W&&a.status!==pt){var f=0===a.level?Ut(a,e):a.strategy===st?function(t,e){for(var a;;){if(0===t.lookahead&&(Zt(t),0===t.lookahead)){if(e===W)return 1;break}if(t.match_length=0,a=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Q?(zt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(zt(t,!1),0===t.strm.avail_out)?1:2}(a,e):a.strategy===_t?function(t,e){for(var a,n,r,i,s=t.window;;){if(t.lookahead<=dt){if(Zt(t),t.lookahead<=dt&&e===W)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=s[r=t.strstart-1])===s[++r]&&n===s[++r]&&n===s[++r]){i=t.strstart+dt;do{}while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<i);t.match_length=dt-(i-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=X(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Q?(zt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(zt(t,!1),0===t.strm.avail_out)?1:2}(a,e):Ot[a.level].func(a,e);if(3!==f&&4!==f||(a.status=pt),1===f||3===f)return 0===t.avail_out&&(a.last_flush=-1),$;if(2===f&&(e===J?G(a):e!==V&&(K(a,0,0,!1),e===q&&(mt(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),yt(t),0===t.avail_out))return a.last_flush=-1,$}return e!==Q?$:a.wrap<=0?tt:(2===a.wrap?(kt(a,255&t.adler),kt(a,t.adler>>8&255),kt(a,t.adler>>16&255),kt(a,t.adler>>24&255),kt(a,255&t.total_in),kt(a,t.total_in>>8&255),kt(a,t.total_in>>16&255),kt(a,t.total_in>>24&255)):(xt(a,t.adler>>>16),xt(a,65535&t.adler)),yt(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?$:tt)},Ht=function(t){if(Ft(t))return et;var e=t.state.status;return t.state=null,e===ct?gt(t,at):$},jt=function(t,e){var a=e.length;if(Ft(t))return et;var n=t.state,r=n.wrap;if(2===r||1===r&&n.status!==ft||n.lookahead)return et;if(1===r&&(t.adler=I(t.adler,e,a,0)),n.wrap=0,a>=n.w_size){0===r&&(mt(n.head),n.strstart=0,n.block_start=0,n.insert=0);var i=new Uint8Array(n.w_size);i.set(e.subarray(a-n.w_size,a),0),e=i,a=n.w_size}var s=t.avail_in,_=t.next_in,h=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,Zt(n);n.lookahead>=3;){var o=n.strstart,l=n.lookahead-2;do{n.ins_h=vt(n,n.ins_h,n.window[o+3-1]),n.prev[o&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=o,o++}while(--l);n.strstart=o,n.lookahead=2,Zt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=_,t.input=h,t.avail_in=s,n.wrap=r,$};function Pt(t){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pt(t)}var Kt=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){}for(var Yt=new Uint8Array(256),Xt=0;Xt<256;Xt++)Yt[Xt]=Xt>=252?6:Xt>=248?5:Xt>=240?4:Xt>=224?3:Xt>=192?2:1;Yt[254]=Yt[254]=1;var Gt=function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var e,a,n,r,i,s=t.length,_=0;for(r=0;r<s;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),_+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(_),i=0,r=0;i<_;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),a<128?e[i++]=a:a<2048?(e[i++]=192|a>>>6,e[i++]=128|63&a):a<65536?(e[i++]=224|a>>>12,e[i++]=128|a>>>6&63,e[i++]=128|63&a):(e[i++]=240|a>>>18,e[i++]=128|a>>>12&63,e[i++]=128|a>>>6&63,e[i++]=128|63&a);return e},Wt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Jt=Object.prototype.toString,qt=j.Z_NO_FLUSH,Qt=j.Z_SYNC_FLUSH,Vt=j.Z_FULL_FLUSH,$t=j.Z_FINISH,te=j.Z_OK,ee=j.Z_STREAM_END,ae=j.Z_DEFAULT_COMPRESSION,ne=j.Z_DEFAULT_STRATEGY,re=j.Z_DEFLATED;function ie(t){this.options=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var a=e.shift();if(a){if("object"!==Pt(a))throw new TypeError(a+"must be non-object");for(var n in a)Kt(a,n)&&(t[n]=a[n])}}return t}({level:ae,method:re,chunkSize:16384,windowBits:15,memLevel:8,strategy:ne},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Wt,this.strm.avail_out=0;var a=It(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==te)throw new Error(H[a]);if(e.header&&Bt(this.strm,e.header),e.dictionary){var n;if(n="string"==typeof e.dictionary?Gt(e.dictionary):"[object ArrayBuffer]"===Jt.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(a=jt(this.strm,n))!==te)throw new Error(H[a]);this._dict_set=!0}}function se(t,e){var a=new ie(e);if(a.push(t,!0),a.err)throw a.msg||H[a.err];return a.result}ie.prototype.push=function(t,e){var a,n,r=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(n=e===~~e?e:!0===e?$t:qt,"string"==typeof t?r.input=Gt(t):"[object ArrayBuffer]"===Jt.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(n===Qt||n===Vt)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if((a=Mt(r,n))===ee)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=Ht(this.strm),this.onEnd(a),this.ended=!0,a===te;if(0!==r.avail_out){if(n>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},ie.prototype.onData=function(t){this.chunks.push(t)},ie.prototype.onEnd=function(t){t===te&&(this.result=function(t){for(var e=0,a=0,n=t.length;a<n;a++)e+=t[a].length;for(var r=new Uint8Array(e),i=0,s=0,_=t.length;i<_;i++){var h=t[i];r.set(h,s),s+=h.length}return r}(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var _e=ie,he=se,oe=function(t,e){return(e=e||{}).raw=!0,se(t,e)},le=function(t,e){return(e=e||{}).gzip=!0,se(t,e)},de=j,ue={Deflate:_e,deflate:he,deflateRaw:oe,gzip:le,constants:de};t.Deflate=_e,t.constants=de,t.default=ue,t.deflate=he,t.deflateRaw=oe,t.gzip=le,Object.defineProperty(t,"__esModule",{value:!0})})),this.addEventListener("message",(function(t){const e=encodeURIComponent(t.data.object),a=new Uint8Array(e.length);for(let t=0;t<e.length;++t)a[t]=e[t].charCodeAt(0);const n=t.data.type;if("json"===n)this.postMessage({json:JSON.stringify({buffer:Array.from(pako.deflate(a)),type:"zlib"}),type:n});else{const t=pako.deflate(a);this.postMessage({buffer:t,type:n},[t.buffer])}}));'],{type:"text/javascript"}))),k.$zlibWorker.onmessage=e=>{const t=e.data.type;switch(t){case"json":case"n2d":k.$saveProgress.createFile(),setTimeout((()=>{const a=document.getElementById("save-anchor");a.href&&URL.revokeObjectURL(a.href),a.download=`${k.$currentWorkSpace().name}.${t}`,a.href="json"===t?URL.createObjectURL(new Blob([e.data.json],{type:"application/json"})):URL.createObjectURL(new Blob([e.data.buffer],{type:"text/plain"})),a.click(),k.$saveProgress.end()}),200);break;case"local":{const t=e.data.buffer;new Promise((e=>{window.requestAnimationFrame((()=>{k.$saveProgress.createBinary();let a="";for(let e=0;e<t.length;e+=4096)a+=String.fromCharCode.apply(null,t.slice(e,e+4096));e(a)}))})).then((e=>{k.$saveProgress.launchDatabase(90);k.$launchDB().onsuccess=t=>{const a=t.target.result.transaction(`${k.DATABASE_NAME}`,"readwrite");a.objectStore(`${k.DATABASE_NAME}`).put(e,k.STORE_KEY),a.oncomplete=e=>{e.target.db.close(),k.$updated=!1,k.$saveProgress.end()},k.$saveProgress.commit(),a.commit()}}))}}k.$zlibQueues.length?k.$zlibWorker.postMessage(k.$zlibQueues.pop()):k.$zlibWorkerActive=!1},k.$zlibQueues=[],k.$zlibWorkerActive=!1,k.$unzipURL=URL.createObjectURL(new Blob(['const Util={};Util.$Uint8Array=Uint8Array,Util.$Uint16Array=Uint16Array,Util.$Int16Array=Int16Array,Util.$ArrayBuffer=ArrayBuffer,Util.$max=Math.max,Util.$min=Math.min,Util.$potArrayBuffers=new Map,Util.$codeTables=[],Util.$getCodeTable=function(t,e){const i=Util.$codeTables.pop()||{key:null,value:null};return i.key=t,i.value=e,i},Util.$poolCodeTable=function(t){Util.$codeTables.push(t)},Util.$poolTypedArrayBuffer=function(t){const e=t.buffer,i=e.byteLength;if(!i||i!==Util.$upperPowerOfTwo(i))return;let r=Util.$potArrayBuffers.get(i);r||(r=[],Util.$potArrayBuffers.set(i,r)),r.push(e)},Util.$upperPowerOfTwo=function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t},Util.$getUint8Array=function(t){let e;const i=Util.$upperPowerOfTwo(t),r=Util.$potArrayBuffers.get(i),l=r&&r.pop();return l?(e=new Util.$Uint8Array(l,0,t),e.fill(0)):e=new Util.$Uint8Array(new Util.$ArrayBuffer(i),0,t),e},Util.$getUint16Array=function(t){let e;const i=Util.$upperPowerOfTwo(2*t),r=Util.$potArrayBuffers.get(i),l=r&&r.pop();return l?(e=new Util.$Uint16Array(l,0,t),e.fill(0)):e=new Util.$Uint16Array(new Util.$ArrayBuffer(i),0,t),e},Util.$fixedDistTable={key:new Util.$Uint16Array([5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5]),value:new Util.$Uint16Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31])},Util.$fixedLitTable={key:new Util.$Uint16Array([7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9]),value:new Util.$Uint16Array([256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,280,281,282,283,284,285,286,287,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255])},Util.$ORDER=new Util.$Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Util.$LEXT=new Util.$Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99]),Util.$LENS=new Util.$Int16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Util.$DEXT=new Util.$Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Util.$DISTS=new Util.$Int16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]);class ByteStream{constructor(){this.initialization()}initialization(){this.data=null,this.bit_offset=0,this.byte_offset=0,this.bit_buffer=null}byteAlign(){this.bit_offset&&(this.byte_offset=this.byte_offset+(this.bit_offset+7)/8|0,this.bit_offset=0)}getData(t){this.byteAlign();const e=this.byte_offset+t,i=this.data.slice(this.byte_offset,e);return this.byte_offset=e,i}setOffset(t,e){this.byte_offset=t,this.bit_offset=e}unzip(t,e=0){let i=e;const r=Util.$getUint8Array(19);let l=null,a=null;for(;;){const e=this.readUB(1),s=this.readUB(2);if(l&&(Util.$poolCodeTable(l),Util.$poolCodeTable(a)),l=null,a=null,s){if(1===s)l=Util.$fixedDistTable,a=Util.$fixedLitTable;else{const t=this.readUB(5)+257,e=this.readUB(5)+1,i=this.readUB(4)+4;for(let t=0;t<i;++t)r[Util.$ORDER[t]]=this.readUB(3);const s=this.buildHuffTable(r);r.fill(0);const f=t+e|0,o=Util.$getUint8Array(f);let n=0;for(let t=0;t<f;){const e=this.decodeSymbol(s.key,s.value);switch(e){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:o[t++]=e,n=e;break;case 16:{let e=this.readUB(2)+3|0;for(;e;)--e,o[t++]=n}break;case 17:{let e=this.readUB(3)+3|0;for(;e;)--e,o[t++]=0}break;case 18:{let e=this.readUB(7)+11|0;for(;e;)--e,o[t++]=0}}}Util.$poolCodeTable(s),l=this.buildHuffTable(o.subarray(t)),a=this.buildHuffTable(o.subarray(0,t)),Util.$poolTypedArrayBuffer(o),Util.$poolTypedArrayBuffer(s.key),Util.$poolTypedArrayBuffer(s.value)}for(;;){const e=0|this.decodeSymbol(a.key,a.value);if(256===e)break;if(e<256)t[i++]=e;else{const r=e-257|0;let a=Util.$LENS[r]+this.readUB(Util.$LEXT[r])|0;const s=this.decodeSymbol(l.key,l.value);let f=i-(Util.$DISTS[s]+this.readUB(Util.$DEXT[s])|0)|0;for(;a;)--a,t[i++]=t[f++]}}}else{this.bit_offset=8,this.bit_buffer=null;const e=0|this.readNumber(2);this.byte_offset+=2;for(let r=0;r<e;++r)t[i++]=this.readNumber(1)}if(e)break}Util.$poolTypedArrayBuffer(r)}buildHuffTable(t){const e=t.length,i=Util.$max.apply(null,t),r=Util.$getUint8Array(i),l=Util.$getUint16Array(i+1);let a=0,s=0,f=e;for(;f;)s=t[--f],s&&++r[s];let o=0;for(let t=0;t<i;)a=a+r[t++]<<1,l[t]=a,o=Util.$max(o,a);const n=o+e,U=Util.$getUint16Array(n),u=Util.$getUint16Array(n);for(let i=0;i<e;++i)if(s=t[i],s){const t=l[s];U[t]=s,u[t]=i,l[s]=t+1|0}return Util.$poolTypedArrayBuffer(r),Util.$poolTypedArrayBuffer(l),Util.$getCodeTable(U,u)}decodeSymbol(t,e){let i=0,r=0;for(;;)if(i=i<<1|this.readUB(1),++r,t[i]===r)return e[i]}readUB(t){let e=0;for(let i=0;i<t;++i)8===this.bit_offset&&(this.bit_buffer=this.readNumber(1),this.bit_offset=0),e|=(this.bit_buffer&1<<this.bit_offset++?1:0)<<i;return e}readNumber(t){let e=0;const i=this.byte_offset;let r=i+t|0;for(;r>i;)e=e<<8|this.data[--r];return this.byte_offset+=t,e}}Util.$byteStream=new ByteStream,Util.$lossless=function(t,e,i,r,l,a){const s=new Util.$Uint8Array(e*i*4);if(3===r){const r=(e+3&-4)-e;let f=0;if(a){let a=4*l;for(let l=0;l<i;++l){for(let i=0;i<e;++i){const e=4*t[a++],i=t[e+3];if(0===i){s[f++]=0,s[f++]=0,s[f++]=0,s[f++]=0;continue}const r=t[e],l=t[e+1],o=t[e+2];255!==i?(s[f++]=255&Util.$min(r/i*255,255),s[f++]=255&Util.$min(l/i*255,255),s[f++]=255&Util.$min(o/i*255,255),s[f++]=i):(s[f++]=r,s[f++]=l,s[f++]=o,s[f++]=i)}a+=r}return s}let o=3*l;for(let l=0;l<i;++l){for(let i=0;i<e;++i){const e=3*t[o++];s[f++]=t[e],s[f++]=t[e+1],s[f++]=t[e+2],s[f++]=255}o+=r}return s}const f=e*i;if(a){for(let e=0;e<f;++e){const i=4*e,r=i,l=i+1,a=i+2,f=i+3,o=t[r];0!==o?255!==o?(s[r]=255&Util.$min(t[l]/o*255,255),s[l]=255&Util.$min(t[a]/o*255,255),s[a]=255&Util.$min(t[f]/o*255,255),s[f]=o):(s[r]=t[l],s[l]=t[a],s[a]=t[f],s[f]=o):(s[r]=0,s[l]=0,s[a]=0,s[f]=0)}return s}for(let e=0;e<f;++e){const i=4*e,r=i+1,l=i+2,a=i+3;s[i]=t[r],s[r]=t[l],s[l]=t[a],s[a]=255}return s},this.addEventListener("message",(function(t){const e=Util.$byteStream;switch(t.data.mode){case"swf":{e.data=t.data.buffer;const i=t.data.fileSize,r=new Util.$Uint8Array(i),l=e.getData(8);e.setOffset(10,8),r.set(l,0),e.unzip(r,8),this.postMessage({buffer:r,mode:t.data.mode},[r.buffer])}break;case"lossless":{const i=t.data,r=new Util.$Uint8Array(i.fileSize);e.data=t.data.buffer,e.setOffset(2,8),e.unzip(r,0);const l=Util.$lossless(r,i.width,i.height,i.format,i.tableSize,i.isAlpha);this.postMessage({buffer:l,mode:t.data.mode},[l.buffer])}break;case"jpegAlpha":{const i=t.data.width*t.data.height,r=new Util.$Uint8Array(i);e.data=t.data.alphaData,e.setOffset(2,8),e.unzip(r,0),t.data.alphaData=r,this.postMessage(t.data,[t.data.buffer.buffer,t.data.alphaData.buffer])}}Util.$byteStream.initialization()}));'],{type:"text/javascript"})),k.$unzipWorker=null,k.$unzipQueues=[],k.$unzipWorkerActive=!1,k.$launchDB=()=>{const e=indexedDB.open(`${k.PREFIX}@${k.DATABASE_NAME}`);return e.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(`${k.DATABASE_NAME}`)||t.createObjectStore(`${k.DATABASE_NAME}`)},e},k.$unzipHandler=function(e){const t=e.target;switch(t.onmessage=null,e.data.mode){case"swf":this._$byteStream._$buffer=e.data.buffer,this.parseAndBuild();break;case"lossless":{const t=k.$currentWorkSpace().getLibrary(this.libraryId);t._$buffer=e.data.buffer,t._$command=null}break;case"jpegAlpha":{const t=e.data.buffer,a=e.data.alphaData;let r=0;for(let e=0;e<t.length;e+=4)t[e+3]=a[r++];const i=k.$currentWorkSpace().getLibrary(this.libraryId);i._$buffer=t,i._$command=null}}if(k.$unzipQueues.length){const e=k.$unzipQueues.shift();switch(t.onmessage=k.$unzipHandler.bind(e),e.mode){case"swf":{const a=e._$byteStream._$buffer;t.postMessage({fileSize:e.fileSize,mode:e.mode,buffer:a},[a.buffer])}break;case"lossless":t.postMessage(e,[e.buffer.buffer]);break;case"jpegAlpha":t.postMessage(e,[e.buffer.buffer,e.alphaData.buffer])}}else k.$unzipWorkerActive=!1},k.$unlzmaWorkerURL=URL.createObjectURL(new Blob(['const LZMA={init:function(e){const t=[];t.push(e[12],e[13],e[14],e[15],e[16],e[4],e[5],e[6],e[7]);let s=8;for(let e=5;e<9;++e){if(t[e]>=s){t[e]=t[e]-s|0;break}t[e]=256+t[e]-s|0,s=1}return t.push(0,0,0,0),e.set(t,4),e.subarray(4)},reverseDecode2:function(e,t,s,i){let r=1,o=0,d=0;for(;d<i;++d){const i=s.decodeBit(e,t+r);r=r<<1|i,o|=i<<d}return o},decompress:function(e,t){const s=new Decoder,i=s.decodeHeader(e),r=i.uncompressedSize;if(s.setProperties(i),!s.decodeBody(e,t,r))throw new Error("Error in lzma data stream");return t}};class OutWindow{constructor(){this._buffer=null,this._stream=null,this._pos=0,this._streamPos=0,this._windowSize=0}create(e){this._buffer&&this._windowSize===e||(this._buffer=new Uint8Array(e)),this._windowSize=e}flush(){const e=this._pos-this._streamPos;e&&(this._stream.writeBytes(this._buffer,e),this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos)}releaseStream(){this.flush(),this._stream=null}setStream(e){this._stream=e}init(e=!1){e||(this._streamPos=0,this._pos=0)}copyBlock(e,t){let s=this._pos-e-1;for(s<0&&(s+=this._windowSize);t--;)s>=this._windowSize&&(s=0),this._buffer[this._pos++]=this._buffer[s++],this._pos>=this._windowSize&&this.flush()}putByte(e){this._buffer[this._pos++]=e,this._pos>=this._windowSize&&this.flush()}getByte(e){let t=this._pos-e-1;return t<0&&(t+=this._windowSize),this._buffer[t]}}class RangeDecoder{constructor(){this._stream=null,this._code=0,this._range=-1}setStream(e){this._stream=e}releaseStream(){this._stream=null}init(){let e=5;for(this._code=0,this._range=-1;e--;)this._code=this._code<<8|this._stream.readByte()}decodeDirectBits(e){let t=0,s=e;for(;s--;){this._range>>>=1;const e=this._code-this._range>>>31;this._code-=this._range&e-1,t=t<<1|1-e,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8)}return t}decodeBit(e,t){const s=e[t],i=(this._range>>>11)*s;return(2147483648^this._code)<(2147483648^i)?(this._range=i,e[t]+=2048-s>>>5,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=i,this._code-=i,e[t]-=s>>>5,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)}}class BitTreeDecoder{constructor(e){this._models=Array(1<<e).fill(1024),this._numBitLevels=e}decode(e){let t=1,s=this._numBitLevels;for(;s--;)t=t<<1|e.decodeBit(this._models,t);return t-(1<<this._numBitLevels)}reverseDecode(e){let t=1,s=0,i=0;for(;i<this._numBitLevels;++i){const r=e.decodeBit(this._models,t);t=t<<1|r,s|=r<<i}return s}}class LenDecoder{constructor(){this._choice=[1024,1024],this._lowCoder=[],this._midCoder=[],this._highCoder=new BitTreeDecoder(8),this._numPosStates=0}create(e){for(;this._numPosStates<e;++this._numPosStates)this._lowCoder[this._numPosStates]=new BitTreeDecoder(3),this._midCoder[this._numPosStates]=new BitTreeDecoder(3)}decode(e,t){return 0===e.decodeBit(this._choice,0)?this._lowCoder[t].decode(e):0===e.decodeBit(this._choice,1)?8+this._midCoder[t].decode(e):16+this._highCoder.decode(e)}}class Decoder2{constructor(){this._decoders=Array(768).fill(1024)}decodeNormal(e){let t=1;do{t=t<<1|e.decodeBit(this._decoders,t)}while(t<256);return 255&t}decodeWithMatchByte(e,t){let s=1;do{const i=t>>7&1;t<<=1;const r=e.decodeBit(this._decoders,(1+i<<8)+s);if(s=s<<1|r,i!==r){for(;s<256;)s=s<<1|e.decodeBit(this._decoders,s);break}}while(s<256);return 255&s}}class LiteralDecoder{create(e,t){if(this._coders&&this._numPrevBits===t&&this._numPosBits===e)return;this._numPosBits=e,this._posMask=(1<<e)-1,this._numPrevBits=t,this._coders=[];let s=1<<this._numPrevBits+this._numPosBits;for(;s--;)this._coders[s]=new Decoder2}getDecoder(e,t){return this._coders[((e&this._posMask)<<this._numPrevBits)+((255&t)>>>8-this._numPrevBits)]}}class Decoder{constructor(){this._outWindow=new OutWindow,this._rangeDecoder=new RangeDecoder,this._isMatchDecoders=Array(192).fill(1024),this._isRepDecoders=Array(12).fill(1024),this._isRepG0Decoders=Array(12).fill(1024),this._isRepG1Decoders=Array(12).fill(1024),this._isRepG2Decoders=Array(12).fill(1024),this._isRep0LongDecoders=Array(192).fill(1024),this._posDecoders=Array(114).fill(1024),this._posAlignDecoder=new BitTreeDecoder(4),this._lenDecoder=new LenDecoder,this._repLenDecoder=new LenDecoder,this._literalDecoder=new LiteralDecoder,this._dictionarySize=-1,this._dictionarySizeCheck=-1,this._posSlotDecoder=[new BitTreeDecoder(6),new BitTreeDecoder(6),new BitTreeDecoder(6),new BitTreeDecoder(6)]}setDictionarySize(e){return!(e<0)&&(this._dictionarySize!==e&&(this._dictionarySize=e,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)}setLcLpPb(e,t,s){if(e>8||t>4||s>4)return!1;const i=1<<s;return this._literalDecoder.create(t,e),this._lenDecoder.create(i),this._repLenDecoder.create(i),this._posStateMask=i-1,!0}setProperties(e){if(!this.setLcLpPb(e.lc,e.lp,e.pb))throw Error("Incorrect stream properties");if(!this.setDictionarySize(e.dictionarySize))throw Error("Invalid dictionary size")}decodeHeader(e){if(e._$size<13)return!1;let t=e.readByte();const s=t%9;t=~~(t/9);const i=t%5,r=~~(t/5);let o=e.readByte();o|=e.readByte()<<8,o|=e.readByte()<<16,o+=16777216*e.readByte();let d=e.readByte();return d|=e.readByte()<<8,d|=e.readByte()<<16,d+=16777216*e.readByte(),e.readByte(),e.readByte(),e.readByte(),e.readByte(),{lc:s,lp:i,pb:r,dictionarySize:o,uncompressedSize:d}}decodeBody(e,t,s){let i,r,o=0,d=0,h=0,c=0,n=0,_=0,a=0;for(this._rangeDecoder.setStream(e),this._rangeDecoder.init(),this._outWindow.setStream(t),this._outWindow.init(!1);_<s;){const e=_&this._posStateMask;if(0===this._rangeDecoder.decodeBit(this._isMatchDecoders,(o<<4)+e)){const e=this._literalDecoder.getDecoder(_++,a);a=o>=7?e.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(d)):e.decodeNormal(this._rangeDecoder),this._outWindow.putByte(a),o=o<4?0:o-(o<10?3:6)}else{if(1===this._rangeDecoder.decodeBit(this._isRepDecoders,o))i=0,0===this._rangeDecoder.decodeBit(this._isRepG0Decoders,o)?0===this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(o<<4)+e)&&(o=o<7?9:11,i=1):(0===this._rangeDecoder.decodeBit(this._isRepG1Decoders,o)?r=h:(0===this._rangeDecoder.decodeBit(this._isRepG2Decoders,o)?r=c:(r=n,n=c),c=h),h=d,d=r),0===i&&(i=2+this._repLenDecoder.decode(this._rangeDecoder,e),o=o<7?8:11);else{n=c,c=h,h=d,i=2+this._lenDecoder.decode(this._rangeDecoder,e),o=o<7?7:10;const t=this._posSlotDecoder[i<=5?i-2:3].decode(this._rangeDecoder);if(t>=4){const e=(t>>1)-1;if(d=(2|1&t)<<e,t<14)d+=LZMA.reverseDecode2(this._posDecoders,d-t-1,this._rangeDecoder,e);else if(d+=this._rangeDecoder.decodeDirectBits(e-4)<<4,d+=this._posAlignDecoder.reverseDecode(this._rangeDecoder),d<0){if(-1===d)break;return!1}}else d=t}if(d>=_||d>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(d,i),_+=i,a=this._outWindow.getByte(0)}}return this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0}}class InStream{constructor(e){this._$data=e,this._$size=e.length,this._$offset=0}readByte(){return this._$data[this._$offset++]}}class OutStream{constructor(e){this.size=8,this.buffers=e}writeBytes(e,t){e.length===t?this.buffers.set(e,this.size):this.buffers.set(e.subarray(0,t),this.size),this.size+=t}}this.addEventListener("message",(function(e){const t=e.data.fileSize,s=e.data.buffer,i=new Uint8Array(t+8);i.set(s.slice(0,8),0),LZMA.decompress(new InStream(LZMA.init(s)),new OutStream(i)),this.postMessage(i,[i.buffer]),this.close()}));'],{type:"text/javascript"})),k.$unlzmaQueues=[],k.$unlzmaWorkerActive=!1,k.$parserURL=URL.createObjectURL(new Blob(['const Util={$tagObjects:[]};Util.$installed=new Map,Util.$swfParser=null,Util.$Rad2Deg=180/Math.PI,Util.$JCT11280=Function(\'var a="zKV33~jZ4zN=~ji36XazM93y!{~k2y!o~k0ZlW6zN?3Wz3W?{EKzK[33[`y|;-~j^YOTz$!~kNy|L1$353~jV3zKk3~k-4P4zK_2+~jY4y!xYHR~jlz$_~jk4z$e3X5He<0y!wy|X3[:~l|VU[F3VZ056Hy!nz/m1XD61+1XY1E1=1y|bzKiz!H034zKj~mEz#c5ZA3-3X$1~mBz$$3~lyz#,4YN5~mEz#{ZKZ3V%7Y}!J3X-YEX_J(3~mAz =V;kE0/y|F3y!}~m>z/U~mI~j_2+~mA~jp2;~m@~k32;~m>V}2u~mEX#2x~mBy+x2242(~mBy,;2242(~may->2&XkG2;~mIy-_2&NXd2;~mGz,{4<6:.:B*B:XC4>6:.>B*BBXSA+A:X]E&E<~r#z+625z s2+zN=`HXI@YMXIAXZYUM8X4K/:Q!Z&33 3YWX[~mB`{zKt4z (zV/z 3zRw2%Wd39]S11z$PAXH5Xb;ZQWU1ZgWP%3~o@{Dgl#gd}T){Uo{y5_d{e@}C(} WU9|cB{w}bzvV|)[} H|zT}d||0~{]Q|(l{|x{iv{dw}(5}[Z|kuZ }cq{{y|ij}.I{idbof%cu^d}Rj^y|-M{ESYGYfYsZslS`?ZdYO__gLYRZ&fvb4oKfhSf^d<Yeasc1f&a=hnYG{QY{D`Bsa|u,}Dl|_Q{C%xK|Aq}C>|c#ryW=}eY{L+`)][YF_Ub^h4}[X|?r|u_ex}TL@YR]j{SrXgo*|Gv|rK}B#mu{R1}hs|dP{C7|^Qt3|@P{YVV |8&}#D}ef{e/{Rl|>Hni}R1{Z#{D[}CQlQ||E}[s{SG_+i8eplY[=[|ec[$YXn#`hcm}YR|{Ci(_[ql|?8p3]-}^t{wy}4la&pc|3e{Rp{LqiJ],] `kc(]@chYnrM`O^,ZLYhZB]ywyfGY~aex!_Qww{a!|)*lHrM{N+n&YYj~Z b c#e_[hZSon|rOt`}hBXa^i{lh|<0||r{KJ{kni)|x,|0auY{D!^Sce{w;|@S|cA}Xn{C1h${E]Z-XgZ*XPbp]^_qbH^e[`YM|a||+=]!Lc}]vdBc=j-YSZD]YmyYLYKZ9Z>Xcczc2{Yh}9Fc#Z.l{}(D{G{{mRhC|L3b#|xK[Bepj#ut`H[,{E9Yr}1b{[e]{ZFk7[ZYbZ0XL]}Ye[(`d}c!|*y`Dg=b;gR]Hm=hJho}R-[n}9;{N![7k_{UbmN]rf#pTe[x8}!Qcs_rs[m`|>N}^V})7{^r|/E}),}HH{OYe2{Skx)e<_.cj.cjoMhc^d}0uYZd!^J_@g,[[[?{i@][|3S}Yl3|!1|eZ|5IYw|1D}e7|Cv{OHbnx-`wvb[6[4} =g+k:{C:}ed{S]|2M]-}WZ|/q{LF|dYu^}Gs^c{Z=}h>|/i|{W]:|ip{N:|zt|S<{DH[p_tvD{N<[8Axo{X4a.^o^X>Yfa59`#ZBYgY~_t^9`jZHZn`>G[oajZ;X,i)Z.^~YJe ZiZF^{][[#Zt^|]Fjx]&_5dddW]P0C[-]}]d|y {C_jUql] |OpaA[Z{lp|rz}:Mu#]_Yf6{Ep?f5`$[6^D][^u[$[6^.Z8]]ePc2U/=]K^_+^M{q*|9tYuZ,s(dS{i=|bNbB{uG}0jZOa:[-]dYtu3]:]<{DJ_SZIqr_`l=Yt`gkTnXb3d@kiq0a`Z{|!B|}e}Ww{Sp,^Z|0>_Z}36|]A|-t}lt{R6pi|v8hPu#{C>YOZHYmg/Z4nicK[}hF_Bg|YRZ7c|crkzYZY}_iXcZ.|)U|L5{R~qi^Uga@Y[xb}&qdbd6h5|Btw[}c<{Ds53[Y7]?Z<|e0{L[ZK]mXKZ#Z2^tavf0`PE[OSOaP`4gi`qjdYMgys/?[nc,}EEb,eL]g[n{E_b/vcvgb.{kcwi`~v%|0:|iK{Jh_vf5lb}KL|(oi=LrzhhY_^@`zgf[~g)[J_0fk_V{T)}I_{D&_/d9W/|MU[)f$xW}?$xr4<{Lb{y4}&u{XJ|cm{Iu{jQ}CMkD{CX|7A}G~{kt)nB|d5|<-}WJ}@||d@|Iy}Ts|iL|/^|no|0;}L6{Pm]7}$zf:|r2}?C_k{R(}-w|`G{Gy[g]bVje=_0|PT{^Y^yjtT[[[l!Ye_`ZN]@[n_)j3nEgMa]YtYpZy].d-Y_cjb~Y~[nc~sCi3|zg}B0}do{O^{|$`_|D{}U&|0+{J3|8*]iayx{a{xJ_9|,c{Ee]QXlYb]$[%YMc*]w[aafe]aVYi[fZEii[xq2YQZHg]Y~h#|Y:thre^@^|_F^CbTbG_1^qf7{L-`VFx Zr|@EZ;gkZ@slgko`[e}T:{Cu^pddZ_`yav^Ea+[#ZBbSbO`elQfLui}.F|txYcbQ`XehcGe~fc^RlV{D_0ZAej[l&jShxG[ipB_=u:eU}3e8[=j|{D(}dO{Do[BYUZ0/]AYE]ALYhZcYlYP/^-^{Yt_1_-;YT`P4BZG=IOZ&]H[e]YYd[9^F[1YdZxZ?Z{Z<]Ba2[5Yb[0Z4l?]d_;_)a?YGEYiYv`_XmZs4ZjY^Zb]6gqGaX^9Y}dXZr[g|]Y}K aFZp^k^F]M`^{O1Ys]ZCgCv4|E>}8eb7}l`{L5[Z_faQ|c2}Fj}hw^#|Ng|B||w2|Sh{v+[G}aB|MY}A{|8o}X~{E8paZ:]i^Njq]new)`-Z>haounWhN}c#{DfZ|fK]KqGZ=:u|fqoqcv}2ssm}.r{]{nIfV{JW)[K|,Z{Uxc|]l_KdCb%]cfobya3`p}G^|LZiSC]U|(X|kBlVg[kNo({O:g:|-N|qT}9?{MBiL}Sq{`P|3a|u.{Uaq:{_o|^S}jX{Fob0`;|#y_@[V[K|cw[<_ }KU|0F}d3|et{Q7{LuZttsmf^kYZ`Af`}$x}U`|Ww}d]| >}K,r&|XI|*e{C/a-bmr1fId4[;b>tQ_:]hk{b-pMge]gfpo.|(w[jgV{EC1Z,YhaY^q,_G[c_g[J0YX]`[h^hYK^_Yib,` {i6vf@YM^hdOKZZn(jgZ>bzSDc^Z%[[o9[2=/YHZ(_/Gu_`*|8z{DUZxYt^vuvZjhi^lc&gUd4|<UiA`z]$b/Z?l}YI^jaHxe|;F}l${sQ}5g}hA|e4}?o{ih}Uz{C)jPe4]H^J[Eg[|AMZMlc}:,{iz}#*|gc{Iq|/:|zK{l&}#u|myd{{M&v~nV};L|(g|I]ogddb0xsd7^V})$uQ{HzazsgxtsO^l}F>ZB]r|{7{j@cU^{{CbiYoHlng]f+nQ[bkTn/}<-d9q {KXadZYo+n|l[|lc}V2{[a{S4Zam~Za^`{HH{xx_SvF|ak=c^[v^7_rYT`ld@]:_ub%[$[m](Shu}G2{E.ZU_L_R{tz`vj(f?^}hswz}GdZ}{S:h`aD|?W|`dgG|if{a8|J1{N,}-Ao3{H#{mfsP|[ bzn+}_Q{MT{u4kHcj_q`eZj[8o0jy{p7}C|[}l){MuYY{|Ff!Ykn3{rT|m,^R|,R}$~Ykgx{P!]>iXh6[l[/}Jgcg{JYZ.^qYfYIZl[gZ#Xj[Pc7YyZD^+Yt;4;`e8YyZVbQ7YzZxXja.7SYl[s]2^/Ha$[6ZGYrb%XiYdf2]H]kZkZ*ZQ[ZYS^HZXcCc%Z|[(bVZ]]:OJQ_DZCg<[,]%Zaa [g{C00HY[c%[ChyZ,Z_`PbXa+eh`^&jPi0a[ggvhlekL]w{Yp^v}[e{~;k%a&k^|nR_z_Qng}[E}*Wq:{k^{FJZpXRhmh3^p>de^=_7`|ZbaAZtdhZ?n4ZL]u`9ZNc3g%[6b=e.ZVfC[ZZ^^^hD{E(9c(kyZ=bb|Sq{k`|vmr>izlH[u|e`}49}Y%}FT{[z{Rk}Bz{TCc/lMiAqkf(m$hDc;qooi[}^o:c^|Qm}a_{mrZ(pA`,}<2sY| adf_%|}`}Y5U;}/4|D>|$X{jw{C<|F.hK|*A{MRZ8Zsm?imZm_?brYWZrYx`yVZc3a@f?aK^ojEd {bN}/3ZH]/$YZhm^&j 9|(S|b]mF}UI{q&aM]LcrZ5^.|[j`T_V_Gak}9J[ ZCZD|^h{N9{~&[6Zd{}B}2O|cv]K}3s}Uy|l,fihW{EG`j_QOp~Z$F^zexS`dcISfhZBXP|.vn|_HYQ|)9|cr]<`&Z6]m_(ZhPcSg>`Z]5`~1`0Xcb4k1{O!bz|CN_T{LR|a/gFcD|j<{Z._[f)mPc:1`WtIaT1cgYkZOaVZOYFrEe[}T$}Ch}mk{K-^@]fH{Hdi`c*Z&|Kt{if[C{Q;{xYB`dYIX:ZB[}]*[{{p9|4GYRh2ao{DS|V+[zd$`F[ZXKadb*A] Ys]Maif~a/Z2bmclb8{Jro_rz|x9cHojbZ{GzZx_)]:{wAayeDlx}<=`g{H1{l#}9i|)=|lP{Qq}.({La|!Y{i2EZfp=c*}Cc{EDvVB|;g}2t{W4av^Bn=]ri,|y?|3+}T*ckZ*{Ffr5e%|sB{lx^0]eZb]9[SgAjS_D|uHZx]dive[c.YPkcq/}db{EQh&hQ|eg}G!ljil|BO]X{Qr_GkGl~YiYWu=c3eb}29v3|D|}4i||.{Mv})V{SP1{FX}CZW6{cm|vO{pS|e#}A~|1i}81|Mw}es|5[}3w{C`h9aL]o{}p[G`>i%a1Z@`Ln2bD[$_h`}ZOjhdTrH{[j_:k~kv[Sdu]CtL}41{I |[[{]Zp$]XjxjHt_eThoa#h>sSt8|gK|TVi[Y{t=}Bs|b7Zpr%{gt|Yo{CS[/{iteva|cf^hgn}($_c^wmb^Wm+|55jrbF|{9^ q6{C&c+ZKdJkq_xOYqZYSYXYl`8]-cxZAq/b%b*_Vsa[/Ybjac/OaGZ4fza|a)gY{P?| I|Y |,pi1n7}9bm9ad|=d{aV|2@[(}B`d&|Uz}B}{`q|/H|!JkM{FU|CB|.{}Az}#P|lk}K{|2rk7{^8^?`/|k>|Ka{Sq}Gz}io{DxZh[yK_#}9<{TRdgc]`~Z>JYmYJ]|`!ZKZ]gUcx|^E[rZCd`f9oQ[NcD_$ZlZ;Zr}mX|=!|$6ZPZYtIo%fj}CpcN|B,{VDw~gb}@hZg`Q{LcmA[(bo`<|@$|o1|Ss}9Z_}tC|G`{F/|9nd}i=}V-{L8aaeST]daRbujh^xlpq8|}zs4bj[S`J|]?G{P#{rD{]I`OlH{Hm]VYuSYUbRc*6[j`8]pZ[bt_/^Jc*[<Z?YE|Xb|?_Z^Vcas]h{t9|Uwd)_(=0^6Zb{Nc} E[qZAeX[a]P^|_J>e8`W^j_Y}R{{Jp__]Ee#e:iWb9q_wKbujrbR}CY`,{mJ}gz{Q^{t~N|? gSga`V_||:#mi}3t|/I`X{N*|ct|2g{km}gi|{={jC}F;|E}{ZZjYf*frmu}8Tdroi{T[|+~}HG{cJ}DM{Lp{Ctd&}$hi3|FZ| m}Kr|38}^c|m_|Tr{Qv|36}?Up>|;S{DV{k_as}BK{P}}9p|t`jR{sAm4{D=b4pWa[}Xi{EjwEkI}3S|E?u=X0{jf} S|NM|JC{qo^3cm]-|JUx/{Cj{s>{Crt[UXuv|D~|j|d{YXZR}Aq}0r}(_{pJfi_z}0b|-vi)Z mFe,{f4|q`b{}^Z{HM{rbeHZ|^x_o|XM|L%|uFXm}@C_{{Hhp%a7|0p[Xp+^K}9U{bP}: tT}B|}+$|b2|[^|~h{FAby[`{}xgygrt~h1[li`c4vz|,7p~b(|mviN}^pg[{N/|g3|^0c,gE|f%|7N{q[|tc|TKA{LU}I@|AZp(}G-sz{F |qZ{}F|f-}RGn6{Z]_5})B}UJ{FFb2]4ZI@v=k,]t_Dg5Bj]Z-]L]vrpdvdGlk|gF}G]|IW}Y0[G| /bo|Te^,_B}#n^^{QHYI[?hxg{[`]D^IYRYTb&kJ[cri[g_9]Ud~^_]<p@_e_XdNm-^/|5)|h_{J;{kacVopf!q;asqd}n)|.m|bf{QW|U)}b+{tL|w``N|to{t ZO|T]jF}CB|0Q{e5Zw|k |We}5:{HO{tPwf_uajjBfX}-V_C_{{r~gg|Ude;s+}KNXH}! `K}eW{Upwbk%ogaW}9EYN}YY|&v|SL{C3[5s.]Y]I]u{M6{pYZ`^,`ZbCYR[1mNg>rsk0Ym[jrE]RYiZTr*YJ{Ge|%-lf|y(`=[t}E6{k!|3)}Zk} ][G{E~cF{u3U.rJ|a9p#o#ZE|?|{sYc#vv{E=|LC}cu{N8`/`3`9rt[4|He{cq|iSYxY`}V |(Q|t4{C?]k_Vlvk)BZ^r<{CL}#h}R+[<|i=}X|{KAo]|W<`K{NW|Zx}#;|fe{IMr<|K~tJ_x}AyLZ?{GvbLnRgN}X&{H7|x~}Jm{]-| GpNu0}.ok>|c4{PYisrDZ|fwh9|hfo@{H~XSbO]Odv]%`N]b1Y]]|eIZ}_-ZA]aj,>eFn+j[aQ_+]h[J_m_g]%_wf.`%k1e#Z?{CvYu_B^|gk`Xfh^M3`afGZ-Z|[m{L}|k3cp[it ^>YUi~d>{T*}YJ{Q5{Jxa$hg|%4`}|LAgvb }G}{P=|<;Ux{_skR{cV|-*|s-{Mp|XP|$G|_J}c6cM{_=_D|*9^$ec{V;|4S{qO|w_|.7}d0|/D}e}|0G{Dq]Kdp{}dfDi>}B%{Gd|nl}lf{C-{y}|ANZr}#={T~|-(}c&{pI|ft{lsVP}){|@u}!W|bcmB{d?|iW|:dxj{PSkO|Hl]Li:}VYk@|2={fnWt{M3`cZ6|)}|Xj}BYa?vo{e4|L7|B7{L7|1W|lvYO}W8nJ|$Vih|{T{d*_1|:-n2dblk``fT{Ky|-%}m!|Xy|-a{Pz}[l{kFjz|iH}9N{WE{x,|jz}R {P|{D)c=nX|Kq|si}Ge{sh|[X{RF{t`|jsr*fYf,rK|/9}$}}Nf{y!1|<Std}4Wez{W${Fd_/^O[ooqaw_z[L`Nbv[;l7V[ii3_PeM}.h^viqYjZ*j1}+3{bt{DR[;UG}3Og,rS{JO{qw{d<_zbAh<R[1_r`iZTbv^^a}c{iEgQZ<exZFg.^Rb+`Uj{a+{z<[~r!]`[[|rZYR|?F|qppp]L|-d|}K}YZUM|=Y|ktm*}F]{D;g{uI|7kg^}%?Z%ca{N[_<q4xC]i|PqZC]n}.bDrnh0Wq{tr|OMn6tM|!6|T`{O`|>!]ji+]_bTeU}Tq|ds}n|{Gm{z,f)}&s{DPYJ`%{CGd5v4tvb*hUh~bf]z`jajiFqAii]bfy^U{Or|m+{I)cS|.9k:e3`^|xN}@Dnlis`B|Qo{`W|>||kA}Y}{ERYuYx`%[exd`]|OyiHtb}HofUYbFo![5|+]gD{NIZR|Go}.T{rh^4]S|C9_}xO^i`vfQ}C)bK{TL}cQ|79iu}9a];sj{P.o!f[Y]pM``Jda^Wc9ZarteBZClxtM{LW}l9|a.mU}KX}4@{I+f1}37|8u}9c|v${xGlz}jP{Dd1}e:}31}%3X$|22i<v+r@~mf{sN{C67G97855F4YL5}8f{DT|xy{sO{DXB334@55J1)4.G9A#JDYtXTYM4, YQD9;XbXm9SX]IB^4UN=Xn<5(;(F3YW@XkH-X_VM[DYM:5XP!T&Y`6|,^{IS-*D.H>:LXjYQ0I3XhAF:9:(==.F*3F1189K/7163D,:@|e2{LS36D4hq{Lw/84443@4.933:0307::6D7}&l{Mx657;89;,K5678H&93D(H<&<>0B90X^I;}Ag1{P%3A+>><975}[S{PZE453?4|T2{Q+5187;>447:81{C=hL6{Me^:=7ii{R=.=F<81;48?|h8}Uh{SE|,VxL{ST,7?9Y_5Xk3A#:$%YSYdXeKXOD8+TXh7(@>(YdXYHXl9J6X_5IXaL0N?3YK7Xh!1?XgYz9YEXhXaYPXhC3X`-YLY_XfVf[EGXZ5L8BXL9YHX]SYTXjLXdJ: YcXbQXg1PX]Yx4|Jr{Ys4.8YU+XIY`0N,<H%-H;:0@,74/:8546I=9177154870UC]d<C3HXl7ALYzXFXWP<<?E!88E5@03YYXJ?YJ@6YxX-YdXhYG|9o{`iXjY_>YVXe>AYFX[/(I@0841?):-B=14337:8=|14{c&93788|di{cW-0>0<097/A;N{FqYpugAFT%X/Yo3Yn,#=XlCYHYNX[Xk3YN:YRT4?)-YH%A5XlYF3C1=NWyY}>:74-C673<69545v {iT85YED=64=.F4..9878/D4378?48B3:7:7/1VX[f4{D,{l<5E75{dAbRB-8-@+;DBF/$ZfW8S<4YhXA.(5@*11YV8./S95C/0R-A4AXQYI7?68167B95HA1*<M3?1/@;/=54XbYP36}lc{qzSS38:19?,/39193574/66878Yw1X-87E6=;964X`T734:>86>1/=0;(I-1::7ALYGXhF+Xk[@W%TYbX7)KXdYEXi,H-XhYMRXfYK?XgXj.9HX_SX]YL1XmYJ>Y}WwIXiI-3-GXcYyXUYJ$X`Vs[7;XnYEZ;XF! 3;%8;PXX(N3Y[)Xi1YE&/ :;74YQ6X`33C;-(>Xm0(TYF/!YGXg8 9L5P01YPXO-5%C|qd{{/K/E6,=0144:361:955;6443@?B7*7:F89&F35YaX-CYf,XiFYRXE_e{}sF 0*7XRYPYfXa5YXXY8Xf8Y~XmA[9VjYj*#YMXIYOXk,HHX40YxYMXU8OXe;YFXLYuPXP?EB[QV0CXfY{:9XV[FWE0D6X^YVP*$4%OXiYQ(|xp|%c3{}V`1>Y`XH00:8/M6XhQ1:;3414|TE|&o@1*=81G8<3}6<|(f6>>>5-5:8;093B^3U*+*^*UT30XgYU&7*O1953)5@E78--F7YF*B&0:%P68W9Zn5974J9::3}Vk|-,C)=)1AJ4+<3YGXfY[XQXmT1M-XcYTYZXCYZXEYXXMYN,17>XIG*SaS|/eYJXbI?XdNZ+WRYP<F:R PXf;0Xg`$|1GX9YdXjLYxWX!ZIXGYaXNYm6X9YMX?9EXmZ&XZ#XQ>YeXRXfAY[4 ;0X!Zz0XdN$XhYL XIY^XGNXUYS/1YFXhYk.TXn4DXjB{jg|4DEX]:XcZMW=A.+QYL<LKXc[vV$+&PX*Z3XMYIXUQ:ZvW< YSXFZ,XBYeXMM)?Xa XiZ4/EXcP3%}&-|6~:1(-+YT$@XIYRBC<}&,|7aJ6}bp|8)K1|Xg|8C}[T|8Q.89;-964I38361<=/;883651467<7:>?1:.}le|:Z=39;1Y^)?:J=?XfLXbXi=Q0YVYOXaXiLXmJXO5?.SFXiCYW}-;|=u&D-X`N0X^,YzYRXO(QX_YW9`I|>hZ:N&X)DQXP@YH#XmNXi$YWX^=!G6YbYdX>XjY|XlX^XdYkX>YnXUXPYF)FXT[EVTMYmYJXmYSXmNXi#GXmT3X8HOX[ZiXN]IU2>8YdX1YbX<YfWuZ8XSXcZU%0;1XnXkZ_WTG,XZYX5YSX Yp 05G?XcYW(IXg6K/XlYP4XnI @XnO1W4Zp-9C@%QDYX+OYeX9>--YSXkD.YR%Q/Yo YUX].Xi<HYEZ2WdCE6YMXa7F)=,D>-@9/8@5=?7164;35387?N<618=6>7D+C50<6B03J0{Hj|N9$D,9I-,.KB3}m |NzE0::/81YqXjMXl7YG; [.W=Z0X4XQY]:MXiR,XgM?9$9>:?E;YE77VS[Y564760391?14941:0=:8B:;/1DXjFA-564=0B3XlH1+D85:0Q!B#:-6&N/:9<-R3/7Xn<*3J4.H:+334B.=>30H.;3833/76464665755:/83H6633:=;.>5645}&E|Y)?1/YG-,93&N3AE@5 <L1-G/8A0D858/30>8<549=@B8] V0[uVQYlXeD(P#ID&7T&7;Xi0;7T-$YE)E=1:E1GR):--0YI7=E<}n9|aT6783A>D7&4YG7=391W;Zx<5+>F#J39}o/|cc;6=A050EQXg8A1-}D-|d^5548083563695D?-.YOXd37I$@LYLWeYlX<Yd+YR A$;3-4YQ-9XmA0!9/XLY_YT(=5XdDI>YJ5XP1ZAW{9>X_6R(XhYO65&J%DA)C-!B:97#A9;@?F;&;(9=11/=657/H,<8}bz|j^5446>.L+&Y^8Xb6?(CYOXb*YF(8X`FYR(XPYVXmPQ%&DD(XmZXW??YOXZXfCYJ79,O)XnYF7K0!QXmXi4IYFRXS,6<%-:YO(+:-3Q!1E1:W,Zo}Am|n~;3580534*?3Zc4=9334361693:30C<6/717:<1/;>59&:4}6!|rS36=1?75<8}[B|s809983579I.A.>84758=108564741H*9E{L{|u%YQ<%6XfH.YUXe4YL@,>N}Tv|ve*G0X)Z;/)3@A74(4P&A1X:YVH97;,754*A66:1 D739E3553545558E4?-?K17/770843XAYf838A7K%N!YW4.$T19Z`WJ*0XdYJXTYOXNZ 1XaN1A+I&Xi.Xk3Z3GB&5%WhZ1+5#Y[X<4YMXhQYoQXVXbYQ8XSYUX4YXBXWDMG0WxZA[8V+Z8X;D],Va$%YeX?FXfX[XeYf<X:Z[WsYz8X_Y]%XmQ(!7BXIZFX]&YE3F$(1XgYgYE& +[+W!<YMYFXc;+PXCYI9YrWxGXY9DY[!GXiI7::)OC;*$.>N*HA@{C|}&k=:<TB83X`3YL+G4XiK]i}(fYK<=5$.FYE%4*5*H*6XkCYL=*6Xi6!Yi1KXR4YHXbC8Xj,B9ZbWx/XbYON#5B}Ue}+QKXnF1&YV5XmYQ0!*3IXBYb71?1B75XmF;0B976;H/RXU:YZX;BG-NXj;XjI>A#D3B636N;,*%<D:0;YRXY973H5)-4FXOYf0:0;/7759774;7;:/855:543L43<?6=E,.A4:C=L)%4YV!1(YE/4YF+ F3%;S;&JC:%/?YEXJ4GXf/YS-EXEYW,9;E}X$}547EXiK=51-?71C%?57;5>463553Zg90;6447?<>4:9.7538XgN{|!}9K/E&3-:D+YE1)YE/3;37/:05}n<}:UX8Yj4Yt864@JYK..G=.(A Q3%6K>3(P3#AYE$-6H/456*C=.XHY[#S.<780191;057C)=6HXj?955B:K1 E>-B/9,;5.!L?:0>/.@//:;7833YZ56<4:YE=/:7Z_WGC%3I6>XkC*&NA16X=Yz2$X:Y^&J48<99k8}CyB-61<18K946YO4{|N}E)YIB9K0L>4=46<1K0+R;6-=1883:478;4,S+3YJX`GJXh.Yp+Xm6MXcYpX(>7Yo,/:X=Z;Xi0YTYHXjYmXiXj;*;I-8S6N#XgY}.3XfYGO3C/$XjL$*NYX,1 6;YH&<XkK9C#I74.>}Hd`A748X[T450[n75<4439:18A107>|ET}Rf<1;14876/Yb983E<5.YNXd4149>,S=/4E/<306443G/06}0&}UkYSXFYF=44=-5095=88;63844,9E6644{PL}WA8:>)7+>763>>0/B3A545CCnT}Xm|dv}Xq1L/YNXk/H8;;.R63351YY747@15YE4J8;46;.38.>4A369.=-83,;Ye3?:3@YE.4-+N353;/;@(X[YYD>@/05-I*@.:551741Yf5>6A443<3535;.58/86=D4753442$635D1>0359NQ @73:3:>><Xn?;43C14 ?Y|X611YG1&<+,4<*,YLXl<1/AIXjF*N89A4Z576K1XbJ5YF.ZOWN.YGXO/YQ01:4G38Xl1;KI0YFXB=R<7;D/,/4>;$I,YGXm94@O35Yz66695385.>:6A#5}W7n^4336:4157597434433<3|XA}m`>=D>:4A.337370?-6Q96{`E|4A}C`|Qs{Mk|J+~r>|o,wHv>Vw}!c{H!|Gb|*Ca5}J||,U{t+{CN[!M65YXOY_*B,Y[Z9XaX[QYJYLXPYuZ%XcZ8LY[SYPYKZM<LMYG9OYqSQYM~[e{UJXmQYyZM_)>YjN1~[f3{aXFY|Yk:48YdH^NZ0|T){jVFYTZNFY^YTYN~[h{nPYMYn3I]`EYUYsYIZEYJ7Yw)YnXPQYH+Z.ZAZY]^Z1Y`YSZFZyGYHXLYG 8Yd#4~[i|+)YH9D?Y^F~Y7|-eYxZ^WHYdYfZQ~[j|3>~[k|3oYmYqY^XYYO=Z*4[]Z/OYLXhZ1YLZIXgYIHYEYK,<Y`YEXIGZI[3YOYcB4SZ!YHZ*&Y{Xi3~[l|JSY`Zz?Z,~[m|O=Yi>??XnYWXmYS617YVYIHZ(Z4[~L4/=~[n|Yu{P)|];YOHHZ}~[o33|a>~[r|aE]DH~[s|e$Zz~[t|kZFY~XhYXZB[`Y}~[u|{SZ&OYkYQYuZ2Zf8D~[v}% ~[w3},Q[X]+YGYeYPIS~[y}4aZ!YN^!6PZ*~[z}?E~[{3}CnZ=~[}}EdDZz/9A3(3S<,YR8.D=*XgYPYcXN3Z5 4)~[~}JW=$Yu.XX~] }KDX`PXdZ4XfYpTJLY[F5]X~[2Yp}U+DZJ::<446[m@~]#3}]1~]%}^LZwZQ5Z`/OT<Yh^ -~]&}jx[ ~m<z!%2+~ly4VY-~o>}p62yz!%2+Xf2+~ly4VY-zQ`z (=] 2z~o2",C={" ":0,"!":1},c=34,i=2,p,s="",u=String.fromCharCode,t=u(12539);for(;++c<127;)C[u(c)]=c^39&&c^92?i++:0;i=0;for(;0<=(c=C[a.charAt(i++)]);)if(16===c)if((c=C[a.charAt(i++)])<87){if(86===c)c=1879;for(;c--;)s+=u(++p)}else s+=s.substr(8272,360);else if(c<86)s+=u(p+=c<51?c-16:(c-55)*92+C[a.charAt(i++)]);else if((c=((c-86)*92+C[a.charAt(i++)])*92+C[a.charAt(i++)])<49152)s+=u(p=c<40960?c:c|57344);else{c&=511;for(;c--;)s+=t;p=12539}return s\')(),Util.$decodeToShiftJis=function(t){return t.replace(/%(8[1-9A-F]|[9E][0-9A-F]|F[0-9A-C])(%[4-689A-F][0-9A-F]|%7[0-9A-E]|[@-~])|%([0-7][0-9A-F]|A[1-9A-F]|[B-D][0-9A-F])/gi,(function(t){let e=parseInt(t.substring(1,3),16);const s=t.length;return 3===s?String.fromCharCode(e<160?e:e+65216):Util.$JCT11280.charAt(188*(e<160?e-129:e-193)+(4===s?t.charCodeAt(3)-64:(e=parseInt(t.substring(4),16))<127?e-64:e-65))}))},Util.$getTagObject=function(){return Util.$tagObjects.pop()||{placeObjects:[],sounds:[],removeObjects:[],frameLabel:[]}},Util.$poolTagObject=function(t){t.placeObjects.length=0,t.sounds.length=0,t.removeObjects.length=0,t.frameLabel.length=0,Util.$tagObjects.push(t)},Util.$createMovieClip=function(){const t={_$characterId:0,_$name:"MovieClip",_$controller:[],_$placeObjects:[],_$placeMap:[],_$labels:[],_$dictionary:[],_$sounds:[]};return t},Util.$getControllerAt=function(t,e,s){return s in t._$controller[e]?t._$controller[e][s]:null},Util.$addDictionary=function(t,e){const s=t._$dictionary.length,a={CharacterId:e.CharacterId,Depth:e.Depth,Name:null,ClipDepth:0,PlaceFlagHasImage:0|e.PlaceFlagHasImage,StartFrame:0|e.StartFrame,EndFrame:0|e.EndFrame};return e.PlaceFlagHasName&&(a.Name=e.Name),e.PlaceFlagHasClipDepth&&(a.ClipDepth=e.ClipDepth),t._$dictionary[s]=a,s},Util.$getBlendName=function(t){switch(t){case 1:case"normal":default:return"normal";case 2:case"layer":return"layer";case 3:case"multiply":return"multiply";case 4:case"screen":return"screen";case 5:case"lighten":return"lighten";case 6:case"darken":return"darken";case 7:case"difference":return"difference";case 8:case"add":return"add";case 9:case"subtract":return"subtract";case 10:case"invert":return"invert";case 11:case"alpha":return"alpha";case 12:case"erase":return"erase";case 13:case"overlay":return"overlay";case 14:case"hardlight":return"hardlight"}};class ByteStream{constructor(){this.clear()}clear(){this.data=null,this.bit_offset=0,this.byte_offset=0,this.bit_buffer=null}setData(t){this.data=t}getData(t){this.byteAlign();const e=this.byte_offset+t,s=this.data.subarray(this.byte_offset,e);return this.byte_offset=e,s}byteAlign(){this.bit_offset&&(this.byte_offset=this.byte_offset+(this.bit_offset+7)/8|0,this.bit_offset=0)}getDataUntil(t=0){this.byteAlign();let e="";for(;;){const t=this.data[this.byte_offset++];if(!t)break;if(10===t||13===t){e+="\\n";continue}let s=t.toString(16);1===s.length&&(s="0"+s),e+="%"+s}if(!e.length)return"";if(e.length>5&&"\\n"===e.substr(-5)&&(e=e.slice(0,-5)),t)return Util.$decodeToShiftJis(e);try{return decodeURIComponent(e)}catch(t){return Util.$decodeToShiftJis(e)}}byteCarry(){if(this.bit_offset>7)this.byte_offset=this.byte_offset+(0|(this.bit_offset+7)/8),this.bit_offset&=7;else for(;this.bit_offset<0;)--this.byte_offset,this.bit_offset+=8}getUIBits(t){let e=0;for(;t;)e<<=1,e|=this.getUIBit(),--t;return e}getUIBit(){return this.byteCarry(),this.data[this.byte_offset]>>7-this.bit_offset++&1}getSIBits(t){const e=this.getUIBits(t),s=e&1<<t-1;return s?-(e^2*s-1)-1:e}getUI8(){return this.byteAlign(),this.data[this.byte_offset++]}getUI16(){return this.byteAlign(),this.getUI8()|this.getUI8()<<8}getUI32(){return this.byteAlign(),this.getUI8()|(this.getUI8()|(this.getUI8()|this.getUI8()<<8)<<8)<<8}getFloat16(){const t=this.data[this.byte_offset++];let e=0;return e|=this.data[this.byte_offset++]<<8,e|=t<<0,e}getFloat32(){const t=this.data[this.byte_offset++],e=this.data[this.byte_offset++],s=this.data[this.byte_offset++];let a=0;a|=this.data[this.byte_offset++]<<24,a|=s<<16,a|=e<<8,a|=t<<0;const i=a>>23&255;return a&&2147483648!==a?(2147483648&a?-1:1)*(8388608|8388607&a)*Math.pow(2,i-127-23):0}incrementOffset(t,e){this.byte_offset+=t,this.bit_offset+=e,this.byteCarry()}setOffset(t,e){this.byte_offset=t,this.bit_offset=e}}class SwfParser{constructor(){this.byteStream=new ByteStream,this.currentPosition={x:0,y:0},this.jpegTables=null,this.characters=[],this.frameInfo=[],this.fonts=new Map,this.textSettings=new Map,this.grids=new Map,this.version=0}clear(){this.byteStream.clear(),this.currentPosition.x=0,this.currentPosition.y=0,this.jpegTables=null,this.characters.length=0,this.frameInfo.length=0,this.version=0}getCharacter(t){return this.characters[t]}setCharacter(t,e,s){this.characters[t]=e,globalThis.postMessage({infoKey:"character",characterId:t,piece:e},s)}getFont(t){return this.fonts.get(t)}setFont(t,e){this.fonts.set(t,e)}setTextSetting(t,e){this.textSettings.set(t,e)}setGrid(t,e){this.grids.set(t,e)}showFrame(t,e,s,a){let i,r;const h=s-1|0,o=e.frameLabel;i=o.length;for(let e=0;e<i;++e){const a=o[e];a.name in this.frameInfo&&(a.frame=this.frameInfo["@"+a.name]),t._$labels.push({label:a.name,frame:a.frame||s})}const n=e.sounds;i=0|n.length,i&&t._$sounds.push({frame:s,data:n.slice(0)});const l=e.removeObjects;i=l.length;for(let e=0;e<i;++e){const a=l[e],i=Util.$getControllerAt(t,h,a.Depth);t._$dictionary[i].EndFrame=s,Util.$installed.set(a.Depth,1)}s in a||(a[s]=[]),s in t._$controller||(t._$controller[s]=[]),s in t._$placeMap||(t._$placeMap[s]=[]);const c=e.placeObjects,b=h?a[h]:null;i=c.length;for(let e=0;e<i;++e){let i=null;const r=c[e];let o=null;h&&r.Depth in b&&(o=b[r.Depth]),0===r.PlaceFlagHasCharacter&&o&&(r.CharacterId=o.CharacterId);let n=!1;if((0===r.PlaceFlagMove||1===r.PlaceFlagMove&&1===r.PlaceFlagHasCharacter)&&(n=!0),h&&!n&&(i=Util.$getControllerAt(t,h,r.Depth),null===i&&(n=!0)),1===r.PlaceFlagMove&&o&&(1!==o.PlaceFlagHasMatrix||r.PlaceFlagHasMatrix||(r.PlaceFlagHasMatrix=1,r.Matrix=o.Matrix),1!==o.PlaceFlagHasColorTransform||r.PlaceFlagHasColorTransform||(r.PlaceFlagHasColorTransform=1,r.ColorTransform=o.ColorTransform),1!==o.PlaceFlagHasClipDepth||r.PlaceFlagHasClipDepth||(r.PlaceFlagHasClipDepth=1,r.ClipDepth=o.ClipDepth),1!==o.PlaceFlagHasRatio||r.PlaceFlagHasRatio||(r.PlaceFlagHasRatio=1,r.Ratio=o.Ratio),1!==o.PlaceFlagHasFilterList||r.PlaceFlagHasFilterList||(r.PlaceFlagHasFilterList=1,r.SurfaceFilterList=o.SurfaceFilterList),1!==o.PlaceFlagHasBlendMode||r.PlaceFlagHasBlendMode||(r.PlaceFlagHasBlendMode=1,r.BlendMode=o.BlendMode)),h&&!Util.$installed.has(r.Depth)){const e=Util.$getControllerAt(t,h,r.Depth);if(null!==e){const a=t._$dictionary[e];!a||0!==r.PlaceFlagMove&&1!==r.PlaceFlagHasCharacter||(a.EndFrame=0|s,t._$dictionary[e]=a,n=!0)}}if(n){if(r.StartFrame=0|s,r.EndFrame=0,1===r.PlaceFlagHasCharacter&&1===r.PlaceFlagMove){const e=Util.$getControllerAt(t,h,r.Depth),a=t._$dictionary[e];a.EndFrame=0|s,t._$dictionary[e]=a}i=Util.$addDictionary(t,r)}t._$controller[s][r.Depth]=i;const l=t._$placeObjects.length;t._$placeObjects[l]=this.buildPlaceObject(r),t._$placeMap[s][r.Depth]=l,Util.$installed.set(r.Depth,1),a[s][r.Depth]=r}if(h){let e;const o=t._$controller[h];r=Object.keys(o),i=r.length;for(let n=0;n<i;++n)e=0|r[n],Util.$installed.has(e)||(a[s][e]=a[h][e],t._$controller[s][e]=o[e]);const n=t._$placeMap[h];r=Object.keys(n),i=r.length;for(let a=0;a<i;++a)e=r[a],e in t._$placeMap[s]||(t._$placeMap[s][e]=n[e])}Util.$installed.clear()}buildPlaceObject(t){const e={matrix:[1,0,0,1,0,0],colorTransform:[1,1,1,1,0,0,0,0],filters:null,blendMode:"normal"};return t.PlaceFlagHasMatrix&&(e.matrix=t.Matrix),t.PlaceFlagHasColorTransform&&(e.colorTransform=t.ColorTransform),t.PlaceFlagHasFilterList&&(e.surfaceFilterList=t.SurfaceFilterList),t.PlaceFlagHasBlendMode&&(e.blendMode=Util.$getBlendName(t.BlendMode)),t.PlaceFlagHasRatio&&(e.ratio=t.Ratio||0),e}postData(t){if(this.textSettings.size){for(let[t,e]of this.textSettings){const s=this.characters[t];s&&(s._$textSetting=e,globalThis.postMessage({infoKey:"character",characterId:t,piece:s}))}this.textSettings.clear()}if(this.grids.size){for(let[t,e]of this.grids){const s=this.characters[t];s&&(s._$grid=e,globalThis.postMessage({infoKey:"character",characterId:t,piece:s}))}this.grids.clear()}if(this.fonts.size){for(let[t,e]of this.fonts){if(!e._$hasLayout){globalThis.postMessage({infoKey:"font",index:t,piece:e});continue}const s=e._$glyphShapeTable,a=e._$zoneTable;e._$glyphShapeTable=[],e._$zoneTable=a?[]:null,globalThis.postMessage({infoKey:"font",index:t,piece:e},[e._$advanceTable.buffer,e._$codeTable.buffer]);const i=s.length;if(i){const e=[],a=[];for(let r=0;r<i;++r){const i=s[r];e.push(i),a.push(i.records.buffer),e.length>256&&(globalThis.postMessage({infoKey:"font_shape",index:t,pieces:e},a),a.length=0,e.length=0)}e.length&&globalThis.postMessage({infoKey:"font_shape",index:t,pieces:e},a)}if(a)for(;a.length;){const e=Math.min(256,a.length);globalThis.postMessage({infoKey:"font_zone",index:t,pieces:a.splice(0,e)})}}this.fonts.clear()}for(let e=1;e<t._$controller.length;++e){const s=t._$controller[e];t._$controller[e]=s.filter((()=>!0))}this.setCharacter(0,t)}parseTags(t,e){const s=Util.$getTagObject();let a=1;const i=[],r=this.byteStream;for(;r.byte_offset<t;){const h=r.byte_offset;if(h+2>t)break;const o=r.getUI16(),n=o>>6;let l=63&o;if(63===l){if(h+6>t){r.byte_offset=h,r.bit_offset=0;break}l=r.getUI32()}const c=r.byte_offset;this.parseTag(n,l,e,a,s,i),1===n&&(++a,s.placeObjects.length=0,s.sounds.length=0,s.removeObjects.length=0,s.frameLabel.length=0);const b=r.byte_offset-c|0;b!==l&&b<l&&(r.byte_offset=r.byte_offset+(l-b)),r.bit_offset=0}Util.$poolTagObject(s)}parseTag(t,e,s,a,i,r){switch(t){case 28:i.removeObjects.push({Frame:a,Depth:this.byteStream.getUI16()});break;case 4:case 26:case 70:i.placeObjects.push(this.parsePlaceObject(t,e));break;case 39:{const t=this.byteStream.byte_offset+e,s=this.byteStream.getUI16();this.byteStream.getUI16();const a=Util.$createMovieClip();a._$characterId=s,this.parseTags(t,a);for(let t=1;t<a._$controller.length;++t){const e=a._$controller[t];a._$controller[t]=e.filter((()=>!0))}this.setCharacter(s,a)}break;case 1:this.showFrame(s,i,a,r);break;case 2:case 22:case 32:case 83:e<10?this.byteStream.byte_offset+=e:this.parseDefineShape(t);break;case 20:case 36:this.parseDefineBitsLossLess(t,e);break;case 6:case 21:case 35:case 90:this.parseDefineBits(t,e,this.jpegTables);break;case 15:case 89:i.sounds.push(this.parseStartSound(t));break;case 10:case 48:case 75:this.parseDefineFont(t,e);break;case 14:this.parseDefineSound(e);break;case 13:case 62:this.parseDefineFontInfo(t,e);break;case 43:i.frameLabel.push(this.parseFrameLabel());break;case 11:case 33:this.parseDefineText(t);break;case 37:this.parseDefineEditText(t);break;case 7:case 34:this.parseDefineButton(t,e);break;case 88:this.parseDefineFontName();break;case 8:e&&(this.jpegTables=this.parseJPEGTables(e));break;case 46:case 84:this.parseDefineMorphShape(t);break;case 18:case 45:this.parseSoundStreamHead(t);break;case 17:this.parseDefineButtonSound();break;case 73:this.parseDefineFontAlignZones();break;case 74:this.parseCSMTextSettings(t);break;case 19:this.parseSoundStreamBlock(t,e);break;case 78:this.parseDefineScalingGrid();break;case 5:console.log("TODO RemoveObject type 5."),i.removeObjects.push({CharacterId:this.byteStream.getUI16(),Depth:this.byteStream.getUI16()});break;case 76:this.parseSymbolClass();break;case 0:case 27:case 30:case 67:case 68:case 79:case 80:case 81:case 85:case 92:default:break;case 86:case 56:case 9:case 40:case 24:case 63:case 64:case 69:case 65:case 77:case 60:case 61:case 41:case 87:case 59:case 12:case 72:case 82:this.byteStream.byte_offset+=e;break;case 3:case 16:case 23:case 25:case 29:case 31:case 38:case 42:case 44:case 47:case 49:case 52:case 53:case 54:case 55:case 57:case 58:case 66:case 71:case 91:case 93:console.log("[TODO] tagType -> "+t)}}parseSymbolClass(){const t=this.byteStream.getUI16();if(t){const e=[];for(let s=0;s<t;++s){const t=this.byteStream.getUI16(),s=this.byteStream.getDataUntil();e[e.length]={tagId:t,ns:s},128===e.length&&(globalThis.postMessage({infoKey:"_$symbols",pieces:e}),e.length=0)}e.length&&globalThis.postMessage({infoKey:"_$symbols",pieces:e})}}parseDefineShape(t){const e=0|this.byteStream.getUI16(),s=this.rect();if(83===t){const t={};this.rect(),this.byteStream.getUIBits(5),t.UsesFillWindingRule=this.byteStream.getUIBits(1),t.UsesNonScalingStrokes=this.byteStream.getUIBits(1),t.UsesScalingStrokes=this.byteStream.getUIBits(1)}const a=this.shapeWithStyle(t);this.setCharacter(e,{_$records:a,_$name:"Shape",_$bounds:s,_$characterId:e},[a.ShapeData.records.buffer])}rect(){this.byteStream.byteAlign();const t=this.byteStream.getUIBits(5);return{xMin:this.byteStream.getSIBits(t)/20,xMax:this.byteStream.getSIBits(t)/20,yMin:this.byteStream.getSIBits(t)/20,yMax:this.byteStream.getSIBits(t)/20}}shapeWithStyle(t){const e={};switch(t){case 46:case 84:break;default:e.fillStyles=this.fillStyleArray(t),e.lineStyles=this.lineStyleArray(t)}const s=this.byteStream.getUI8(),a=s>>4,i=15&s;return e.ShapeData=this.shapeRecords(t,{FillBits:a,LineBits:i}),e}fillStyleArray(t){let e=0|this.byteStream.getUI8();t>2&&255===e&&(e=this.byteStream.getUI16());const s=[];for(let a=0;a<e;++a)s[s.length]=this.fillStyle(t);return s}fillStyle(t){const e=this.byteStream.getUI8(),s={};switch(s.fillStyleType=e,e){case 0:switch(t){case 32:case 83:s.Color=this.rgba();break;case 46:case 84:s.StartColor=this.rgba(),s.EndColor=this.rgba();break;default:s.Color=this.rgb()}break;case 16:case 18:switch(t){case 46:case 84:s.startGradientMatrix=this.matrix(),s.endGradientMatrix=this.matrix(),s.gradient=this.gradient(t);break;default:s.gradientMatrix=this.matrix(),s.gradient=this.gradient(t)}break;case 19:s.gradientMatrix=this.matrix(),s.gradient=this.focalGradient(t);break;case 64:case 65:case 66:case 67:switch(s.bitmapId=this.byteStream.getUI16(),t){case 46:case 84:s.startBitmapMatrix=this.matrix(),s.endBitmapMatrix=this.matrix();break;default:s.bitmapMatrix=this.matrix()}}return s}rgb(){return{R:0|this.byteStream.getUI8(),G:0|this.byteStream.getUI8(),B:0|this.byteStream.getUI8(),A:1}}rgba(){return{R:this.byteStream.getUI8(),G:this.byteStream.getUI8(),B:this.byteStream.getUI8(),A:this.byteStream.getUI8()/255}}matrix(){this.byteStream.byteAlign();const t=[1,0,0,1,0,0];if(this.byteStream.getUIBit()){const e=this.byteStream.getUIBits(5);t[0]=this.byteStream.getSIBits(e)/65536,t[3]=this.byteStream.getSIBits(e)/65536}if(this.byteStream.getUIBit()){const e=this.byteStream.getUIBits(5);t[1]=this.byteStream.getSIBits(e)/65536,t[2]=this.byteStream.getSIBits(e)/65536}const e=this.byteStream.getUIBits(5);return t[4]=this.byteStream.getSIBits(e)/20,t[5]=this.byteStream.getSIBits(e)/20,t}gradient(t){let e,s=0,a=0;switch(this.byteStream.byteAlign(),t){case 46:case 84:e=this.byteStream.getUI8();break;default:s=this.byteStream.getUIBits(2),a=this.byteStream.getUIBits(2),e=this.byteStream.getUIBits(4)}const i=[];for(let s=0;s<e;++s)i[i.length]=this.gradientRecord(t);return{SpreadMode:s,InterpolationMode:a,GradientRecords:i,FocalPoint:0}}gradientRecord(t){switch(t){case 46:case 84:return{StartRatio:this.byteStream.getUI8()/255,StartColor:this.rgba(),EndRatio:this.byteStream.getUI8()/255,EndColor:this.rgba()};default:return{Ratio:this.byteStream.getUI8()/255,Color:t<32?this.rgb():this.rgba()}}}focalGradient(t){this.byteStream.byteAlign();const e=this.byteStream.getUIBits(2),s=this.byteStream.getUIBits(2),a=this.byteStream.getUIBits(4),i=[];for(let e=0;e<a;++e)i[i.length]=this.gradientRecord(t);return{SpreadMode:e,InterpolationMode:s,GradientRecords:i,FocalPoint:this.byteStream.getFloat16()}}lineStyleArray(t){let e=this.byteStream.getUI8();t>2&&255===e&&(e=this.byteStream.getUI16());const s=[];for(let a=0;a<e;++a)s[s.length]=this.lineStyles(t);return s}lineStyles(t){const e={fillStyleType:0};switch(t){case 46:e.StartWidth=this.byteStream.getUI16()/20,e.EndWidth=this.byteStream.getUI16()/20,e.StartColor=this.rgba(),e.EndColor=this.rgba();break;case 84:e.StartWidth=this.byteStream.getUI16()/20,e.EndWidth=this.byteStream.getUI16()/20,e.StartCapStyle=this.byteStream.getUIBits(2),e.JoinStyle=this.byteStream.getUIBits(2),e.HasFillFlag=this.byteStream.getUIBit(),e.NoHScaleFlag=this.byteStream.getUIBit(),e.NoVScaleFlag=this.byteStream.getUIBit(),e.PixelHintingFlag=this.byteStream.getUIBit(),this.byteStream.getUIBits(5),e.NoClose=this.byteStream.getUIBit(),e.EndCapStyle=this.byteStream.getUIBits(2),2===e.JoinStyle&&(e.MiterLimitFactor=this.byteStream.getUI16()/20),e.HasFillFlag?e.FillType=this.fillStyle(t):(e.StartColor=this.rgba(),e.EndColor=this.rgba());break;case 83:e.Width=this.byteStream.getUI16()/20,e.StartCapStyle=this.byteStream.getUIBits(2),e.JoinStyle=this.byteStream.getUIBits(2),e.HasFillFlag=this.byteStream.getUIBit(),e.NoHScaleFlag=this.byteStream.getUIBit(),e.NoVScaleFlag=this.byteStream.getUIBit(),e.PixelHintingFlag=this.byteStream.getUIBit(),this.byteStream.getUIBits(5),e.NoClose=this.byteStream.getUIBit(),e.EndCapStyle=this.byteStream.getUIBits(2),2===e.JoinStyle&&(e.MiterLimitFactor=this.byteStream.getUI16()),e.HasFillFlag?e.FillType=this.fillStyle(t):e.Color=this.rgba();break;case 32:e.Width=this.byteStream.getUI16()/20,e.Color=this.rgba(),e.JoinStyle=0,e.StartCapStyle=0,e.EndCapStyle=0;break;default:e.Width=this.byteStream.getUI16()/20,e.Color=this.rgb(),e.JoinStyle=0,e.StartCapStyle=0,e.EndCapStyle=0}return e}shapeRecords(t,e){this.currentPosition.x=0,this.currentPosition.y=0;const s=[],a=[];for(;;){const i=this.byteStream.getUIBits(6);if(32&i){const e=15&i;if(16&i){this.straightEdgeRecord(t,e,s);continue}this.curvedEdgeRecord(t,e,s)}else{if(!i){s.push(-1),this.byteStream.byteAlign();break}this.styleChangeRecord(t,i,e,s,a)}}const i={records:new Int32Array(s)};return a.length&&(i.styles=a),i}straightEdgeRecord(t,e,s){let a=0,i=0;this.byteStream.getUIBit()?(a=this.byteStream.getSIBits(e+2),i=this.byteStream.getSIBits(e+2)):this.byteStream.getUIBit()?i=this.byteStream.getSIBits(e+2):a=this.byteStream.getSIBits(e+2);let r=a,h=i;switch(t){case 46:case 84:break;default:r=this.currentPosition.x+a,h=this.currentPosition.y+i,this.currentPosition.x=r,this.currentPosition.y=h}s.push(0,0,r,h)}curvedEdgeRecord(t,e,s){const a=this.byteStream.getSIBits(e+2),i=this.byteStream.getSIBits(e+2),r=this.byteStream.getSIBits(e+2),h=this.byteStream.getSIBits(e+2);let o=a,n=i,l=r,c=h;switch(t){case 46:case 84:break;default:o=this.currentPosition.x+a,n=this.currentPosition.y+i,l=o+r,c=n+h,this.currentPosition.x=l,this.currentPosition.y=c}s.push(0,1,o,n,l,c)}styleChangeRecord(t,e,s,a,i){const r=e>>4&1,h=e>>3&1,o=e>>2&1,n=e>>1&1,l=1&e;let c=0,b=0;if(l){const t=this.byteStream.getUIBits(5);c=this.byteStream.getSIBits(t),b=this.byteStream.getSIBits(t),this.currentPosition.x=c,this.currentPosition.y=b}const g=n?this.byteStream.getUIBits(s.FillBits):0,y=o?this.byteStream.getUIBits(s.FillBits):0,S=h?this.byteStream.getUIBits(s.LineBits):0;let m=null,f=null,d=0,Y=0;if(r){m=this.fillStyleArray(t),f=this.lineStyleArray(t);const e=this.byteStream.getUI8();s.FillBits=d=e>>4,s.LineBits=Y=15&e}a.push(1,r),r&&(a.push(d,Y),i.push({FillStyles:m,LineStyles:f})),a.push(l),l&&a.push(c,b),a.push(n),n&&a.push(g),a.push(o),o&&a.push(y),a.push(h),h&&a.push(S)}parseDefineBitsLossLess(t,e){const s=this.byteStream.byte_offset,a=this.byteStream.getUI16(),i=this.byteStream.getUI8(),r=this.byteStream.getUI16(),h=this.byteStream.getUI16(),o=36===t,n=3===i?this.byteStream.getUI8()+1:0;let l=r*h*4;if(3===i){l=(r+((r+3&-4)-r|0))*h+n*(o?4:3)}const c=e-(this.byteStream.byte_offset-s),b=this.byteStream.byte_offset;this.byteStream.byte_offset+=c;const g=this.byteStream.data.slice(b,this.byteStream.byte_offset),y={width:r,height:h,format:i,fileSize:l,tableSize:n,isAlpha:o,color:o?4278190080:0,_$name:"lossless",_$characterId:a,buffer:g};this.setCharacter(a,y,[g.buffer])}parseJPEGTables(t){const e=this.byteStream.byte_offset;return this.byteStream.byte_offset+=t,{offset:e,length:this.byteStream.byte_offset}}parseDefineBits(t,e,s=null){const a=this.byteStream.byte_offset,i=this.byteStream.getUI16(),r=this.byteStream.byte_offset-a,h=35===t||90===t?this.byteStream.getUI32():e-r;if(90===t){const t=this.byteStream.getUI16();console.log("TODO DeblockParam",t)}const o=this.byteStream.byte_offset;this.byteStream.byte_offset+=h;let n=this.byteStream.data.slice(o,this.byteStream.byte_offset);if(s){const t=this.byteStream.data.subarray(s.offset,s.length);if(t.length>4&&255===n[0]&&216===n[1]){const e=t.length-2,s=n.length,a=new Uint8Array(e+s);a.set(t.subarray(0,e),0),a.set(n.subarray(2,s),e),n=a}}const l={infoKey:"character",_$name:"imageData",_$characterId:i,jpegData:n,alphaData:null},c=[];c.push(n.buffer);let b=!1;const g=a+e-this.byteStream.byte_offset;if(g){b=!0;const t=this.byteStream.byte_offset;this.byteStream.byte_offset+=g;const e=this.byteStream.data.slice(t,this.byteStream.byte_offset);l.alphaData=e,c.push(e.buffer)}l.isAlpha=b,l.color=b?4278190080:0,this.setCharacter(i,l,c)}parseDefineFont(t,e){const s=this.byteStream.byte_offset+e|0,a=this.byteStream.getUI16(),i=this.getFont(a)||{};let r=0,h=0,o=0;if(48===t||75===t){const t=this.byteStream.getUI8();i._$hasLayout=t>>>7&1,i._$shiftJIS=t>>>6&1,i._$smallText=t>>>5&1,i._$ANSI=t>>>4&1,h=t>>>3&1,o=t>>>2&1,i._$italic=t>>>1&1,i._$bold=1&t,this.byteStream.byteAlign(),i._$languageCode=this.byteStream.getUI8();const e=this.byteStream.getUI8();if(e){const t=0|this.byteStream.byte_offset;i._$fontName=this.getFontName(this.byteStream.getDataUntil()),this.byteStream.byte_offset=t+e|0}r=this.byteStream.getUI16(),i._$numGlyphs=r}const n=0|this.byteStream.byte_offset;if(10===t&&(r=this.byteStream.getUI16()),r){const e=[];10===t&&(e[0]=r,r/=2,r-=1);let s=0;if(1===h){for(let t=0;t<r;++t)e[e.length]=this.byteStream.getUI32();10!==t&&(s=this.byteStream.getUI32())}else{for(let t=0;t<r;++t)e[e.length]=this.byteStream.getUI16();10!==t&&(s=this.byteStream.getUI16())}const a=[];10===t&&(r+=1);for(let s=0;s<r;++s){this.byteStream.setOffset(e[s]+n,0);const i=this.byteStream.getUI8(),r={FillBits:i>>4,LineBits:15&i};a[a.length]=this.shapeRecords(t,r)}switch(i._$glyphShapeTable=a,t){case 48:case 75:if(this.byteStream.setOffset(s+n,0),1===o){const t=new Uint16Array(r);for(let e=0;e<r;++e)t[e]=this.byteStream.getUI16();i._$codeTable=t}else{const t=new Uint8Array(r);for(let e=0;e<r;++e)t[e]=this.byteStream.getUI8();i._$codeTable=t}if(i._$hasLayout){i._$ascent=this.byteStream.getUI16(),i._$descent=this.byteStream.getUI16(),i._$leading=this.byteStream.getUI16();const e=new Uint16Array(r);for(let t=0;t<r;++t)e[t]=this.byteStream.getUI16();i._$advanceTable=e;const s=[];for(let t=0;t<r;++t)s[s.length]=this.rect();if(75===t){const t=this.byteStream.getUI16(),e=[];for(let s=0;s<t;++s){const t=o?this.byteStream.getUI16():this.byteStream.getUI8(),s=o?this.byteStream.getUI16():this.byteStream.getUI8(),a=this.byteStream.getSIBits(16);e[e.length]={FontKerningCode1:t,FontKerningCode2:s,FontKerningAdjustment:a}}i._$kerningRecords=e}}}}this.byteStream.byte_offset=0|s,this.setFont(a,i)}parseDefineFontInfo(t,e){const s=this.byteStream.byte_offset+e|0,a=this.byteStream.getUI16();let i=this.getFont(a);i||(i={});const r=this.byteStream.getUI8(),h=this.byteStream.getData(r);let o="";for(let t=0;t<r;++t)h[t]>127||(o+=String.fromCharCode(h[t]));this.byteStream.getUIBits(2),i._$smallText=this.byteStream.getUIBits(1),i._$shiftJIS=this.byteStream.getUIBits(1),i._$ANSI=this.byteStream.getUIBits(1),i._$italic=this.byteStream.getUIBits(1),i._$bold=this.byteStream.getUIBits(1);const n=this.byteStream.getUIBits(1);62===t&&(i._$languageCode=this.byteStream.getUI8());const l=i._$shiftJIS||2===i._$languageCode?Util.$decodeToShiftJis(o):decodeURIComponent(o);i._$fontName=this.getFontName(l),this.byteStream.byteAlign();const c=[];let b=null;if(!0==(1===n||62===t)){for(;this.byteStream.byte_offset<s;)c[c.length]=this.byteStream.getUI16();b=new Uint16Array(c)}else{for(;this.byteStream.byte_offset<s;)c[c.length]=this.byteStream.getUI8();b=new Uint8Array(c)}i._$codeTable=b,this.setFont(a,i)}getFontName(t){const e=0|t.length;switch(0===t.substr(e-1).charCodeAt(0)&&(t=t.slice(0,-1)),t){case"_sans":return"_sans";case"_serif":return"_serif";case"_typewriter":return"_typewriter";case"_等幅":return"Osaka";default:return"_"===t.substr(0,1)?"sans-serif":t}}parseDefineFontName(){this.byteStream.getUI16(),this.byteStream.getDataUntil(),this.byteStream.getDataUntil()}parseDefineText(t){const e={_$name:"StaticText"};e._$characterId=0|this.byteStream.getUI16(),e._$bounds=this.rect(),e._$baseMatrix=this.matrix(),e._$shapeRecords=null;const s=this.byteStream.getUI8(),a=this.byteStream.getUI8();e._$textRecords=this.getTextRecords(t,s,a),this.setCharacter(e._$characterId,e)}getTextRecords(t,e,s){const a=[];for(;0!==this.byteStream.getUI8();){this.byteStream.incrementOffset(-1,0);const i={};i.TextRecordType=this.byteStream.getUIBits(1),i.StyleFlagsReserved=this.byteStream.getUIBits(3),i.StyleFlagsHasFont=this.byteStream.getUIBits(1),i.StyleFlagsHasColor=this.byteStream.getUIBits(1),i.StyleFlagsHasYOffset=this.byteStream.getUIBits(1),i.StyleFlagsHasXOffset=this.byteStream.getUIBits(1),i.StyleFlagsHasFont&&(i.FontId=this.byteStream.getUI16()),i.StyleFlagsHasColor&&(i.TextColor=11===t?this.rgb():this.rgba()),i.StyleFlagsHasXOffset&&(i.XOffset=this.byteStream.getUI16()/20),i.StyleFlagsHasYOffset&&(i.YOffset=this.byteStream.getUI16()/20),i.StyleFlagsHasFont&&(i.TextHeight=this.byteStream.getUI16()),i.GlyphCount=this.byteStream.getUI8(),i.GlyphEntries=this.getGlyphEntries(i.GlyphCount,e,s),a[a.length]=i}return a}getGlyphEntries(t,e,s){const a=[];for(let i=0;i<t;++i)a[a.length]={GlyphIndex:this.byteStream.getUIBits(e),GlyphAdvance:this.byteStream.getSIBits(s)/20};return a}parseDefineEditText(){const t={_$ns:["flash","text"],_$name:"TextField"},e={},s=this.byteStream.getUI16();t._$characterId=s,t._$bounds=this.rect();const a=this.byteStream.getUI8(),i=a>>>7&1;t._$wordWrap=a>>>6&1,t._$multiline=a>>>5&1,t._$displayAsPassword=a>>>4&1;const r=a>>>3&1;t._$type="dynamic",r||(t._$type="input");const h=a>>>2&1,o=a>>>1&1,n=1&a,l=this.byteStream.getUI8(),c=l>>>7&1,b=l>>>5&1;t._$selectable=l>>>4&1,t._$border=l>>>3&1;const g=l>>>1&1,y=1&l;t._$border&&(t._$background=!0);let S=0;if(n){const s=this.byteStream.getUI16(),a=this.getFont(s);if(a){if(S=a._$shiftJIS,c){const t=this.byteStream.getDataUntil();console.log("TODO HasFontClass: ",t)}e._$font=a._$fontName,e._$size=this.byteStream.getUI16()/20,t._$fontId=0|s,t._$embedFonts=!(!y&&"embedded"!==a.fontType||t.displayAsPassword)}}if(h){const e=this.rgba();t._$textColor=(e.R<<16)+(e.G<<8)+e.B+255*e.A*16777216}if(o&&(t._$maxChars=this.byteStream.getUI16()),b){switch(this.byteStream.getUI8()){case 0:e._$align="left";break;case 1:e._$align="right";break;case 2:e._$align="center";break;case 3:e._$align="justify"}e._$leftMargin=this.byteStream.getUI16()/20,e._$rightMargin=this.byteStream.getUI16()/20,e._$indent=this.byteStream.getUI16(),e._$indent>=32768&&(e._$indent-=65536),e._$leading=this.byteStream.getUI16(),e._$leading>=32768&&(e._$leading-=65536),e._$indent/=20,e._$leading/=20}const m=this.byteStream.getDataUntil(S)+"";if(t._$text="",i){const e=this.byteStream.getDataUntil(S);if(!0==(1===g))t._$htmlText=e,t._$initText=!0;else t._$text=e}""!==m&&console.log("VariableName: ",m),t._$defaultTextFormat=[null,e._$font,e._$size,e._$color,e._$bold,e._$italic,e._$underline,e._$url,e._$target,e._$align,e._$leftMargin,e._$rightMargin,0,e._$leading,e._$indent],this.setCharacter(s,t)}parseDefineMorphShape(t){const e={};e.CharacterId=this.byteStream.getUI16(),e.StartBounds=this.rect(),e.EndBounds=this.rect(),84===t&&(e.StartEdgeBounds=this.rect(),e.EndEdgeBounds=this.rect(),this.byteStream.getUIBits(6),e.UsesNonScalingStrokes=this.byteStream.getUIBits(1),e.UsesScalingStrokes=this.byteStream.getUIBits(1));const s=this.byteStream.getUI32(),a=this.byteStream.byte_offset+s;e.MorphFillStyles=this.fillStyleArray(t),e.MorphLineStyles=this.lineStyleArray(t),e.StartEdges=this.shapeWithStyle(t),this.byteStream.byte_offset!==a&&(this.byteStream.byte_offset=a),e.EndEdges=this.shapeWithStyle(t);const i={x:0,y:0},r={x:0,y:0},h=e.StartEdges.ShapeData.records,o=e.EndEdges.ShapeData.records,n=h.length,l=o.length;let c=Math.max(n,l);const b=[],g=[];let y=0,S=0;for(;c>y||c>S;){const t=h[y++],e=o[S++];if(-1===t&&-1===e)break;switch(!0){case-1===t:case void 0===t:if(e){const t=o[S++];if(g.push(1,t),b.push(1,t),t){const t=o[S++],e=o[S++];g.push(t,e),b.push(t,e),console.log("TODO Parse Morph NewStyles")}const e=o[S++];if(g.push(e),b.push(e),e){const t=o[S++],e=o[S++];r.x=t,r.y=e,g.push(t,e),b.push(t,e)}const s=o[S++];if(g.push(s),b.push(s),s){const t=o[S++];g.push(t),b.push(t)}const a=o[S++];if(g.push(a),b.push(a),a){const t=o[S++];g.push(t),b.push(t)}const i=o[S++];if(g.push(i),b.push(i),i){const t=o[S++];g.push(t),b.push(t)}break}if(o[S++]){const t=o[S++],e=o[S++],s=o[S++],a=o[S++];r.x+=t+s,r.y+=e+a,g.push(0,1,t,e,s,a),b.push(0,1,t,e,s,a)}else{const t=o[S++],e=o[S++];r.x+=t,r.y+=e,g.push(0,0,t,e),b.push(0,0,t,e)}break;case-1===e:case void 0===e:if(t){const t=h[y++];if(g.push(1,t),b.push(1,t),t){const t=h[y++],e=h[y++];g.push(t,e),b.push(t,e),console.log("TODO Parse Morph NewStyles")}const e=h[y++];if(g.push(e),b.push(e),e){const t=h[y++],e=h[y++];i.x=t,i.y=e,g.push(t,e),b.push(t,e)}const s=h[y++];if(g.push(s),b.push(s),s){const t=h[y++];g.push(t),b.push(t)}const a=h[y++];if(g.push(a),b.push(a),a){const t=h[y++];g.push(t),b.push(t)}const r=h[y++];if(g.push(r),b.push(r),r){const t=h[y++];g.push(t),b.push(t)}break}if(h[y++]){const t=h[y++],e=h[y++],s=h[y++],a=h[y++];i.x+=t+s,i.y+=e+a,g.push(0,1,t,e,s,a),b.push(0,1,t,e,s,a)}else{const t=h[S++],e=h[S++];i.x+=t,i.y+=e,g.push(0,0,t,e),b.push(0,0,t,e)}break;case 1===t&&1===e:const s=h[y++];if(b.push(1,s),s){const t=h[y++],e=h[y++];b.push(t,e),console.log("TODO Parse Morph NewStyles")}const a=h[y++];if(b.push(a),a){const t=h[y++],e=h[y++];i.x=t,i.y=e,b.push(t,e)}const n=h[y++];if(b.push(n),n){const t=h[y++];b.push(t)}const l=h[y++];if(b.push(l),l){const t=h[y++];b.push(t)}const c=h[y++];if(b.push(c),c){const t=h[y++];b.push(t)}const m=o[S++];if(g.push(1,m),m){const t=o[S++],e=o[S++];g.push(t,e),console.log("TODO Parse Morph NewStyles")}const f=o[S++];if(g.push(f),f){const t=o[S++],e=o[S++];i.x=t,i.y=e,g.push(t,e)}const d=o[S++];if(g.push(d),d){const t=o[S++];g.push(t)}const Y=o[S++];if(g.push(Y),Y){const t=o[S++];g.push(t)}const I=o[S++];if(g.push(I),I){const t=o[S++];g.push(t)}break;case 0===t&&0===e:if(h[y++]){const t=h[y++],e=h[y++],s=h[y++],a=h[y++];i.x=s,i.y=a,b.push(0,1,t,e,s,a)}else{const t=h[y++],e=h[y++];i.x=t,i.y=e,b.push(0,0,t,e)}if(o[S++]){const t=o[S++],e=o[S++],s=o[S++],a=o[S++];r.x=s,r.y=a,g.push(0,1,t,e,s,a)}else{const t=o[S++],e=o[S++];r.x=t,r.y=e,g.push(0,0,t,e)}break;case 1===t&&0===e:{const t=h[y++];if(g.push(1,t),b.push(1,t),t){const t=h[y++],e=h[y++];g.push(t,e),b.push(t,e),console.log("TODO Parse Morph NewStyles")}const e=h[y++];if(g.push(e),b.push(e),e){const t=h[y++],e=h[y++];i.x=t,i.y=e,g.push(t,e),b.push(t,e)}const s=h[y++];if(g.push(s),b.push(s),s){const t=h[y++];g.push(t),b.push(t)}const a=h[y++];if(g.push(a),b.push(a),a){const t=h[y++];g.push(t),b.push(t)}const r=h[y++];if(g.push(r),b.push(r),r){const t=h[y++];g.push(t),b.push(t)}--S}break;case 0===t&&1===e:{const t=o[S++];if(g.push(1,t),b.push(1,t),t){const t=o[S++],e=o[S++];g.push(t,e),b.push(t,e),console.log("TODO Parse Morph NewStyles")}const e=o[S++];if(g.push(e),b.push(e),e){const t=o[S++],e=o[S++];r.x=t,r.y=e,g.push(t,e),b.push(t,e)}const s=o[S++];if(g.push(s),b.push(s),s){const t=o[S++];g.push(t),b.push(t)}const a=o[S++];if(g.push(a),b.push(a),a){const t=o[S++];g.push(t),b.push(t)}const i=o[S++];if(g.push(i),b.push(i),i){const t=o[S++];g.push(t),b.push(t)}--y}}}b.push(-1),g.push(-1),e.StartEdges.ShapeData.records=new Int32Array(b),e.EndEdges.ShapeData.records=new Int32Array(g),this.setCharacter(e.CharacterId,{_$ns:["flash","display"],_$name:"MorphShape",_$characterId:e.CharacterId,_$endBounds:e.EndBounds,_$endEdges:e.EndEdges,_$fillStyles:e.MorphFillStyles,_$lineStyles:e.MorphLineStyles,_$startBounds:e.StartBounds,_$startEdges:e.StartEdges,_$shapes:null,_$frameData:[],_$frameCreated:!1},[e.StartEdges.ShapeData.records.buffer,e.EndEdges.ShapeData.records.buffer])}parseFrameLabel(){return{name:this.byteStream.getDataUntil(),frame:0}}parseDefineButton(t,e){const s=this.byteStream.byte_offset+e|0,a={_$ns:["flash","display"],_$name:"SimpleButton"};a._$characterId=0|this.byteStream.getUI16();let i=0;7!==t&&(this.byteStream.getUIBits(7),a._$trackAsMenu=!!this.byteStream.getUIBits(1),i=0|this.byteStream.getUI16()),a._$characters=this.buttonCharacters(s),7===t?(i=s-this.byteStream.byte_offset|0,this.byteStream.byte_offset+=i):i>0&&(a._$actions=this.buttonActions(s)),this.setCharacter(a._$characterId,a),this.byteStream.byte_offset!==s&&(this.byteStream.byte_offset=0|s)}buttonCharacters(t){const e=[];for(;0!==this.byteStream.getUI8();){this.byteStream.incrementOffset(-1,0);const s=0|this.byteStream.byte_offset,a=this.buttonRecord();if(this.byteStream.byte_offset>t){this.byteStream.byte_offset=0|s;break}e[e.length]=a}return e}buttonRecord(){this.byteStream.getUIBits(2);const t={};return t.PlaceFlagHasBlendMode=this.byteStream.getUIBits(1),t.PlaceFlagHasFilterList=this.byteStream.getUIBits(1),t.ButtonStateHitTest=this.byteStream.getUIBits(1),t.ButtonStateDown=this.byteStream.getUIBits(1),t.ButtonStateOver=this.byteStream.getUIBits(1),t.ButtonStateUp=this.byteStream.getUIBits(1),t.CharacterId=this.byteStream.getUI16(),t.Depth=this.byteStream.getUI16(),t.PlaceFlagHasMatrix=1,t.Matrix=this.matrix(),t.ColorTransform=this.colorTransform(),t.PlaceFlagHasColorTransform=void 0===t.ColorTransform?0:1,t.PlaceFlagHasBlendMode&&(t.BlendMode=this.byteStream.getUI8()),t.PlaceFlagHasFilterList&&(t.SurfaceFilterList=this.getFilterList()),t.PlaceFlagHasRatio=0,t.PlaceFlagHasClipDepth=0,t.Sound=null,t}buttonActions(t){for(;;){const e={},s=0|this.byteStream.byte_offset,a=this.byteStream.getUI16();e.CondIdleToOverDown=this.byteStream.getUIBits(1),e.CondOutDownToIdle=this.byteStream.getUIBits(1),e.CondOutDownToOverDown=this.byteStream.getUIBits(1),e.CondOverDownToOutDown=this.byteStream.getUIBits(1),e.CondOverDownToOverUp=this.byteStream.getUIBits(1),e.CondOverUpToOverDown=this.byteStream.getUIBits(1),e.CondOverUpToIdle=this.byteStream.getUIBits(1),e.CondIdleToOverUp=this.byteStream.getUIBits(1),e.CondKeyPress=this.byteStream.getUIBits(7),e.CondOverDownToIdle=this.byteStream.getUIBits(1);const i=t-this.byteStream.byte_offset+1|0;if(this.byteStream.byte_offset+=i,!a)break;this.byteStream.byte_offset=s+a|0}return[]}parsePlaceObject(t,e){const s=this.byteStream.byte_offset,a={};if(a.tagType=t,4===t)return a.CharacterId=this.byteStream.getUI16(),a.Depth=this.byteStream.getUI16(),a.Matrix=this.matrix(),a.PlaceFlagHasMatrix=1,this.byteStream.byteAlign(),this.byteStream.byte_offset-s<e&&(a.ColorTransform=this.colorTransform(),a.PlaceFlagHasColorTransform=1),this.byteStream.byteAlign(),this.byteStream.byte_offset=s+e,a;const i=this.swfVersion;if(a.PlaceFlagHasClipActions=this.byteStream.getUIBits(1),a.PlaceFlagHasClipDepth=this.byteStream.getUIBits(1),a.PlaceFlagHasName=this.byteStream.getUIBits(1),a.PlaceFlagHasRatio=this.byteStream.getUIBits(1),a.PlaceFlagHasColorTransform=this.byteStream.getUIBits(1),a.PlaceFlagHasMatrix=this.byteStream.getUIBits(1),a.PlaceFlagHasCharacter=this.byteStream.getUIBits(1),a.PlaceFlagMove=this.byteStream.getUIBits(1),70===t&&(this.byteStream.getUIBits(1),a.PlaceFlagOpaqueBackground=this.byteStream.getUIBits(1),a.PlaceFlagHasVisible=this.byteStream.getUIBits(1),a.PlaceFlagHasImage=this.byteStream.getUIBits(1),a.PlaceFlagHasClassName=this.byteStream.getUIBits(1),a.PlaceFlagHasCacheAsBitmap=this.byteStream.getUIBits(1),a.PlaceFlagHasBlendMode=this.byteStream.getUIBits(1),a.PlaceFlagHasFilterList=this.byteStream.getUIBits(1)),a.Depth=this.byteStream.getUI16(),a.PlaceFlagHasClassName&&(a.ClassName=this.byteStream.getDataUntil(),console.log("TODO ",a.ClassName)),a.PlaceFlagHasCharacter&&(a.CharacterId=this.byteStream.getUI16()),a.PlaceFlagHasMatrix&&(a.Matrix=this.matrix()),a.PlaceFlagHasColorTransform&&(a.ColorTransform=this.colorTransform()),a.PlaceFlagHasRatio&&(a.Ratio=this.byteStream.getUI16()),a.PlaceFlagHasName&&(a.Name=this.byteStream.getDataUntil()),a.PlaceFlagHasClipDepth&&(a.ClipDepth=this.byteStream.getUI16()),70===t&&(a.PlaceFlagHasFilterList&&(a.SurfaceFilterList=this.getFilterList()),a.PlaceFlagHasBlendMode&&(a.BlendMode=this.byteStream.getUI8()),a.PlaceFlagHasCacheAsBitmap&&(a.BitmapCache=this.byteStream.getUI8()),a.PlaceFlagHasVisible&&(a.Visible=this.byteStream.getUI8()),a.PlaceFlagOpaqueBackground&&(a.BackgroundColor=this.rgba())),a.PlaceFlagHasClipActions){this.byteStream.getUI16(),a.AllEventFlags=this.parseClipEventFlags();const t=s+e;for(;this.byteStream.byte_offset<t;){const e=this.parseClipActionRecord(t);if(t<=this.byteStream.byte_offset)break;if(!(i<=5?this.byteStream.getUI16():this.byteStream.getUI32()))break;this.byteStream.byte_offset-=i<=5?2:4,e.KeyCode&&(this.byteStream.byte_offset-=1)}}return this.byteStream.byteAlign(),this.byteStream.byte_offset=s+e,a}parseClipActionRecord(t){const e={},s=this.parseClipEventFlags();if(t>this.byteStream.byte_offset){const t=this.byteStream.getUI32();s.keyPress&&(e.KeyCode=this.byteStream.getUI8()),this.byteStream.byte_offset+=t}return e}parseClipEventFlags(){const t=this.swfVersion,e={};return e.keyUp=this.byteStream.getUIBits(1),e.keyDown=this.byteStream.getUIBits(1),e.mouseUp=this.byteStream.getUIBits(1),e.mouseDown=this.byteStream.getUIBits(1),e.mouseMove=this.byteStream.getUIBits(1),e.unload=this.byteStream.getUIBits(1),e.enterFrame=this.byteStream.getUIBits(1),e.load=this.byteStream.getUIBits(1),t>=6&&(e.dragOver=this.byteStream.getUIBits(1),e.rollOut=this.byteStream.getUIBits(1),e.rollOver=this.byteStream.getUIBits(1),e.releaseOutside=this.byteStream.getUIBits(1),e.release=this.byteStream.getUIBits(1),e.press=this.byteStream.getUIBits(1),e.initialize=this.byteStream.getUIBits(1)),e.data=this.byteStream.getUIBits(1),t>=6&&(this.byteStream.getUIBits(5),e.construct=this.byteStream.getUIBits(1),e.keyPress=this.byteStream.getUIBits(1),e.dragOut=this.byteStream.getUIBits(1),this.byteStream.getUIBits(8)),this.byteStream.byteAlign(),e}getFilterList(){const t=0|this.byteStream.getUI8(),e=[];for(let s=0;s<t;++s){const t=this.getFilter();t&&(e[e.length]=t)}return e.length?e:null}getFilter(){switch(0|this.byteStream.getUI8()){case 0:return this.dropShadowFilter();case 1:return this.blurFilter();case 2:return this.glowFilter();case 3:return this.bevelFilter();case 4:return this.gradientGlowFilter();case 5:return this.convolutionFilter();case 6:return this.colorMatrixFilter();case 7:return this.gradientBevelFilter()}}dropShadowFilter(){const t={},e=this.rgba(),s=e.A,a=e.R<<16|e.G<<8|e.B,i=this.byteStream.getUI32()/65536,r=this.byteStream.getUI32()/65536,h=this.byteStream.getUI32()/65536*Util.$Rad2Deg,o=this.byteStream.getUI32()/65536,n=this.byteStream.getFloat16()/256,l=!!this.byteStream.getUIBits(1),c=!!this.byteStream.getUIBits(1),b=!this.byteStream.getUIBits(1),g=this.byteStream.getUIBits(5);return t._$ns=["flash","filters"],t._$name="DropShadowFilter",t.params=[null,o,h,a,s,i,r,n,g,l,c,b],t}blurFilter(){const t={},e=this.byteStream.getUI32()/65536,s=this.byteStream.getUI32()/65536,a=this.byteStream.getUIBits(5);return this.byteStream.getUIBits(3),t._$ns=["flash","filters"],t._$name="BlurFilter",t.params=[null,e,s,a],t}glowFilter(){const t={},e=this.rgba(),s=e.A,a=e.R<<16|e.G<<8|e.B,i=this.byteStream.getUI32()/65536,r=this.byteStream.getUI32()/65536,h=this.byteStream.getFloat16()/256,o=!!this.byteStream.getUIBits(1),n=!!this.byteStream.getUIBits(1);this.byteStream.getUIBits(1);const l=this.byteStream.getUIBits(5);return t._$ns=["flash","filters"],t._$name="GlowFilter",t.params=[null,a,s,i,r,h,l,o,n],t}bevelFilter(){const t={};let e=this.rgba();const s=e.A,a=e.R<<16|e.G<<8|e.B;e=this.rgba();const i=e.A,r=e.R<<16|e.G<<8|e.B,h=this.byteStream.getUI32()/65536,o=this.byteStream.getUI32()/65536,n=this.byteStream.getUI32()/65536*Util.$Rad2Deg,l=this.byteStream.getUI32()/65536,c=this.byteStream.getFloat16()/256,b=!!this.byteStream.getUIBits(1),g=!!this.byteStream.getUIBits(1);this.byteStream.getUIBits(1);const y=this.byteStream.getUIBits(1),S=this.byteStream.getUIBits(4);let m="inner";return b||(m=y?"full":"outer"),t._$ns=["flash","filters"],t._$name="BevelFilter",t.params=[null,l,n,a,s,r,i,h,o,c,S,m,g],t}gradientGlowFilter(){const t={},e=0|this.byteStream.getUI8(),s=[],a=[];for(let t=0;t<e;++t){const t=this.rgba();a[a.length]=t.A,s[s.length]=t.R<<16|t.G<<8|t.B|0}const i=[];for(let t=0;t<e;++t)i[i.length]=+this.byteStream.getUI8()/255;const r=this.byteStream.getUI32()/65536,h=this.byteStream.getUI32()/65536,o=this.byteStream.getUI32()/65536*Util.$Rad2Deg,n=this.byteStream.getUI32()/65536,l=this.byteStream.getFloat16()/256,c=!!this.byteStream.getUIBits(1),b=!!this.byteStream.getUIBits(1);this.byteStream.getUIBits(1);const g=this.byteStream.getUIBits(1),y=this.byteStream.getUIBits(4);let S="inner";return c||(S=g?"full":"outer"),t._$ns=["flash","filters"],t._$name="GradientGlowFilter",t.params=[null,n,o,s,a,i,r,h,l,y,S,b],t}convolutionFilter(){const t={},e=this.byteStream.getUI8(),s=this.byteStream.getUI8(),a=this.byteStream.getFloat32,i=this.byteStream.getFloat32,r=e*s,h=[];for(let t=0;t<r;++t)h[h.length]=this.byteStream.getFloat32();const o=this.rgba();this.byteStream.getUIBits(6);const n=!!this.byteStream.getUIBits(1),l=!!this.byteStream.getUIBits(1);return t._$ns=["flash","filters"],t._$name="ConvolutionFilter",t.params=[null,e,s,h,a,i,l,n,o],t}gradientBevelFilter(){const t={},e=0|this.byteStream.getUI8(),s=[],a=[];for(let t=0;t<e;++t){const t=this.rgba();a[a.length]=t.A,s[s.length]=t.R<<16|t.G<<8|t.B|0}const i=[];for(let t=0;t<e;++t)i[i.length]=+this.byteStream.getUI8()/255;const r=this.byteStream.getUI32()/65536,h=this.byteStream.getUI32()/65536,o=this.byteStream.getUI32()/65536*Util.$Rad2Deg,n=this.byteStream.getUI32()/65536,l=this.byteStream.getFloat16()/256,c=!!this.byteStream.getUIBits(1),b=!!this.byteStream.getUIBits(1);this.byteStream.getUIBits(1);const g=this.byteStream.getUIBits(1),y=this.byteStream.getUIBits(4);let S="inner";return c||(S=g?"full":"outer"),t._$ns=["flash","filters"],t._$name="GradientBevelFilter",t.params=[null,n,o,s,a,i,r,h,l,y,S,b],t}colorMatrixFilter(){const t={},e=[];for(let t=0;t<20;t++)e[e.length]=this.byteStream.getFloat32();return t._$ns=["flash","filters"],t._$name="ColorMatrixFilter",t.params=[null,e],t}colorTransform(){this.byteStream.byteAlign();const t=[1,1,1,1,0,0,0,0],e=this.byteStream.getUIBits(6),s=e>>5,a=15&e;return e>>4&1&&(t[0]=this.byteStream.getSIBits(a)/256,t[1]=this.byteStream.getSIBits(a)/256,t[2]=this.byteStream.getSIBits(a)/256,t[3]=this.byteStream.getSIBits(a)/256),s&&(t[4]=this.byteStream.getSIBits(a),t[5]=this.byteStream.getSIBits(a),t[6]=this.byteStream.getSIBits(a),t[7]=this.byteStream.getSIBits(a)),t}parseSoundStreamHead(t){const e={};e.tagType=t,this.byteStream.getUIBits(4),e.PlaybackSoundRate=this.byteStream.getUIBits(2),e.PlaybackSoundSize=this.byteStream.getUIBits(1),e.PlaybackSoundType=this.byteStream.getUIBits(1),e.StreamSoundCompression=this.byteStream.getUIBits(4),e.StreamSoundRate=this.byteStream.getUIBits(2),e.StreamSoundSize=this.byteStream.getUIBits(1),e.StreamSoundType=this.byteStream.getUIBits(1),e.StreamSoundSampleCount=this.byteStream.getUI16(),2===e.StreamSoundCompression&&(e.LatencySeek=this.byteStream.getSIBits(2))}parseDefineSound(t){const e=this.byteStream.byte_offset,s=this.byteStream.getUI16();this.byteStream.getUIBits(4),this.byteStream.getUIBits(2),this.byteStream.getUIBit(),this.byteStream.getUIBit(),this.byteStream.getUI32();const a=t-(this.byteStream.byte_offset-e),i=this.byteStream.byte_offset,r=this.byteStream.data.slice(i,i+a),h={_$characterId:s,_$name:"Sound",_$data:null,_$buffer:r};this.byteStream.byte_offset=e+t,this.setCharacter(s,h,[r.buffer])}parseStartSound(t){const e={};return e.SoundId=this.byteStream.getUI16(),89===t&&(e.SoundClassName=this.byteStream.getDataUntil()),e.SoundInfo=this.parseSoundInfo(),e}parseDefineButtonSound(){const t=this.byteStream.getUI16(),e=this.getCharacter(t);for(let t=0;t<4;t++){const s=this.byteStream.getUI16();if(s){const a=this.parseSoundInfo();switch(t){case 0:e.ButtonStateUpSoundInfo=a,e.ButtonStateUpSoundId=s;break;case 1:e.ButtonStateOverSoundInfo=a,e.ButtonStateOverSoundId=s;break;case 2:e.ButtonStateDownSoundInfo=a,e.ButtonStateDownSoundId=s;break;case 3:e.ButtonStateHitTestSoundInfo=a,e.ButtonStateHitTestSoundId=s}}}this.setCharacter(t,e)}parseSoundInfo(){this.byteStream.getUIBits(2);const t={};if(t.SyncStop=this.byteStream.getUIBit(),t.SyncNoMultiple=this.byteStream.getUIBit(),t.HasEnvelope=this.byteStream.getUIBit(),t.HasLoops=this.byteStream.getUIBit(),t.HasOutPoint=this.byteStream.getUIBit(),t.HasInPoint=this.byteStream.getUIBit(),t.HasInPoint&&(t.InPoint=this.byteStream.getUI32()),t.HasOutPoint&&(t.OutPoint=this.byteStream.getUI32()),t.HasLoops&&(t.LoopCount=this.byteStream.getUI16()),t.HasEnvelope){const e=this.byteStream.getUI8(),s=[];for(let t=0;t<e;++t)s[t]={Pos44:this.byteStream.getUI32(),LeftLevel:this.byteStream.getUI16(),RightLevel:this.byteStream.getUI16()};t.EnvPoints=e,t.EnvelopeRecords=s}return t}parseDefineFontAlignZones(){const t=this.byteStream.getUI16(),e=this.getFont(t)||{};e._$CSMTableHint=this.byteStream.getUIBits(2),this.byteStream.getUIBits(6);const s=0|e._$numGlyphs,a=[];for(let t=0;t<s;++t){const e=this.byteStream.getUI8(),s=[];for(let t=0;t<e;++t)s.push(this.byteStream.getFloat16()),s.push(this.byteStream.getFloat16());this.byteStream.getUIBits(6),this.byteStream.getUIBits(1),this.byteStream.getUIBits(1),a[t]=s}this.byteStream.byteAlign(),e._$zoneTable=a,this.setFont(t,e)}parseCSMTextSettings(t){const e=this.byteStream.getUI16(),s={};s.tagType=t,s.UseFlashType=this.byteStream.getUIBits(2),s.GridFit=this.byteStream.getUIBits(3),this.byteStream.getUIBits(3),s.Thickness=this.byteStream.getUI32(),s.Sharpness=this.byteStream.getUI32(),this.byteStream.getUI8(),this.setTextSetting(e,s)}parseSoundStreamBlock(t,e){const s={};s.tagType=t,s.compressed=this.byteStream.getData(e)}parseDefineScalingGrid(){const t=this.byteStream.getUI16(),e=this.rect();this.setGrid(t,e)}postCharacter(t,e){globalThis.postMessage({infoKey:"_$characters",characters:t},e),t.length=0,e&&(e.length=0)}}Util.$swfParser=new SwfParser,this.addEventListener("message",(function(t){const e=Util.$swfParser;e.version=t.data.version,e.byteStream.setData(t.data.buffer),e.byteStream.byte_offset=t.data.offset;const s=Util.$createMovieClip();e.parseTags(t.data.buffer.length,s),e.postData(s),e.clear()}));'],{type:"text/javascript"})),k.$parserWorker=null,k.$parserQueues=[],k.$parserWorkerWait=!1,k.$unlzmaHandler=function(e){if(e.target.onmessage=null,k.$unlzmaQueues.length){const e=k.$unlzmaQueues.shift(),t=new Worker(k.$unlzmaWorkerURL);t.onmessage=k.$unlzmaHandler.bind(e);const a=e._$byteStream._$buffer;t.postMessage({fileSize:e.fileSize,mode:e.mode,buffer:a},[a.buffer])}else k.$unlzmaWorkerActive=!1;this._$byteStream._$buffer=e.data,this.parseAndBuild()},k.$allClearCopy=()=>{k.$timelineMenu.clearCopy(),k.$screenMenu.clearCopy(),k.$libraryMenu.clearCopy()},k.$getImageType=e=>{switch(!0){case 255===e[0]&&216===e[1]:return"jpeg";case 71===e[0]&&73===e[1]&&70===e[2]:return"gif";case 137===e[0]&&80===e[1]&&78===e[2]&&71===e[3]&&13===e[4]&&10===e[5]&&26===e[6]&&10===e[7]:return"png";case 66===e[0]&&77===e[1]:return"bmp";default:return null}},k.$jpegDecodeHandler=()=>{const e=this.image,t=e.width,a=e.height,r=document.createElement("canvas");r.width=t,r.height=a;const i=r.getContext("2d");i.drawImage(e,0,0,t,a);const s=new Uint8Array(i.getImageData(0,0,t,a).data);this.jpegData=null,this.image=null;const n=k.$currentWorkSpace().getLibrary(this.libraryId);if(n.width=t,n.height=a,this.isAlpha){if(this.buffer=s,this.width=t,this.height=a,k.$unzipWorkerActive)return void k.$unzipQueues.push(this);k.$unzipWorkerActive=!0,k.$unzipWorker||(k.$unzipWorker=new Worker(k.$unzipURL));const e=k.$unzipWorker;e.onmessage=k.$unzipHandler.bind(this),e.postMessage(this,[this.buffer.buffer,this.alphaData.buffer])}else n._$buffer=s},k.$characters=new Map,k.$symbols=new Map,k.$fonts=new Map,k.$texts=new Map,k.$parserHandler=function(e){const t=e.target;switch(e.data.infoKey){case"character":{const t=e.data.piece,a=k.$currentWorkSpace(),r=a.nextLibraryId;switch(t.libraryId=r,t._$name){case"Shape":{const e=k.$libraryController.createInstance(A.SHAPE,`Shape_${r}`,r);e.recodes=k.$vtc.convert(t._$records),e.inBitmap=e.recodes.pop(),e.bounds={xMin:t._$bounds.xMin,xMax:t._$bounds.xMax,yMin:t._$bounds.yMin,yMax:t._$bounds.yMax};const i=a.addLibrary(e);this._$folderId&&(i.folderId=this._$folderId),k.$characters.set(t._$characterId,r)}break;case"MovieClip":{for(let e=0;e<t._$dictionary.length;++e){const a=t._$dictionary[e];a.LibraryId=k.$characters.get(a.CharacterId)}const e=t._$characterId?`MovieClip_${r}`:this._$fileName;let i=!t._$characterId&&this._$libraryId?this._$libraryId:r;const s=k.$libraryController.createInstance(A.MOVIE_CLIP,e,i),n=a.addLibrary(s);this._$folderId&&(n.folderId=this._$folderId);let o=new Map,l=[];for(let e=0;e<t._$dictionary.length;++e){const a=t._$dictionary[e];-1===l.indexOf(a.Depth)&&(l.push(a.Depth),a.ClipDepth&&o.set(a.Depth,e))}if(l.sort(((e,t)=>{switch(!0){case e>t:return 1;case e<t:return-1;default:return 0}})),o.size)for(const[e,a]of o){const r=[],i=t._$dictionary[a];for(let a=0;t._$dictionary.length>a;++a){const s=t._$dictionary[a];if(s.Depth>i.ClipDepth)break;s.Depth>e&&r.push(s)}for(let e=0;e<r.length;++e){const t=r[e],a=l.indexOf(t.Depth),s=l.splice(a,1)[0],n=l.indexOf(i.Depth);l.splice(n,0,s)}}let c=-1,d=-1;const h=l.length-1,u=new Map,m=[];for(let e=h;e>-1;--e){const t=new T;t.name="Layer_"+(h-e);const a=l[e];o.size&&(d>-1&&(a>d?(t.mode=B.MASK_IN,t.maskId=c):(c=-1,d=-1)),o.has(a)&&(d=a,c=h-e,t.mode=B.MASK)),m.push(t),u.set(a,t)}for(let e=0;e<l.length;++e)n.setLayer(e,m[e]);const g=[],p=t._$controller.length-1;for(let e=0;e<t._$dictionary.length;++e){const a=t._$dictionary[e],r=new M;r.libraryId=a.LibraryId,r.startFrame=a.StartFrame,r.endFrame=a.EndFrame||p+1,r.name=a.Name||"",g.push(r)}const f=new Map;for(let e=1;e<t._$controller.length;++e){const a=t._$controller[e];for(let r=0;r<a.length;++r){const i=a[r],s=t._$dictionary[i],n=u.get(s.Depth),o=g[i];f.has(i)||(f.set(i,-1),n.addCharacter(o));const l=t._$placeMap[e][s.Depth];if(f.get(i)!==l){const a=t._$placeObjects[l];o.setPlace(e,{frame:e,depth:0,matrix:a.matrix,colorTransform:a.colorTransform,blendMode:a.blendMode,filter:a.filters?a.filters:[],loop:k.$getDefaultLoopConfig()}),f.set(i,l)}}}for(let e=0;e<m.length;++e){const t={startFrame:-1},a=m[e];for(let e=1;e<=p;++e){a.getActiveCharacter(e).length?t.startFrame>0&&(a.addEmptyCharacter(new L({startFrame:t.startFrame,endFrame:e})),t.startFrame=-1):-1===t.startFrame&&(t.startFrame=e)}}for(let e=0;e<m.length;++e){const t=m[e],a=t.totalFrame;for(let e=1;a>e;){const r=t.getActiveCharacter(e);if(!r.length||r.length>2){e++;continue}const i=r[0],s=i.getRange(e);if(s.endFrame-s.startFrame!=1){e=s.endFrame;continue}if(e+1>=a)break;if(!i.hasPlace(e+1)){e++;continue}const n=e;for(;;){if(!i.hasPlace(e+1)){if(e-n>2){i.setTween(n,{method:"linear",curve:[],custom:k.$tweenController.createEasingObject(),startFrame:n,endFrame:e});for(let t=n;e>t;++t)i.getPlace(t).tweenFrame=n}break}if(e++,e>=a)break}}}for(let e=0;e<t._$sounds.length;++e){const a=t._$sounds[e],r=[];for(let e=0;e<a.data.length;++e){const t=a.data[e];r.push({characterId:k.$characters.get(t.SoundId),volume:100,loopCount:0|t.SoundInfo.LoopCount,autoPlay:!!t.SoundInfo.HasLoops})}n._$sounds.set(a.frame,r)}k.$characters.set(t._$characterId,r)}break;case"lossless":{const e=k.$libraryController.createInstance(A.BITMAP,`Bitmap_${r}`,r);t.mode="lossless",e.imageType="image/png",e.buffer=null,e.width=t.width,e.height=t.height;const i=a.addLibrary(e);if(this._$folderId&&(i.folderId=this._$folderId),k.$characters.set(t._$characterId,r),k.$unzipWorkerActive)return void k.$unzipQueues.push(t);k.$unzipWorkerActive=!0,k.$unzipWorker||(k.$unzipWorker=new Worker(k.$unzipURL));const s=k.$unzipWorker;s.onmessage=k.$unzipHandler.bind(t),s.postMessage(t,[t.buffer.buffer])}break;case"imageData":{const e=k.$libraryController.createInstance(A.BITMAP,`Bitmap_${r}`,r),i=`image/${k.$getImageType(t.jpegData)}`;t.mode="jpegAlpha",t.imageType=i,e.imageType=i,e.buffer=null,e.width=0,e.height=0;const s=a.addLibrary(e);this._$folderId&&(s.folderId=this._$folderId),k.$characters.set(t._$characterId,r),t.image=new Image,t.image.decoding="async",t.image.src=URL.createObjectURL(new Blob([t.jpegData],{type:t.imageType})),t.image.decode().then(k.$jpegDecodeHandler.bind(t))}break;case"StaticText":{const e=k.$libraryController.createInstance(A.SHAPE,`ShapeText_${r}`,r);e.bounds={xMin:t._$bounds.xMin,xMax:t._$bounds.xMax,yMin:t._$bounds.yMin,yMax:t._$bounds.yMax};const i=a.addLibrary(e);this._$folderId&&(i.folderId=this._$folderId),k.$characters.set(t._$characterId,r),k.$texts.set(k.$texts.size,t)}break;case"SimpleButton":console.log("TODO SimpleButton: ",t),k.$characters.set(t._$characterId,r);break;case"TextField":{const e=k.$libraryController.createInstance(A.TEXT,`Text_${r}`,r);e.bounds={xMin:t._$bounds.xMin,xMax:t._$bounds.xMax,yMin:t._$bounds.yMin,yMax:t._$bounds.yMax},e.text=t._$text,e.inputType=t._$type,e.color=t._$textColor,e.font=t._$defaultTextFormat[1],e.size=t._$defaultTextFormat[2],e.align=t._$defaultTextFormat[7],e.leftMargin=t._$defaultTextFormat[8],e.rightMargin=t._$defaultTextFormat[9],e.leading=t._$defaultTextFormat[10],e.multiline=1===t._$multiline,e.wordWrap=1===t._$wordWrap,e.border=1===t._$border,t._$defaultTextFormat[4]&&t._$defaultTextFormat[5]?e.fontType=3:t._$defaultTextFormat[4]?e.fontType=2:t._$defaultTextFormat[5]&&(e.fontType=1),e.htmlText=t._$htmlText;const i=a.addLibrary(e);this._$folderId&&(i.folderId=this._$folderId),k.$characters.set(t._$characterId,r)}break;case"Sound":{const e=k.$libraryController.createInstance(A.SOUND,`Sound_${r}`,r);e.buffer=t._$buffer;const i=a.addLibrary(e);this._$folderId&&(i.folderId=this._$folderId),k.$characters.set(t._$characterId,r)}break;default:console.log("TODO: ",t)}if(t._$characterId)return;this._$libraryId&&(k.$changeLibraryId=this._$libraryId,a.scene.changeFrame(k.$timelineFrame.currentFrame),k.$changeLibraryId=0)}break;case"_$symbols":for(let t=0;t<e.data.pieces.length;++t){const a=e.data.pieces[t];k.$symbols.set(a.tagId,a.ns)}return;case"font":return void k.$fonts.set(e.data.index,e.data.piece);case"font_shape":{const t=k.$fonts.get(e.data.index);t._$glyphShapeTable.push.apply(t._$glyphShapeTable,e.data.pieces),k.$fonts.set(e.data.index,t)}return;case"font_zone":{const t=k.$fonts.get(e.data.index);t._$zoneTable.push.apply(t._$zoneTable,e.data.pieces),k.$fonts.set(e.data.index,t)}return}const a=k.$currentWorkSpace();for(const[e,t]of k.$symbols){a.getLibrary(e)._$symbol=`${t}`}if(k.$characters.clear(),k.$symbols.clear(),k.$fonts.clear(),k.$texts.clear(),k.$libraryController.reload(Array.from(a._$libraries.values())),t.onmessage=null,this._$resolve&&this._$resolve(),k.$parserQueues.length){const e=k.$parserQueues.shift();t.onmessage=k.$parserHandler.bind(e);const a=e._$byteStream._$buffer;t.postMessage({version:e._$swfVersion,offset:e._$offset,buffer:a},[a.buffer])}else k.$parserWorkerWait=!1},k.$boundsMatrix=(e,t)=>{const a=e.xMax*t[0]+e.yMax*t[2]+t[4],r=e.xMax*t[0]+e.yMin*t[2]+t[4],i=e.xMin*t[0]+e.yMax*t[2]+t[4],s=e.xMin*t[0]+e.yMin*t[2]+t[4],n=e.xMax*t[1]+e.yMax*t[3]+t[5],o=e.xMax*t[1]+e.yMin*t[3]+t[5],l=e.xMin*t[1]+e.yMax*t[3]+t[5],c=e.xMin*t[1]+e.yMin*t[3]+t[5];return{xMin:Math.min(Number.MAX_VALUE,a,r,i,s),xMax:Math.max(-Number.MAX_VALUE,a,r,i,s),yMin:Math.min(Number.MAX_VALUE,n,o,l,c),yMax:Math.max(-Number.MAX_VALUE,n,o,l,c)}},k.$intToRGB=e=>({R:(16711680&e)>>16,G:(65280&e)>>8,B:255&e}),k.$copyContainer=(e,t)=>{const a=k.$currentWorkSpace(),r=k.$workSpaces[k.$copyWorkSpaceId];t.has(e.id)||t.set(e.id,a.nextLibraryId),e.id=t.get(e.id),a.addLibrary(e);for(let i=0;i<e.layers.length;++i){const s=e.layers[i];for(let e=0;e<s.characters.length;++e){const i=s.characters[e];if(!t.has(i.libraryId)){t.set(i.libraryId,a.nextLibraryId);const e=r.getLibrary(i.libraryId).toObject();e.type===A.MOVIE_CLIP?k.$copyContainer(e,t):(e.id=t.get(i.libraryId),a.addLibrary(e))}i.libraryId=t.get(i.libraryId)}}a.addLibrary(e)},k.$clearShapePointer=()=>{const e=document.getElementById("stage-area");if(!e)return;const t=e.children;for(let e=0;t.length>e;++e){const a=t[e];a.dataset.shapePointer&&(a.remove(),--e)}},k.$getDefaultLoopConfig=()=>({type:Ce.DEFAULT,start:1,end:0}),k.$getFrame=(e,t,a,r,i=0)=>{const s=a-t.startFrame;let n=1;switch(e.loop.type){case Ce.REPEAT:{const t=e.loop.end?e.loop.end:r;n=e.loop.start;for(let a=0;a<s;++a)++n,n>t&&(n=e.loop.start)}break;case Ce.NO_REPEAT:{const t=e.loop.end?e.loop.end:r;n=e.loop.start;for(let e=0;e<s;++e)if(++n,n>t){n=t;break}}break;case Ce.FIXED_ONE:n=e.loop.start;break;case Ce.NO_REPEAT_REVERSAL:n=e.loop.end?e.loop.end:r;for(let t=0;t<s;++t)if(--n,e.loop.start>n){n=e.loop.start;break}break;case Ce.REPEAT_REVERSAL:{const t=e.loop.end?e.loop.end:r;n=t;for(let a=0;a<s;++a)--n,e.loop.start>n&&(n=t)}break;case Ce.DEFAULT:if(0===i){n=1;for(let e=0;e<s;++e)++n,n>r&&(n=1)}else n=i;n>r&&(n=1)}return n};k.$globalKeyboardCommand=new class{constructor(){this._$activeTool=null,this._$executeMulti=null,this._$handler=null,k.$readEnd++,"complete"!==document.readyState?(this._$handler=this.initialize.bind(this),window.addEventListener("DOMContentLoaded",this._$handler)):this.initialize()}initialize(){this._$handler&&(window.removeEventListener("DOMContentLoaded",this._$handler),this._$handler=null),k.$setShortcut(k.$generateShortcutKey("z",{ctrl:!0}),this.undo),k.$setShortcut(k.$generateShortcutKey("z",{ctrl:!0,shift:!0}),this.redo),k.$setGlobalShortcut(k.$generateShortcutKey("s",{ctrl:!0}),k.$autoSave),k.$setShortcut("Enter",(()=>{k.$timelinePlayer.executeTimelinePlay()})),k.$setShortcut(k.$generateShortcutKey("Enter",{ctrl:!0}),k.$showPreview),k.$setShortcut(k.$generateShortcutKey("Enter",{ctrl:!0,shift:!0}),k.$project.publish),k.$setShortcut("Escape",k.$hidePreview),k.$setShortcut(k.$generateShortcutKey("p",{ctrl:!0}),this.changeRepeatMode),k.$setShortcut(k.$generateShortcutKey("ArrowRight",{ctrl:!0}),this.changeProject),k.$setShortcut(k.$generateShortcutKey("ArrowLeft",{ctrl:!0}),this.changeProject),k.$setShortcut("Tab",(e=>{e.stopPropagation(),this.selectDisplayObject("last")})),k.$setShortcut(k.$generateShortcutKey("Tab",{shift:!0}),(e=>{e.stopPropagation(),this.selectDisplayObject("first")})),k.$initializeEnd()}selectDisplayObject(e="last"){const t=k.$tools.activeTool;if("arrow"!==t.name&&"arrow-transform"!==t.name)return;let a=null;const r=k.$tools.getDefaultTool("arrow");if(!r.activeElements.length){const t=document.getElementsByClassName("display-object");if(!t.length)return;a=t["last"===e?t.length-1:0]}if(!a){const t=r.activeElements[r.activeElements.length-1];if(a="last"===e?t.previousElementSibling:t.nextElementSibling,!a||!a.classList.contains("display-object")||"true"===a.dataset.preview||"true"!==a.dataset.child){const t=document.getElementsByClassName("display-object");if(!t.length)return;a=t["last"===e?t.length-1:0]}}r.clear(),r.target=a,r.activateElement({pageX:0,pageY:0})}redo(){const e=k.$currentWorkSpace();e&&e.redo()}undo(){const e=k.$currentWorkSpace();e&&e.undo()}changeRepeatMode(){k.$timelinePlayer.repeat?k.$timelinePlayer.executeTimelineRepeat():k.$timelinePlayer.executeTimelineNoRepeat()}changeProject(e){const t=Array.from(document.getElementById("view-tab-area").children);let a=0;for(let e=0;e<t.length;++e){if((0|t[e].dataset.tabId)===k.$activeWorkSpaceId){a=e;break}}let r=null;if("ArrowLeft"===e.key?(r=t[a-1],r||(r=t[t.length-1])):(r=t[a+1],r||(r=t[0])),r){const e=0|r.dataset.tabId;k.$activeWorkSpaceId!==e&&k.$screenTab.activeTab({currentTarget:{dataset:{tabId:e}}})}}};class I{constructor(e,t=0,a=0,r=60,i=!0){this._$pngs=e,this._$width=t,this._$height=a,this._$fps=r,this._$loop=i?0:1,this._$crcTable=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let e=0;e<8;e++)t=1&t?3988292384^t>>>1:t>>>1;this._$crcTable[e]=t}}_$crcUpdate(e,t,a,r){for(let i=0;i<r;i++)e=this._$crcTable[255&(e^t[a+i])]^e>>>8;return e}_$crc(e,t,a){return 4294967295^this._$crcUpdate(4294967295,e,t,a)}_$writeString(e,t,a){for(let r=0;r<a.length;r++)e[t+r]=a.charCodeAt(r)}encode(){return new Promise((e=>{requestAnimationFrame((()=>{let t=0,a=0;const r=[],i=new FileReader,s=new Uint8Array([137,80,78,71,13,10,26,10]);r.push(s.buffer);const n=new Uint8Array(25),o=new DataView(n.buffer);o.setUint32(0,13),this._$writeString(n,4,"IHDR"),o.setUint32(8,this._$width),o.setUint32(12,this._$height),o.setUint8(16,8),o.setUint8(17,6),o.setUint8(18,0),o.setUint8(19,0),o.setUint8(20,0),o.setUint32(21,this._$crc(n,4,17)),r.push(n.buffer);const l=new Uint8Array(20),c=new DataView(l.buffer);c.setUint32(0,8),this._$writeString(l,4,"acTL"),c.setUint32(8,this._$pngs.length),c.setUint32(12,this._$loop),c.setUint32(16,this._$crc(l,4,12)),r.push(l.buffer),i.onload=()=>{const s=new DataView(i.result);let n=8;const o=new Uint8Array(38),l=new DataView(o.buffer);l.setUint32(0,26),this._$writeString(o,4,"fcTL"),l.setUint32(8,t++),l.setUint32(12,this._$width),l.setUint32(16,this._$height),l.setUint32(20,0),l.setUint32(24,0),l.setUint16(28,1e3/this._$fps),l.setUint16(30,1e3),l.setUint8(32,0),l.setUint8(33,0),l.setUint32(34,this._$crc(o,4,30)),r.push(o.buffer);const c=i.result.byteLength;for(;;){const e=s.getUint32(n);if(1229209940===s.getUint32(n+4))if(a){let a=new Uint8Array(4),s=new DataView(a.buffer);s.setUint32(0,e+4),r.push(a.buffer),a=new Uint8Array(i.result.slice(n,n+e+8+4)),s=new DataView(a.buffer),this._$writeString(a,0,"fdAT"),s.setUint32(4,t++),s.setUint32(e+8,this._$crc(a,0,e+8)),r.push(a.buffer)}else r.push(i.result.slice(n,n+e+8+4));if(n+=e+12,n>=c)break}a++,this._$pngs.length>a?i.readAsArrayBuffer(this._$pngs[a]):(r.push(new Uint8Array([0,0,0,0,73,69,78,68,174,66,96,130]).buffer),e(new Blob(r,{type:"image/apng"})))},i.readAsArrayBuffer(this._$pngs[0])}))}))}}class E{constructor(e){this._$id=e.id,this._$name=e.name,this._$type=e.type,this._$symbol=e.symbol||"",this._$folderId=0|e.folderId}initialize(){}toObject(){}toPublish(){}get defaultSymbol(){}createInstance(){}getBounds(e=null,t=1){}get id(){return this._$id}set id(e){this._$id=0|e}get folderId(){return this._$folderId}set folderId(e){this._$folderId=0|e}get path(){const e=k.$currentWorkSpace();let t=this._$name;if(this._$folderId){let a=this;for(;a._$folderId;)a=e.getLibrary(a._$folderId),t=`${a._$name}/${t}`}return t}getPathWithWorkSpace(e){let t=this._$name;if(this._$folderId){let a=this;for(;a._$folderId;)a=e.getLibrary(a._$folderId),t=`${a._$name}/${t}`}return t}get name(){return this._$name}set name(e){if(this._$name=`${e}`,this.id){const e=document.getElementById(`library-name-${this.id}`);e&&(e.textContent=`${this._$name}`)}const t=k.$currentWorkSpace();if(t&&t.scene.id===this.id){const e=document.getElementById("object-name");e&&(e.value=`${this._$name}`);const t=document.getElementById("scene-name");t&&(t.textContent=`${this._$name}`)}}get type(){return this._$type}set type(e){switch(e=`${e}`.toLowerCase()){case A.SHAPE:case A.BITMAP:case A.VIDEO:case A.FOLDER:case A.SOUND:case A.MOVIE_CLIP:case A.TEXT:this._$type=e}}get symbol(){return this._$symbol}set symbol(e){if(this._$symbol=`${e}`,this.id){const t=document.getElementById(`library-symbol-name-${this.id}`);t&&(t.textContent=`${e}`)}}showController(e,t=""){k.$controller.hideObjectSetting(["sound-setting","ease-setting"]),k.$controller.showObjectSetting(["object-setting","reference-setting","transform-setting","color-setting","blend-setting","filter-setting","instance-setting"]),k.$instanceSelectController.createInstanceSelect(this);const a=e.matrix;document.getElementById("object-name").value=t,document.getElementById("object-symbol").value=this.symbol;const r="scaleX"in e?e.scaleX:Math.sqrt(a[0]*a[0]+a[1]*a[1]);document.getElementById("transform-scale-x").value=""+ +(100*r).toFixed(2);const i="scaleY"in e?e.scaleY:Math.sqrt(a[2]*a[2]+a[3]*a[3]);document.getElementById("transform-scale-y").value=""+ +(100*i).toFixed(2);const s="rotation"in e?e.rotation:Math.atan2(a[1],a[0])*k.$Rad2Deg;document.getElementById("transform-rotate").value=""+(0|s);const n=e.colorTransform;document.getElementById("color-red-multiplier").value=100*n[0],document.getElementById("color-green-multiplier").value=100*n[1],document.getElementById("color-blue-multiplier").value=100*n[2],document.getElementById("color-alpha-multiplier").value=100*n[3],document.getElementById("color-red-offset").value=n[4],document.getElementById("color-green-offset").value=n[5],document.getElementById("color-blue-offset").value=n[6],document.getElementById("color-alpha-offset").value=n[7];const o=document.getElementById("blend-select").children;for(let t=0;t<o.length;++t){const a=o[t];if(a.value===e.blendMode){a.selected=!0;break}}k.$filterController.clear();const l=e.filter.length;l&&(document.querySelectorAll(".filter-none")[0].style.display="none");for(let t=0;t<l;++t){const a=e.filter[t];k.$filterController[`add${a.name}`](a,!1)}}draw(e,t,a,r,i=1,s=!1){if(!t||!a)return e.width=0,e.height=0,Promise.resolve(e);const n=this.createInstance(i,s);let o=r.matrix;!s&&k.$sceneChange.matrix.length&&(o=k.$multiplicationMatrix(k.$sceneChange.concatenatedMatrix,r.matrix));const l=this.createContainer(n,r,o,s),c=this.calcFilter(t,a,r);c.filters.length&&(n._$transform._$filters=c.filters);const d=this.createBitmapData(c.width,c.height,s);e.width=c.width,e.height=c.height;const h=window.devicePixelRatio,u=s?window.devicePixelRatio:window.devicePixelRatio*k.$zoomScale,m=l.getBounds(l);let g=-m.x*h;0>c.offsetX&&(g-=c.offsetX*u);let p=-m.y*h;0>c.offsetY&&(p-=c.offsetY*u),e._$width=c.width,e._$height=c.height,e.draggable=!1;const f=this.getBounds(o,i);return e._$tx=f.xMin,e._$ty=f.yMin,e._$offsetX=0>c.offsetX?c.offsetX:0,e._$offsetY=0>c.offsetY?c.offsetY:0,new Promise((t=>{const{Matrix:a}=window.next2d.geom;d.draw(l,new a(h,0,0,h,g,p),null,e,t)}))}calcFilter(e,t,a){const{Rectangle:r}=window.next2d.geom;let i=Math.sqrt(a.matrix[0]*a.matrix[0]+a.matrix[1]*a.matrix[1]),s=Math.sqrt(a.matrix[2]*a.matrix[2]+a.matrix[3]*a.matrix[3]);const n={width:e,height:t,offsetX:0,offsetY:0,filters:[]};if(a.filter.length){let o=new r(0,0,e,t);for(let e=0;e<a.filter.length;++e){const t=a.filter[e];if(!t.state)continue;const r=t.createInstance();o=r._$generateFilterRect(o,i,s),n.filters.push(r)}n.width=Math.ceil(o.width),n.height=Math.ceil(o.height),n.offsetX=o.x,n.offsetY=o.y}return n}createContainer(e,t,a,r=!1){const{Sprite:i}=window.next2d.display,{Matrix:s,ColorTransform:n}=window.next2d.geom;e._$transform._$matrix=new s(a[0],a[1],a[2],a[3],a[4],a[5]),e._$transform._$colorTransform=new n(t.colorTransform[0],t.colorTransform[1],t.colorTransform[2],t.colorTransform[3],t.colorTransform[4],t.colorTransform[5],t.colorTransform[6],t.colorTransform[7]);const o=new i;o.addChild(e);let l=1;r||(l*=k.$zoomScale),o.scaleX=l,o.scaleY=l;const c=new i;return c.addChild(o),c}createBitmapData(e,t,a=!1){const{BitmapData:r}=window.next2d.display;let i=window.devicePixelRatio;return a||(i*=k.$zoomScale),new r(Math.ceil(e*i),Math.ceil(t*i),!0,0)}getPreview(){if(this._$type===A.FOLDER)return Promise.resolve();const e=this.getBounds([1,0,0,1,0,0]);let t=Math.abs(e.xMax-e.xMin),a=Math.abs(e.yMax-e.yMin);if(!t||!a)return Promise.resolve();let r=1;const i=150/a;t=t*i|0,a=a*i|0;const s=(0|document.documentElement.style.getPropertyValue("--controller-width").split("px")[0])-10;return t>s&&(r=s/t,t=t*r|0,a=a*r|0),this.draw(k.$getCanvas(),Math.ceil(t),Math.ceil(a),{frame:1,matrix:[i*r,0,0,i*r,0,0],colorTransform:[1,1,1,1,0,0,0,0],blendMode:"normal",filter:[]}).then((e=>{const r=Math.min(150,a);return e.style.width=t*r/a+"px",e.style.height=`${r}px`,Promise.resolve(e)}))}remove(){const e=k.$root;e&&e.stage._$player.removeCache(`${k.$loaderInfo._$id}@${this.id}`);const t=k.$currentWorkSpace(),a=t.scene;for(let e of t._$libraries.values())if(e.type===A.MOVIE_CLIP&&e.id!==this.id){for(let t of e._$layers.values()){let r=!1;const i=t._$characters.slice();for(let e=0;e<i.length;++e){const a=i[e];if(this.id===a.libraryId){for(const e of a._$places.keys()){const r=a.getRange(e);if(t.getActiveEmptyCharacter(e))continue;const i=t.getActiveCharacter(e);let s=!1;for(let e=0;e<i.length;++e){i[e].id!==a.id&&(s=!0)}s||t.addEmptyCharacter(new L({startFrame:r.startFrame,endFrame:r.endFrame}))}t.deleteCharacter(a.id),r=!0}}r&&a.id===e.id&&t.reloadStyle()}if(e._$sounds.size)for(const[t,a]of e._$sounds){const r=[];for(let e=0;e<a.length;++e){const t=a[e];this.id!==t.characterId&&r.push(t)}e._$sounds.set(t,r)}}}}class x extends E{constructor(e){super(e),this.imageType=e.imageType,this.width=e.width,this.height=e.height,this._$buffer=null,e.buffer&&(this.buffer=e.buffer),this._$graphicBuffer=null,this._$binary=""}clone(){return new x(JSON.parse(JSON.stringify(this.toObject())))}showController(e,t=""){super.showController(e,t),k.$controller.hideObjectSetting(["text-setting","loop-setting","video-setting","fill-color-setting","nine-slice-setting"])}getBounds(e=null){const t={xMin:0,xMax:this.width,yMin:0,yMax:this.height};return e?k.$boundsMatrix(t,e):t}get defaultSymbol(){return window.next2d.display.Shape.namespace}get buffer(){if(!this._$binary){this._$buffer||(this._$buffer=new Uint8Array(this._$width*this._$height*4));const e=this._$buffer.length;for(let t=0;t<e;++t)this._$binary+=String.fromCharCode(this._$buffer[t])}return this._$binary}set buffer(e){switch(typeof e){case"object":e.constructor===Uint8Array&&(this._$buffer=e);break;case"string":if(!this._$binary){let t=e.length;this._$buffer=new Uint8Array(t);for(let a=0;a<t;++a)this._$buffer[a]=255&e.charCodeAt(a);this._$binary=e}}}get imageType(){return this._$imageType}set imageType(e){this._$imageType=e}get width(){return this._$width}set width(e){this._$width=e}get height(){return this._$height}set height(e){this._$height=e}toObject(){return{id:this.id,name:this.name,type:this.type,symbol:this.symbol,folderId:this.folderId,width:this.width,height:this.height,imageType:this.imageType,buffer:this.buffer}}toPublish(){return{symbol:this.symbol,extends:this.defaultSymbol,buffer:Array.from(this._$buffer),bounds:this.getBounds()}}createInstance(){const{Shape:e,BitmapData:t}=window.next2d.display,{width:a,height:r}=this,i=new e;i._$loaderInfo=k.$loaderInfo,i._$characterId=this.id;const s=new t(a,r,!0,0);s._$buffer=this._$buffer;const n=i.graphics;return n.beginBitmapFill(s,null,!1).drawRect(0,0,a,r).endFill(),n._$maxAlpha=1,n._$canDraw=!0,n._$xMin=0,n._$xMax=this.width,n._$yMin=0,n._$yMax=this.height,this._$graphicBuffer||(this._$graphicBuffer=n._$getRecodes()),n._$buffer=this._$graphicBuffer,i}}class M{constructor(e=null){this._$libraryId=-1,this._$places=new Map,this._$tween=new Map,this._$canvas=null,this._$base64=null,this._$currentFrame=0,this._$base64Frame=0,this._$currentPlace=null,this._$screenX=0,this._$screenY=0,this._$offsetX=0,this._$offsetY=0,this._$name="",this._$cachePlaces=[],this._$referencePoint={x:0,y:0},e?(this._$id=e.id,this._$libraryId=e.libraryId,this._$name=e.name||"",this._$startFrame=e.startFrame,this._$endFrame=e.endFrame,this.places=e.places||[],this.tween=e.tween||[]):(this._$id=k.$currentWorkSpace()._$characterId++,this._$startFrame=1,this._$endFrame=2)}showController(){const e=k.$currentWorkSpace().getLibrary(this.libraryId),t=k.$timelineFrame.currentFrame;e.showController(this.getPlace(t),this.name);const a=this.getRange(t);if(this.hasTween(a.startFrame)){k.$controller.showObjectSetting(["ease-setting"]);const e=this.getTween(a.startFrame),t=document.getElementById("ease-select").children;for(let a=0;a<t.length;++a){const r=t[a];if(r.value===e.method){r.selected=!0;break}}"custom"===e.method?k.$tweenController.showCustomArea():k.$tweenController.hideCustomArea()}}showShapeColor(e){k.$controller.hideObjectSetting(["fill-color-setting"]);const t=k.$currentWorkSpace().getLibrary(this.libraryId);if(t.type!==A.SHAPE)return;const a=k.$timelineFrame.currentFrame;t.showShapeColor(this.getPlace(a),e)}clone(){const e=new M(JSON.parse(JSON.stringify(this.toObject())));return e._$id=k.$currentWorkSpace()._$characterId++,e}remove(e){if(1===this._$places.size)return void e.deleteCharacter(this.id);const t=this.getRange(k.$timelineFrame.currentFrame);switch(!0){case t.startFrame===this.startFrame:this._$places.delete(t.startFrame),this.startFrame=t.endFrame;break;case t.endFrame===this.endFrame:this._$places.delete(t.startFrame),this.endFrame=t.startFrame;break;default:this.split(e,t.startFrame,t.endFrame)._$tween.size&&k.$tweenController.clearPointer()}if(this._$tween.has(t.startFrame)){this._$tween.delete(t.startFrame);for(let e=t.startFrame;e<t.endFrame;++e)this._$places.has(e)&&this._$places.delete(e);k.$tweenController.clearPointer()}}relocationTween(e){if(!this._$tween.size)return;const t=this.getRange(e);this.hasTween(t.startFrame)&&(this.endFrame-1>e&&!this.hasTween(e)&&k.$timelineTool.executeTimelineKeyAdd(),k.$tweenController.relocationPlace(this,t.startFrame),k.$tweenController.clearPointer().relocationPointer())}getRange(e){if(1===this._$places.size&&this._$places.has(e))return{startFrame:this.startFrame,endFrame:this.endFrame};let t=this._$cachePlaces;t.length||(t=Array.from(this._$places.keys()),t.sort(((e,t)=>{switch(!0){case e>t:return-1;case e<t:return 1;default:return 0}})));let a=0;for(let r=0;r<t.length;++r){const i=t[r];if(e>=i){const e=this.getPlace(i);if(e.tweenFrame){const t=this.getTween(e.tweenFrame);return{startFrame:t.startFrame,endFrame:t.endFrame}}return{startFrame:i,endFrame:a||this.endFrame}}a=i}}getCloneTween(e){return JSON.parse(JSON.stringify(this.getTween(e)))}getTween(e){return this.hasTween(e)?this._$tween.get(e):null}setTween(e,t){this._$tween.set(e,t)}hasTween(e){return this._$tween.has(e)}deleteTween(e){return this._$tween.delete(0|e)}getBounds(e=null,t=0){const a=k.$currentWorkSpace().getLibrary(this.libraryId);let r=t||k.$timelineFrame.currentFrame;const i=this.getPlace(r);if(!t&&a.type===A.MOVIE_CLIP){const e=i.loop&&i.loop.type===Ce.DEFAULT?{startFrame:this.startFrame,endFrame:this.endFrame}:this.getRange(r);r=k.$getFrame(i,e,r,a.totalFrame)}let s=i.matrix;return e&&(s=k.$multiplicationMatrix([e[0],e[1],e[2],e[3],0,0],i.matrix)),a.getBounds(s,r)}get rotation(){const e=k.$timelineFrame.currentFrame,t=this.getPlace(e);if(!t.rotation){const e=t.matrix;t.rotation=Math.atan2(e[1],e[0])*k.$Rad2Deg}return t.rotation}set rotation(e){const t=k.$timelineFrame.currentFrame,a=this.getPlace(t);a.rotation=e;const r=a.matrix;let i=Math.atan2(r[1],r[0]),s=Math.atan2(-r[2],r[3]);const n=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=Math.sqrt(r[2]*r[2]+r[3]*r[3]),l=e*k.$Deg2Rad;s=s+l-i,i=l,r[0]=n*Math.cos(i),r[1]=n*Math.sin(i),r[2]=-o*Math.sin(s),r[3]=o*Math.cos(s)}get width(){const e=this.getBounds(),t=+Math.abs(e.xMax-e.xMin);return t!==1/0?t:0}set width(e){const t=this.getBounds(),a=Math.abs(t.xMax-t.xMin);this.scaleX=e/a}get scaleX(){const e=k.$timelineFrame.currentFrame,t=this.getPlace(e);if(!t.scaleX){const e=t.matrix;t.scaleX=Math.sqrt(e[0]*e[0]+e[1]*e[1])}return t.scaleX}set scaleX(e){e=k.$toFixed4(e);const t=k.$timelineFrame.currentFrame,a=this.getPlace(t);a.scaleX=e;const r=a.matrix;if(r[1]){const t=Math.atan2(r[1],r[0]);r[1]=e*Math.sin(t),1===r[1]||-1===r[1]?r[0]=0:r[0]=e*Math.cos(t)}else r[0]=e}get height(){const e=this.getBounds(),t=+Math.abs(e.yMax-e.yMin);return t!==1/0?t:0}set height(e){const t=this.getBounds(),a=Math.abs(t.yMax-t.yMin);this.scaleY=e/a}get scaleY(){const e=k.$timelineFrame.currentFrame,t=this.getPlace(e);if(!t.scaleY){const e=t.matrix;t.scaleY=Math.sqrt(e[2]*e[2]+e[3]*e[3])}return t.scaleY}set scaleY(e){e=k.$toFixed4(e);const t=k.$timelineFrame.currentFrame,a=this.getPlace(t);a.scaleY=e;const r=a.matrix;if(r[2]){const t=Math.atan2(-r[2],r[3]);r[2]=-e*Math.sin(t),1===r[2]||-1===r[2]?r[3]=0:r[3]=e*Math.cos(t)}else r[3]=e}get x(){const e=k.$timelineFrame.currentFrame;return this.getPlace(e).matrix[4]}set x(e){const t=k.$timelineFrame.currentFrame;this.getPlace(t).matrix[4]=e;const a=this.getBounds();this.screenX=a.xMin;const r=document.getElementById(`character-${this.id}`);r&&(r.style.left=`${k.$offsetLeft+a.xMin*k.$zoomScale}px`)}get y(){const e=k.$timelineFrame.currentFrame;return this.getPlace(e).matrix[5]}set y(e){const t=k.$timelineFrame.currentFrame;this.getPlace(t).matrix[5]=e;const a=this.getBounds();this.screenY=a.yMin;const r=document.getElementById(`character-${this.id}`);r&&(r.style.top=`${k.$offsetTop+a.yMin*k.$zoomScale}px`)}draw(e=null,t=1){const a=k.$currentWorkSpace().getLibrary(this.libraryId);let r=t;const i=this.getPlace(r),s=i.loop&&i.loop.type===Ce.DEFAULT?{startFrame:this.startFrame,endFrame:this.endFrame}:this.getRange(r);if(a.type===A.MOVIE_CLIP&&(r=k.$getFrame(i,s,r,a.totalFrame),r!==this._$currentFrame&&this.dispose()),this._$canvas)return e instanceof HTMLCanvasElement&&k.$poolCanvas(e),Promise.resolve(this._$canvas);a.type===A.MOVIE_CLIP&&(this._$currentFrame=r);let n=i.matrix;k.$sceneChange.matrix.length&&(n=k.$multiplicationMatrix(k.$sceneChange.concatenatedMatrix,i.matrix));const o=a.getBounds(n,r),l=+Math.ceil(Math.abs(o.xMax-o.xMin)),c=+Math.ceil(Math.abs(o.yMax-o.yMin));let d=null;switch(i.blendMode){case"invert":d=a.draw(e,l,c,{frame:i.frame,matrix:i.matrix,colorTransform:[0,0,0,i.colorTransform[3],0,0,0,i.colorTransform[7]],blendMode:i.blendMode,filter:i.filter,tweenFrame:i.tweenFrame,loop:i.loop},r);break;case"alpha":case"erase":{const t=this.getBounds(i.matrix,r);e._$tx=t.xMin,e._$ty=t.yMin,e._$offsetX=0,e._$offsetY=0,e._$width=0,e._$height=0,e.draggable=!1,e.width=e.height=0,d=Promise.resolve(e)}break;default:d=a.draw(e,l,c,i,r)}return d.then((e=>{if("normal"!==i.blendMode)switch(i.blendMode){case"add":e.style.mixBlendMode="color-dodge";break;case"subtract":e.style.filter="invert(100%)",e.style.mixBlendMode="multiply";break;case"invert":e.style.filter="invert(100%)",e.style.mixBlendMode="difference";break;case"hardlight":e.style.mixBlendMode="hard-light";break;case"alpha":case"erase":case"layer":break;default:e.style.mixBlendMode=i.blendMode}return this.screenX=e._$tx,this.screenY=e._$ty,this._$offsetX=e._$offsetX,this._$offsetY=e._$offsetY,this._$canvas=e,Promise.resolve(e)}))}get offsetX(){return this._$offsetX}get offsetY(){return this._$offsetY}get screenX(){return this._$screenX}set screenX(e){this._$screenX=k.$clamp(+e,-Number.MAX_VALUE,Number.MAX_VALUE,0)}get screenY(){return this._$screenY}set screenY(e){this._$screenY=k.$clamp(+e,-Number.MAX_VALUE,Number.MAX_VALUE,0)}get id(){return this._$id}get libraryId(){return this._$libraryId}set libraryId(e){this._$libraryId=0|e}get name(){return this._$name}set name(e){this._$name=`${e}`.replace(/ /g,"").trim()}get referencePoint(){return{x:this._$referencePoint.x,y:this._$referencePoint.y}}set referencePoint(e){e&&(this._$referencePoint.x=k.$clamp(+e.x,-Number.MAX_VALUE,Number.MAX_VALUE,0),this._$referencePoint.y=k.$clamp(+e.y,-Number.MAX_VALUE,Number.MAX_VALUE,0))}get tween(){const e=[];for(let[t,a]of this._$tween)e.push({frame:t,value:a});return e}set tween(e){for(let t=0;t<e.length;++t){const a=e[t];a.value.custom||(a.value.custom=k.$tweenController.createEasingObject()),this._$tween.set(0|a.frame,a.value)}}get places(){const e=k.$currentWorkSpace().getLibrary(this.libraryId);if(!e)return[];const t=[];for(let[a,r]of this._$places){r.frame=a;const i=[];for(let e=0;e<r.filter.length;++e)i.push(r.filter[e].toObject());const s={frame:a,depth:r.depth,blendMode:r.blendMode,filter:i,matrix:r.matrix.slice(0),colorTransform:r.colorTransform.slice(0),point:r.point};"scaleX"in r&&(s.scaleX=r.scaleX),"scaleY"in r&&(s.scaleY=r.scaleY),"rotation"in r&&(s.rotation=r.rotation),r.tweenFrame&&(s.tweenFrame=r.tweenFrame),e.type===A.MOVIE_CLIP&&(r.loop?s.loop={type:r.loop.type,start:r.loop.start,end:r.loop.end}:s.loop=k.$getDefaultLoopConfig()),t.push(s)}return t}set places(e){for(let t=0;t<e.length;++t){const a=e[t],r=[];for(let e=0;a.filter.length>e;++e){const t=a.filter[e];r.push(new k.$filterClasses[t.name](t))}if(a.filter=null,a.filter=r,a.loop||(a.loop=k.$getDefaultLoopConfig()),!("scaleX"in a)){const e=a.matrix;a.scaleX=Math.sqrt(e[0]*e[0]+e[1]*e[1])}if(!("scaleY"in a)){const e=a.matrix;a.scaleY=Math.sqrt(e[2]*e[2]+e[3]*e[3])}if(!("rotation"in a)){const e=a.matrix;a.rotation=Math.atan2(e[1],e[0])*k.$Rad2Deg}this._$places.set(0|a.frame,a)}}getClonePlace(e){const t=this.getPlace(e),a=JSON.parse(JSON.stringify(t)),r=[];for(let e=0;e<t.filter.length;++e)r.push(t.filter[e].clone());return a.filter=r,a}getPlace(e){return 1===this._$places.size&&this.hasPlace(this.startFrame)?this._$places.get(this.startFrame):this.hasPlace(e)?this._$places.get(0|e):this._$places.get(this.getNearPlaceFrame(0|e))}getNearPlaceFrame(e){this._$cachePlaces.length||(this._$cachePlaces=Array.from(this._$places.keys()),this._$cachePlaces.sort(((e,t)=>{switch(!0){case e>t:return-1;case e<t:return 1;default:return 0}})));let t=0;for(;this._$cachePlaces.length>t;){const a=0|this._$cachePlaces[t++];if(e>a)return a}return 1}setPlace(e,t){t.frame=0|e,this._$places.set(0|e,t),this._$cachePlaces.length=0}hasPlace(e){return this._$places.has(0|e)}deletePlace(e){this._$places.delete(0|e),this._$cachePlaces.length=0}get startFrame(){return this._$startFrame}set startFrame(e){this._$startFrame=k.$clamp(0|e,1,Number.MAX_VALUE,1)}get endFrame(){return this._$endFrame}set endFrame(e){this._$endFrame=k.$clamp(0|e,2,Number.MAX_VALUE,2)}updateTweenPlace(e,t){for(let a=e;a<t;++a){const t=this.hasPlace(a)?this.getPlace(a):this.getClonePlace(e);t.tweenFrame=e,this.setPlace(a,t)}}updateTweenBlend(e){if(!this._$tween.size)return;const t=this.getRange(e),a=this.getPlace(t.startFrame);for(let e=t.startFrame;e<t.endFrame;++e)if(this.hasPlace(e))this.getPlace(e).blendMode=a.blendMode;else{const r=this.getClonePlace(t.startFrame);r.blendMode=a.blendMode,this.setPlace(e,r)}}updateTweenFilter(e){if(!this._$tween.size)return;const t=this.getRange(e),a=this.getPlace(t.startFrame);for(let e=t.startFrame;e<t.endFrame;++e){const r=[],i=a.filter.length;for(let e=0;e<i;++e)r.push(a.filter[e].clone());if(this.hasPlace(e))this.getPlace(e).filter=r;else{const a=this.getClonePlace(t.startFrame);a.filter=r,this.setPlace(e,a)}}}move(e){const t=new Map;for(const[a,r]of this._$places)r.frame=a+e,r.tweenFrame&&(r.tweenFrame+=e),t.set(r.frame,r);if(this._$places=t,this._$cachePlaces.length=0,this._$tween.size){const t=new Map;for(const[a,r]of this._$tween)r.startFrame+=e,r.endFrame+=e,t.set(a+e,r);this._$tween=t}this.startFrame+=e,this.endFrame+=e}split(e,t,a){if(t===this.startFrame&&a===this.endFrame)return e.deleteCharacter(this.id),this;if(this._$cachePlaces.length=0,t>this.startFrame){const r=new M;r._$libraryId=this._$libraryId,r._$startFrame=this.startFrame,r._$endFrame=t;const i=new Map;for(const[e,a]of this._$places)t>e?r.setPlace(e,a):i.set(e,a);const s=new Map;for(const[e,a]of this._$tween)t>e?r.setTween(e,a):s.set(e,a);e.addCharacter(r),this._$tween=s,this._$places=i,this._$startFrame=a,this._$cachePlaces.length=0}const r=new M;r._$libraryId=this._$libraryId,r._$startFrame=t,r._$endFrame=a;const i=[];for(const[e,s]of this._$places)t>e||e>=a||(i.push(e),r._$places.set(e,s));for(let e=0;e<i.length;++e)this._$places.delete(i[e]);i.length=0;for(const[e,s]of this._$tween)t>e||e>=a||(i.push(e),r._$tween.set(e,s));for(let e=0;e<i.length;++e)this._$tween.delete(i[e]);if(this._$places.size){const e=Array.from(this._$places.keys());this._$places.size>1&&e.sort(((e,t)=>{switch(!0){case e>t:return 1;case e<t:return-1;default:return 0}})),this._$startFrame=0|e[0]}else e.deleteCharacter(this.id);return r}toObject(){return{id:this.id,name:this.name,libraryId:this.libraryId,places:this.places,startFrame:this.startFrame,endFrame:this.endFrame,tween:this.tween}}dispose(){k.$sleepCanvases.push(this._$canvas),this._$canvas=null,this._$base64=null}}class L{constructor(e=null){this._$startFrame=e?e.startFrame:1,this._$endFrame=e?e.endFrame:2}get startFrame(){return this._$startFrame}set startFrame(e){this._$startFrame=0|e}get endFrame(){return this._$endFrame}set endFrame(e){this._$endFrame=0|e}clone(){return new L(JSON.parse(JSON.stringify(this.toObject())))}toObject(){return{startFrame:this.startFrame,endFrame:this.endFrame}}move(e){this._$startFrame+=e,this._$endFrame+=e}split(e,t,a){e.deleteEmptyCharacter(this),t>this.startFrame&&e.addEmptyCharacter(new L({startFrame:this.startFrame,endFrame:t})),this.endFrame>a&&e.addEmptyCharacter(new L({startFrame:a,endFrame:this.endFrame}))}getRange(){return{startFrame:this.startFrame,endFrame:this.endFrame}}}class C extends E{constructor(e){super(e),this._$mode=F.CLOSE,e.mode&&(this._$mode=e.mode)}clone(){return new C(JSON.parse(JSON.stringify(this.toObject())))}get mode(){return this._$mode}set mode(e){this._$mode=F.OPEN===`${e}`.toLowerCase()?F.OPEN:F.CLOSE}remove(){const e=k.$currentWorkSpace();for(let t of e._$libraries.values())t.folderId&&t.folderId===this.id&&(t.remove(),e.removeLibrary(t.id))}getPreview(){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path fill="gainsboro" d="M11 5c-1.629 0-2.305-1.058-4-3h-7v20h24v-17h-13z"/></svg>',e.style.width="100px",e.style.height="100px",e}toObject(){return{id:this.id,name:this.name,type:this.type,symbol:this.symbol,folderId:this.folderId,mode:this.mode}}getInstanceIds(e){const t=k.$currentWorkSpace();for(const a of t._$libraries.values())a.folderId&&a.folderId===this.id&&(a.type!==A.FOLDER?e.push(a.id):a.getInstanceIds(e))}}class F{static get OPEN(){return"open"}static get CLOSE(){return"close"}}class A{static get SHAPE(){return"shape"}static get BITMAP(){return"bitmap"}static get VIDEO(){return"video"}static get FOLDER(){return"folder"}static get SOUND(){return"sound"}static get MOVIE_CLIP(){return"container"}static get TEXT(){return"text"}}class T{constructor(e=null){this._$id=0,this._$characters=[],this._$emptys=[],this._$instances=new Map,this._$children=[],this._$maskId=null,this._$guideId=null,this._$name="",this._$display="",this._$light=!1,this._$disable=!1,this._$lock=!1,this._$mode=B.NORMAL,this._$color=je.color,e&&(this._$name=e.name,this._$light=e.light,this._$disable=e.disable,this._$lock=e.lock,this._$mode=e.mode,this._$maskId=e.maskId,this._$guideId=e.guideId,this._$color=e.color||this._$color,this.characters=e.characters,this.emptyCharacters=e.emptyCharacters||[])}initialize(){const e=document.getElementById("timeline-content");if(!e)return;this._$children=[],this._$display="",k.$timelineLayer.create(this._$id,this._$color);const t=e.lastElementChild;if(!t)return;const a=document.getElementById(`layer-name-${this.id}`);this.name?(a.textContent=this.name,document.getElementById(`layer-name-input-${this.id}`).value=this.name):this.name=a.textContent;const r=document.getElementById(`layer-light-icon-${this.id}`);if(this.light&&(r.children[0].style.display="none",r.style.backgroundImage=`url('${this.getHighlightURL()}')`,t.style.borderBottom=`1px solid ${this.color}`),this.disable){const e=document.getElementById(`layer-disable-icon-${this.id}`);e.classList.remove("icon-disable"),e.classList.add("icon-active")}if(this.lock){const e=document.getElementById(`layer-lock-icon-${this.id}`);e.classList.remove("icon-disable"),e.classList.add("icon-active")}this.showIcon()}get display(){return this._$display}set display(e){this._$display="none"===e?e:""}getHighlightURL(){const e=k.$intToRGB(0|`0x${this.color.slice(1)}`);return`data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 24 24"><path fill="rgb(${e.R},${e.G},${e.B})" d="M14 19h-4c-.276 0-.5.224-.5.5s.224.5.5.5h4c.276 0 .5-.224.5-.5s-.224-.5-.5-.5zm0 2h-4c-.276 0-.5.224-.5.5s.224.5.5.5h4c.276 0 .5-.224.5-.5s-.224-.5-.5-.5zm.25 2h-4.5l1.188.782c.154.138.38.218.615.218h.895c.234 0 .461-.08.615-.218l1.187-.782zm3.75-13.799c0 3.569-3.214 5.983-3.214 8.799h-1.989c-.003-1.858.87-3.389 1.721-4.867.761-1.325 1.482-2.577 1.482-3.932 0-2.592-2.075-3.772-4.003-3.772-1.925 0-3.997 1.18-3.997 3.772 0 1.355.721 2.607 1.482 3.932.851 1.478 1.725 3.009 1.72 4.867h-1.988c0-2.816-3.214-5.23-3.214-8.799 0-3.723 2.998-5.772 5.997-5.772 3.001 0 6.003 2.051 6.003 5.772zm4-.691v1.372h-2.538c.02-.223.038-.448.038-.681 0-.237-.017-.464-.035-.69h2.535zm-10.648-6.553v-1.957h1.371v1.964c-.242-.022-.484-.035-.726-.035-.215 0-.43.01-.645.028zm-3.743 1.294l-1.04-1.94 1.208-.648 1.037 1.933c-.418.181-.822.401-1.205.655zm10.586 1.735l1.942-1.394.799 1.115-2.054 1.473c-.191-.43-.423-.827-.687-1.194zm-3.01-2.389l1.038-1.934 1.208.648-1.041 1.941c-.382-.254-.786-.473-1.205-.655zm-10.068 3.583l-2.054-1.472.799-1.115 1.942 1.393c-.264.366-.495.763-.687 1.194zm13.707 6.223l2.354.954-.514 1.271-2.425-.982c.21-.397.408-.812.585-1.243zm-13.108 1.155l-2.356 1.06-.562-1.251 2.34-1.052c.173.433.371.845.578 1.243zm-1.178-3.676h-2.538v-1.372h2.535c-.018.226-.035.454-.035.691 0 .233.018.458.038.681z"/></svg>`}clone(){const e=new T(JSON.parse(JSON.stringify(this.toObject())));return e._$color=je.color,e}appendCharacter(e=1){if(this.disable)return Promise.resolve();const t=[];if(document.getElementById("timeline-onion-skin").classList.contains("onion-skin-active")&&k.$timelinePlayer.stopFlag){const e=k.$timelineFrame.currentFrame,a=new Map;for(let e=0;e<this._$characters.length;++e){const t=this._$characters[e];for(const e of t._$places.keys())a.set(e,!0)}const r=this.getActiveCharacter(e);if(r.length){const t=r[0].getRange(e);a.delete(t.startFrame)}for(const e of a.keys()){k.$timelineFrame.currentFrame=e;const a=this.getActiveCharacter(e);if(a.length){a.length>1&&this.sort(a,e);for(let r=0;r<a.length;++r){const i=a[r];i.dispose(),t.push(k.$screen.appendOnionCharacter(i,this.id,null,e))}}}k.$timelineFrame.currentFrame=e;const i=this.getActiveCharacter(e);if(i.length){i.length>1&&this.sort(i,e);const a=this.lock?"none":"auto";for(let r=0;r<i.length;++r){const s=i[r];s.dispose(),t.push(k.$screen.appendCharacter(s,e,this.id,a))}}}else{const a=this.getActiveCharacter(e);if(!a.length)return Promise.resolve();a.length>1&&this.sort(a,e);const r=this.lock?"none":"auto";for(let i=0;i<a.length;++i)t.push(k.$screen.appendCharacter(a[i],e,this.id,r))}return Promise.all(t)}sort(e,t){e.sort(((e,a)=>{const r=e.getPlace(t).depth,i=a.getPlace(t).depth;switch(!0){case r>i:return 1;case r<i:return-1;default:return 0}}))}getActiveCharacter(e=1){const t=[];for(let a=0;a<this._$characters.length;++a){const r=this._$characters[a];r.startFrame>e||(e>=r.endFrame||t.push(r))}return t}getChildren(e=1){const t=k.$timelineHeader.leftFrame;return t>e?null:this._$children[e-t]}getActiveEmptyCharacter(e=1){for(let t=0;t<this._$emptys.length;++t){const a=this._$emptys[t];if(!(a.startFrame>e)&&!(e>=a.endFrame))return a}return null}showIcon(){const e=document.getElementById(`layer-name-${this.id}`);e.classList.remove("in-view-text"),e.classList.add("view-text");switch(document.getElementById(`layer-name-input-${this.id}`).classList.remove("in-view-text-input"),this._$mode){case B.NORMAL:document.getElementById(`layer-icon-${this.id}`).style.display="",document.getElementById(`layer-mask-icon-${this.id}`).style.display="none",document.getElementById(`layer-mask-in-icon-${this.id}`).style.display="none",document.getElementById(`layer-guide-icon-${this.id}`).style.display="none",document.getElementById(`layer-guide-in-icon-${this.id}`).style.display="none",document.getElementById(`timeline-exit-icon-${this.id}`).style.display="none",document.getElementById(`timeline-exit-in-icon-${this.id}`).style.display="none";break;case B.MASK:{document.getElementById(`layer-icon-${this.id}`).style.display="none",document.getElementById(`layer-mask-icon-${this.id}`).style.display="",document.getElementById(`layer-mask-in-icon-${this.id}`).style.display="none",document.getElementById(`layer-guide-icon-${this.id}`).style.display="none",document.getElementById(`layer-guide-in-icon-${this.id}`).style.display="none",document.getElementById(`timeline-exit-in-icon-${this.id}`).style.display="none";const e=document.getElementById(`timeline-exit-icon-${this.id}`);e.style.display="",e.style.opacity="0"}break;case B.MASK_IN:{document.getElementById(`layer-icon-${this.id}`).style.display="none",document.getElementById(`layer-mask-icon-${this.id}`).style.display="none",document.getElementById(`layer-mask-in-icon-${this.id}`).style.display="",document.getElementById(`layer-guide-icon-${this.id}`).style.display="none",document.getElementById(`layer-guide-in-icon-${this.id}`).style.display="none",document.getElementById(`timeline-exit-icon-${this.id}`).style.display="none";const e=document.getElementById(`timeline-exit-in-icon-${this.id}`);e.style.display="",e.style.opacity="0";const t=document.getElementById(`layer-name-${this.id}`);t.classList.remove("view-text"),t.classList.add("in-view-text");document.getElementById(`layer-name-input-${this.id}`).classList.add("in-view-text-input")}break;case B.GUIDE:{document.getElementById(`layer-icon-${this.id}`).style.display="none",document.getElementById(`layer-mask-icon-${this.id}`).style.display="none",document.getElementById(`layer-mask-in-icon-${this.id}`).style.display="none",document.getElementById(`layer-guide-icon-${this.id}`).style.display="",document.getElementById(`layer-guide-in-icon-${this.id}`).style.display="none",document.getElementById(`timeline-exit-in-icon-${this.id}`).style.display="none";const e=document.getElementById(`timeline-exit-icon-${this.id}`);e.style.display="",e.style.opacity="0"}break;case B.GUIDE_IN:{document.getElementById(`layer-icon-${this.id}`).style.display="none",document.getElementById(`layer-mask-icon-${this.id}`).style.display="none",document.getElementById(`layer-mask-in-icon-${this.id}`).style.display="none",document.getElementById(`layer-guide-icon-${this.id}`).style.display="none",document.getElementById(`layer-guide-in-icon-${this.id}`).style.display="",document.getElementById(`timeline-exit-icon-${this.id}`).style.display="none";const e=document.getElementById(`timeline-exit-in-icon-${this.id}`);e.style.display="",e.style.opacity="0";const t=document.getElementById(`layer-name-${this.id}`);t.classList.remove("view-text"),t.classList.add("in-view-text");document.getElementById(`layer-name-input-${this.id}`).classList.add("in-view-text-input")}}}reloadStyle(){this.resetStyle(),this.setEmptyStyle(),this.setCharacterStyle()}setCharacterStyle(){const e=k.$timelineHeader.leftFrame,t=e+this._$children.length,a=new Map;for(let r=0;r<this._$characters.length;++r){const i=this._$characters[r];if(i.startFrame>t)continue;if(e>=i.endFrame)continue;const s=Array.from(i._$places.keys());s.sort(((e,t)=>{switch(!0){case e>t:return 1;case e<t:return-1;default:return 0}}));for(let t=0;t<s.length;++t){const r=s[t];if(a.has(r))continue;a.set(r,!0);const n=s[t+1]||i.endFrame;if(r===n-1){if(e>r)continue;const t=this._$children[r-e];if(!t)return;if(t.dataset.frameState="key-frame",i.hasTween(r)){t.classList.add("tween-key-frame");const e=i.getTween(r);(e.endFrame-e.startFrame>1||i.hasTween(e.endFrame))&&t.classList.add("tween-key-frame-join")}else{const e=i.getPlace(r);if(e.tweenFrame){const a=i.getTween(e.tweenFrame);a.endFrame-1===r?i.hasTween(a.endFrame)?t.classList.add("tween-space-frame"):t.classList.add("tween-frame-end"):t.classList.add("tween-space-frame")}else t.classList.add("key-frame")}continue}let o=r;if(e>o)o++;else{const t=o-e,a=this._$children[t];o++,a&&(a.dataset.frameState="key-frame",i.hasTween(r)?a.classList.add("tween-key-frame","tween-key-frame-join"):a.classList.add("key-frame","key-frame-join"))}const l=n-1;for(;o<l;){if(e>o){o++;continue}const t=o-e,a=this._$children[t];o++,a&&(a.dataset.frameState="key-space-frame",i.hasTween(r)?a.classList.add("tween-space-frame"):a.classList.add("key-space-frame"))}if(e>o)continue;const c=this._$children[o-e];c&&(c.dataset.frameState="key-space-frame-end",i.hasTween(r)?c.classList.add("tween-frame-end"):c.classList.add("key-space-frame-end"))}}}setEmptyStyle(){const e=k.$timelineHeader.leftFrame,t=e+this._$children.length;for(let a=0;a<this._$emptys.length;++a){const r=this._$emptys[a];if(r.startFrame>t)continue;if(e>=r.endFrame)continue;if(r.startFrame===r.endFrame-1){if(e>r.startFrame)continue;const t=r.startFrame-e,a=this._$children[t];a&&(a.dataset.frameState="empty-key-frame",a.classList.add("empty-key-frame"));continue}let i=r.startFrame;if(e>i)i++;else{const t=i-e,a=this._$children[t];a&&(a.dataset.frameState="empty-key-frame",a.classList.add("empty-key-frame","empty-key-frame-join")),i++}const s=r.endFrame-1;for(;i<s;){if(e>i){i++;continue}const t=i-e,a=this._$children[t];i++,a&&(a.dataset.frameState="empty-space-frame",a.classList.add("empty-space-frame"))}if(e>i)continue;const n=i-e,o=this._$children[n];o&&(o.dataset.frameState="empty-space-frame-end",o.classList.add("empty-space-frame-end"))}}resetStyle(){let e=k.$timelineHeader.leftFrame;for(let t=0;t<this._$children.length;++t){const a=this._$children[t];if(!a||"empty"===a.dataset.frameState)return;a.setAttribute("class",e%5!=0?"frame":"frame frame-pointer"),a.setAttribute("data-frame-state","empty"),e++}}get id(){return this._$id}set id(e){this._$id=k.$clamp(0|e,0,65535)}get name(){return this._$name}set name(e){this._$name=`${e}`}get light(){return this._$light}set light(e){this._$light=!!e}get disable(){return this._$disable}set disable(e){this._$disable=!!e}get lock(){return this._$lock}set lock(e){this._$lock=!!e}get emptyCharacters(){const e=[];for(let t=0;t<this._$emptys.length;++t)e.push(this._$emptys[t].toObject());return e}set emptyCharacters(e){for(let t=0;t<e.length;++t){const a=new L(e[t]);this._$emptys.push(a)}}get characters(){const e=[];for(let t=0;t<this._$characters.length;++t)e.push(this._$characters[t].toObject());return e}set characters(e){for(let t=0;t<e.length;++t){const a=new M(e[t]);this._$instances.set(a.id,a),this._$characters.push(a)}}getCharacter(e){return this._$instances.get(0|e)}addCharacter(e){this._$instances.has(e.id)||(this._$characters.push(e),this._$instances.set(e.id,e))}deleteCharacter(e){if(!this._$instances.has(0|e))return;const t=this._$instances.get(0|e);this._$characters.splice(this._$characters.indexOf(t),1),this._$instances.delete(0|e)}addEmptyCharacter(e){this._$emptys.push(e)}deleteEmptyCharacter(e){const t=this._$emptys.indexOf(e);t>-1&&this._$emptys.splice(t,1)}adjustmentLocation(e){const t=this.getActiveEmptyCharacter(e);if(t)return this.deleteEmptyCharacter(t),{startFrame:t.startFrame,endFrame:t.endFrame};const a=this.getActiveCharacter(e);if(a.length){let t=1,r=Number.MAX_VALUE;for(let i=0;i<a.length;++i){const s=a[i];t=Math.max(t,s.startFrame),r=Math.min(r,s.endFrame);for(const a of s._$places.keys())a>e&&(r=Math.min(r,a)),e>=a&&(t=Math.max(t,a))}return{startFrame:t,endFrame:r}}if(e>1){let t=1;for(;e-t>0;++t){const a=this.getActiveEmptyCharacter(e-t);if(a){a.endFrame=e;break}const r=this.getActiveCharacter(e-t);if(r.length){for(let t=0;t<r.length;++t)r[t].endFrame=e;break}}e-t||this.addEmptyCharacter(new L({startFrame:1,endFrame:e}))}return{startFrame:e,endFrame:e+1}}get totalFrame(){let e=0;for(let t=0;t<this._$characters.length;++t){const a=this._$characters[t];e=Math.max(e,a.endFrame)}for(let t=0;t<this._$emptys.length;++t){const a=this._$emptys[t];e=Math.max(e,a.endFrame)}return e}get mode(){return this._$mode}set mode(e){switch(e|=0){case B.NORMAL:case B.MASK:case B.MASK_IN:case B.GUIDE:case B.GUIDE_IN:this._$mode=e;break;default:this._$mode=B.NORMAL}}get maskId(){return this._$maskId}set maskId(e){this._$maskId="number"==typeof e?k.$clamp(0|e,0,65535):null}get guideId(){return this._$guideId}set guideId(e){this._$guideId="number"==typeof e?k.$clamp(0|e,0,65535):null}get color(){return this._$color}set color(e){this._$color=`${e}`}toObject(){return{name:this.name,light:this.light,disable:this.disable,lock:this.lock,mode:this.mode,maskId:this.maskId,guideId:this.guideId,color:this.color,characters:this.characters,emptyCharacters:this.emptyCharacters}}}class B{static get NORMAL(){return 0}static get MASK(){return 1}static get MASK_IN(){return 2}static get GUIDE(){return 3}static get GUIDE_IN(){return 4}}class z extends E{constructor(e){super(e),this._$currentFrame=1,this._$leftFrame=1,this._$layerId=0,this._$labels=new Map,this._$layers=new Map,this._$actions=new Map,this._$sounds=new Map,this._$publishObject=null,e.layers&&(this.layers=e.layers),e.labels&&(this.labels=e.labels),e.placeMap&&(this.placeMap=e.placeMap),e.sounds&&(this.sounds=e.sounds),e.actions&&(this.actions=e.actions),e.currentFrame&&(this._$currentFrame=Math.max(1,0|e.currentFrame)),e.leftFrame&&(this._$leftFrame=Math.max(1,0|e.leftFrame))}clone(){return new z(JSON.parse(JSON.stringify(this.toObject())))}showController(e,t=""){super.showController(e,t),k.$controller.hideObjectSetting(["text-setting","video-setting","fill-color-setting","nine-slice-setting"]),k.$controller.showObjectSetting(["loop-setting"]),k.$loopController.reload(e.loop),document.getElementById("loop-image-list").style.display="none"}initialize(){k.$tools.reset(),k.$clearShapePointer(),this.cacheClear();const e=document.getElementById("scene-name");e&&(e.textContent=this.name);const t=document.getElementById("object-name");t&&(t.value=this.name);const a=document.getElementById("object-symbol");if(a&&(a.value=this.symbol),0===this.id){const e=document.getElementById("scene-name-menu-list");if(e)for(;e.children.length;)e.children[0].remove()}const r=this._$leftFrame||1,i=this._$currentFrame||1;k.$timelineLayer.removeAll(),k.$timelineFrame.currentFrame=i,k.$timelineScroll.execute(-k.$timelineScroll.x,-k.$timelineScroll.y),k.$timelineHeader.setWidth(),k.$timelineHeader.scrollX=(r-1)*k.$timelineTool.timelineWidth,k.$timelineHeader.rebuild(),k.$timelineMarker.move(),k.$timelineLayer.changeLabel(i),k.$timelineLayer.updateClientSize(),k.$timelineScroll.updateWidth(),k.$timelineScroll.updateHeight(),this._$layerId=0;for(const e of this._$layers.values())e._$id=this._$layerId++,e.initialize();if(this._$layers.size||this.addLayer(),k.$controller.default(),this.id){const e=document.getElementById(`library-child-id-${this.id}`);e&&(e.draggable=!1)}if(!this.id){const e=k.$currentWorkSpace();if(e._$ruler)k.$screenRuler.show();else{const t=e._$rulerX,a=e._$rulerY;(t.length||a.length)&&k.$screenRuler.createBorder()}}k.$soundController.createSoundElements(),this.changeFrame(k.$timelineFrame.currentFrame)}get currentFrame(){return this._$currentFrame}get leftFrame(){return this._$leftFrame}get totalFrame(){let e=1;for(const t of this._$layers.values())e=Math.max(e,t.totalFrame-1);return e}changeFrame(e=1){const t=document.getElementById("stage-area");if(!t)return Promise.resolve();this.startSound(e);const a=[];if(k.$sceneChange.matrix.length){const e=document.getElementById("scene-name-menu-list").children,t=k.$activeCharacterIds.length?k.$activeCharacterIds[k.$activeCharacterIds.length-1]:-1,r=k.$currentWorkSpace(),i=k.$sceneChange.offsetX,s=k.$sceneChange.offsetY,n=k.$sceneChange.matrix.slice(0);k.$sceneChange.clear();for(let i=0;e.length>i;++i){const s=e[i];if("false"===s.dataset.parent)continue;const n=r.getLibrary(0|s.dataset.libraryId);k.$sceneChange.offsetX=+s.dataset.offsetX,k.$sceneChange.offsetY=+s.dataset.offsetY;const o=1;for(const e of n._$layers.values()){if(e.disable||e.mode===B.MASK)continue;const r=e.getActiveCharacter(o);if(r.length){r.length>1&&e.sort(r,o);for(let i=0;i<r.length;++i){const s=r[i];s.id!==t&&a.push(k.$screen.appendCharacter(s,o,e.id,"none",n,.25,k.$sceneChange.offsetX,k.$sceneChange.offsetY))}}}break}k.$sceneChange._$matrix=n,k.$sceneChange.offsetX=i,k.$sceneChange.offsetY=s}const r=Array.from(this._$layers.values());for(;r.length;){const t=r.pop();t.disable||t.mode===B.MASK&&t.lock||a.push(t.appendCharacter(e))}return this._$currentFrame=e,Promise.all(a).then((e=>{k.$screen.clearStageArea();const a=[],r=t.children;for(let e=0;r.length>e;++e){const t=r[e];t.dataset.shapePointer&&(t.remove(),a.push(t),--e)}for(let a=0;e.length>a;++a){const r=e[a];if(r)if(Array.isArray(r))for(let e=0;r.length>e;++e){const a=r[e];a&&(a.div.appendChild(a.canvas),t.appendChild(a.div))}else r.div.appendChild(r.canvas),t.appendChild(r.div)}k.$transformController.relocation(),k.$gridController.relocation();for(let e=0;a.length>e;++e){const r=a[e];r.dataset.position=`${t.children.length}`,t.appendChild(r)}if(k.$tweenController.clearPointer().relocationPointer(),this.id){const e=document.createElement("div");e.setAttribute("class","standard-point");const t=k.$offsetLeft+k.$sceneChange.offsetX*k.$zoomScale-6,a=k.$offsetTop+k.$sceneChange.offsetY*k.$zoomScale-6;e.setAttribute("style",`left: ${t}px; top: ${a}px;`),e.dataset.child="true",document.getElementById("stage-area").appendChild(e)}for(;k.$sleepCanvases.length;)k.$poolCanvas(k.$sleepCanvases.pop())}))}startSound(e=1){if(k.$timelinePlayer.stopFlag||!this._$sounds.has(e))return;const{Sound:t}=window.next2d.media,a=k.$currentWorkSpace(),r=this._$sounds.get(e);for(let e=0;e<r.length;++e){const i=r[e],s=a.getLibrary(i.characterId);if(!s)continue;const n=new t;k.$timelinePlayer._$sounds.push(n),n.volume=i.volume/100,n.loopCount=i.loopCount,n.src=URL.createObjectURL(new Blob([new Uint8Array(s._$buffer)],{type:"audio/mp3"})),n.play()}}addSceneName(e=!1){const t=k.$currentWorkSpace().getLibrary(0|this.id),a=`\n<div id="scene-instance-id-${t.id}" data-library-id="${t.id}" data-offset-x="${k.$sceneChange.offsetX}" data-offset-y="${k.$sceneChange.offsetY}" data-parent="${e}">${t.name}</div>\n`;document.getElementById("scene-name-menu-list").insertAdjacentHTML("beforeend",a);const r=document.getElementById(`scene-instance-id-${t.id}`);r.addEventListener("mousedown",(e=>{e.stopPropagation(),e.preventDefault()})),r.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault(),k.$endMenu();const t=Array.from(document.getElementById("scene-name-menu-list").children),a=e.target,r=t.indexOf(a);for(let e=t.length-1;e>-1;--e){if(t[e].remove(),k.$activeCharacterIds.pop(),k.$sceneChange.matrix.pop(),r===e)break}k.$sceneChange.offsetX=+a.dataset.offsetX,k.$sceneChange.offsetY=+a.dataset.offsetY,k.$sceneChange.execute(0|a.dataset.libraryId)}))}cacheClear(){for(const e of this._$layers.values()){const t=e._$characters;for(let e=0;e<t.length;++e)t[e].dispose()}if(k.$activeCharacterIds.length){const e=document.getElementById("scene-name-menu-list").children,t=k.$activeCharacterIds[k.$activeCharacterIds.length-1],a=k.$currentWorkSpace();for(let r=0;e.length>r;++r){const i=e[r];if("false"===i.dataset.parent)continue;const s=a.getLibrary(0|i.dataset.libraryId);if(!s)continue;const n=s.currentFrame;for(const e of s._$layers.values()){if(e.mode===B.MASK)continue;const a=e.getActiveCharacter(n);if(a.length)for(let e=0;e<a.length;++e){const r=a[e];r.id!==t&&r.dispose()}}break}}}stop(){if(this.id){const e=document.getElementById(`library-child-id-${this.id}`);e&&(e.draggable=!0)}const e=document.getElementById("timeline-content");if(!e)return;const t=e.children,a=[],r=t.length;for(let e=0;e<r;++e){const r=this.getLayer(0|t[e].dataset.layerId);r._$children.length=0,a.push(r)}this._$layers.clear();for(let e=0;e<a.length;++e){const t=a[e];t._$id=e,this.setLayer(e,t)}k.$tools.getDefaultTool("arrow").clear(),this.cacheClear()}get labels(){const e=[];for(let[t,a]of this._$labels)e.push({frame:t,name:a});return e}set labels(e){for(let t=0;t<e.length;++t){const a=e[t];this._$labels.set(0|a.frame,a.name)}}setLabel(e,t){this._$labels.set(0|e,t)}getLabel(e){return this.hasLabel(e)?this._$labels.get(0|e):null}hasLabel(e){return this._$labels.has(e)}deleteLabel(e){this._$labels.delete(0|e)}get layers(){let e=0,t=null;const a=[];for(const r of this._$layers.values()){const i=r.toObject();switch(i.mode){case B.MASK:case B.GUIDE:t=e;break;case B.MASK_IN:i.maskId=t;break;case B.GUIDE_IN:i.guideId=t;break;default:t=null}a.push(i),e++}return a}set layers(e){for(let t=0;t<e.length;++t)this._$layers.set(t,new T(e[t]))}addLayer(e=null){return e||(e=new T),e._$id=this._$layerId++,this._$layers.set(e._$id,e),e.initialize(),e}getLayer(e){return this._$layers.get(0|e)}setLayer(e,t){this._$layers.set(0|e,t)}deleteLayer(e){this._$layers.delete(0|e)}clearLayer(){this._$layers.clear()}get sounds(){const e=[];for(let[t,a]of this._$sounds)e.push({frame:t,sound:a});return e}set sounds(e){for(let t=0;t<e.length;++t){const a=e[t];this._$sounds.set(0|a.frame,a.sound)}}get actions(){const e=[];for(let[t,a]of this._$actions)e.push({frame:t,action:a});return e}set actions(e){for(let t=0;t<e.length;++t){const a=e[t];this._$actions.set(0|a.frame,a.action)}}getSound(e){return this._$sounds.get(e)}setSound(e,t){return this._$sounds.set(e,t)}hasSound(e){return this._$sounds.has(e)}deleteSound(e){this._$sounds.delete(e)}getAction(e){return this._$actions.get(e)}setAction(e,t){this._$actions.set(e,t),k.$javascriptController.reload()}hasAction(e){return this._$actions.has(e)}deleteAction(e){this._$actions.delete(e),k.$javascriptController.reload()}getBounds(e=[1,0,0,1,0,0],t=1){if(!this._$layers.size)return{xMin:0,xMax:0,yMin:0,yMax:0};const a=e,r=k.$currentWorkSpace();let i=Number.MAX_VALUE,s=-Number.MAX_VALUE,n=Number.MAX_VALUE,o=-Number.MAX_VALUE;for(const e of this._$layers.values()){if(e.disable)continue;const l=e.getActiveCharacter(t),c=l.length;for(let e=0;e<c;++e){const c=l[e],d=c.getPlace(t),h=r.getLibrary(0|c.libraryId),u=k.$multiplicationMatrix(a,d.matrix);let m=t;if(h.type===A.MOVIE_CLIP){const e=d.loop&&d.loop.type===Ce.DEFAULT?{startFrame:c.startFrame,endFrame:c.endFrame}:c.getRange(t);m=k.$getFrame(d,e,t,h.totalFrame)}const g=h.getBounds(u,m),p=g.xMax-g.xMin,f=g.yMax-g.yMin;p&&f||(g.xMin=u[4],g.xMax=u[4],g.yMin=u[5],g.yMax=u[5]),i=Math.min(g.xMin,i),s=Math.max(g.xMax,s),n=Math.min(g.yMin,n),o=Math.max(g.yMax,o)}}return{xMin:i,xMax:s,yMin:n,yMax:o}}toObject(){return{id:this.id,name:this.name,type:this.type,symbol:this.symbol,folderId:this.folderId,currentFrame:this.currentFrame,leftFrame:this.leftFrame,layers:this.layers,labels:this.labels,sounds:this.sounds,actions:this.actions}}toPublish(e=!1){const t=[],a=[],r=[],i=[],s=k.$currentWorkSpace(),n=new Map;let o=0;for(const e of s._$libraries.keys())n.set(e,o++);let l=0,c=!1,d=0;const h=k.$userSetting.getPublishSetting(),u=Array.from(this._$layers),m=[];let g=0,p=0;for(let n=u.length-1;n>-1;--n){if(d&&!m.length){d=0,g=0;continue}const o=!c&&m.length?m.shift():u[n][1];if(!h.layer&&o.disable)continue;if(o.mode===B.GUIDE)continue;if(o.mode!==B.MASK_IN||c||d||(c=!0,d=n),c&&o.mode===B.MASK_IN){g+=o._$characters.length,m.push(o);continue}const f=o._$characters,$=o.mode===B.MASK?Math.min(1,f.length):f.length;let y=o.mode===B.MASK?$-1:0;for(;;){const n=t.length,c=f[y];if(!c)break;const d=c.startFrame,h=c.endFrame,u=s._$libraries.get(c.libraryId);k.$useIds.has(u.id)||k.$useIds.set(u.id,!0);const m={name:c.name,characterId:u.id,endFrame:h,startFrame:d,clipDepth:o.mode===B.MASK?y+g+l:0};e&&(m.id=c.id),t.push(m);let _=0;for(let e=d;e<h;++e){e in a||(a[e]=[]),e in r||(r[e]=[]);const t=c.getPlace(e);if(c.hasPlace(e)){_=i.length;const e=[];for(let a=0;a<t.filter.length;++a){const r=t.filter[a];r.state&&e.push({class:r.name,params:r.toParamArray()})}const a={};if(1===t.matrix[0]&&0===t.matrix[1]&&0===t.matrix[2]&&1===t.matrix[3]&&0===t.matrix[4]&&0===t.matrix[5]||(a.matrix=t.matrix),1===t.colorTransform[0]&&1===t.colorTransform[1]&&1===t.colorTransform[2]&&1===t.colorTransform[3]&&0===t.colorTransform[4]&&0===t.colorTransform[5]&&0===t.colorTransform[6]&&0===t.colorTransform[7]||(a.colorTransform=t.colorTransform),"normal"!==t.blendMode&&(a.blendMode=t.blendMode),e.length&&(a.surfaceFilterList=e),u.type===A.MOVIE_CLIP&&Ce.DEFAULT>t.loop.type){if(t.loop.referenceFrame){const e=c.getPlace(t.loop.referenceFrame);a.loop={type:e.loop.type,frame:e.frame,start:e.loop.start,end:e.loop.end}}else a.loop={type:t.loop.type,frame:t.frame,start:t.loop.start,end:t.loop.end};t.loop.tweenFrame&&(a.loop.tweenFrame=t.loop.tweenFrame)}i.push(a)}a[e][p+t.depth]=n,r[e][p+t.depth]=_}if(o.mode===B.MASK){if(--y,-1===y)break}else if(++y,y===$)break}l+=$,p+=$,c&&m.length&&(n=d+1,c=!1)}for(let e=1;a.length>e;++e){if(!(e in a))continue;const t=a[e],i=r[e];a[e]=t.filter((e=>"number"==typeof e)),r[e]=i.filter((e=>"number"==typeof e))}const f=[];for(let[e,t]of this._$sounds){const a={frame:e,sound:[]};for(let e=0;e<t.length;++e){const r=t[e],i=0|r.characterId;a.sound.push({characterId:i,volume:r.volume/100,autoPlay:r.autoPlay,loopCount:r.loopCount}),k.$useIds.has(i)||k.$useIds.set(i,!0)}f.push(a)}const $=[];for(let[e,t]of this._$actions){const a=t.replace(/("[^"]*\/\/.*?")|\/\/(?:.|\r?\n)*?(?:\r?\n|.*)?/g,"$1").replace(/(["'][^"']*\/\*.*?\*\/[^"']*["'])|\/\*(?:.|\r?\n)*?\*\//g,"$1").replace(/^\s+|\s+$/g,"").replace(/ +/g," ").split(/\r?\n/);let r=[];for(let e=0;e<a.length;++e){const t=a[e].trim();t.length&&r.push(t)}$.push({frame:e,action:r.join("\n")})}const y={extends:this.defaultSymbol,totalFrame:this.totalFrame,controller:a,dictionary:t,placeMap:r,placeObjects:i};return $.length&&(y.actions=$),this.symbol&&(y.symbol=this.symbol),this.labels.length&&(y.labels=this.labels),f.length&&(y.sounds=f),y}get defaultSymbol(){return window.next2d.display.MovieClip.namespace}createInstance(e=1,t=!1){const{MovieClip:a}=window.next2d.display,{Matrix:r,ColorTransform:i}=window.next2d.geom,s=k.$currentWorkSpace(),n=new a;n._$characterId=this.id,k.$useIds.clear();let o=null;k.$timelinePlayer._$stopFlag?(this._$publishObject&&(this._$publishObject=null),o=this.toPublish(!0)):(this._$publishObject||(this._$publishObject=this.toPublish(!0)),o=this._$publishObject),n._$currentFrame=e;const l=o.controller[e];if(!l)return n;const c=k.$activeCharacterIds.length?k.$activeCharacterIds[k.$activeCharacterIds.length-1]:-1,d=o.placeMap[e];for(let a=0;l.length>a;++a){const h=o.dictionary[l[a]],u=s.getLibrary(h.characterId),m=o.placeObjects[d[a]];m.loop||(m.loop=k.$getDefaultLoopConfig());let g=null;switch(u.type){case A.MOVIE_CLIP:{if(!u._$layers.size)continue;let a=e-(h.startFrame-1);a>u.totalFrame&&(a=1),g=u.createInstance(a,t)}break;case A.SHAPE:g=u.createInstance(),g._$bitmapId=u._$bitmapId;break;default:g=u.createInstance()}!t&&c>-1&&h.id===c&&(g.visible=!1),g._$transform._$matrix=m.matrix?new r(m.matrix[0],m.matrix[1],m.matrix[2],m.matrix[3],m.matrix[4],m.matrix[5]):new r,g._$transform._$colorTransform=m.colorTransform?new i(m.colorTransform[0],m.colorTransform[1],m.colorTransform[2],m.colorTransform[3],m.colorTransform[4],m.colorTransform[5],m.colorTransform[6],m.colorTransform[7]):new i,g._$transform._$blendMode=m.blendMode;const p=[];if(m.surfaceFilterList)for(let e=0;e<m.surfaceFilterList.length;++e){const t=m.surfaceFilterList[e],a=window.next2d.filters[t.class];p.push(new(a.bind.apply(a,t.params)))}g._$transform._$filters=p,g._$placeId=a,g._$clipDepth=h.clipDepth,g._$loaderInfo={_$id:0},g._$characterId=h.characterId,n.addChild(g)}return n}}class P extends E{constructor(e=null){super(e),this._$bitmapId=0,this._$bounds=null,this._$grid=null,this._$inBitmap=!1,this._$recodes=[],e.inBitmap&&(this.inBitmap=e.inBitmap),e.recodes&&(this.recodes=e.recodes),e.bounds&&(this.bounds=e.bounds),e.bitmapId&&(this.bitmapId=e.bitmapId),e.grid&&(this.grid=e.grid),this._$graphicBuffer=null}clone(){return new P(JSON.parse(JSON.stringify(this.toObject())))}showController(e,t=""){super.showController(e,t),document.getElementById("nine-slice-setting-x").value="0",document.getElementById("nine-slice-setting-y").value="0",document.getElementById("nine-slice-setting-w").value="0",document.getElementById("nine-slice-setting-h").value="0",k.$controller.showObjectSetting(["nine-slice-setting"]),k.$controller.hideObjectSetting(["text-setting","loop-setting","video-setting","fill-color-setting"])}showShapeColor(e,t){this.setHitColor(t.offsetX,t.offsetY,e.matrix);const a=this._$grid;a&&a.x&&a.y&&(document.getElementById("nine-slice-setting-x").value=`${a.x}`,document.getElementById("nine-slice-setting-y").value=`${a.y}`,document.getElementById("nine-slice-setting-w").value=`${a.w}`,document.getElementById("nine-slice-setting-h").value=`${a.h}`,k.$gridController.show().relocation()),k.$hitColor&&k.$controller.showObjectSetting(["fill-color-setting","nine-slice-setting"])}getBounds(e=null){return e?k.$boundsMatrix(this._$bounds,e):this._$bounds}get inBitmap(){return this._$inBitmap}set inBitmap(e){this._$inBitmap=!!e}get width(){return Math.abs(this._$bounds.xMax-this._$bounds.xMin)}get height(){return Math.abs(this._$bounds.yMax-this._$bounds.yMin)}get defaultSymbol(){return window.next2d.display.Shape.namespace}get recodes(){if(!this._$inBitmap)return this._$recodes;const e=[],{BitmapData:t}=window.next2d.display;for(let a=0;this._$recodes.length>a;++a){const r=this._$recodes[a];e[a]=r,"object"==typeof r&&(r.namespace===t.namespace&&(e[a]={buffer:Array.from(r._$buffer),width:r.width,height:r.height}))}return e}set recodes(e){if(this._$recodes=e,this._$inBitmap){const{BitmapData:e}=window.next2d.display;for(let t=0;this._$recodes.length>t;++t){const a=this._$recodes[t];if("object"!=typeof a)continue;if(a.namespace===e.namespace)continue;if(!a.buffer)continue;const r=new e(a.width,a.height,!0,0);r._$buffer=new Uint8Array(a.buffer),this._$recodes[t]=r}}}get bounds(){return this._$bounds}set bounds(e){this._$bounds=e}get bitmapId(){return this._$bitmapId}set bitmapId(e){this._$bitmapId=0|e}get grid(){return this._$grid}set grid(e){this._$grid=e}createPointer(e,t){const{Graphics:a}=window.next2d.display;k.$clearShapePointer();const r=document.getElementById("stage-area");let i=2,s=null;for(let r=0;r<this._$recodes.length;)switch(this._$recodes[r++]){case a.MOVE_TO:i=r,s={idx:r,x:this._$recodes[r++],y:this._$recodes[r++]};break;case a.LINE_TO:this.addPointer(e,t,r,this._$recodes[r++],this._$recodes[r++],a.LINE_TO),this._$adjustmentPointer(r,i);break;case a.CUBIC:for(let i=0;2>i;++i)this.addPointer(e,t,r,this._$recodes[r++],this._$recodes[r++],a.CUBIC,!0);this.addPointer(e,t,r,this._$recodes[r++],this._$recodes[r++],a.CUBIC,!1),this._$adjustmentPointer(r,i);break;case a.CURVE_TO:this.addPointer(e,t,r,this._$recodes[r++],this._$recodes[r++],a.CURVE_TO,!0),this.addPointer(e,t,r,this._$recodes[r++],this._$recodes[r++],a.CURVE_TO),this._$adjustmentPointer(r,i);break;case a.FILL_STYLE:r+=4;break;case a.STROKE_STYLE:s&&(this.addPointer(e,t,s.idx,s.x,s.y,a.MOVE_TO),s=null),r+=8;break;case a.GRADIENT_FILL:r+=6;break;case a.GRADIENT_STROKE:r+=10;case a.BEGIN_PATH:case a.END_FILL:case a.END_STROKE:}k.$addModalEvent(r)}_$adjustmentPointer(e,t){const{Graphics:a}=window.next2d.display;switch(this._$recodes[e]){case a.MOVE_TO:case a.FILL_STYLE:case a.GRADIENT_FILL:{const e=document.getElementById("stage-area").children;e[e.length-1].dataset.syncId=`${t}`}}}addPointer(e,t,a,r,i,s,n=!1){const o=k.$currentWorkSpace().scene.getLayer(e).getCharacter(t),l=document.getElementById("stage-area"),c=document.createElement("div");c.classList.add("transform"),c.dataset.shapePointer="true",c.dataset.layerId=`${e}`,c.dataset.characterId=`${t}`,c.dataset.index=`${a}`,c.dataset.libraryId=`${this.id}`,c.dataset.curve=`${n}`,c.dataset.type=`${s}`,c.dataset.position=`${l.children.length}`;let d=[1,0,0,1,0,0];if(o){const e=k.$timelineFrame.currentFrame;d=o.getPlace(e).matrix,k.$sceneChange.matrix.length&&(d=k.$multiplicationMatrix(k.$sceneChange.concatenatedMatrix,d))}const h=r*d[0]+i*d[2]+d[4],u=r*d[1]+i*d[3]+d[5];c.style.left=h*k.$zoomScale+k.$offsetLeft-3+"px",c.style.top=u*k.$zoomScale+k.$offsetTop-3+"px",n?c.style.borderRadius="5px":c.dataset.detail="{{ダブルクリックでカーブポイントが追加されます}}",c.addEventListener("mousedown",(e=>{if(e.button)return;e.stopPropagation();const t=k.$tools.activeTool;t&&(e.shapePointer=!0,t.dispatchEvent(re.MOUSE_DOWN,e))})),c.addEventListener("dblclick",(e=>{e.stopPropagation();const t=k.$tools.activeTool;t&&(e.shapePointer=!0,t.dispatchEvent(re.DBL_CLICK,e))})),l.appendChild(c)}reloadBounds(){const{Graphics:e,Shape:t}=window.next2d.display,a=(new t).graphics,r=[];for(let t=0;t<this._$recodes.length;)switch(this._$recodes[t++]){case e.MOVE_TO:case e.LINE_TO:t+=2;break;case e.CURVE_TO:t+=4;break;case e.CUBIC:t+=6;break;case e.FILL_STYLE:r.push("fill"),t+=4;break;case e.STROKE_STYLE:r.push(t+1),t+=8;break;case e.GRADIENT_FILL:r.push("fill"),t+=6;break;case e.GRADIENT_STROKE:r.push(t+1),t+=10;case e.BEGIN_PATH:case e.END_FILL:case e.END_STROKE:}for(let t=0;t<this._$recodes.length;)switch(this._$recodes[t++]){case e.MOVE_TO:a.moveTo(this._$recodes[t++],this._$recodes[t++]);break;case e.LINE_TO:a.lineTo(this._$recodes[t++],this._$recodes[t++]);break;case e.CUBIC:a.cubicCurveTo(this._$recodes[t++],this._$recodes[t++],this._$recodes[t++],this._$recodes[t++],this._$recodes[t++],this._$recodes[t++]);break;case e.CURVE_TO:a.curveTo(this._$recodes[t++],this._$recodes[t++],this._$recodes[t++],this._$recodes[t++]);break;case e.FILL_STYLE:t+=4;break;case e.STROKE_STYLE:t+=8;break;case e.GRADIENT_FILL:{const{Matrix:e}=window.next2d.geom,r=new e,i=this.width/2/819.2,s=this.height/2/819.2;r.scale(i,s),r.translate(this.width/2+a._$xMin,this.height/2+a._$yMin),this._$recodes[t+2]=Array.from(r._$matrix),t+=6}break;case e.GRADIENT_STROKE:{const{Matrix:e}=window.next2d.geom,r=new e,i=this.width/2/819.2,s=this.height/2/819.2;r.scale(i,s),r.translate(this.width/2+a._$xMin,this.height/2+a._$yMin),this._$recodes[t+6]=Array.from(r._$matrix),t+=10}break;case e.BEGIN_PATH:{const e=r.shift();"fill"===e?a.beginFill():a.lineStyle(e)}break;case e.END_FILL:a.endFill();break;case e.END_STROKE:a.endLine()}return{xMin:a._$xMin,xMax:a._$xMax,yMin:a._$yMin,yMax:a._$yMax}}copyFrom(e){return e._$recodes=this._$recodes.slice(),e._$bounds={xMin:this._$bounds.xMin,xMax:this._$bounds.xMax,yMin:this._$bounds.yMin,yMax:this._$bounds.yMax},e._$bitmapId=this._$bitmapId,e}toObject(){return{id:this.id,name:this.name,type:this.type,symbol:this.symbol,folderId:this.folderId,bitmapId:this.bitmapId,grid:this.grid,inBitmap:this.inBitmap,recodes:this.recodes,bounds:this.bounds}}toPublish(){return this._$bitmapId&&k.$useIds.set(this._$bitmapId,!0),{symbol:this.symbol,extends:this.defaultSymbol,bitmapId:this.bitmapId,grid:this.grid,inBitmap:this.inBitmap,recodes:this.recodes,bounds:{xMin:this._$bounds.xMin,xMax:this._$bounds.xMax,yMin:this._$bounds.yMin,yMax:this._$bounds.yMax}}}changeStyle(e){const{Graphics:t,GradientType:a}=window.next2d.display,r=k.$hitColor.index;switch(k.$hitColor.style){case t.BITMAP_FILL:case t.FILL_STYLE:switch(document.getElementById("fill-color-type-select").value){case a.LINEAR:case a.RADIAL:{const a=document.getElementById("fill-color-value").value,i=k.$intToRGB(0|`0x${a.slice(1)}`),s=(0|document.getElementById("fill-alpha-value").value)/100*255;this.changeGradient(r,e,t.GRADIENT_FILL,6,i,s)}}break;case t.GRADIENT_FILL:{const a=document.getElementById("fill-color-type-select"),i=this._$recodes[r+1].pop();switch(a.value){case"bitmap":case"rgba":this._$recodes.splice(r-1,12,t.FILL_STYLE,i.R,i.G,i.B,i.A,t.END_FILL),k.$hitColor={index:r,style:t.FILL_STYLE,shape:this};break;default:this.changeGradient(r,e,t.GRADIENT_FILL,12,i,i.A)}}break;case t.STROKE_STYLE:switch(document.getElementById("fill-color-type-select").value){case a.LINEAR:case a.RADIAL:{const a=document.getElementById("fill-color-value").value,i=k.$intToRGB(0|`0x${a.slice(1)}`),s=(0|document.getElementById("fill-alpha-value").value)/100*255;this.changeGradient(r,e,t.GRADIENT_STROKE,5,i,s)}}break;case t.GRADIENT_STROKE:{const a=document.getElementById("fill-color-type-select"),i=this._$recodes[r+5].pop(),s=this._$recodes[r],n=this._$recodes[r+1],o=this._$recodes[r+2],l=this._$recodes[r+3];switch(a.value){case"bitmap":case"rgba":this._$recodes.splice(r-1,11,t.STROKE_STYLE,s,n,o,l,i.R,i.G,i.B,i.A,t.END_STROKE),k.$hitColor={index:r,width:s,style:t.STROKE_STYLE,shape:this};break;default:this.changeGradient(r,e,t.GRADIENT_STROKE,6,i,i.A)}}}this.cacheClear();const i=k.$timelineFrame.currentFrame;k.$currentWorkSpace().scene.changeFrame(i)}changeGradient(e,t,a,r,i,s){const{Graphics:n,SpreadMethod:o,InterpolationMethod:l}=window.next2d.display,{Matrix:c}=window.next2d.geom,d=new c,h=this.width/2/819.2,u=this.height/2/819.2;d.scale(h,u),d.translate(this.width/2+this._$bounds.xMin,this.height/2+this._$bounds.yMin);const m=[{ratio:0,R:255,G:255,B:255,A:255},{ratio:1,R:i.R,G:i.G,B:i.B,A:s}];k.$hitColor={index:e,style:a,type:t,ratios:m,shape:this},n.GRADIENT_STROKE===a?(this._$recodes[e-1]=n.GRADIENT_STROKE,this._$recodes.splice(e+4,r,t,m,Array.from(d._$matrix),o.PAD,l.RGB,0),k.$hitColor.width=this._$recodes[e]):this._$recodes.splice(e-1,r,a,t,m,Array.from(d._$matrix),o.PAD,l.RGB,0),k.$shapeController.initializeGradient()}changeColor(e=-1){const{Graphics:t}=window.next2d.display,a=k.$hitColor.index;switch(k.$hitColor.style){case t.BITMAP_FILL:break;case t.BITMAP_STROKE:{const e=k.$clamp(0|document.getElementById("fill-stroke-width-value").value,1,255);if(this._$recodes[a]!==e){k.$hitColor.width=e,this._$recodes[a]=e;const t=this.reloadBounds(e);this._$bounds.xMin=t.xMin,this._$bounds.xMax=t.xMax,this._$bounds.yMin=t.yMin,this._$bounds.yMax=t.yMax,this.cacheClear()}}break;case t.FILL_STYLE:{const e=document.getElementById("fill-color-value").value,t=k.$intToRGB(0|`0x${e.slice(1)}`);this._$recodes[a]=t.R,this._$recodes[a+1]=t.G,this._$recodes[a+2]=t.B,this._$recodes[a+3]=k.$clamp((0|document.getElementById("fill-alpha-value").value)/100*255,0,255)}break;case t.GRADIENT_FILL:{const t=this._$recodes[a+1],r=t[e>-1?e:t.length-1],i=document.getElementById("fill-color-value").value,s=k.$intToRGB(0|`0x${i.slice(1)}`);r.R=s.R,r.G=s.G,r.B=s.B,r.A=k.$clamp((0|document.getElementById("fill-alpha-value").value)/100*255,0,255)}break;case t.STROKE_STYLE:{const e=document.getElementById("fill-color-value").value,t=k.$intToRGB(0|`0x${e.slice(1)}`);this._$recodes[a+4]=t.R,this._$recodes[a+5]=t.G,this._$recodes[a+6]=t.B,this._$recodes[a+7]=k.$clamp((0|document.getElementById("fill-alpha-value").value)/100*255,0,255);const r=k.$clamp(0|document.getElementById("fill-stroke-width-value").value,1,255);if(this._$recodes[a]!==r){k.$hitColor.width=r,this._$recodes[a]=r;const e=this.reloadBounds(r);this._$bounds.xMin=e.xMin,this._$bounds.xMax=e.xMax,this._$bounds.yMin=e.yMin,this._$bounds.yMax=e.yMax,this.cacheClear()}}break;case t.GRADIENT_STROKE:{const t=this._$recodes[a+5],r=t[e>-1?e:t.length-1],i=document.getElementById("fill-color-value").value,s=k.$intToRGB(0|`0x${i.slice(1)}`);r.R=s.R,r.G=s.G,r.B=s.B,r.A=k.$clamp((0|document.getElementById("fill-alpha-value").value)/100*255,0,255);const n=k.$clamp(0|document.getElementById("fill-stroke-width-value").value,1,255);if(this._$recodes[a]!==n){k.$hitColor.width=n,this._$recodes[a]=n;const e=this.reloadBounds(n);this._$bounds.xMin=e.xMin,this._$bounds.xMax=e.xMax,this._$bounds.yMin=e.yMin,this._$bounds.yMax=e.yMax,this.cacheClear()}}}this.cacheClear()}cacheClear(){const e=k.$currentWorkSpace().scene;for(const t of e._$layers.values()){const e=t._$characters.length;for(let a=0;a<e;++a){const e=t._$characters[a];e.libraryId===this.id&&e.dispose()}}this._$graphicBuffer=null}setHitColor(e,t,a){if(!this._$recodes.length)return;const{Graphics:r,GradientType:i}=window.next2d.display,{Point:s,Matrix:n}=window.next2d.geom,o=new n,l=Math.sqrt(a[0]*a[0]+a[1]*a[1])*k.$zoomScale,c=Math.sqrt(a[2]*a[2]+a[3]*a[3])*k.$zoomScale;o.scale(l,c);const d=Math.atan2(a[1],a[0]);d&&(o.translate(-this.width/2,-this.height/2),o.rotate(d),o.translate(this.width/2,this.height/2));const h=o.transformPoint(new s(0,0)),u=o.transformPoint(new s(this.width,0)),m=o.transformPoint(new s(0,this.height)),g=o.transformPoint(new s(this.width,this.height)),p=Math.min(h.x,u.x,m.x,g.x),f=Math.min(h.y,u.y,m.y,g.y);o.translate(-p,-f),k.$hitColor=null,k.$hitContext.lineWidth=0,k.$hitContext.beginPath(),k.$hitContext.setTransform(o._$matrix[0],o._$matrix[1],o._$matrix[2],o._$matrix[3],-this._$bounds.xMin*l+o._$matrix[4],-this._$bounds.yMin*c+o._$matrix[5]);const $=this._$recodes,y=$.length;for(let a=0;a<y;)switch($[a++]){case r.BEGIN_PATH:k.$hitContext.beginPath();break;case r.MOVE_TO:k.$hitContext.moveTo($[a++],$[a++]);break;case r.LINE_TO:k.$hitContext.lineTo($[a++],$[a++]);break;case r.CURVE_TO:k.$hitContext.quadraticCurveTo($[a++],$[a++],$[a++],$[a++]);break;case r.CUBIC:k.$hitContext.bezierCurveTo($[a++],$[a++],$[a++],$[a++],$[a++],$[a++]);break;case r.FILL_STYLE:if(k.$hitContext.isPointInPath(e,t)){if(this._$bitmapId)k.$hitColor={index:a,style:r.BITMAP_FILL,shape:this},document.getElementById("fill-color-type-select")[1].selected=!0;else{k.$hitColor={index:a,style:r.FILL_STYLE,shape:this};const e=$[a].toString(16).padStart(2,"0"),t=$[a+1].toString(16).padStart(2,"0"),i=$[a+2].toString(16).padStart(2,"0");document.getElementById("fill-color-type-select")[0].selected=!0,document.getElementById("fill-color-value").value=`#${e}${t}${i}`,document.getElementById("fill-alpha-value").value=""+$[a+3]/255*100}k.$shapeController.changeFillColorTypeSelect()}a+=4;break;case r.GRADIENT_FILL:k.$hitContext.isPointInPath(e,t)&&(document.getElementById("fill-color-type-select")[$[a]===i.LINEAR?2:3].selected=!0,k.$hitColor={index:a,style:r.GRADIENT_FILL,type:$[a],ratios:$[a+1],shape:this},k.$shapeController.changeFillColorTypeSelect()),a+=6;break;case r.STROKE_STYLE:if(k.$hitContext.lineWidth=0|$[a],k.$hitContext.isPointInStroke(e,t)){if(this._$bitmapId)k.$hitColor={index:a,width:k.$hitContext.lineWidth,style:r.BITMAP_STROKE,shape:this},document.getElementById("fill-color-type-select")[1].selected=!0;else{k.$hitColor={index:a,width:k.$hitContext.lineWidth,style:r.STROKE_STYLE,shape:this};const e=$[a+4].toString(16).padStart(2,"0"),t=$[a+5].toString(16).padStart(2,"0"),i=$[a+6].toString(16).padStart(2,"0");document.getElementById("fill-color-type-select")[0].selected=!0,document.getElementById("fill-color-value").value=`#${e}${t}${i}`,document.getElementById("fill-alpha-value").value=""+$[a+7]/255*100}document.getElementById("fill-stroke-width-value").value=`${k.$hitContext.lineWidth}`,k.$shapeController.changeFillColorTypeSelect()}a+=8;break;case r.GRADIENT_STROKE:k.$hitContext.lineWidth=$[a],k.$hitContext.isPointInStroke(e,t)&&(document.getElementById("fill-color-type-select")[$[a+4]===i.LINEAR?2:3].selected=!0,k.$hitColor={index:a,width:$[a],style:r.GRADIENT_STROKE,type:$[a+4],ratios:$[a+5],shape:this},k.$shapeController.changeFillColorTypeSelect()),a+=10;case r.CLOSE_PATH:case r.END_STROKE:case r.END_FILL:}}createInstance(){const{Shape:e,Graphics:t}=window.next2d.display,a=new e;if(a._$loaderInfo=k.$loaderInfo,a._$characterId=this.id,this._$grid){const{Rectangle:e}=window.next2d.geom;a.scale9Grid=new e(this._$grid.x,this._$grid.y,this._$grid.w,this._$grid.h)}const r=a.graphics;if(r._$maxAlpha=1,r._$canDraw=!0,r._$xMin=this._$bounds.xMin,r._$xMax=this._$bounds.xMax,r._$yMin=this._$bounds.yMin,r._$yMax=this._$bounds.yMax,this._$bitmapId){const{BitmapData:e}=window.next2d.display,i=k.$currentWorkSpace().getLibrary(this._$bitmapId);if(i){a._$bitmapId=this._$bitmapId,r._$recode=[];const s=new e(i.width,i.height,!0,0);s._$buffer=i._$buffer;const n=this._$recodes;if(n[n.length-1]===t.END_FILL){const e=n.length-6;for(let t=0;t<e;++t)r._$recode.push(n[t]);r._$recode.push(t.BITMAP_FILL,s,null,"repeat",!1)}else{const e=this._$recodes[n.length-9],a=this._$recodes[n.length-8],i=this._$recodes[n.length-7],o=this._$recodes[n.length-6],l=n.length-10;for(let e=0;e<l;++e)r._$recode.push(n[e]);r._$recode.push(t.BITMAP_STROKE,e,a,i,o,s,[1,0,0,1,r._$xMin,r._$yMin],"repeat",!1)}}else r._$recode=this._$recodes.slice(0)}else r._$recode=this._$recodes.slice(0);return this._$graphicBuffer||(k.$root.stage._$player.removeCache(`${k.$loaderInfo._$id}@${this.id}`),this._$graphicBuffer=r._$getRecodes()),r._$buffer=this._$graphicBuffer,a}}class O extends E{constructor(e){super(e),this.buffer=e.buffer,this._$binary="",this._$volume=100,this._$loopCount=0,"volume"in e&&(this.volume=e.volume),"loopCount"in e&&(this.loopCount=e.loopCount),this._$audio=document.createElement("audio"),this._$audio.preload="auto",this._$audio.autoplay=!1,this._$audio.loop=!1,this._$audio.controls=!0,this._$audio.src=URL.createObjectURL(new Blob([new Uint8Array(this._$buffer)],{type:"audio/mp3"})),this._$audio.load()}clone(){return new O(JSON.parse(JSON.stringify(this.toObject())))}getPreview(){return Promise.resolve(this._$audio)}getScenePreview(){return new Promise((e=>{const t=document.createElement("audio");t.addEventListener("canplaythrough",(()=>e(t))),t.preload="auto",t.autoplay=!1,t.loop=!1,t.controls=!0,t.src=URL.createObjectURL(new Blob([new Uint8Array(this._$buffer)],{type:"audio/mp3"})),t.load()}))}get defaultSymbol(){return window.next2d.media.Sound.namespace}get buffer(){if(!this._$binary){const e=this._$buffer.length;for(let t=0;t<e;++t)this._$binary+=String.fromCharCode(this._$buffer[t])}return this._$binary}set buffer(e){switch(typeof e){case"object":e.constructor===Uint8Array&&(this._$buffer=e);break;case"string":if(!this._$binary){let t=e.length;this._$buffer=new Uint8Array(t);for(let a=0;a<t;++a)this._$buffer[a]=255&e.charCodeAt(a);this._$binary=e}}}get volume(){return this._$volume}set volume(e){this._$volume=e}get loopCount(){return this._$loopCount}set loopCount(e){this._$loopCount=e}toObject(){return{id:this.id,name:this.name,type:this.type,symbol:this.symbol,folderId:this.folderId,buffer:this.buffer,volume:this.volume,loopCount:this.loopCount}}toPublish(){return{buffer:Array.from(this._$buffer),audioBuffer:null}}}class N{constructor(e=null){e?(this._$width=e.width,this._$height=e.height,this._$fps=e.fps,this._$bgColor=e.bgColor,this._$lock=e.lock):(this._$width=N.STAGE_DEFAULT_WIDTH,this._$height=N.STAGE_DEFAULT_HEIGHT,this._$fps=N.STAGE_DEFAULT_FPS,this._$bgColor="#ffffff",this._$lock=!1)}static get STAGE_DEFAULT_WIDTH(){return 550}static get STAGE_DEFAULT_HEIGHT(){return 400}static get STAGE_DEFAULT_FPS(){return 24}initialize(){k.$zoomScale=1;const e=document.getElementById("screen-scale");e&&(e.value="100");const t=document.getElementById("stage");t&&(t.style.width=`${this.width}px`,t.style.height=`${this.height}px`,t.style.backgroundColor=this.bgColor);const a=document.getElementById("library-preview-area");a&&(a.style.backgroundColor=this.bgColor);const r=document.getElementById("stage-area");if(r){let e="";e+=`width: ${this.width+window.screen.width}px;`,e+=`height: ${this.height+window.screen.height}px;`,r.setAttribute("style",e)}const i=document.getElementById("label-name");i&&(i.value="");const s=document.getElementById("stage-width");s&&(s.value=this.width);const n=document.getElementById("stage-height");n&&(n.value=this.height);const o=document.getElementById("stage-fps");o&&(o.value=this.fps);const l=document.getElementById("stage-bgColor");l&&(l.value=this.bgColor);const c=document.getElementById("stage-lock");c&&c.children.length&&c.children[0].setAttribute("class",this.lock?"active":"disable"),k.$controller._$stageLock=this.lock;const d=document.getElementById("screen");d&&(d.scrollLeft=window.screen.width/2-(d.clientWidth-this.width)/2,d.scrollTop=window.screen.height/2-(d.clientHeight-this.height)/2),t&&(k.$offsetLeft=t.offsetLeft,k.$offsetTop=t.offsetTop)}get width(){return this._$width}set width(e){this._$width=k.$clamp(+e,1,4096)}get height(){return this._$height}set height(e){this._$height=k.$clamp(+e,1,4096)}get fps(){return this._$fps}set fps(e){this._$fps=k.$clamp(0|e,1,60)}get bgColor(){return this._$bgColor}set bgColor(e){this._$bgColor=`${e}`.toLowerCase()}get lock(){return this._$lock}set lock(e){this._$lock=!!e}toObject(){return{width:this.width,height:this.height,fps:this.fps,bgColor:this.bgColor,lock:this.lock}}}class D extends E{constructor(e=null){super(e),this._$text="",this._$font="sans-serif",this._$size=12,this._$align="left",this._$color=0,this._$fontType=0,this._$inputType="static",this._$leading=0,this._$letterSpacing=0,this._$leftMargin=0,this._$rightMargin=0,this._$autoSize=0,this._$multiline=!0,this._$wordWrap=!0,this._$border=!1,this._$scroll=!0,this._$cache=null,this._$htmlText=null,this._$thickness=0,this._$thicknessColor=0,this._$bounds={xMin:0,xMax:D.FONT_DEFAULT_SIZE,yMin:0,yMax:D.FONT_DEFAULT_SIZE},this._$originBounds={xMin:0,xMax:D.FONT_DEFAULT_SIZE,yMin:0,yMax:D.FONT_DEFAULT_SIZE},e.text&&(this.text=e.text),e.font&&(this.font=e.font),e.fontType&&(this.fontType=e.fontType),e.inputType&&(this.inputType=e.inputType),e.size&&(this.size=e.size),e.align&&(this.align=e.align),e.color&&(this.color=e.color),e.leading&&(this.leading=e.leading),e.letterSpacing&&(this.letterSpacing=e.letterSpacing),e.leftMargin&&(this.leftMargin=e.leftMargin),e.rightMargin&&(this.rightMargin=e.rightMargin),"multiline"in e&&(this.multiline=e.multiline),"wordWrap"in e&&(this.wordWrap=e.wordWrap),e.autoFontSize&&(this.autoFontSize=e.autoFontSize),"scroll"in e&&(this.scroll=e.scroll),e.border&&(this.border=e.border),e.bounds&&(this.bounds=e.bounds),e.originBounds&&(this.originBounds=e.originBounds),e.autoSize&&(this.autoSize=e.autoSize),e.thickness&&(this.thickness=e.thickness),e.thicknessColor&&(this.thicknessColor=e.thicknessColor)}static get FONT_DEFAULT_SIZE(){return 200}clone(){return new D(JSON.parse(JSON.stringify(this.toObject())))}showController(e,t=""){super.showController(e,t),k.$controller.hideObjectSetting(["video-setting","loop-setting","fill-color-setting","nine-slice-setting"]),k.$controller.showObjectSetting(["text-setting"]);const a=document.getElementById("font-select");a.children[0].selected=!0;for(let e=0;e<a.children.length;++e){const t=a.children[e];if(t.value===this._$font){t.selected=!0;break}}const r=document.getElementById("font-style-select");for(let e=0;e<r.children.length;++e){const t=r.children[e];if((0|t.value)===this._$fontType){t.selected=!0;break}}const i=document.getElementById("font-align-select");for(let e=0;e<i.children.length;++e){const t=i.children[e];if(t.value===this._$align){t.selected=!0;break}}const s=document.getElementById("font-wrap-select");switch(!0){case!this._$wordWrap&&!this._$multiline:s.children[0].selected=!0;break;case!this._$wordWrap&&this._$multiline:s.children[1].selected=!0;break;case this._$wordWrap&&this._$multiline:s.children[2].selected=!0}document.getElementById("font-input-select").children["static"===this._$inputType?0:1].selected=!0,document.getElementById("font-size").value=`${this._$size}`,document.getElementById("font-color").value=`#${this._$color.toString(16).padStart(6,"0")}`,document.getElementById("font-stroke-size").value=`${this._$thickness}`,document.getElementById("font-stroke-color").value=`#${this._$thicknessColor.toString(16).padStart(6,"0")}`;const n=["font-leading","font-letterSpacing","font-leftMargin","font-rightMargin"];for(let e=0;e<n.length;++e){const t=n[e];document.getElementById(t).value=`${this[t.split("-")[1]]}`}document.getElementById("font-auto-size-select").children[this._$autoSize].selected=!0,this._$border&&(document.getElementById("font-border-select").children[1].selected=!0),this._$scroll&&(document.getElementById("font-scroll-select").children[0].selected=!0)}getBounds(e=null){const t={xMin:-this._$thickness,xMax:this._$bounds.xMax+this._$thickness,yMin:-this._$thickness,yMax:this._$bounds.yMax+4+this._$thickness};return e?k.$boundsMatrix(t,e):t}get text(){return this._$text}set text(e){this._$text=`${e}`,this.resize()}get size(){return this._$size}set size(e){this._$size=0|e,this.resize()}get font(){return this._$font}set font(e){this._$font=`${e}`,this.resize()}get fontType(){return this._$fontType}set fontType(e){this._$fontType=0|e,this.resize()}get inputType(){return this._$inputType}set inputType(e){e=`${e}`.toLowerCase(),this._$inputType="static"===e?e:"input"}get align(){return this._$align}set align(e){switch(e=`${e}`.toLowerCase()){case"right":case"center":this._$align=e;break;default:this._$align="left"}this._$align=e}get color(){return this._$color}set color(e){this._$color=0|e}get leading(){return this._$leading}set leading(e){this._$leading=0|e,this.resize()}get letterSpacing(){return this._$letterSpacing}set letterSpacing(e){this._$letterSpacing=0|e,this.resize()}get leftMargin(){return this._$leftMargin}set leftMargin(e){this._$leftMargin=0|e,this.resize()}get rightMargin(){return this._$rightMargin}set rightMargin(e){this._$rightMargin=0|e,this.resize()}get multiline(){return this._$multiline}set multiline(e){this._$multiline=!!e,this.resize()}get border(){return this._$border}set border(e){this._$border=!!e}get scroll(){return this._$scroll}set scroll(e){this._$scroll=!!e}get wordWrap(){return this._$wordWrap}set wordWrap(e){this._$wordWrap=!!e,this.resize()}get bounds(){return this._$bounds}set bounds(e){this._$bounds=e}get originBounds(){return this._$originBounds}set originBounds(e){this._$originBounds=e}get autoSize(){return this._$autoSize}set autoSize(e){this._$autoSize=0|e,1!==this._$autoSize&&(this._$bounds.xMax=this._$originBounds.xMax,this._$bounds.yMax=this._$originBounds.yMax),this.resize()}get thickness(){return this._$thickness}set thickness(e){this._$thickness=0|e,this.resize()}get thicknessColor(){return this._$thicknessColor}set thicknessColor(e){this._$thicknessColor=0|e}toObject(){return{id:this.id,name:this.name,type:this.type,symbol:this.symbol,folderId:this.folderId,text:this.text,font:this.font,fontType:this.fontType,inputType:this.inputType,size:this.size,align:this.align,color:this.color,leading:this.leading,letterSpacing:this.letterSpacing,leftMargin:this.leftMargin,rightMargin:this.rightMargin,multiline:this.multiline,wordWrap:this.wordWrap,border:this.border,autoSize:this.autoSize,scroll:this.scroll,originBounds:this.originBounds,bounds:this.bounds,thickness:this.thickness,thicknessColor:this.thicknessColor}}get defaultSymbol(){return window.next2d.text.TextField.namespace}toPublish(){return{symbol:this.symbol,extends:this.defaultSymbol,text:this.text,font:this.font,fontType:this.fontType,inputType:this.inputType,size:this.size,align:this.align,color:this.color,leading:this.leading,letterSpacing:this.letterSpacing,leftMargin:this.leftMargin,rightMargin:this.rightMargin,multiline:this.multiline,wordWrap:this.wordWrap,border:this.border,autoSize:this.autoSize,scroll:this.scroll,originBounds:this.originBounds,bounds:this.bounds,thickness:this.thickness,thicknessColor:this.thicknessColor}}resize(){const e=this.createInstance();this._$bounds={xMin:e._$bounds.xMin,xMax:e._$bounds.xMax,yMin:e._$bounds.yMin,yMax:e._$bounds.yMax}}createInstance(){const{TextField:e}=window.next2d.text,t=new e;t._$loaderInfo=k.$loaderInfo,t._$characterId=this.id,t._$bounds={xMin:this._$originBounds.xMin,xMax:this._$originBounds.xMax,yMin:this._$originBounds.yMin,yMax:this._$originBounds.yMax},t._$originBounds={xMin:this._$originBounds.xMin,xMax:this._$originBounds.xMax,yMin:this._$originBounds.yMin,yMax:this._$originBounds.yMax};const a=t.defaultTextFormat;switch(a.font=this._$font,a.size=this._$size,a.align=this._$align,a.color=this._$color,a.leading=this._$leading,a.letterSpacing=this._$letterSpacing,a.leftMargin=this._$leftMargin,a.rightMargin=this._$rightMargin,this._$fontType){case 1:a.bold=!0;break;case 2:a.italic=!0;break;case 3:a.bold=!0,a.italic=!0}switch(this._$autoSize){case 1:t.autoSize=this._$align;break;case 2:t.autoFontSize=!0}return t.multiline=this._$multiline,t.wordWrap=this._$wordWrap,t.border=this._$border,t.scroll=this._$scroll,t.thickness=this._$thickness,t.thicknessColor=this._$thicknessColor,t.text=this._$text,t.defaultTextFormat=a,t}draw(e,t,a,r,i=null,s=0,n=!1){return super.draw(e,t,a,r,i,s,n).then((e=>{e._$tx-=this._$thickness,e._$ty-=this._$thickness;let t=0;switch(this._$autoSize){case 0:"right"===this._$align&&(t=-4);break;case 1:switch(this._$align){case"center":t=(this._$bounds.xMax-this._$originBounds.xMax)/2,t&&(t-=2);break;case"right":t=this._$originBounds.xMax-this._$bounds.xMax,t&&(t+=2,t*=-1)}}return 1===this._$autoSize&&(e._$tx-=t),Promise.resolve(e)}))}}class U extends E{constructor(e){super(e),this._$volume=100,this._$loop=!1,this._$autoPlay=!0,this._$binary="",this._$queue=[],this._$loaded=!1,this.buffer=e.buffer,this.width=0|e.width,this.height=0|e.height,"volume"in e&&(this.volume=e.volume),"loop"in e&&(this.loop=e.loop),"autoPlay"in e&&(this.autoPlay=e.autoPlay),this._$video=document.createElement("video"),this._$video.crossOrigin="anonymous",this._$video.type="video/mp4",this._$video.muted=!0,this._$video.autoplay=!1;const t=e=>{const a=e.target;a.removeEventListener("canplaythrough",t),a.play(),a.currentTime=0,a.pause(),setTimeout((()=>{this.delayImage()}),150)};this._$video.addEventListener("canplaythrough",t),this._$video.src=URL.createObjectURL(new Blob([new Uint8Array(this._$buffer)],{type:"video/mp4"})),this._$video.load()}clone(){return new U(JSON.parse(JSON.stringify(this.toObject())))}showController(e,t=""){super.showController(e,t),k.$controller.hideObjectSetting(["text-setting","loop-setting","fill-color-setting","nine-slice-setting"]),k.$controller.showObjectSetting(["video-setting"]),document.getElementById("video-volume").value=this.volume,document.getElementById("video-loop-select").children[this.loop?1:0].selected=!0,document.getElementById("video-auto-select").children[this.autoPlay?1:0].selected=!0}getPreview(){const e=this.getBounds();let t=Math.abs(e.xMax-e.xMin),a=Math.abs(e.yMax-e.yMin),r=1;const i=150/a;t=t*i|0,a=a*i|0;const s=(0|document.documentElement.style.getPropertyValue("--controller-width").split("px")[0])-10;return t>s&&(r=s/t,t=t*r|0,a=a*r|0),this._$video.style.width=`${t}px`,this._$video.style.height=`${a}px`,this._$video.controls=!0,Promise.resolve(this._$video)}getBounds(e=null){const t={xMin:0,xMax:this.width,yMin:0,yMax:this.height};return e?k.$boundsMatrix(t,e):t}get defaultSymbol(){return window.next2d.media.Video.namespace}get buffer(){if(!this._$binary){const e=this._$buffer.length;for(let t=0;t<e;++t)this._$binary+=String.fromCharCode(this._$buffer[t])}return this._$binary}set buffer(e){switch(typeof e){case"object":e.constructor===Uint8Array&&(this._$buffer=e);break;case"string":if(!this._$binary){let t=e.length;this._$buffer=new Uint8Array(t);for(let a=0;a<t;++a)this._$buffer[a]=255&e.charCodeAt(a);this._$binary=e}}}get volume(){return this._$volume}set volume(e){this._$volume=k.$clamp(0|e,0,100)}get loop(){return this._$loop}set loop(e){this._$loop=!!e}get autoPlay(){return this._$autoPlay}set autoPlay(e){this._$autoPlay=!!e}get width(){return this._$width}set width(e){this._$width=0|e}get height(){return this._$height}set height(e){this._$height=0|e}toObject(){return{id:this.id,name:this.name,type:this.type,symbol:this.symbol,folderId:this.folderId,width:this.width,height:this.height,buffer:this.buffer,volume:this.volume,loop:this.loop,autoPlay:this.autoPlay}}toPublish(){return{symbol:this.symbol,extends:this.defaultSymbol,buffer:Array.from(this._$buffer),bounds:this.getBounds(),volume:this.volume/100,loop:this.loop,autoPlay:this.autoPlay}}createInstance(){const{Video:e}=window.next2d.media,t=this._$loaded?new e(this._$video.videoWidth,this._$video.videoHeight):new e(this.width,this.height);return t._$loaderInfo=k.$loaderInfo,t._$characterId=this.id,t._$video=this._$video,t._$createContext(),t}delayImage(){this._$loaded=!0;for(let e=0;e<this._$queue.length;++e){const t=this._$queue[e];this.draw(t.canvas,t.width,t.height,t.place,t.range,t.staticFrame)}this._$queue.length=0}draw(e,t,a,r,i=null,s=0,n=!1){return new Promise((e=>{this._$video.currentTime=k.$timelineFrame.currentFrame/60;const t=()=>{this._$loaded?e():requestAnimationFrame(t)};t()})).then((()=>super.draw(e,t,a,r,i,s,n).then((e=>Promise.resolve(e)))))}}class R{constructor(e=null){this._$blurX=4,this._$blurY=4,this._$quality=1,this._$state=!0,this._$name="",e&&(this.blurX=e.blurX,this.blurY=e.blurY,this.quality=0|e.quality,this.state=e.state)}clone(){return new this.constructor(JSON.parse(JSON.stringify(this.toObject())))}isSame(e){return this._$quality===e._$quality&&(this._$blurX===e._$blurX&&this._$blurY===e._$blurY)}get blurX(){return this._$blurX}set blurX(e){this._$blurX=k.$clamp(+e,xe.MIN_BLUR,xe.MAX_BLUR)}get blurY(){return this._$blurY}set blurY(e){this._$blurY=k.$clamp(+e,xe.MIN_BLUR,xe.MAX_BLUR)}get quality(){return this._$quality}set quality(e){this._$quality=k.$clamp(0|e,1,3)}get state(){return this._$state}set state(e){this._$state=e}get name(){return this._$name}set name(e){this._$name=e}}class X extends R{constructor(e=null){super(e),this.name="BevelFilter",this._$distance=4,this._$angle=45,this._$highlightColor=16777215,this._$highlightAlpha=100,this._$shadowColor=0,this._$shadowAlpha=100,this._$strength=1,this._$type="inner",this._$knockout=!1,e&&(this.distance=e.distance,this.angle=e.angle,this.highlightColor=0|e.highlightColor,this.highlightAlpha=100*e.highlightAlpha,this.shadowColor=0|e.shadowColor,this.shadowAlpha=100*e.shadowAlpha,this.strength=e.strength,this.type=e.type,this.knockout=e.knockout)}get distance(){return this._$distance}set distance(e){this._$distance=k.$clamp(+e,xe.MIN_DISTANCE,xe.MAX_DISTANCE)}get angle(){return this._$angle}set angle(e){this._$angle=+e%360}get highlightColor(){return this._$highlightColor}set highlightColor(e){this._$highlightColor=k.$clamp(0|e,0,16777215)}get highlightAlpha(){return this._$highlightAlpha}set highlightAlpha(e){this._$highlightAlpha=k.$clamp(+e,0,100)}get shadowColor(){return this._$shadowColor}set shadowColor(e){this._$shadowColor=k.$clamp(0|e,0,16777215)}get shadowAlpha(){return this._$shadowAlpha}set shadowAlpha(e){this._$shadowAlpha=k.$clamp(+e,0,100)}get strength(){return this._$strength}set strength(e){this._$strength=k.$clamp(+e,xe.MIN_STRENGTH,xe.MAX_STRENGTH)}get type(){return this._$type}set type(e){switch(e=`${e}`.toLowerCase()){case"outer":case"inner":this._$type=e;break;default:this._$type="full"}}get knockout(){return this._$knockout}set knockout(e){this._$knockout=!!e}isSame(e){return this._$distance===e._$distance&&(this._$angle===e._$angle&&(this._$highlightColor===e._$highlightColor&&(this._$highlightAlpha===e._$highlightAlpha&&(this._$shadowColor===e._$shadowColor&&(this._$shadowAlpha===e._$shadowAlpha&&(this._$strength===e._$strength&&(this._$type===e._$type&&(this._$knockout===e._$knockout&&super.isSame(e)))))))))}createInstance(){return new window.next2d.filters.BevelFilter(this.distance,this.angle,this.highlightColor,this.highlightAlpha/100,this.shadowColor,this.shadowAlpha/100,this.blurX,this.blurY,this.strength,this.quality,this.type,this.knockout)}toParamArray(){return[null,this.distance,this.angle,this.highlightColor,this.highlightAlpha/100,this.shadowColor,this.shadowAlpha/100,this.blurX,this.blurY,this.strength,this.quality,this.type,this.knockout]}toObject(){return{name:this.name,blurX:this.blurX,blurY:this.blurY,quality:this.quality,state:this.state,distance:this.distance,angle:this.angle,highlightColor:this.highlightColor,highlightAlpha:this.highlightAlpha/100,shadowColor:this.shadowColor,shadowAlpha:this.shadowAlpha/100,strength:this.strength,type:this.type,knockout:this.knockout}}}class j extends R{constructor(e=null){super(e),this.name="BlurFilter"}createInstance(){return new window.next2d.filters.BlurFilter(this.blurX,this.blurY,this.quality)}toParamArray(){return[null,this.blurX,this.blurY,this.quality]}toObject(){return{name:this.name,blurX:this.blurX,blurY:this.blurY,quality:this.quality,state:this.state}}}class Y extends R{constructor(e=null){super(e),this.name="DropShadowFilter",this._$distance=4,this._$angle=45,this._$color=0,this._$alpha=100,this._$strength=1,this._$inner=!1,this._$knockout=!1,this._$hideObject=!1,e&&(this.distance=e.distance,this.angle=e.angle,this.color=e.color,this.alpha=100*e.alpha,this.strength=e.strength,this.inner=e.inner,this.knockout=e.knockout,this.hideObject=e.hideObject)}get distance(){return this._$distance}set distance(e){this._$distance=k.$clamp(+e,xe.MIN_DISTANCE,xe.MAX_DISTANCE)}get angle(){return this._$angle}set angle(e){this._$angle=+e%360}get color(){return this._$color}set color(e){this._$color=k.$clamp(0|e,0,16777215)}get alpha(){return this._$alpha}set alpha(e){this._$alpha=k.$clamp(+e,0,100)}get strength(){return this._$strength}set strength(e){this._$strength=k.$clamp(+e,xe.MIN_STRENGTH,xe.MAX_STRENGTH)}get inner(){return this._$inner}set inner(e){this._$inner=!!e}get knockout(){return this._$knockout}set knockout(e){this._$knockout=!!e}get hideObject(){return this._$hideObject}set hideObject(e){this._$hideObject=!!e}isSame(e){return this._$distance===e._$distance&&(this._$angle===e._$angle&&(this._$color===e._$color&&(this._$alpha===e._$alpha&&(this._$strength===e._$strength&&(this._$inner===e._$inner&&(this._$knockout===e._$knockout&&(this._$hideObject===e._$hideObject&&super.isSame(e))))))))}createInstance(){return new window.next2d.filters.DropShadowFilter(this.distance,this.angle,this.color,this.alpha/100,this.blurX,this.blurY,this.strength,this.quality,this.inner,this.knockout,this.hideObject)}toParamArray(){return[null,this.distance,this.angle,this.color,this.alpha/100,this.blurX,this.blurY,this.strength,this.quality,this.inner,this.knockout,this.hideObject]}toObject(){return{name:this.name,blurX:this.blurX,blurY:this.blurY,quality:this.quality,state:this.state,distance:this.distance,angle:this.angle,color:this.color,alpha:this.alpha/100,strength:this.strength,inner:this.inner,knockout:this.knockout,hideObject:this.hideObject}}}class W extends R{constructor(e=null){super(e),this.name="GlowFilter",this._$color=0,this._$alpha=100,this._$strength=1,this._$inner=!1,this._$knockout=!1,e&&(this.color=e.color,this.alpha=100*e.alpha,this.strength=e.strength,this.inner=e.inner,this.knockout=e.knockout)}get color(){return this._$color}set color(e){this._$color=k.$clamp(0|e,0,16777215)}get alpha(){return this._$alpha}set alpha(e){this._$alpha=k.$clamp(+e,0,100)}get strength(){return this._$strength}set strength(e){this._$strength=k.$clamp(+e,xe.MIN_STRENGTH,xe.MAX_STRENGTH)}get inner(){return this._$inner}set inner(e){this._$inner=!!e}get knockout(){return this._$knockout}set knockout(e){this._$knockout=!!e}isSame(e){return this._$color===e._$color&&(this._$alpha===e._$alpha&&(this._$strength===e._$strength&&(this._$inner===e._$inner&&(this._$knockout===e._$knockout&&super.isSame(e)))))}createInstance(){return new window.next2d.filters.GlowFilter(this.color,this.alpha/100,this.blurX,this.blurY,this.strength,this.quality,this.inner,this.knockout)}toParamArray(){return[null,this.color,this.alpha/100,this.blurX,this.blurY,this.strength,this.quality,this.inner,this.knockout]}toObject(){return{name:this.name,blurX:this.blurX,blurY:this.blurY,quality:this.quality,state:this.state,color:this.color,alpha:this.alpha/100,strength:this.strength,inner:this.inner,knockout:this.knockout}}}class H extends R{constructor(e=null){super(e),this.name="GradientBevelFilter",this._$distance=4,this._$angle=45,this._$colors=[16777215,16711680,0],this._$alphas=[100,0,100],this._$ratios=[0,128,255],this._$strength=1,this._$type="inner",this._$knockout=!1,e&&(this.distance=+e.distance,this.angle=+e.angle,this.colors=e.colors,this.alphas=e.alphas,this.ratios=e.ratios,this.strength=+e.strength,this.type=e.type,this.knockout=e.knockout)}get distance(){return this._$distance}set distance(e){this._$distance=k.$clamp(+e,xe.MIN_DISTANCE,xe.MAX_DISTANCE)}get angle(){return this._$angle}set angle(e){this._$angle=+e%360}get colors(){return this._$colors}set colors(e){this._$colors.length=0,this._$colors=e}get alphas(){return this._$alphas}set alphas(e){this._$alphas.length=0;for(let t=0;t<e.length;++t)this._$alphas.push(100*e[t])}get ratios(){return this._$ratios}set ratios(e){this._$ratios.length=0;for(let t=0;t<e.length;++t)this._$ratios.push(255*e[t])}get strength(){return this._$strength}set strength(e){this._$strength=k.$clamp(+e,xe.MIN_STRENGTH,xe.MAX_STRENGTH)}get type(){return this._$type}set type(e){switch(e=`${e}`.toLowerCase()){case"outer":case"full":this._$type=e;break;default:this._$type="inner"}}get knockout(){return this._$knockout}set knockout(e){this._$knockout=!!e}adjustment(){const e=[],t=[],a=[],r=new Map;for(let t=0;t<this._$ratios.length;++t){const a=this._$ratios[t]/255;e.push(a),r.set(a,t)}e.sort((function(e,t){switch(!0){case e>t:return 1;case e<t:return-1;default:return 0}}));for(let i=0;i<e.length;++i){const s=r.get(e[i]);t.push(this._$colors[s]),a.push(this._$alphas[s]/100)}return{ratios:e,colors:t,alphas:a}}isSame(e){if(this._$distance!==e._$distance)return!1;if(this._$angle!==e._$angle)return!1;for(let t=0;t<this._$colors.length;++t)if(this._$colors[t]!==e._$colors[t])return!1;for(let t=0;t<this._$alphas.length;++t)if(this._$alphas[t]!==e._$alphas[t])return!1;for(let t=0;t<this._$ratios.length;++t)if(this._$ratios[t]!==e._$ratios[t])return!1;return this._$strength===e._$strength&&(this._$type===e._$type&&(this._$knockout===e._$knockout&&super.isSame(e)))}createInstance(){const e=this.adjustment();return new window.next2d.filters.GradientBevelFilter(this.distance,this.angle,e.colors,e.alphas,e.ratios,this.blurX,this.blurY,this.strength,this.quality,this.type,this.knockout)}toParamArray(){const e=this.adjustment();return[null,this.distance,this.angle,e.colors,e.alphas,e.ratios,this.blurX,this.blurY,this.strength,this.quality,this.type,this.knockout]}toObject(){const e=this.adjustment();return{name:this.name,blurX:this.blurX,blurY:this.blurY,quality:this.quality,state:this.state,distance:this.distance,angle:this.angle,colors:e.colors,alphas:e.alphas,ratios:e.ratios,strength:this.strength,type:this.type,knockout:this.knockout}}}class G extends R{constructor(e=null){super(e),this.name="GradientGlowFilter",this._$distance=4,this._$angle=45,this._$colors=[16777215,0],this._$alphas=[0,100],this._$ratios=[0,255],this._$strength=1,this._$type="outer",this._$knockout=!1,e&&(this.distance=+e.distance,this.angle=+e.angle,this.colors=e.colors,this.alphas=e.alphas,this.ratios=e.ratios,this.strength=+e.strength,this.type=e.type,this.knockout=e.knockout)}get distance(){return this._$distance}set distance(e){this._$distance=k.$clamp(+e,xe.MIN_DISTANCE,xe.MAX_DISTANCE)}get angle(){return this._$angle}set angle(e){this._$angle=+e%360}get colors(){return this._$colors}set colors(e){this._$colors.length=0,this._$colors=e}get alphas(){return this._$alphas}set alphas(e){this._$alphas.length=0;for(let t=0;t<e.length;++t)this._$alphas.push(100*e[t])}get ratios(){return this._$ratios}set ratios(e){this._$ratios.length=0;for(let t=0;t<e.length;++t)this._$ratios.push(255*e[t])}get strength(){return this._$strength}set strength(e){this._$strength=k.$clamp(+e,xe.MIN_STRENGTH,xe.MAX_STRENGTH)}get type(){return this._$type}set type(e){switch(e=`${e}`.toLowerCase()){case"outer":case"full":this._$type=e;break;default:this._$type="inner"}}get knockout(){return this._$knockout}set knockout(e){this._$knockout=!!e}adjustment(){const e=[],t=[],a=[],r=new Map;for(let t=0;t<this._$ratios.length;++t){const a=this._$ratios[t]/255;e.push(a),r.set(a,t)}e.sort((function(e,t){switch(!0){case e>t:return 1;case e<t:return-1;default:return 0}}));for(let i=0;i<e.length;++i){const s=r.get(e[i]);t.push(this._$colors[s]),a.push(this._$alphas[s]/100)}return{ratios:e,colors:t,alphas:a}}isSame(e){if(this._$distance!==e._$distance)return!1;if(this._$angle!==e._$angle)return!1;for(let t=0;t<this._$colors.length;++t)if(this._$colors[t]!==e._$colors[t])return!1;for(let t=0;t<this._$alphas.length;++t)if(this._$alphas[t]!==e._$alphas[t])return!1;for(let t=0;t<this._$ratios.length;++t)if(this._$ratios[t]!==e._$ratios[t])return!1;return this._$strength===e._$strength&&(this._$type===e._$type&&(this._$knockout===e._$knockout&&super.isSame(e)))}createInstance(){const e=this.adjustment();return new window.next2d.filters.GradientGlowFilter(this.distance,this.angle,e.colors,e.alphas,e.ratios,this.blurX,this.blurY,this.strength,this.quality,this.type,this.knockout)}toParamArray(){const e=this.adjustment();return[null,this.distance,this.angle,e.colors,e.alphas,e.ratios,this.blurX,this.blurY,this.strength,this.quality,this.type,this.knockout]}toObject(){const e=this.adjustment();return{name:this.name,blurX:this.blurX,blurY:this.blurY,quality:this.quality,state:this.state,distance:this.distance,angle:this.angle,colors:e.colors,alphas:e.alphas,ratios:e.ratios,strength:this.strength,type:this.type,knockout:this.knockout}}}class Z{matrix(e=1,t=0,a=0,r=1,i=0,s=0){return this.transform(q.MATRIX(e,t,a,r,i,s))}translate(e,t=0){return this.transform(q.TRANSLATE(e,t))}scale(e,t=null){return this.transform(q.SCALE(e,null===t||isNaN(t)?e:t))}rotate(e,t=0,a=0){return this.transform(q.ROTATE(e*(Math.PI/180),t,a))}skewX(e){return this.transform(q.SKEW_X(e*(Math.PI/180)))}skewY(e){return this.transform(q.SKEW_Y(e*(Math.PI/180)))}}class K{constructor(){this._$buffer=null,this._$bitOffset=0,this._$byteOffset=0}setData(e){this._$buffer=e}getData(e){this.byteAlign();const t=this._$byteOffset+e,a=this._$buffer.slice(this._$byteOffset,t);return this._$byteOffset=t,a}getHeaderSignature(){let e="",t=3;for(;t;){const a=this.getUI8();switch(a){case 32:case 96:case 127:continue}e+=String.fromCharCode(a),--t}return e}getVersion(){return this.getUI8()}byteAlign(){this._$bitOffset&&(this._$byteOffset=this._$byteOffset+(this._$bitOffset+7)/8|0,this._$bitOffset=0)}byteCarry(){if(this._$bitOffset>7)this._$byteOffset=this._$byteOffset+(0|(this._$bitOffset+7)/8),this._$bitOffset&=7;else for(;this._$bitOffset<0;)--this._$byteOffset,this._$bitOffset+=8}getUIBits(e){let t=0;for(;e;)t<<=1,t|=this.getUIBit(),--e;return t}getUIBit(){return this.byteCarry(),this._$buffer[this._$byteOffset]>>7-this._$bitOffset++&1}getSIBits(e){const t=this.getUIBits(e),a=t&1<<e-1;return a?-(t^2*a-1)-1:t}getUI8(){return this.byteAlign(),this._$buffer[this._$byteOffset++]}getUI16(){return this.byteAlign(),this.getUI8()|this.getUI8()<<8}getUI32(){return this.byteAlign(),this.getUI8()|(this.getUI8()|(this.getUI8()|this.getUI8()<<8)<<8)<<8}}class V{constructor(){this._$folderId=0,this._$libraryId=0,this._$fileName="",this._$byteStream=new K,this._$bounds={xMin:0,xMax:0,yMin:0,yMax:0},this._$swfVersion=0,this._$info=null,this._$buildData=null,this._$fileSize=0,this._$mode="swf",this._$offset=0,this._$resolve=null}get mode(){return this._$mode}get fileSize(){return this._$fileSize}setData(e){return this._$byteStream.setData(e),this}run(e,t,a=0,r=0){this._$resolve=t,this._$fileName=e.replace(".swf",""),this._$folderId=a,this._$libraryId=r;const i=this._$byteStream.getHeaderSignature();switch(this._$byteStream.getVersion(),k.$saveProgress.parseSWF(),this._$fileSize=this._$byteStream.getUI32(),this._$mode="swf",i){case"FWS":return this.parseAndBuild();case"CWS":{if(k.$unzipWorkerActive)return void k.$unzipQueues.push(this);k.$unzipWorkerActive=!0,k.$unzipWorker||(k.$unzipWorker=new Worker(k.$unzipURL));const e=k.$unzipWorker;e.onmessage=k.$unzipHandler.bind(this);const t=this._$byteStream._$buffer;e.postMessage({fileSize:this._$fileSize,mode:this._$mode,buffer:t},[t.buffer])}break;case"ZWS":{if(k.$unlzmaWorkerActive)return void k.$unlzmaQueues.push(this);k.$unlzmaWorkerActive=!0;const e=new Worker(k.$unlzmaWorkerURL);e.onmessage=k.$unlzmaHandler.bind(this);const t=this._$byteStream._$buffer;e.postMessage({fileSize:this._$fileSize,mode:this._$mode,buffer:t},[t.buffer])}break;default:throw new Error("this data is not swf.")}}parseAndBuild(){this._$byteStream.byteAlign();const e=this._$byteStream.getUIBits(5);if(this._$bounds.xMin=this._$byteStream.getSIBits(e),this._$bounds.xMax=this._$byteStream.getSIBits(e),this._$bounds.yMin=this._$byteStream.getSIBits(e),this._$bounds.yMax=this._$byteStream.getSIBits(e),this._$byteStream.getUI16(),this._$byteStream.getUI16(),this._$offset=this._$byteStream._$byteOffset,k.$parserWorkerWait)return void k.$parserQueues.push(this);k.$parserWorkerWait=!0,k.$parserWorker||(k.$parserWorker=new Worker(k.$parserURL)),k.$parserWorker.onmessage=k.$parserHandler.bind(this);const t=this._$byteStream._$buffer;k.$parserWorker.postMessage({version:this._$swfVersion,offset:this._$offset,buffer:t},[t.buffer])}build(){const e=this.buildData.info,t=this.buildData.parent;this.loaderInfo._$bytes._$byteArray=this.buildData.buffer,this.loaderInfo._$actionScriptVersion=e._$asv;let a=!1,r=this.loaderInfo._$symbols.length;if(r){const e=this.loaderInfo._$applicationDomain,t=k.$getArray();for(let i=0;i<r;++i){const r=this.loaderInfo._$symbols[i],s=r.tagId;switch(0===s&&(a=!0),!0){case s in this.loaderInfo._$characters:case this.loaderInfo._$fonts.has(s):{const t=k.$getPackage(e,r.path);if(t._$loaderInfoId===this.loaderInfo._$id||!("__$$characterId"in t.prototype)){t.prototype.__$$characterId=s,t.prototype.__$$loaderInfoId=this.loaderInfo._$id;const e=t.__$$slots,a=k.$Object.keys(e),r=a.length;for(let t=0;t<r;++t){const r=e[a[t]];r.__$$classInit&&r.__$$classInit()}k.$poolArray(a)}}}t[s]=r.path}this.loaderInfo._$symbols=t}if(a){const e=k.$buildAVM2(this.loaderInfo._$applicationDomain,this.loaderInfo._$symbols[0]);e._$root=e,e._$symbolBuild(0,this.loaderInfo._$id,t),this.loaderInfo._$content=e}else z._$targetBuild(this.loaderInfo._$content,t),this.loaderInfo._$content._$characterBuild();if(r=e._$sceneInfo.length,r){const t=k.$getArray();for(let a=0;a<r;++a){const r=e._$sceneInfo[a],i=new Scene(r.name,k.$getArray(),1);i._$offset=r.offset;const s=a+1|0;let n=this.loaderInfo._$content._$totalFrames;s in e._$sceneInfo&&(n=0|e._$sceneInfo[s].offset),i._$numFrames=n-i._$offset|0;const o=this.loaderInfo._$content.currentLabels;if(o){const e=o.length,t=k.$getArray();for(let a=0;a<e;++a){const e=o[a];e.frame>r.offset&&e.frame<=n&&(t[t.length]=e)}i._$labels=t}t[t.length]=i}this.loaderInfo._$content._$scenes=t}}}class J{static get CLOSE_PATH(){return 1}static get MOVE_TO(){return 2}static get HORIZ_LINE_TO(){return 4}static get VERT_LINE_TO(){return 8}static get LINE_TO(){return 16}static get CURVE_TO(){return 32}static get SMOOTH_CURVE_TO(){return 64}static get QUAD_TO(){return 128}static get SMOOTH_QUAD_TO(){return 256}static get ARC(){return 512}static get CIRCLE(){return 1024}static get LINE_COMMANDS(){return J.LINE_TO|J.HORIZ_LINE_TO|J.VERT_LINE_TO}static get DRAWING_COMMANDS(){return J.HORIZ_LINE_TO|J.VERT_LINE_TO|J.LINE_TO|J.CURVE_TO|J.SMOOTH_CURVE_TO|J.QUAD_TO|J.SMOOTH_QUAD_TO|J.ARC}}class q{static INFO(e){let t=0,a=0,r=NaN,i=NaN;return function(s){if(isNaN(r)&&!(s.type&J.MOVE_TO))throw new Error("path must start with moveto");const n=e(s,t,a,r,i);return s.type&J.CLOSE_PATH&&(t=r,a=i),void 0!==s.x&&(t=s.relative?t+s.x:s.x),void 0!==s.y&&(a=s.relative?a+s.y:s.y),s.type&J.MOVE_TO&&(r=t,i=a),n}}static MATRIX(e,t,a,r,i,s){return q.INFO(((n,o,l,c)=>{const d=n.x1,h=n.x2,u=n.relative&&!isNaN(c),m=void 0!==n.x?n.x:u?0:o,g=void 0!==n.y?n.y:u?0:l;function p(e){return e*e}n.type&J.HORIZ_LINE_TO&&0!==t&&(n.type=J.LINE_TO,n.y=n.relative?0:l),n.type&J.VERT_LINE_TO&&0!==a&&(n.type=J.LINE_TO,n.x=n.relative?0:o),void 0!==n.x&&(n.x=n.x*e+g*a+(u?0:i)),void 0!==n.y&&(n.y=m*t+n.y*r+(u?0:s)),void 0!==n.x1&&(n.x1=n.x1*e+n.y1*a+(u?0:i)),void 0!==n.y1&&(n.y1=d*t+n.y1*r+(u?0:s)),void 0!==n.x2&&(n.x2=n.x2*e+n.y2*a+(u?0:i)),void 0!==n.y2&&(n.y2=h*t+n.y2*r+(u?0:s));const f=e*r-t*a;if(void 0!==n.xRot&&(1!==e||0!==t||0!==a||1!==r))if(0===f)delete n.rX,delete n.rY,delete n.xRot,delete n.lArcFlag,delete n.sweepFlag,n.type=J.LINE_TO;else{const i=n.xRot*Math.PI/180,s=Math.sin(i),o=Math.cos(i),l=1/p(n.rX),c=1/p(n.rY),d=p(o)*l+p(s)*c,h=2*s*o*(l-c),u=p(s)*l+p(o)*c,m=d*r*r-h*t*r+u*t*t,g=h*(e*r+t*a)-2*(d*a*r+u*e*t),$=d*a*a-h*e*a+u*e*e,y=(Math.atan2(g,m-$)+Math.PI)%Math.PI/2,_=Math.sin(y),b=Math.cos(y);n.rX=Math.abs(f)/Math.sqrt(m*p(b)+g*_*b+$*p(_)),n.rY=Math.abs(f)/Math.sqrt(m*p(_)-g*_*b+$*p(b)),n.xRot=180*y/Math.PI}return void 0!==n.sweepFlag&&0>f&&(n.sweepFlag=+!n.sweepFlag),n}))}static TRANSLATE(e,t=0){return q.MATRIX(1,0,0,1,e,t)}static SCALE(e,t){return q.MATRIX(e,0,0,t,0,0)}static ROTATE(e,t=0,a=0){const r=Math.sin(e),i=Math.cos(e);return q.MATRIX(i,r,-r,i,t-t*i+a*r,a-t*r-a*i)}static SKEW_X(e){return q.MATRIX(1,0,Math.atan(e),1,0,0)}static SKEW_Y(e){return q.MATRIX(1,Math.atan(e),0,1,0,0)}}class Q extends Z{constructor(){super(),this._$curNumber="",this._$curCommandType=-1,this._$curCommandRelative=!1,this._$canParseCommandOrComma=!0,this._$curNumberHasExp=!1,this._$curNumberHasExpDigits=!1,this._$curNumberHasDecimal=!1,this._$curArgs=[],this._$commands=[],this._$transforms=[]}static get COMMAND_ARG_COUNTS(){return{[J.MOVE_TO]:2,[J.LINE_TO]:2,[J.HORIZ_LINE_TO]:1,[J.VERT_LINE_TO]:1,[J.CLOSE_PATH]:0,[J.QUAD_TO]:4,[J.SMOOTH_QUAD_TO]:2,[J.CURVE_TO]:6,[J.SMOOTH_CURVE_TO]:4,[J.ARC]:7}}execute(e){this._$commands=[];for(let t=0;t<e.length;t++){const a=e[t],r=!(this._$curCommandType!==J.ARC||3!==this._$curArgs.length&&4!==this._$curArgs.length||1!==this._$curNumber.length||"0"!==this._$curNumber&&"1"!==this._$curNumber),i=this.isDigit(a)&&("0"===this._$curNumber&&"0"===a||r);if(!this.isDigit(a)||i)if("e"!==a&&"E"!==a)if("-"!==a&&"+"!==a||!this._$curNumberHasExp||this._$curNumberHasExpDigits)if("."!==a||this._$curNumberHasExp||this._$curNumberHasDecimal||r){if(this._$curNumber&&-1!==this._$curCommandType){const e=Number(this._$curNumber);if(isNaN(e))throw new Error(`Invalid number ending at ${t}`);if(this._$curCommandType===J.ARC){if((0===this._$curArgs.length||1===this._$curArgs.length)&&0>e)throw new Error(`Expected positive number, got "${e}" at index "${t}"`);if((3===this._$curArgs.length||4===this._$curArgs.length)&&"0"!==this._$curNumber&&"1"!==this._$curNumber)throw new Error(`Expected a flag, got "${this._$curNumber}" at index "${t}"`)}this._$curArgs.push(e),this._$curArgs.length===Q.COMMAND_ARG_COUNTS[this._$curCommandType]&&this.pushCommand(),this._$curNumber="",this._$curNumberHasExpDigits=!1,this._$curNumberHasExp=!1,this._$curNumberHasDecimal=!1,this._$canParseCommandOrComma=!0}if(!this.isWhiteSpace(a))if(","===a&&this._$canParseCommandOrComma)this._$canParseCommandOrComma=!1;else if("+"!==a&&"-"!==a&&"."!==a)if(i)this._$curNumber=a,this._$curNumberHasDecimal=!1;else{if(0!==this._$curArgs.length)throw new Error(`Unterminated command at index ${t}.`);if(!this._$canParseCommandOrComma)throw new Error(`Unexpected character "${a}" at index ${t}. Command cannot follow comma`);switch(this._$canParseCommandOrComma=!1,a){case"z":case"Z":this._$commands.push({type:J.CLOSE_PATH}),this._$canParseCommandOrComma=!0,this._$curCommandType=-1;break;case"h":case"H":this._$curCommandType=J.HORIZ_LINE_TO,this._$curCommandRelative="h"===a;break;case"v":case"V":this._$curCommandType=J.VERT_LINE_TO,this._$curCommandRelative="v"===a;break;case"m":case"M":this._$curCommandType=J.MOVE_TO,this._$curCommandRelative="m"===a;break;case"l":case"L":this._$curCommandType=J.LINE_TO,this._$curCommandRelative="l"===a;break;case"c":case"C":this._$curCommandType=J.CURVE_TO,this._$curCommandRelative="c"===a;break;case"s":case"S":this._$curCommandType=J.SMOOTH_CURVE_TO,this._$curCommandRelative="s"===a;break;case"q":case"Q":this._$curCommandType=J.QUAD_TO,this._$curCommandRelative="q"===a;break;case"t":case"T":this._$curCommandType=J.SMOOTH_QUAD_TO,this._$curCommandRelative="t"===a;break;case"a":case"A":this._$curCommandType=J.ARC,this._$curCommandRelative="a"===a;break;default:throw new Error(`Unexpected character "${a}" at index ${t}.`)}}else this._$curNumber=a,this._$curNumberHasDecimal="."===a}else this._$curNumber+=a,this._$curNumberHasDecimal=!0;else this._$curNumber+=a;else this._$curNumber+=a,this._$curNumberHasExp=!0;else this._$curNumber+=a,this._$curNumberHasExpDigits=this._$curNumberHasExp}if(-1!==this._$curCommandType){const e=Number(this._$curNumber);isNaN(e)||(this._$curArgs.push(e),this._$curArgs.length===Q.COMMAND_ARG_COUNTS[this._$curCommandType]&&this.pushCommand())}return this.executeTransform(),this._$commands}executeTransform(){for(let e=0;e<this._$transforms.length;++e){const t=this._$transforms[e],a=[];for(let e=0;e<this._$commands.length;++e){const r=t(this._$commands[e]);Array.isArray(r)?a.push(...r):a.push(r)}this._$commands=a}}pushCommand(){switch(this._$curCommandType){case J.HORIZ_LINE_TO:this._$commands.push({type:J.HORIZ_LINE_TO,relative:this._$curCommandRelative,x:this._$curArgs[0]});break;case J.VERT_LINE_TO:this._$commands.push({type:J.VERT_LINE_TO,relative:this._$curCommandRelative,y:this._$curArgs[0]});break;case J.MOVE_TO:case J.LINE_TO:case J.SMOOTH_QUAD_TO:this._$commands.push({type:this._$curCommandType,relative:this._$curCommandRelative,x:this._$curArgs[0],y:this._$curArgs[1]}),J.MOVE_TO===this._$curCommandType&&(this._$curCommandType=J.LINE_TO);break;case J.CURVE_TO:this._$commands.push({type:J.CURVE_TO,relative:this._$curCommandRelative,x1:this._$curArgs[0],y1:this._$curArgs[1],x2:this._$curArgs[2],y2:this._$curArgs[3],x:this._$curArgs[4],y:this._$curArgs[5]});break;case J.SMOOTH_CURVE_TO:this._$commands.push({type:J.SMOOTH_CURVE_TO,relative:this._$curCommandRelative,x2:this._$curArgs[0],y2:this._$curArgs[1],x:this._$curArgs[2],y:this._$curArgs[3]});break;case J.QUAD_TO:this._$commands.push({type:J.QUAD_TO,relative:this._$curCommandRelative,x1:this._$curArgs[0],y1:this._$curArgs[1],x:this._$curArgs[2],y:this._$curArgs[3]});break;case J.ARC:this._$commands.push({type:J.ARC,relative:this._$curCommandRelative,rX:this._$curArgs[0],rY:this._$curArgs[1],xRot:this._$curArgs[2],lArcFlag:this._$curArgs[3],sweepFlag:this._$curArgs[4],x:this._$curArgs[5],y:this._$curArgs[6]})}this._$curArgs.length=0,this._$canParseCommandOrComma=!0}isDigit(e){return"0".charCodeAt(0)<=e.charCodeAt(0)&&e.charCodeAt(0)<="9".charCodeAt(0)}isWhiteSpace(e){return" "===e||"\t"===e||"\r"===e||"\n"===e}transform(e){return this._$transforms.push(e),this}}class ee{static parse(e,t,a=0){const r=(new DOMParser).parseFromString(e,"image/svg+xml").children[0];if("svg"!==r.tagName)return;const i=new Map,s=r.attributes,n=s.length;for(let e=0;e<n;++e){const t=s[e];"style"!==t.name&&i.set(t.name,t.value)}if(r.hasAttribute("style")){const e=r.style,t=e.length;for(let a=0;a<t;++a){const t=e[a];i.set(t,e[t])}}ee.parent=r,ee.parseElement(r,t,i,new Map,a);const o=[];for(const e of t._$layers.values())o.unshift(e);t.clearLayer();for(let e=0;e<o.length;++e)t.setLayer(e,o[e]);ee.parent=null}static parseElement(e,t,a,r,i=0,s=!1){const n=e.children,o=n.length;for(let e=0;o>e;++e){const o=n[e];let l=null,c=null;if("use"!==o.tagName.toLowerCase()){if(o.hasAttribute("clip-path")&&(c=/url\((.+?)\)/gi.exec(o.getAttribute("clip-path").replace(/#/gi,"").replace(/"/gi,"").replace(/'/gi,""))[1]),o.style.clipPath&&(c=/url\((.+?)\)/gi.exec(o.style.clipPath.replace(/#/gi,"").replace(/"/gi,"").replace(/'/gi,""))[1]),!c&&o.hasAttribute("class")){const e=o.classList,t=e.length;for(let a=0;a<t;++a){const t=e[a];let i=null;if(r.has(`#${t}`)&&(i=r.get(`#${t}`)),r.has(`.${t}`)&&(i=r.get(`.${t}`)),i&&""!==i.style.clipPath){c=/url\((.+?)\)/gi.exec(i.style.clipPath.replace(/#/gi,"").replace(/"/gi,"").replace(/'/gi,""))[1];break}}}if(c){const e=ee.parent.getElementById(c);e&&(l=ee.createMovieClip(t,e,a,r,i),ee.parseElement(e,l,a,r,i,!0))}}let d=null;switch(o.tagName.toLowerCase()){case"path":ee.createGraphics(o,l||t,a,r,null,i,s);break;case"g":{d=new Map;const e=o.attributes,t=e.length;for(let a=0;a<t;++a){const t=e[a];"style"!==t.name&&d.set(t.name,t.value)}for(const[e,t]of a)d.has(e)||d.set(e,t);const r=o.style;for(let e=0;e<r.length;++e){const t=r[e];d.set(t,o.style[t])}}break;case"rect":{const e=o.hasAttribute("x")?parseFloat(o.getAttribute("x")):0,n=o.hasAttribute("y")?parseFloat(o.getAttribute("y")):0,c=o.hasAttribute("width")?parseFloat(o.getAttribute("width")):0,d=o.hasAttribute("height")?parseFloat(o.getAttribute("height")):0;if(!c||!d)continue;const h=[];if(o.hasAttribute("rx")||o.hasAttribute("ry")){const t=parseFloat(o.getAttribute("rx"))/2,a=parseFloat(o.getAttribute("ry"))/2,r=4/3*(Math.SQRT2-1),i=r*t,s=r*a,l=e+t,u=e+c,m=u-t,g=n+a,p=n+d,f=p-a;h.push({type:J.MOVE_TO,relative:!1,x:l,y:n},{type:J.LINE_TO,relative:!1,x:m,y:n},{type:J.CURVE_TO,relative:!1,x1:m+i,y1:n,x2:u,y2:g-s,x:u,y:g},{type:J.LINE_TO,relative:!1,x:u,y:f},{type:J.CURVE_TO,relative:!1,x1:u,y1:f+s,x2:m+i,y2:p,x:m,y:p},{type:J.LINE_TO,relative:!1,x:l,y:p},{type:J.CURVE_TO,relative:!1,x1:l-i,y1:p,x2:e,y2:f+s,x:e,y:f},{type:J.LINE_TO,relative:!1,x:e,y:g},{type:J.CURVE_TO,relative:!1,x1:e,y1:g-s,x2:l-i,y2:n,x:l,y:n})}else h.push({type:J.MOVE_TO,relative:!1,x:e,y:n},{type:J.LINE_TO,relative:!1,x:e+c,y:n},{type:J.LINE_TO,relative:!1,x:e+c,y:n+d},{type:J.LINE_TO,relative:!1,x:e,y:n+d},{type:J.LINE_TO,relative:!1,x:e,y:n});const u=document.createElement("path"),m=o.attributes,g=m.length;for(let e=0;e<g;++e){const t=m[e];switch(t.name){case"x":case"y":case"width":case"height":continue}u.setAttribute(t.name,t.value)}ee.createGraphics(u,l||t,a,r,h,i,s)}break;case"circle":{const e=o.hasAttribute("cx")?parseFloat(o.getAttribute("cx")):0,n=o.hasAttribute("cy")?parseFloat(o.getAttribute("cy")):0,c=o.hasAttribute("r")?parseFloat(o.getAttribute("r")):0;if(!c)continue;const d=[{type:J.MOVE_TO,relative:!1,x:e-c,y:n},{type:J.ARC,relative:!1,x:e+c,y:n,rX:c,rY:c,lArcFlag:0,sweepFlag:0,xRot:180},{type:J.ARC,relative:!1,x:e-c,y:n,rX:c,rY:c,lArcFlag:0,sweepFlag:0,xRot:180},{type:J.CIRCLE,x:e,y:n}],h=document.createElement("path"),u=o.attributes,m=u.length;for(let e=0;e<m;++e){const t=u[e];switch(t.name){case"cx":case"cy":case"r":continue}h.setAttribute(t.name,t.value)}ee.createGraphics(h,l||t,a,r,d,i,s)}break;case"ellipse":{const e=o.hasAttribute("cx")?parseFloat(o.getAttribute("cx")):0,n=o.hasAttribute("cy")?parseFloat(o.getAttribute("cy")):0,c=o.hasAttribute("rx")?parseFloat(o.getAttribute("rx")):0,d=o.hasAttribute("ry")?parseFloat(o.getAttribute("ry")):0,h=[{type:J.MOVE_TO,relative:!1,x:e-c,y:n},{type:J.ARC,relative:!1,x:e+c,y:n,rX:c,rY:d,lArcFlag:0,sweepFlag:0,xRot:180},{type:J.ARC,relative:!1,x:e-c,y:n,rX:c,rY:d,lArcFlag:0,sweepFlag:0,xRot:180},{type:J.CIRCLE,x:e,y:n}],u=document.createElement("path"),m=o.attributes,g=m.length;for(let e=0;e<g;++e){const t=m[e];switch(t.name){case"cx":case"cy":case"rx":case"ry":continue}u.setAttribute(t.name,t.value)}ee.createGraphics(u,l||t,a,r,h,i,s)}break;case"polygon":case"polyline":{if(!o.hasAttribute("points"))continue;const e=o.getAttribute("points"),n=ee._$adjParam(e.replace(/,/g," ").replace(/-/g," -").trim().split(" ")),c=[{type:J.MOVE_TO,relative:!1,x:+n[0],y:+n[1]}];for(let e=2;e<n.length;e+=2)c.push({type:J.LINE_TO,relative:!1,x:+n[e],y:+n[e+1]});"polygon"===o.tagName&&c.push({type:J.CLOSE_PATH});const d=document.createElement("path"),h=o.attributes,u=h.length;for(let e=0;e<u;++e){const t=h[e];"points"!==t.name&&d.setAttribute(t.name,t.value)}ee.createGraphics(d,l||t,a,r,c,i,s)}break;case"line":{const e=o.hasAttribute("x1")?parseFloat(o.getAttribute("x1")):0,n=o.hasAttribute("y1")?parseFloat(o.getAttribute("y1")):0,c=o.hasAttribute("x2")?parseFloat(o.getAttribute("x2")):0,d=o.hasAttribute("y2")?parseFloat(o.getAttribute("y2")):0;if(e===c&&n===d)continue;const h=[{type:J.MOVE_TO,relative:!1,x:e,y:n},{type:J.LINE_TO,relative:!1,x:c,y:d}],u=document.createElement("path"),m=o.attributes,g=m.length;for(let e=0;e<g;++e){const t=m[e];switch(t.name){case"x1":case"y1":case"x2":case"y2":continue}u.setAttribute(t.name,t.value)}ee.createGraphics(u,l||t,a,r,h,i,s)}break;case"style":{const e=o.sheet.cssRules,t=e.length;for(let a=0;a<t;++a){const t=e[a];r.set(t.selectorText,t)}}break;case"use":{let e=null;switch(!0){case o.hasAttribute("href"):e=o.getAttribute("href").slice(1);break;case o.hasAttribute("xlink:href"):e=o.getAttribute("xlink:href").slice(1)}if(!e)continue;const s=ee.parent.getElementById(e),n=document.createElement("path"),l=o.attributes,c=l.length;for(let e=0;e<c;++e){const t=l[e];switch(t.name){case"href":case"xlink:href":continue}n.setAttribute(t.name,t.value)}const d=s.attributes,h=d.length;for(let e=0;e<h;++e){const t=d[e];n.setAttribute(t.name,t.value)}const u=document.createElement("element");u.appendChild(n),ee.parseElement(u,t,a,r,i)}continue;case"clippath":if(!s)continue}if(ee.parseElement(o,l||t,d||a,r,i),l){for(const[e,t]of l._$layers)e&&(t.mode=B.MASK_IN,t.maskId=0);l=null}}}static createMovieClip(e,t,a,r,i=0){const s=k.$currentWorkSpace(),n=s.nextLibraryId,o=s.addLibrary(k.$libraryController.createInstance(A.MOVIE_CLIP,`MovieClip_${n}`,n));o.folderId=i;const l=new T;l.name=`Layer_${e._$layers.size}`,e.setLayer(e._$layers.size,l);const c=new M;c.libraryId=o.id;const d=l.adjustmentLocation(1);c.startFrame=d.startFrame,c.endFrame=d.endFrame;let h=0,u=0;if(t.hasAttribute("transform")){const e=t.getAttribute("transform");if(e.indexOf("translate")>-1){const t=/translate\((.+?)\)/gi.exec(e)[1],a=ee._$adjParam(t.replace(/,/g," ").replace(/-/g," -").trim().split(" ")),r=[];for(let e=0;e<a.length;++e){const t=a[e];t&&r.push(+t)}h+=parseFloat(r[0]),u+=parseFloat(r[1])}}if(a.has("transform")){const e=a.get("transform");if(e.indexOf("translate")>-1){const t=/translate\((.+?)\)/gi.exec(e)[1],a=ee._$adjParam(t.replace(/,/g," ").replace(/-/g," -").trim().split(" ")),r=[];for(let e=0;e<a.length;++e){const t=a[e];t&&r.push(+t)}h+=parseFloat(r[0]),u+=parseFloat(r[1])}}if(r.has("transform")){const e=r.get("transform");if(e.indexOf("translate")>-1){const t=/translate\((.+?)\)/gi.exec(e)[1],a=ee._$adjParam(t.replace(/,/g," ").replace(/-/g," -").trim().split(" ")),r=[];for(let e=0;e<a.length;++e){const t=a[e];t&&r.push(+t)}h+=parseFloat(r[0]),u+=parseFloat(r[1])}}return c.setPlace(d.startFrame,{frame:d.startFrame,matrix:[1,0,0,1,isNaN(h)?0:h,isNaN(u)?0:u],colorTransform:[1,1,1,1,0,0,0,0],blendMode:"normal",filter:[],loop:k.$getDefaultLoopConfig(),depth:l._$characters.length}),l.addCharacter(c),o}static createShape(e,t,a,r,i=0,s=!1){const n=k.$currentWorkSpace(),o=n.nextLibraryId,l=n.addLibrary(k.$libraryController.createInstance(A.SHAPE,`Shape_${o}`,o));l.folderId=i;const c=new T;c.name=`Layer_${e._$layers.size}`,s&&(c.mode=B.MASK),e.setLayer(e._$layers.size,c);const d=new M;d.libraryId=l.id;const h=c.adjustmentLocation(1);d.startFrame=h.startFrame,d.endFrame=h.endFrame;let u=0,m=0;if(t.hasAttribute("x")&&(u+=parseFloat(t.getAttribute("x"))),t.hasAttribute("y")&&(m+=parseFloat(t.getAttribute("y"))),t.hasAttribute("transform")){const e=t.getAttribute("transform");if(e.indexOf("translate")>-1){const t=/translate\((.+?)\)/gi.exec(e)[1],a=ee._$adjParam(t.replace(/,/g," ").replace(/-/g," -").trim().split(" ")),r=[];for(let e=0;e<a.length;++e){const t=a[e];t&&r.push(+t)}u+=parseFloat(r[0]),m+=parseFloat(r[1])}}if(a.has("transform")){const e=a.get("transform");if(e.indexOf("translate")>-1){const t=/translate\((.+?)\)/gi.exec(e)[1],a=ee._$adjParam(t.replace(/,/g," ").replace(/-/g," -").trim().split(" ")),r=[];for(let e=0;e<a.length;++e){const t=a[e];t&&r.push(+t)}u+=parseFloat(r[0]),m+=parseFloat(r[1])}}if(r.has("transform")){const e=r.get("transform");if(e.indexOf("translate")>-1){const t=/translate\((.+?)\)/gi.exec(e)[1],a=ee._$adjParam(t.replace(/,/g," ").replace(/-/g," -").trim().split(" ")),r=[];for(let e=0;e<a.length;++e){const t=a[e];t&&r.push(+t)}u+=parseFloat(r[0]),m+=parseFloat(r[1])}}return d.setPlace(h.startFrame,{frame:h.startFrame,matrix:[1,0,0,1,isNaN(u)?0:u,isNaN(m)?0:m],colorTransform:[1,1,1,1,0,0,0,0],blendMode:"normal",filter:[],depth:c._$characters.length}),c.addCharacter(d),l}static getFillObject(e,t,a){let r=null;switch(!0){case e.hasAttribute("fill"):r=e.getAttribute("fill");break;case""!==e.style.fill:r=e.style.fill;break;case t.has("fill"):r=t.get("fill");break;default:{const t=e.classList,i=t.length;for(let e=0;e<i;++e){const i=t[e];let s=null;switch(!0){case a.has(`#${i}`):s=a.get(`#${i}`);break;case a.has(`.${i}`):s=a.get(`.${i}`);break;default:continue}s&&(""!==s.style.fill&&(r=s.style.fill))}}}let i=null;switch(!0){case e.hasAttribute("fill-opacity"):i=e.getAttribute("fill-opacity");break;case e.hasAttribute("opacity"):i=e.getAttribute("opacity");break;case""!==e.style.fillOpacity:i=e.style.fillOpacity;break;case""!==e.style.opacity:i=e.style.opacity;break;case t.has("fill-opacity"):i=t.get("fill-opacity");break;case t.has("opacity"):i=t.get("opacity");break;default:{const t=e.classList,r=t.length;for(let e=0;e<r;++e){const r=t[e];let s=null;switch(!0){case a.has(`#${r}`):s=a.get(`#${r}`);break;case a.has(`.${r}`):s=a.get(`.${r}`);break;default:continue}if(s){""!==s.style.fillOpacity&&(i=s.style.fillOpacity),""!==s.style.opacity&&(i=s.style.opacity);break}}}}let s=null===i?1:+i,n=0;if(r)switch(!0){case r.indexOf("rgba")>-1:{const e=/rgba\((.+?)\)/gi.exec(r)[1].trim().split(",");n="0x",n+=parseInt(e[0].trim()).toString(16),n+=parseInt(e[1].trim()).toString(16),n+=parseInt(e[2].trim()).toString(16),n|=0,s=+e[3].trim()}break;case r.indexOf("rgb")>-1:{const e=/rgb\((.+?)\)/gi.exec(r)[1].trim().split(",");n="0x",n+=parseInt(e[0].trim()).toString(16),n+=parseInt(e[1].trim()).toString(16),n+=parseInt(e[2].trim()).toString(16),n|=0}break;case"transparent"===r:case"none"===r:s=0;break;default:n=r}return{color:n,alpha:s}}static getStrokeObject(e,t,a){let r="none";switch(!0){case e.hasAttribute("stroke-linecap"):r=e.getAttribute("stroke-linecap");break;case""!==e.style.strokeLinecap:r=e.style.strokeLinecap;break;case t.has("stroke-linecap"):r=t.get("stroke-linecap");break;default:{const t=e.classList,i=t.length;for(let e=0;e<i;++e){const i=t[e];let s=null;switch(!0){case a.has(`#${i}`):s=a.get(`#${i}`);break;case a.has(`.${i}`):s=a.get(`.${i}`);break;default:continue}s&&(""!==s.style.strokeLinecap&&(r=s.style.strokeLinecap))}}}let i="miter";switch(!0){case e.hasAttribute("stroke-linejoin"):i=e.getAttribute("stroke-linejoin");break;case""!==e.style.strokeLinejoin:i=e.style.strokeLinejoin;break;case t.has("stroke-linejoin"):i=t.get("stroke-linejoin");break;default:{const t=e.classList,r=t.length;for(let e=0;e<r;++e){const r=t[e];let s=null;switch(!0){case a.has(`#${r}`):s=a.get(`#${r}`);break;case a.has(`.${r}`):s=a.get(`.${r}`);break;default:continue}s&&(""!==s.style.strokeLinejoin&&(i=s.style.strokeLinejoin))}}}let s=null;switch(!0){case e.hasAttribute("stroke"):s=e.getAttribute("stroke");break;case""!==e.style.stroke:s=e.style.stroke;break;case t.has("stroke"):s=t.get("stroke");break;default:{const t=e.classList,r=t.length;for(let e=0;e<r;++e){const r=t[e];let i=null;switch(!0){case a.has(`#${r}`):i=a.get(`#${r}`);break;case a.has(`.${r}`):i=a.get(`.${r}`);break;default:continue}i&&(""!==i.style.stroke&&(s=i.style.stroke))}}}let n=s?1:0;switch(!0){case e.hasAttribute("stroke-width"):n=parseFloat(e.getAttribute("stroke-width"));break;case""!==e.style.strokeWidth:n=parseFloat(e.style.strokeWidth);break;case t.has("stroke-width"):n=parseFloat(t.get("stroke-width"));break;default:{const t=e.classList,r=t.length;for(let e=0;e<r;++e){const r=t[e];let i=null;switch(!0){case a.has(`#${r}`):i=a.get(`#${r}`);break;case a.has(`.${r}`):i=a.get(`.${r}`);break;default:continue}i&&(""!==i.style.strokeWidth&&(n=parseFloat(i.style.strokeWidth)))}}}let o=null;switch(!0){case e.hasAttribute("stroke-opacity"):o=e.getAttribute("stroke-opacity");break;case e.hasAttribute("opacity"):o=e.getAttribute("opacity");break;case""!==e.style.strokeOpacity:o=e.style.strokeOpacity;break;case""!==e.style.opacity:o=e.style.opacity;break;case t.has("stroke-opacity"):o=t.get("stroke-opacity");break;case t.has("opacity"):o=t.get("opacity");break;default:{const t=e.classList,r=t.length;for(let e=0;e<r;++e){const r=t[e];let i=null;switch(!0){case a.has(`#${r}`):i=a.get(`#${r}`);break;case a.has(`.${r}`):i=a.get(`.${r}`);break;default:continue}i&&(""!==i.style.strokeOpacity&&(o=i.style.strokeOpacity),""!==i.style.opacity&&(o=i.style.opacity))}}}let l=null===o?1:o,c=0;if(s)switch(!0){case s.indexOf("rgba")>-1:{const e=/rgba\((.+?)\)/gi.exec(s)[1].trim().split(",");c="0x",c+=+e[0].trim(),c+=+e[1].trim(),c+=+e[2].trim(),c|=0,l=+e[3].trim()}break;case s.indexOf("rgb")>-1:{const e=/rgb\((.+?)\)/gi.exec(s)[1].trim().split(",");c="0x",c+=+e[0].trim(),c+=+e[1].trim(),c+=+e[2].trim(),c|=0}break;case"transparent"===s:case"none"===s:l=0;break;default:c=s}return{color:c,alpha:l,width:n,caps:"butt"===r?"none":r,join:i}}static createParser(e,t){let a=new Q;for(let r=0;2>r;++r){let i=null;switch(r){case 0:t.size&&t.has("transform")&&(i=t.get("transform"));break;case 1:e.hasAttribute("transform")&&(i=e.getAttribute("transform"))}if(i){const e=["matrix","scale","rotate","skewX","skewY"],t=[];for(let a=0;e.length>a;++a){const r=e[a],s=i.indexOf(r);-1!==s&&t.push({index:s,name:r})}t.sort(((e,t)=>e.index>t.index?1:t.index>e.index?-1:0));for(let e=0;t.length>e;++e){const r=t[e].name,s=ee._$adjParam(new RegExp(`${r}\\((.+?)\\)`,"gi").exec(i)[1].replace(/,/g," ").replace(/-/g," -").trim().split(" ")),n=[];for(let e=0;e<s.length;++e){const t=s[e];t&&n.push(+t)}a=a[r](n[0],n[1],n[2],n[3],n[4],n[5])}}}return a}static createGraphics(e,t,a,r,i=null,s=0,n=!1){if(!i&&!e.hasAttribute("d"))return;const{Shape:o,Graphics:l}=window.next2d.display,c=ee.createShape(t,e,a,r,s,n),d=(new o).graphics,h=ee.getFillObject(e,a,r);(n||h.alpha)&&d.beginFill(h.color,h.alpha);const u=ee.getStrokeObject(e,a,r);u.width&&u.alpha&&d.lineStyle(u.width,u.color,u.alpha,u.caps,u.join);const m=ee.createParser(e,a);let g=0,p=0,f=0,$=0;i?(m._$commands=i,m.executeTransform()):i=m.execute(e.getAttribute("d"));for(let e=0;i.length>e;++e){const t=i[e];switch(t.type){case J.MOVE_TO:t.relative?(g+=t.x,p+=t.y):(g=t.x,p=t.y),d._$lines&&d._$lines.length>1&&(d.endLine(),d._$pointerX=0,d._$pointerY=0,d.lineStyle(u.width,u.color,u.alpha,u.caps,u.join)),d.moveTo(g,p);break;case J.LINE_TO:t.relative?(g+=t.x,p+=t.y):(g=t.x,p=t.y),f=g,$=p,d.lineTo(g,p);break;case J.CIRCLE:f=g=t.x,$=p=t.y;break;case J.ARC:{let e=t.x,a=t.y;t.relative&&(e+=g,a+=p);const r=ee._$arcToCurve(g,p,e,a,t.lArcFlag,t.sweepFlag,t.rX,t.rY,t.xRot);for(let e=0;e<r.length;++e){const t=r[e];d.cubicCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])}f=g=e,$=p=a}break;case J.CURVE_TO:{let e=t.x1,a=t.y1,r=t.x2,i=t.y2,s=t.x,n=t.y;t.relative&&(e+=g,a+=p,r+=g,i+=p,s+=g,n+=p),d.cubicCurveTo(e,a,r,i,s,n),g=s,p=n,f=2*s-r,$=2*n-i}break;case J.SMOOTH_CURVE_TO:{let e=t.x2,a=t.y2,r=t.x,i=t.y;t.relative&&(e+=g,a+=p,r+=g,i+=p),d.cubicCurveTo(f,$,e,a,r,i),g=r,p=i,f=2*r-e,$=2*i-a}break;case J.SMOOTH_QUAD_TO:{const e=Math.atan2(p-$,g-f),a=Math.sqrt(Math.pow(g-f,2)+Math.pow(p-$,2));f=g+a*Math.cos(e),$=p+a*Math.sin(e),t.relative?(g+=t.x,p+=t.y):(g=t.x,p=t.y),d.curveTo(f,$,g,p)}break;case J.QUAD_TO:{let e=t.x1,a=t.y1,r=t.x,i=t.y;t.relative&&(e+=g,a+=p,r+=g,i+=p),d.curveTo(e,a,r,i),g=r,p=i,f=e,$=a}break;case J.HORIZ_LINE_TO:{let e=t.x;t.relative&&(e+=g),f=g=e,d.lineTo(g,p)}break;case J.VERT_LINE_TO:{let e=t.y;t.relative&&(e+=p),$=p=e,d.lineTo(g,p)}break;case J.CLOSE_PATH:if(d._$fills){const e=d._$fills[2],t=d._$fills[3];e===d._$pointerX&&t===d._$pointerY||d._$fills.push(l.LINE_TO,e,t),d.endFill(),d.beginFill(h.color,h.alpha)}if(d._$lines){const e=d._$lines[2],t=d._$lines[3];e===d._$pointerX&&t===d._$pointerY||d._$lines.push(l.LINE_TO,e,t),d.endLine(),d.lineStyle(u.width,u.color,u.alpha,u.caps,u.join)}}}d.endLine(),d.endFill(),d._$recode&&(c._$recodes=d._$recode.slice()),c._$bounds={xMin:d._$xMin,xMax:d._$xMax,yMin:d._$yMin,yMax:d._$yMax}}static _$adjParam(e){for(;;){let t=0;for(let a=0;a<e.length;++a){const r=e[a];if(!isNaN(r)){t++;continue}const i=r.split(".");e.splice(a+1,0,`0.${i.pop()}`),e[a]=i.join(".")}if(e.length===t)break}return e}static _$arc(e,t,a,r,i,s){let n=Math.min(Math.ceil(2*r+1),1024);if(n<1)return;i=void 0===i?0:i;const o=((s=void 0===s?2*Math.PI:s)-i)/n;for(let s=0;s<=n;s++){const n=i+s*o;e.lineTo(t+Math.cos(n)*r,a+Math.sin(n)*r)}}static _$arcToCurve(e,t,a,r,i,s,n,o,l){const c=2*Math.PI,d=Math.sin(l*c/360),h=Math.cos(l*c/360),u=h*(e-a)/2+d*(t-r)/2,m=-d*(e-a)/2+h*(t-r)/2;if(0===u&&0===m||0===n||0===o)return[];n=Math.abs(n),o=Math.abs(o);const g=u*u/(n*n)+m*m/(o*o);g>1&&(n*=Math.sqrt(g),o*=Math.sqrt(g));const p=ee._$getArcCenter(e,t,a,r,i,s,n,o,d,h),f=[];let $=p[2],y=p[3];const _=Math.max(Math.ceil(Math.abs(y)/(c/4)),1);y/=_;for(let e=0;e<_;e++)f.push(ee._$approximateUnitArc($,y)),$+=y;return f.map((e=>{for(let t=0;t<e.length;t+=2){let a=e[t],r=e[t+1];a*=n,r*=o;const i=h*a-d*r,s=d*a+h*r;e[t]=i+p[0],e[t+1]=s+p[1]}return e.shift(),e.shift(),e}))}static _$approximateUnitArc(e,t){const a=4/3*Math.tan(t/4),r=Math.cos(e),i=Math.sin(e),s=Math.cos(e+t),n=Math.sin(e+t);return[r,i,r-i*a,i+r*a,s+n*a,n-s*a,s,n]}static _$getArcCenter(e,t,a,r,i,s,n,o,l,c){const d=2*Math.PI,h=c*(e-a)/2+l*(t-r)/2,u=-l*(e-a)/2+c*(t-r)/2,m=n*n,g=o*o,p=h*h,f=u*u;let $=m*g-m*f-g*p;$<0&&($=0),$/=m*f+g*p,$=Math.sqrt($)*(i===s?-1:1);const y=$*n/o*u,_=$*-o/n*h,b=c*y-l*_+(e+a)/2,v=l*y+c*_+(t+r)/2,k=(h-y)/n,w=(u-_)/o,S=(-h-y)/n,I=(-u-_)/o,E=ee._$unitVectorAngle(1,0,k,w);let x=ee._$unitVectorAngle(k,w,S,I);return 0===s&&x>0&&(x-=d),1===s&&x<0&&(x+=d),[b,v,E,x]}static _$unitVectorAngle(e,t,a,r){let i=e*a+t*r;return i>1&&(i=1),i<-1&&(i=-1),(e*r-t*a<0?-1:1)*Math.acos(i)}}k.$vtc=new class{clone(e){const t=function(e,a){const r=Object.keys(e),i=0|r.length;for(let s=0;s<i;++s){const i=r[s],n=e[i];switch(!0){case k.$isArray(n):a[i]=[],t(n,a[i]);break;case"object"==typeof n:a[i]={},t(n,a[i]);break;default:a[i]=n}}},a={};return t(e,a),a}convert(e,t=!1){let a=e.lineStyles,r=e.fillStyles,i=0,s={},n=[],o=0,l=0,c=0,d=0,h=0,u=0,m=0,g=0,p=0,f=[],$=[],y=[],_=[],b=0;const v=e.ShapeData,k=v.records,w=v.styles;let S=0,I=0;for(;;){const e=k[S++];if(-1===e){_=this.setStack(_,this.fillMerge(f,$,t)),_=this.setStack(_,y);break}if(e){if(++b,k[S++]){_=this.setStack(_,this.fillMerge(f,$,t)),_=this.setStack(_,y),o=0,l=0,f=[],$=[],y=[];const e=w[I++];k[S++]&&(r=e.FillStyles),k[S++]&&(a=e.LineStyles)}c=o,d=l,k[S++]&&(c=o=k[S++]/20,d=o=k[S++]/20),h=c,u=d,k[S++]&&(m=k[S++]),k[S++]&&(g=k[S++]),k[S++]&&(p=k[S++]);continue}const v=k[S++],E=v?k[S++]/20:0,x=v?k[S++]/20:0;o=k[S++]/20,l=k[S++]/20;const M={isCurved:v,ControlX:E,ControlY:x,AnchorX:o,AnchorY:l};if(m&&(i=m-1|0,i in f||(f[i]=[]),b in f[i]||(f[i][b]={obj:r?r[i]:null,startX:c,startY:d,endX:0,endY:0,cache:[]}),s=f[i][b],n=s.cache,n[n.length]=this.clone(M),s.endX=o,s.endY=l),g&&(i=g-1|0,i in $||($[i]=[]),b in $[i]||($[i][b]={obj:r?r[i]:null,startX:c,startY:d,endX:0,endY:0,cache:[]}),s=$[i][b],n=s.cache,n[n.length]=this.clone(M),s.endX=o,s.endY=l),p){i=p-1|0,i in y||(y[i]={obj:a?a[i]:null,cache:[]}),s=y[i],n=s.cache,n[n.length]=[0,h,u];let e=[2,o,l];v&&(e=[1,E,x,o,l]),n[n.length]=e}h=o,u=l}return this.toGraphicPath(_)}toGraphicPath(e){const{Graphics:t}=window.next2d.display;let a=!1;const r=[];for(let i=0;i<e.length;++i){const s=e[i];r.push(t.BEGIN_PATH);for(let e=0;e<s.recode.length;++e)r.push.apply(r,s.recode[e]);const n="Width"in s.object;let o=0,l="none",c=0,d="round";if(n){switch(o=s.object.Width,s.object.StartCapStyle){case 0:l="round";break;case 1:l="none";break;case 2:l="square"}switch(s.object.JoinStyle){case 0:d="round";break;case 1:d="bevel";break;case 2:d="miter",c=s.object.MiterLimitFactor}}const h=s.object.HasFillFlag?s.object.FillType:s.object;switch(h.fillStyleType){case 0:n?r.push(t.STROKE_STYLE,o,l,d,c,h.Color.R,h.Color.G,h.Color.B,255*h.Color.A,t.END_STROKE):r.push(t.FILL_STYLE,h.Color.R,h.Color.G,h.Color.B,255*h.Color.A,t.END_FILL);break;case 16:case 18:case 19:{const e=h.gradient,a=[],i=e.GradientRecords;for(let e=0;e<i.length;++e){const t=i[e];a.push({ratio:t.Ratio,R:t.Color.R,G:t.Color.G,B:t.Color.B,A:255*t.Color.A})}const s=0===e.InterpolationMode?"rgb":"linearRGB";let u="pad";switch(e.SpreadMode){case 0:u="pad";break;case 1:u="reflect";break;case 2:u="repeat"}n?r.push(t.GRADIENT_STROKE,o,l,d,c,16===h.fillStyleType?"linear":"radial",a,h.gradientMatrix,u,s,e.FocalPoint):r.push(t.GRADIENT_FILL,16===h.fillStyleType?"linear":"radial",a,h.gradientMatrix,u,s,e.FocalPoint)}break;case 64:case 65:case 66:case 67:{a=!0;const e=k.$currentWorkSpace().getLibrary(k.$characters.get(h.bitmapId)),i=function(e,a){if(!this._$buffer)return requestAnimationFrame(i);const r=64===a.fillStyleType||65===a.fillStyleType,s=64===a.fillStyleType||66===a.fillStyleType,n=k.$multiplicationMatrix(a.bitmapMatrix,[.05,0,0,.05,0,0]),{BitmapData:o}=window.next2d.display,l=new o(this.width,this.height,!0,0);l._$buffer=this._$buffer,e.push(t.BITMAP_FILL,l,Array.from(n),s?"repeat":"no-repeat",r)}.bind(e,r,h);i()}}}return r.push(a),r}fillMerge(e,t,a){if((e=this.fillReverse(e)).length){const a=Object.keys(e),r=0|a.length;for(let i=0;i<r;++i){const r=a[i],s=e[r];if(r in t){const e=t[r],a=Object.keys(s),i=0|a.length;for(let t=0;t<i;++t)e[e.length]=s[a[t]]}else t[r]=s}}return this.coordinateAdjustment(t,a)}fillReverse(e){if(!e.length)return e;const t=Object.keys(e),a=0|t.length;for(let r=0;r<a;++r){const a=e[t[r]],i=Object.keys(a),s=0|i.length;for(let e=0;e<s;++e){let t=0,r=0;const s=a[i[e]];let n=s.startX,o=s.startY;const l=s.cache;let c=0|l.length;if(c){const e=Object.keys(l),a=0|e.length;for(let i=0;i<a;++i){const a=l[e[i]];t=a.AnchorX,r=a.AnchorY,a.AnchorX=n,a.AnchorY=o,n=t,o=r}const i=[];if(c>0)for(;c;)--c,i[i.length]=l[c];s.cache=i}n=s.startX,o=s.startY,s.startX=s.endX,s.startY=s.endY,s.endX=n,s.endY=o}}return e}coordinateAdjustment(e,t){const a=Object.keys(e),r=0|a.length;for(let i=0;i<r;++i){const r=a[i],s=[],n=e[r],o=Object.keys(n),l=0|o.length;for(let e=0;e<l;++e)s[s.length]=n[o[e]];let c=[];if(!0==(s.length>1&&!t))for(;s.length;){const e=s.shift();if(e.startX===e.endX&&e.startY===e.endY){c[c.length]=e;continue}let t=0,a=0|s.length;for(;a;){--a;const r=s[a];if(r.startX===e.endX&&r.startY===e.endY){e.endX=r.endX,e.endY=r.endY;const i=e.cache,n=r.cache,o=0|n.length;for(let e=0;e<o;++e)i[i.length]=n[e];s.splice(a,1),s.unshift(e),t=1;break}}t||s.unshift(e)}else c=s;const d=0|c.length,h=[];let u={};for(let e=0;e<d;++e){const t=c[e];u=t.obj;const a=t.cache,r=0|a.length;h[h.length]=[0,t.startX,t.startY];for(let e=0;e<r;++e){const t=a[e];h[h.length]=t.isCurved?[1,t.ControlX,t.ControlY,t.AnchorX,t.AnchorY]:[2,t.AnchorX,t.AnchorY]}}e[r]={cache:h,obj:u}}return e}setStack(e,t){if(t.length){const a=Object.keys(t),r=0|a.length;for(let i=0;i<r;++i){const r=t[a[i]];e.push({object:r.obj,recode:r.cache})}}return e}};class te{constructor(e=""){if(this._$name="",this._$scene=null,this._$stage=null,this._$libraries=new Map,this._$nameMap=new Map,this._$plugins=new Map,this._$position=0,this._$ruler=!1,this._$rulerX=[],this._$rulerY=[],this._$characterId=0,this._$revision=[],this._$currentData=null,this._$currentFrame=0,this._$timelineHeight=Re.TIMELINE_DEFAULT_SIZE,this._$controllerWidth=Ee.DEFAULT_SIZE,e&&this.load(e),!this._$libraries.has(0)){const e=new z({id:0,type:A.MOVIE_CLIP,name:"main",symbol:""});this._$libraries.set(0,e)}this._$stage||(this._$stage=new N)}get root(){return this._$libraries.get(0)}get stage(){return this._$stage}get name(){return this._$name}set name(e){this._$name=`${e}`}get scene(){return this._$scene}set scene(e){this._$scene&&this._$scene.stop(),this._$scene=e,e.initialize()}get nextLibraryId(){const e=Array.from(this._$libraries.keys());e.sort((function(e,t){return e>t?1:e<t?-1:0}));return(0|this._$libraries.get(0|e.pop()).id)+1}initialize(e){this.scene=e,k.$libraryController.clearActive(),k.$libraryController.reload(Array.from(this._$libraries.values())),k.$javascriptController.reload(),k.$pluginController.reload(Array.from(this._$plugins.values())),k.$sceneChange.reload()}run(){document.documentElement.style.setProperty("--timeline-height",`${this._$timelineHeight}px`),document.documentElement.style.setProperty("--controller-width",`${this._$controllerWidth}px`),this.stage.initialize(),this.initialize(this.root)}stop(){this._$scene&&(this._$scene.stop(),this._$scene=null),k.$screenRuler.clear(),k.$libraryPreview.dispose(),k.$root.stage._$player.stop()}load(e){const t=JSON.parse(e);if(this._$characterId=0|t.characterId,this._$name=t.name,this._$stage=new N(t.stage),this._$plugins.size&&this._$plugins.clear(),t.plugins)for(let e=0;e<t.plugins.length;++e){const a=t.plugins[e];this._$plugins.set(a.name,a)}this._$libraries.size&&this._$libraries.clear();const a=t.libraries;for(let e=0;e<a.length;++e)this.addLibrary(a[e]);t.setting&&(this._$timelineHeight=t.setting.timelineHeight,this._$controllerWidth=t.setting.controllerWidth,this._$ruler=!!t.setting.ruler,this._$rulerX=t.setting.rulerX||[],this._$rulerY=t.setting.rulerY||[])}toJSON(){const e=[];for(const t of this._$libraries.values())e.push(t.toObject());return JSON.stringify({version:k.VERSION,name:this.name,characterId:this._$characterId,stage:this.stage.toObject(),libraries:e,plugins:Array.from(this._$plugins.values()),setting:{timelineHeight:this._$timelineHeight,controllerWidth:this._$controllerWidth,ruler:this._$ruler,rulerX:this._$rulerX.slice(0),rulerY:this._$rulerY.slice(0)}})}temporarilySaved(){k.$updated=!0,this._$currentData&&(this._$currentData=null),this._$position!==this._$revision.length&&(this._$revision.length=this._$position),this._$revision.push(this.toJSON()),this._$position++,this._$revision.length>k.REVISION_LIMIT&&(this._$revision.shift(),this._$position=this._$revision.length)}undo(){this._$position&&(this._$currentData||(this._$currentData=this.toJSON()),this._$currentFrame=k.$timelineFrame.currentFrame,this.reloadData(this._$revision[--this._$position]),this._$currentFrame=0)}redo(){if(!this._$revision.length||this._$position===this._$revision.length)return;let e=null;if(this._$position+1===this._$revision.length){if(!this._$currentData)return;e=this._$currentData,this._$position++,this._$currentData=null}else e=this._$revision[++this._$position];e&&(this._$currentFrame=k.$timelineFrame.currentFrame,this.reloadData(e),this._$currentFrame=0)}reloadData(e){const t=[],a=k.$timelineLayer.targetLayers;for(const e of a.keys())t.push(e);k.$sceneChange.cache();k.$tools.getDefaultTool("arrow").clear(),k.$tools.reset();const r=this._$scene.currentFrame,i=this._$scene.id;this._$scene.stop(),this._$scene=null,this.load(e);let s=this.getLibrary(i);if(s?s._$currentFrame=r:(s=this.getLibrary(0),t.length=0),k.$sceneChange.restore(),this.initialize(s),t.length){const e=k.$ctrlKey;k.$ctrlKey=!0;for(let e=0;e<t.length;++e){const a=document.getElementById(`${t[e]}`);a&&k.$timelineLayer.activeLayer(a)}k.$ctrlKey=e}}addLibrary(e){let t;switch(e.type){case A.MOVIE_CLIP:t=new z(e);break;case A.BITMAP:t=new x(e);break;case A.TEXT:t=new D(e);break;case A.SOUND:t=new O(e);break;case A.VIDEO:t=new U(e);break;case A.SHAPE:t=new P(e);break;case A.FOLDER:t=new C(e)}return this._$libraries.set(t.id,t),t}getLibrary(e){return this._$libraries.get(0|e)}removeLibrary(e){this._$libraries.delete(0|e)}}class ae{constructor(){this._$events=new Map}addEventListener(e,t){this._$events.has(e)||this._$events.set(e,[]),this._$events.get(e).push(t)}dispatchEvent(e,t=null){if(!this._$events.has(e))return;const a=this._$events.get(e);for(let e=0;e<a.length;++e){(0,a[e])(t)}}}class re{static get MOUSE_DOWN(){return"mousedown"}static get MOUSE_UP(){return"mouseup"}static get MOUSE_MOVE(){return"mousemove"}static get START(){return"start"}static get END(){return"end"}static get DBL_CLICK(){return"dblclick"}static get CHANGE(){return"change"}static get MOUSE_OVER(){return"mouseover"}static get MOUSE_OUT(){return"mouseout"}static get KEY_DOWN(){return"keydown"}static get MOUSE_LEAVE(){return"mouseleave"}}class ie{constructor(){this._$saved=!1,this._$focus=!1,this._$currentEvent=null,this._$currentTarget=null,this._$mouseMove=null,this._$mouseUp=null}setInputEvent(e){e&&(e.addEventListener("mouseover",(e=>{this.mouseOver(e)})),e.addEventListener("mouseout",(e=>{this.mouseOut(e)})),e.addEventListener("mousedown",(e=>{this.mouseDown(e)})),e.addEventListener("focusin",(e=>{this.focusIn(e)})),e.addEventListener("focusout",(e=>{this.finishInput(e)})),e.addEventListener("keypress",(e=>{this.finishInput(e)})))}changeFunction(e,t){let a=e.split("-").map((e=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`)).join("");return this[`change${a}`](t)}mouseOver(e){switch(e.stopPropagation(),!0){case this._$focus:case null!==this._$currentTarget:return;default:k.$setCursor("ew-resize"),e.target.style.cursor="ew-resize"}this._$currentValue=+e.target.value}mouseOut(e){e.stopPropagation(),!this._$focus&&this._$currentTarget||(k.$setCursor("auto"),e.target.style.cursor="")}mouseDown(e){this._$focus||(e.preventDefault(),this._$saved=!1,this._$pointX=e.screenX,this._$currentTarget=e.target,k.$setCursor("ew-resize"),this._$mouseMove||(this._$mouseMove=this.mouseMove.bind(this)),this._$mouseUp||(this._$mouseUp=this.mouseUp.bind(this)),window.addEventListener("mousemove",this._$mouseMove),window.addEventListener("mouseup",this._$mouseUp))}mouseUp(){window.removeEventListener("mousemove",this._$mouseMove),window.removeEventListener("mouseup",this._$mouseUp),k.$setCursor("auto"),this._$currentTarget&&(this._$currentTarget.style.cursor="",this._$currentTarget.focus())}mouseMove(e){!this._$focus&&this._$currentTarget&&window.requestAnimationFrame((()=>{if(this._$focus||!this._$currentTarget)return;e.preventDefault(),k.$setCursor("ew-resize");const t=e.screenX-this._$pointX;let a=+this._$currentTarget.value;isNaN(a)&&(a=0),this._$currentTarget.value=this.changeFunction(this._$currentTarget.id,a+t),this._$pointX=e.screenX}))}focusIn(){this._$focus=!0,k.$keyLock=!0}focusOut(){this._$saved=!1,this._$focus=!1,this._$currentTarget=null,k.$keyLock=!1}finishInput(e){"Enter"!==e.key?"focusout"===e.type&&(this._$currentTarget=e.target,e.target.value=this.changeFunction(this._$currentTarget.id,this._$currentTarget.value),this.focusOut()):e.currentTarget.blur()}reloadScreen(){const e=k.$timelineFrame.currentFrame;return k.$currentWorkSpace().scene.changeFrame(e)}save(){this._$saved||(this._$saved=!0,k.$currentWorkSpace().temporarilySaved())}}class se extends ae{constructor(){super(),this._$active=!1,this._$target=null,this._$events.set(re.MOUSE_DOWN,[e=>{this.activation(e)}]),this._$events.set(re.MOUSE_UP,[()=>{this.termination()}]),this._$events.set(re.START,[()=>{this.toolStart()}]),this._$events.set(re.END,[()=>{this.toolEnd()}])}get active(){return this._$active}set active(e){this._$active=!!e}get target(){return this._$target}set target(e){this._$target=e}activation(e){this.active=!0,this.target=e.currentTarget}termination(){this.active=!1,this.target=null}toolStart(){k.$setCursor("auto");const e=document.getElementById(`tools-${this._$name}`);e&&e.classList.add("active")}toolEnd(){const e=document.getElementById(`tools-${this._$name}`);e&&e.classList.remove("active")}}class ne{constructor(e){this._$areaName=e,this._$active=!1,this._$mapping=new Map,this._$execute=null,this._$handler=null,k.$readEnd++,"complete"!==document.readyState?(this._$handler=this.initialize.bind(this),window.addEventListener("DOMContentLoaded",this._$handler)):this.initialize()}get areaName(){return this._$areaName}get active(){return this._$active}set active(e){this._$active=!!e,this._$active?window.addEventListener("keydown",this._$execute):window.removeEventListener("keydown",this._$execute)}initialize(){this._$handler&&(window.removeEventListener("DOMContentLoaded",this._$handler),this._$handler=null),this._$execute=this.execute.bind(this),k.$initializeEnd()}add(e,t){this._$mapping.set(e,t)}delete(e){this._$mapping.delete(e)}execute(e){if(k.$keyLock||!this._$active)return;let t=k.$generateShortcutKey(e.key,{alt:k.$altKey,shift:k.$shiftKey,ctrl:k.$ctrlKey});const a=k.$shortcutSetting.commandMapping.get(this.areaName);if(a.has(t))t=a.get(t);else{if(k.$shortcutSetting.viewMapping.get(this.areaName).has(t))return}this._$mapping.has(t)&&(k.$endMenu(),e.stopPropagation(),e.preventDefault(),this._$mapping.get(t)(t))}}k.$keyboardCommand=new ne;class oe extends ie{constructor(){super(),this._$handler=null,k.$readEnd++,"complete"!==document.readyState?(this._$handler=this.initialize.bind(this),window.addEventListener("DOMContentLoaded",this._$handler)):this.initialize()}static get FILL_DEFAULT_COLOR(){return"#000000"}static get STROKE_DEFAULT_COLOR(){return"#000000"}static get STROKE_DEFAULT_SIZE(){return 0}initialize(){this._$handler&&(window.removeEventListener("DOMContentLoaded",this._$handler),this._$handler=null);const e=document.getElementById("fill-color");e&&(e.value=localStorage.getItem(`${k.PREFIX}@${e.id}`)||oe.FILL_DEFAULT_COLOR,e.addEventListener("change",(e=>{const t=e.target;localStorage.setItem(`${k.PREFIX}@${t.id}`,e.target.value)})));const t=document.getElementById("stroke-color");t&&(t.value=localStorage.getItem(`${k.PREFIX}@${t.id}`)||oe.STROKE_DEFAULT_COLOR,t.addEventListener("change",(e=>{const t=e.target;localStorage.setItem(`${k.PREFIX}@${t.id}`,t.value)})));const a=document.getElementById("stroke-size");a&&(a.value=localStorage.getItem(`${k.PREFIX}@${a.id}`)||oe.STROKE_DEFAULT_SIZE,this.setInputEvent(a)),k.$initializeEnd()}changeStrokeSize(e){return e=k.$clamp(0|e,0,255),localStorage.setItem(`${k.PREFIX}@stroke-size`,e),e}}k.$colorTool=new oe;class le extends se{constructor(e){if(super(),this._$name=e,this._$cursor="auto",this._$pageX=0,this._$pageY=0,this._$offsetX=0,this._$offsetY=0,e){k.$tools.setTool(e,this);let t=document.getElementById(`tools-${e}`);if(!t){const a=document.getElementById("plugin-tools");if(a){const r=document.createElement("div");r.id=`tools-${e}`,r.classList.add("item"),r.dataset.mode="tool",r.dataset.name=e,a.appendChild(r),t=r}}t&&t.addEventListener(re.MOUSE_DOWN,(()=>{k.$tools.activeTool&&k.$tools.activeTool.dispatchEvent(re.END),this.dispatchEvent(re.START),k.$tools.activeTool=this}))}}get name(){return this._$name}get pageX(){return this._$pageX}set pageX(e){this._$pageX=e}get pageY(){return this._$pageY}set pageY(e){this._$pageY=e}get offsetX(){return this._$offsetX}set offsetX(e){this._$offsetX=e}get offsetY(){return this._$offsetY}set offsetY(e){this._$offsetY=e}setIcon(e){const t=document.getElementById(`tools-${this._$name}`),a=t.children;for(;a.length;)a[0].remove();t.appendChild(e)}setToolTip(e){const t=document.getElementById(`tools-${this._$name}`);t&&(t.dataset.detail=`${e}`)}setCursor(e="auto"){this._$cursor=`${e}`}}k.$project=new class{initialize(){const e=document.getElementById("tools-load");e&&e.addEventListener("click",(e=>{e.preventDefault(),this.open()}));const t=document.getElementById("tools-load-file-input");t&&t.addEventListener("change",(e=>{const t=e.target.files;for(let e=0;e<t.length;++e)this.load(t[e]);e.target.value=""}));const a=document.getElementById("tools-save");a&&a.addEventListener("click",(e=>{e.preventDefault(),this.save()}));const r=document.getElementById("tools-export");r&&r.addEventListener("click",(e=>{e.preventDefault(),this.publish()}));const i=document.getElementById("language-setting");if(i){const e=localStorage.getItem(`${k.PREFIX}@language-setting`);if(e){const t=i.children;for(let a=0;a<t.length;++a){const r=t[a];if(r.value===e){r.selected=!0;break}}}i.addEventListener("change",(e=>{const t=e.target.value,a=k.$languages.get(t);k.$currentLanguage=new a,localStorage.setItem(`${k.PREFIX}@language-setting`,t),k.$addModalEvent(document)}))}}publish(){if(k.$saveProgress.active)return;k.$saveProgress.start();const e=document.getElementById("save-anchor");e.href&&URL.revokeObjectURL(e.href);switch(document.getElementById("publish-type-setting").value){case"json":k.$saveProgress.createJson(),setTimeout((()=>{e.download=`${k.$currentWorkSpace().name}.json`,e.href=URL.createObjectURL(new Blob([ce.toJSON()],{type:"application/json"})),e.click(),k.$saveProgress.end()}),200);break;case"zlib":ce.toZlib();break;case"webm":ce.toWebM();break;case"gif-loop":ce.toGIF();break;case"gif":ce.toGIF(-1);break;case"png":ce.toPng();break;case"apng-loop":ce.toApng(!0);break;case"apng":ce.toApng(!1);break;case"custom":{const e=window.nt||window.fl;"customPublish"in e&&(it.clear(),e.customPublish(ce.toObject())),k.$saveProgress.end()}}}load(e){k.$saveProgress.active||(k.$saveProgress.start(),e.arrayBuffer().then((t=>{k.$saveProgress.zlibInflate();const a=new Uint8Array(t);k.$unZlibWorker.postMessage({buffer:a,name:e.name.replace(".n2d",""),type:"n2d"},[a.buffer])})))}open(){document.getElementById("tools-load-file-input").click()}save(){k.$saveProgress.active||(k.$saveProgress.start(),new Promise((e=>{k.$saveProgress.createJson(),setTimeout((()=>{e({object:k.$currentWorkSpace().toJSON(),type:"n2d"})}),200)})).then((e=>{k.$saveProgress.zlibDeflate(),k.$zlibWorkerActive?k.$zlibQueues.push(e):(k.$zlibWorkerActive=!0,k.$zlibWorker.postMessage(e))})))}};class ce{static toObject(){const e=k.$currentWorkSpace(),t=e.stage,a=e._$libraries,r=[];for(let[e,t]of a)switch(!0){case 0===e:case"folder"!==t.type:case""!==t.symbol:case k.$useIds.has(e):{const a=t.toPublish();a.symbol&&k.$symbols.set(a.symbol,r.length),r[e]=a}break;default:r[e]=null}let i=k.$useIds.size;for(;;){for(let[e,t]of a){if(r[e])continue;if(!k.$useIds.has(e))continue;const a=t.toPublish();a.symbol&&k.$symbols.set(a.symbol,r.length),r[e]=a}if(i===k.$useIds.size)break;i=k.$useIds.size}return{stage:{width:t.width,height:t.height,fps:t.fps,bgColor:t.bgColor},characters:r}}static toJSON(){k.$symbols.size&&k.$symbols.clear();const e=ce.toObject();return e.symbols=Array.from(k.$symbols),e.type="json",JSON.stringify(e)}static toZlib(){k.$symbols.size&&k.$symbols.clear(),new Promise((e=>{k.$saveProgress.createJson(),setTimeout((()=>{const t=ce.toObject();t.symbols=Array.from(k.$symbols),e({object:JSON.stringify(t),type:"json"})}),200)})).then((e=>{k.$saveProgress.zlibDeflate(),k.$zlibWorkerActive?k.$zlibQueues.push(e):(k.$zlibWorkerActive=!0,k.$zlibWorker.postMessage(e))}))}static toWebM(){k.$saveProgress.encode();const e=document.getElementById("__next2d__").children[0].captureStream(0|document.getElementById("stage-fps").value),t=[],a="video/webm;codecs=h264",r=new MediaRecorder(e,{mimeType:a});r.addEventListener("dataavailable",(e=>{t.push(e.data)})),r.addEventListener("stop",(()=>{k.$hidePreview();const e=document.getElementById("save-anchor");e.download=`${k.$currentWorkSpace().name}.webm`,e.href=URL.createObjectURL(new Blob(t,{type:a})),e.click(),k.$saveProgress.end()}));const i=function(){if(k.$root.numChildren)return k.$root.currentFrame>=k.$root.totalFrames?r.stop():void requestAnimationFrame(i);requestAnimationFrame(i)};i(),k.$showPreview();document.getElementById("player-preview").style.display="none",r.start(0)}static toGIF(e=0){k.$saveProgress.encode();const t=new GIF({repeat:e,workerScript:"./assets/js/gif.worker.js"});t.on("finished",(e=>{const t=document.getElementById("save-anchor");t.download=`${k.$currentWorkSpace().name}.gif`,t.href=URL.createObjectURL(e),t.click(),k.$saveProgress.end()}));const a=function(){if(!k.$root.numChildren)return void requestAnimationFrame(a);const e=document.getElementById("__next2d__").children[0],r=document.createElement("canvas");r.width=e.width,r.height=e.height;const i=r.getContext("2d");if(i.drawImage(e,0,0,e.width,e.height),t.addFrame(i.canvas,{delay:20}),k.$root.currentFrame>=k.$root.totalFrames)return k.$hidePreview(),void t.render();requestAnimationFrame(a)};a(),k.$showPreview();document.getElementById("player-preview").style.display="none"}static toPng(){k.$saveProgress.encode();const e=()=>{if(!k.$root.numChildren)return void requestAnimationFrame(e);const t=k.$root.stage;if(!t)return void requestAnimationFrame(e);if(t._$player._$stopFlag)return void requestAnimationFrame(e);const a=document.getElementById("__next2d__").children[0],r=document.getElementById("save-anchor");r.download=`${k.$currentWorkSpace().name}.png`,r.href=a.toDataURL(),r.click(),k.$saveProgress.end(),k.$hidePreview()};e(),k.$showPreview();document.getElementById("player-preview").style.display="none"}static toApng(e=!0){k.$saveProgress.encode();const t=[];let a=0;const r=()=>{if(k.$root.stage._$player._$stopFlag||!k.$root.numChildren||a===k.$root.currentFrame)return void requestAnimationFrame(r);a=k.$root.currentFrame;const i=document.getElementById("__next2d__").children[0],s=document.createElement("canvas");s.width=i.width,s.height=i.height,i.toBlob((a=>{if(t.push(a),t.length===k.$root.totalFrames)return k.$hidePreview(),new I(t,i.width,i.height,0|document.getElementById("stage-fps").value,e).encode().then((e=>{const t=document.getElementById("save-anchor");t.download=`${k.$currentWorkSpace().name}.apng`,t.href=URL.createObjectURL(e),t.click(),k.$saveProgress.end()}))})),k.$root.currentFrame>=k.$root.totalFrames||requestAnimationFrame(r)};r(),k.$showPreview();document.getElementById("player-preview").style.display="none"}}k.$saveProgress=new class{constructor(){this._$active=!1,this._$value=0,this._$timerId=-1,this._$mouseMove=null,this._$mouseUp=null,this._$handler=null,k.$readEnd++,"complete"!==document.readyState?(this._$handler=this.initialize.bind(this),window.addEventListener("DOMContentLoaded",this._$handler)):this.initialize()}get active(){return this._$active}initialize(){this._$handler&&(window.removeEventListener("DOMContentLoaded",this._$handler),this._$handler=null);const e=document.getElementById("save-progress-modal");e&&e.addEventListener("mousedown",(e=>{this.moveStart(e)})),k.$initializeEnd()}moveStart(e){e.stopPropagation(),e.preventDefault(),this._$pageX=e.pageX,this._$pageY=e.pageY,this._$mouseMove||(this._$mouseMove=this.mouseMove.bind(this)),this._$mouseUp||(this._$mouseUp=this.mouseUp.bind(this)),window.addEventListener("mousemove",this._$mouseMove),window.addEventListener("mouseup",this._$mouseUp)}mouseMove(e){const t=document.getElementById("save-progress-modal");t&&window.requestAnimationFrame((()=>{const a=t.offsetLeft+(e.pageX-this._$pageX),r=t.offsetTop+(e.pageY-this._$pageY);t.setAttribute("style",`left: ${a}px; top: ${r}px`),this._$pageX=e.pageX,this._$pageY=e.pageY}))}mouseUp(e){e.stopPropagation(),e.preventDefault(),window.removeEventListener("mousemove",this._$mouseMove),window.removeEventListener("mouseup",this._$mouseUp)}start(){clearInterval(this._$timerId);const e=document.getElementById("save-progress-modal");if(!e)return;this.update(0),e.classList.contains("fadeIn")||e.setAttribute("class","fadeIn"),e.setAttribute("style","");const t=(window.innerWidth-e.clientWidth)/2,a=(window.innerHeight-e.clientHeight)/2;e.setAttribute("style",`left: ${t}px; top: ${a}px`),this._$active=!0}createJson(){clearInterval(this._$timerId),this.update(10,k.$currentLanguage.replace("{{JSONを生成}}"))}createFile(){clearInterval(this._$timerId),this.update(90,k.$currentLanguage.replace("{{ファイルを生成}}"))}loadN2D(){clearInterval(this._$timerId),this.update(90,k.$currentLanguage.replace("{{N2Dファイルの読み込み}}"))}loadJson(){clearInterval(this._$timerId),this.update(90,k.$currentLanguage.replace("{{JSONの読み込み}}"))}zlibInflate(){clearInterval(this._$timerId),this.update(15,k.$currentLanguage.replace("{{データを解凍中}}")),this._$timerId=setInterval((()=>{this.update(Math.min(80,this._$value+1),k.$currentLanguage.replace("{{データを解凍中}}"))}),300)}encode(){clearInterval(this._$timerId),this.update(15,k.$currentLanguage.replace("{{エンコード}}")),this._$timerId=setInterval((()=>{this.update(Math.min(80,this._$value+1),k.$currentLanguage.replace("{{エンコード}}"))}),300)}zlibDeflate(){clearInterval(this._$timerId),this.update(15,k.$currentLanguage.replace("{{データを圧縮中}}")),this._$timerId=setInterval((()=>{this.update(Math.min(80,this._$value+1),k.$currentLanguage.replace("{{データを圧縮中}}"))}),300)}parseSWF(){clearInterval(this._$timerId),this.update(15,k.$currentLanguage.replace("{{SWFを解析中}}")),this._$timerId=setInterval((()=>{this.update(Math.min(80,this._$value+1),k.$currentLanguage.replace("{{SWFを解析中}}"))}),300)}loadFiles(){this.update(5,k.$currentLanguage.replace("{{外部ファイルの読み込み}}")),this._$timerId=setInterval((()=>{this.update(Math.min(90,this._$value+1),k.$currentLanguage.replace("{{外部ファイルの読み込み}}"))}),300)}createBinary(){clearInterval(this._$timerId),this.update(80,k.$currentLanguage.replace("{{バイナリデータを生成}}"))}launchDatabase(e){clearInterval(this._$timerId),this.update(e,k.$currentLanguage.replace("{{データベースを起動}}"))}commit(){clearInterval(this._$timerId),this.update(95,k.$currentLanguage.replace("{{データを保存中}}"))}end(){clearInterval(this._$timerId),this.update(100,k.$currentLanguage.replace("{{完了}}")),window.removeEventListener("mousemove",this._$mouseMove),window.removeEventListener("mouseup",this._$mouseUp),this._$timerId=-1,this._$active=!1;const e=document.getElementById("save-progress-modal");e&&(e.classList.contains("fadeOut")||setTimeout((()=>{e.setAttribute("class","fadeOut")}),1e3))}update(e,t=""){const a=document.getElementById("save-progress");a&&(this._$value=e,a.value=`${e}`,this.message(t))}message(e=""){document.getElementById("progress-state").textContent=`${e}`}};k.$shortcutSetting=new class{constructor(){this._$names=["screen","timeline","library"],this._$default={screen:[{key:"v",text:"V",css:"tools-arrow",description:"{{選択ツール}}"},{key:"q",text:"Q",css:"tools-arrow-transform",description:"{{自由変形ツール}}"},{key:"a",text:"A",css:"tools-transform",description:"{{Shape変形ツール}}"},{key:"p",text:"P",css:"tools-pen",description:"{{ペンツール}}"},{key:"k",text:"K",css:"tools-bucket",description:"{{バケツツール}}"},{key:"r",text:"R",css:"tools-rectangle",description:"{{矩形ツール}}"},{key:"o",text:"O",css:"tools-circle",description:"{{楕円ツール}}"},{key:"rShift",text:"Shift + R",css:"tools-round-rect",description:"{{角丸矩形ツール}}"},{key:"t",text:"T",css:"tools-text",description:"{{テキストツール}}"},{key:"z",text:"Z",css:"tools-zoom",description:"{{ズームツール}}"},{key:"rCtrl",text:"Ctrl + R",css:"tools-load",description:"{{プロジェクトデータの読込}}"},{key:"sShiftCtrl",text:"Ctrl + Shift + S",css:"tools-save",description:"{{プロジェクトデータを保存}}"},{key:"EnterShiftCtrl",text:"Ctrl + Shift + Enter",css:"tools-export",description:"{{書き出し}}"},{key:"s",text:"S",css:"tools-setting",description:"{{設定}}"},{key:"ArrowUpShiftCtrl",text:"Ctrl + Shift + ArrowUp",css:"screen-front",description:"{{最前面}}"},{key:"ArrowUpCtrl",text:"Ctrl + ArrowUp",css:"screen-front-one",description:"{{ひとつ前面へ}}"},{key:"ArrowDownCtrl",text:"Ctrl + ArrowDown",css:"screen-menu-bottom",description:"{{ひとつ背面へ}}"},{key:"ArrowDownShiftCtrl",text:"Ctrl + Shift + ArrowDown",css:"screen-back",description:"{{最背面}}"},{key:"1",text:"1",css:"screen-position-left",description:"{{左揃え}}"},{key:"2",text:"2",css:"screen-position-center",description:"{{中央揃え(水平方向)}}"},{key:"3",text:"3",css:"screen-position-right",description:"{{右揃え}}"},{key:"4",text:"4",css:"screen-position-top",description:"{{上揃え}}"},{key:"5",text:"5",css:"screen-position-middle",description:"{{中央揃え(垂直方向)}}"},{key:"6",text:"6",css:"screen-position-bottom",description:"{{下揃え}}"},{key:"!Shift",text:"Shift + 1",css:"stage-position-left",description:"{{ステージ左揃え}}"},{key:'"Shift',text:"Shift + 2",css:"stage-position-center",description:"{{ステージ中央揃え(水平方向)}}"},{key:"#Shift",text:"Shift + 3",css:"stage-position-right",description:"{{ステージ右揃え}}"},{key:"$Shift",text:"Shift + 4",css:"stage-position-top",description:"{{ステージ上揃え}}"},{key:"%Shift",text:"Shift + 5",css:"stage-position-middle",description:"{{ステージ中央揃え(垂直方向)}}"},{key:"&Shift",text:"Shift + 6",css:"stage-position-bottom",description:"{{ステージ下揃え}}"},{key:"dCtrl",text:"Ctrl + D",css:"screen-distribute-to-layers",description:"{{レイヤーに配分}}"},{key:"kCtrl",text:"Ctrl + K",css:"screen-distribute-to-keyframes",description:"{{キーフレームに配分}}"},{key:"iCtrl",text:"Ctrl + I",css:"screen-integrating-paths",description:"{{パスの結合}}"},{key:"pCtrl",text:"Ctrl + P",css:"screen-add-tween-curve-pointer",description:"{{カーブポインターの追加}}"},{key:"pShiftCtrl",text:"Ctrl + Shift + P",css:"screen-delete-tween-curve-pointer",description:"{{カーブポインターの削除}}"},{key:"mShift",text:"Shift + M",css:"screen-change-movie-clip",description:"{{MovieClipに変換}}"},{key:"rShiftCtrl",text:"Ctrl + Shift + R",css:"screen-ruler",description:"{{定規}}"},{key:"e",text:"E",css:"screen-change-scene",description:"{{MovieClipを編集}}"},{key:"eShift",text:"Shift + E",css:"screen-move-scene",description:"{{親の階層へ移動}}"}],timeline:[{key:"nShift",text:"Shift + N",css:"timeline-layer-normal",description:"{{通常レイヤー}}"},{key:"mShift",text:"Shift + M",css:"timeline-layer-mask",description:"{{マスクレイヤー}}"},{key:"gShift",text:"Shift + G",css:"timeline-layer-guide",description:"{{ガイドレイヤー}}"},{key:";Ctrl",text:"Ctrl + +",css:"timeline-layer-add",description:"{{レイヤーを追加}}"},{key:"BackspaceCtrl",text:"Ctrl + Backspace",css:"timeline-layer-trash",description:"{{レイヤーを削除}}"},{key:"hShift",text:"Shift + H",css:"timeline-layer-light-all",description:"{{全てのレイヤーをハイライト}}"},{key:"dShift",text:"Shift + D",css:"timeline-layer-disable-all",description:"{{全てのレイヤーを非表示}}"},{key:"lShift",text:"Shift + L",css:"timeline-layer-lock-all",description:"{{全てのレイヤーをロック}}"},{key:"m",text:"M",css:"context-menu-tween-add",description:"{{モーショントゥイーンの追加}}"},{key:"mCtrl",text:"Ctrl + M",css:"context-menu-tween-delete",description:"{{モーショントゥイーンの削除}}"},{key:"s",text:"S",css:"timeline-script-add",description:"{{スクリプトを追加}}"},{key:"k",text:"K",css:"timeline-key-add",description:"{{キーフレームを追加}}"},{key:"kCtrl",text:"Ctrl + K",css:"timeline-key-delete",description:"{{キーフレームを削除}}"},{key:"e",text:"E",css:"timeline-empty-add",description:"{{空のキーフレームを追加}}"},{key:"F6",text:"F6",css:"context-menu-key-frame-change",description:"{{キーフレームに変換}}"},{key:"f",text:"F",css:"timeline-frame-add",description:"{{フレームを追加}}"},{key:"fCtrl",text:"Ctrl + F",css:"timeline-frame-delete",description:"{{フレームを削除}}"},{key:"oCtrl",text:"Ctrl + O",css:"timeline-onion-skin",description:"{{オニオンスキン}}"},{key:"p",text:"P",css:"timeline-preview",description:"{{プレビューのON/OFF}}"},{key:"pCtrl",text:"Ctrl + P",css:"timeline-repeat",description:"{{ループ設定}}"},{key:"l",text:"L",css:"label-name",description:"{{フレームラベル}}"},{key:"z",text:"Z",css:"timeline-scale",description:"{{タイムライン幅の拡大・縮小}}"},{key:"lCtrl",text:"Ctrl + L",css:"context-menu-layer-clone",description:"{{レイヤーを複製}}"},{key:"ArrowLeftShiftCtrl",text:"Ctrl + Shift + ArrowLeft",css:"context-menu-first-frame",description:"{{最初のフレームに移動}}"},{key:"ArrowRightShiftCtrl",text:"Ctrl + Shift + ArrowRight",css:"context-menu-last-frame",description:"{{最後のフレームに移動}}"},{key:"cCtrl",text:"Ctrl + C",css:"context-menu-frame-copy",description:"{{フレームをコピー}}"},{key:"vCtrl",text:"Ctrl + V",css:"context-menu-frame-paste",description:"{{フレームをペースト}}"}],library:[{key:"mCtrl",text:"Ctrl + M",css:"library-menu-container-add",description:"{{新規MovieClip}}"},{key:"fCtrl",text:"Ctrl + F",css:"library-menu-folder-add",description:"{{新規フォルダー}}"},{key:"rCtrl",text:"Ctrl + R",css:"library-menu-file",description:"{{読み込み}}"},{key:"sShiftCtrl",text:"Ctrl + Shift + S",css:"library-menu-export",description:"{{書き出し}}"},{key:"Backspace",text:"Backspace",css:"library-menu-delete",description:"{{削除}}"},{key:"cCtrl",text:"Ctrl + C",css:"library-menu-copy",description:"{{コピー}}"},{key:"vCtrl",text:"Ctrl + V",css:"library-menu-paste",description:"{{ペースト}}"},{key:"e",text:"E",css:"library-menu-change-scene",description:"{{MovieClipを編集}}"}]},this._$commandMapping=new Map([["screen",new Map],["timeline",new Map],["library",new Map],["global",new Map]]),this._$viewMapping=new Map([["screen",new Map],["timeline",new Map],["library",new Map],["global",new Map]]),this._$active=!1,this._$selectNode=null,this._$selectArea="",this._$keydownEvent=null,this._$handler=null,k.$readEnd++,"complete"!==document.readyState?(this._$handler=this.initialize.bind(this),window.addEventListener("DOMContentLoaded",this._$handler)):this.initialize()}get commandMapping(){return this._$commandMapping}get viewMapping(){return this._$viewMapping}initialize(){this._$handler&&(window.removeEventListener("DOMContentLoaded",this._$handler),this._$handler=null);const e=["shortcut-setting-screen","shortcut-setting-timeline","shortcut-setting-library","shortcut-setting-reset","shortcut-setting-save","shortcut-setting-close"];for(let t=0;t<e.length;++t){const a=document.getElementById(e[t]);a&&a.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault(),this.executeFunction(e)}))}this.createShortcutMap();for(let e=0;e<this._$names.length;++e){const t=this._$names[e],a=document.getElementById(`shortcut-list-${t}`);if(!a)continue;const r=this.viewMapping.get(t),i=this._$default[t];for(let e=0;e<i.length;++e){const t=i[e],s=`\n<div class="shortcut-item">\n    <i class="${t.css}"></i>\n    <div class="description">\n        <span class="language" data-text="${t.description}">${k.$currentLanguage.replace(t.description)}</span>\n    </div>\n    <div class="command" data-key="${t.key}" data-default-text="${t.text}">${t.text}</div>\n</div>`;a.insertAdjacentHTML("beforeend",s);const n=a.lastElementChild;n.addEventListener("mousedown",(e=>{this.selectNode(e)}));const o=n.lastElementChild;if(!r.has(o.dataset.key))continue;const l=r.get(o.dataset.key);o.dataset.map=l.map,o.textContent=l.text}}this._$keydownEvent=this.keydownEvent.bind(this),k.$initializeEnd()}createShortcutMap(){const e=localStorage.getItem(`${k.PREFIX}@shortcut`);if(!e)return;const t=JSON.parse(e),a=Object.keys(t);for(let e=0;e<a.length;++e){const r=a[e];this.viewMapping.get(r).clear(),this.commandMapping.get(r).clear();const i=t[r];for(let e=0;e<i.length;++e){const t=i[e];this.viewMapping.get(r).set(t.key,{map:t.map,text:t.text}),this.commandMapping.get(r).set(t.map,t.key)}}}keydownEvent(e){if(document.getElementById("shortcut-setting-menu").classList.contains("fadeOut"))return k.$useShortcutSetting=!1,this._$active=!1,void window.removeEventListener("keydown",this._$keydownEvent);if(!this._$selectNode||!this._$selectArea)return;const t=[];switch(k.$shiftKey&&t.push("Shift"),k.$altKey&&t.push("Alt"),k.$ctrlKey&&t.push("Ctrl"),!0){case" "===e.key:t.push(e.code);break;case 1===e.key.length:t.push(e.key.toUpperCase());break;default:t.push(e.key)}const a=this._$selectNode.lastElementChild;a.textContent=`${t.join(" + ")}`;const r=k.$generateShortcutKey(e.key,{alt:k.$altKey,shift:k.$shiftKey,ctrl:k.$ctrlKey});r!==a.dataset.key?(a.dataset.map=r,a.dataset.text=a.textContent):(delete a.dataset.map,delete a.dataset.text)}selectNode(e){this._$selectNode&&this._$selectNode.classList.remove("shortcut-active"),this._$selectNode=e.target,this._$selectNode.classList.add("shortcut-active")}executeFunction(e){this[`execute${e.target.id.split("-").map((e=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`)).join("")}`](e)}executeShortcutSettingScreen(){document.getElementById("shortcut-setting-screen").classList.add("shortcut-active"),document.getElementById("shortcut-setting-timeline").classList.remove("shortcut-active"),document.getElementById("shortcut-setting-library").classList.remove("shortcut-active"),document.getElementById("shortcut-list-screen").style.display="",document.getElementById("shortcut-list-timeline").style.display="none",document.getElementById("shortcut-list-library").style.display="none",this._$selectArea="screen",this._$selectNode&&(this._$selectNode.classList.remove("shortcut-active"),this._$selectNode=null)}executeShortcutSettingTimeline(){document.getElementById("shortcut-setting-screen").classList.remove("shortcut-active"),document.getElementById("shortcut-setting-timeline").classList.add("shortcut-active"),document.getElementById("shortcut-setting-library").classList.remove("shortcut-active"),document.getElementById("shortcut-list-screen").style.display="none",document.getElementById("shortcut-list-timeline").style.display="",document.getElementById("shortcut-list-library").style.display="none",this._$selectArea="timeline",this._$selectNode&&(this._$selectNode.classList.remove("shortcut-active"),this._$selectNode=null)}executeShortcutSettingLibrary(){document.getElementById("shortcut-setting-screen").classList.remove("shortcut-active"),document.getElementById("shortcut-setting-timeline").classList.remove("shortcut-active"),document.getElementById("shortcut-setting-library").classList.add("shortcut-active"),document.getElementById("shortcut-list-screen").style.display="none",document.getElementById("shortcut-list-timeline").style.display="none",document.getElementById("shortcut-list-library").style.display="",this._$selectArea="library",this._$selectNode&&(this._$selectNode.classList.remove("shortcut-active"),this._$selectNode=null)}executeShortcutSettingReset(){localStorage.removeItem(`${k.PREFIX}@shortcut`);for(let e=0;e<this._$names.length;++e){const t=this._$names[e],a=document.getElementById(`shortcut-list-${t}`).children;for(let e=0;e<a.length;++e){const t=a[e].lastElementChild;t.textContent=t.dataset.defaultText,t.dataset.map&&(delete t.dataset.map,delete t.dataset.text)}this.viewMapping.get(t).clear(),this.commandMapping.get(t).clear()}this.createShortcutMap()}executeShortcutSettingSave(){localStorage.removeItem(`${k.PREFIX}@shortcut`);const e={};for(let t=0;t<this._$names.length;++t){const a=this._$names[t],r=document.getElementById(`shortcut-list-${a}`).children;for(let t=0;t<r.length;++t){const i=r[t].lastElementChild;i.dataset.map&&(e[a]||(e[a]=[]),e[a].push({key:i.dataset.key,map:i.dataset.map,text:i.textContent}))}}localStorage.setItem(`${k.PREFIX}@shortcut`,JSON.stringify(e)),this.createShortcutMap(),k.$currentLanguage.initialize()}executeShortcutSettingClose(){k.$userSetting.show(),this._$selectNode&&(this._$selectNode.classList.remove("shortcut-active"),this._$selectNode=null,this._$selectArea="")}show(){const e=document.getElementById("shortcut-setting-menu");this._$selectNode&&(this._$selectNode.classList.remove("shortcut-active"),this._$selectNode=null,this._$selectArea=""),this.executeShortcutSettingScreen(),this._$active||(k.$useShortcutSetting=!0,this._$active=!0,window.addEventListener("keydown",this._$keydownEvent)),k.$endMenu("shortcut-setting-menu");const t=document.getElementById("user-setting");e.style.display="",e.style.left=`${t.offsetLeft}px`,e.style.top=`${t.offsetTop}px`,e.setAttribute("class","fadeIn")}};k.$tools=new class{constructor(){this._$handler=null,k.$readEnd++,"complete"!==document.readyState?(this._$handler=this.initialize.bind(this),window.addEventListener("DOMContentLoaded",this._$handler)):this.initialize(),this._$activeTool=null,this._$tools=new Map,this._$externalTools=new Map}get activeTool(){return this._$activeTool}set activeTool(e){this._$activeTool=e}initialize(){this._$handler&&(window.removeEventListener("DOMContentLoaded",this._$handler),this._$handler=null);const e=[ue,me,ve,ye,pe,_e,$e,ge,be,ke,fe];for(let t=0;t<e.length;++t){const a=new(0,e[t]);this._$tools.set(a.name,a)}const t=document.getElementById("tools");t&&(t.addEventListener("mousemove",(e=>{const t=this.activeTool;t&&(e.tools=!0,t.dispatchEvent(re.MOUSE_MOVE,e))})),t.addEventListener("mouseout",(e=>{k.$setCursor("auto"),e.stopPropagation()}))),k.$project.initialize(),k.$userSetting.initialize(),k.$initializeEnd()}setTool(e,t){this._$externalTools.set(e,t)}getTool(e){return this._$externalTools.has(e)?this._$externalTools.get(e):null}getDefaultTool(e){return this._$tools.get(e)}reset(){const e=this.activeTool;e&&e.dispatchEvent(re.END);const t=this.getDefaultTool("arrow");t.dispatchEvent(re.START),this.activeTool=t}};k.$userSetting=new class{initialize(){const e=document.getElementById("tools-setting");e&&e.addEventListener("click",(e=>{this.show(e)}));const t=this.getPublishSetting(),a=document.getElementById("publish-layer-setting");a&&(a.children[t.layer?1:0].selected=!0,a.addEventListener("change",(e=>{const t=this.getPublishSetting();t.layer="1"===e.target.value,localStorage.setItem(`${k.PREFIX}@user-publish-setting`,JSON.stringify(t))})));const r=document.getElementById("publish-type-setting");if(r){for(let e=0;e<r.children.length;++e){const a=r.children[e];if(t.type===a.value){a.selected=!0;break}}r.addEventListener("change",(e=>{const t=this.getPublishSetting();t.type=e.target.value,localStorage.setItem(`${k.PREFIX}@user-publish-setting`,JSON.stringify(t))}))}const i=document.getElementById("modal-setting");i&&("modal"in t&&(i.children[t.modal?0:1].selected=!0),i.addEventListener("change",(e=>{const t=this.getPublishSetting();t.modal="1"===e.target.value,localStorage.setItem(`${k.PREFIX}@user-publish-setting`,JSON.stringify(t))})));const s=document.getElementById("shortcut-setting");s&&s.addEventListener("click",(()=>{k.$shortcutSetting.show()}))}getPublishSetting(){const e=localStorage.getItem(`${k.PREFIX}@user-publish-setting`);return e?JSON.parse(e):{layer:!1,type:"zlib"}}show(){const e=document.getElementById("user-setting");k.$endMenu("user-setting");const t=document.getElementById("tools-setting");e.style.display="",e.style.left=`${t.offsetLeft+30}px`,e.style.top=t.offsetTop-e.clientHeight+80+"px",e.setAttribute("class","fadeIn")}};class de extends le{constructor(e){super(e),this.initialize()}initialize(){}changeNodeEvent(e=!0){k.$hitColor=null;const t=document.getElementById("stage-area");if(t){const a=t.children;for(let t=0;t<a.length;++t){const r=a[t];r.dataset.shapePointer?(r.remove(),--t):r.dataset.child&&"true"!==r.dataset.preview&&(r.style.pointerEvents=e?"auto":"none")}}}createShape(e,t=0,a=0){const r=k.$currentWorkSpace().scene,i=0|k.$timelineLayer.targetLayer.dataset.layerId,s=r.getLayer(0|i);if(s.lock)return;const n=k.$currentWorkSpace().addLibrary(e),o=k.$timelineFrame.currentFrame,l=s.adjustmentLocation(o),{Matrix:c}=window.next2d.geom,d=k.$sceneChange.concatenatedMatrix,h=new c(d[0],d[1],d[2],d[3],d[4],d[5]);h.invert();const u=t*h.a+a*h.c+h.tx,m=t*h.b+a*h.d+h.ty,g=new M;g.libraryId=n.id,g.startFrame=l.startFrame,g.endFrame=l.endFrame,g.setPlace(l.startFrame,{frame:l.startFrame,matrix:[1,0,0,1,u,m],colorTransform:[1,1,1,1,0,0,0,0],blendMode:"normal",filter:[],depth:s._$characters.length,scaleX:1,scaleY:1,rotation:0}),s.addCharacter(g),s.reloadStyle(),k.$timelineScroll.updateWidth(),k.$libraryController.reload()}createTextField(e,t=0,a=0){const r=k.$currentWorkSpace().scene,i=0|k.$timelineLayer.targetLayer.dataset.layerId,s=r.getLayer(0|i);if(s.lock)return;const n=k.$currentWorkSpace().addLibrary(e),o=k.$timelineFrame.currentFrame,l=s.adjustmentLocation(o),{Matrix:c}=window.next2d.geom,d=k.$sceneChange.concatenatedMatrix,h=new c(d[0],d[1],d[2],d[3],d[4],d[5]);h.invert();const u=t*h.a+a*h.c+h.tx,m=t*h.b+a*h.d+h.ty,g=new M;g.libraryId=n.id,g.startFrame=l.startFrame,g.endFrame=l.endFrame,g.setPlace(l.startFrame,{frame:l.startFrame,matrix:[1,0,0,1,u,m],colorTransform:[1,1,1,1,0,0,0,0],blendMode:"normal",filter:[],depth:s._$characters.length,scaleX:1,scaleY:1,rotation:0}),s.addCharacter(g),s.reloadStyle(),k.$timelineScroll.updateWidth(),k.$libraryController.reload()}reloadScreen(){return k.$currentWorkSpace().scene.changeFrame(k.$timelineFrame.currentFrame)}}class he extends de{constructor(e){super(e)}initialize(){this.setCursor("crosshair"),this.addEventListener(re.START,(()=>{k.$setCursor(this._$cursor),this.changeNodeEvent(!1)})),this.addEventListener(re.MOUSE_DOWN,(e=>{k.$setCursor(this._$cursor),this.active=!!e.screen,e.screen&&this.mouseDown(e)})),this.addEventListener(re.MOUSE_MOVE,(e=>{k.$setCursor(this._$cursor),e.screen&&this.active&&(e.stopPropagation(),this.mouseMove(e))})),this.addEventListener(re.MOUSE_UP,(e=>{k.$setCursor(this._$cursor),e.stopPropagation(),e.screen&&(k.$timelineLayer.attachLayer(),this.createCharacter().then((()=>{document.getElementById("draw-rect").style.display="none",k.$tools.reset()})))}))}createCharacter(e=""){if(!e)return Promise.resolve();const t=document.getElementById("draw-rect"),{Graphics:a}=window.next2d.display,r=0|document.getElementById("stroke-size").value,i=(parseFloat(t.style.width)+r)/k.$zoomScale,s=(parseFloat(t.style.height)+r)/k.$zoomScale;if(!i||!s)return Promise.resolve();const n=k.$currentWorkSpace();n.temporarilySaved();const o=new a;switch(o.beginFill(document.getElementById("fill-color").value,1),e){case"rectangle":o.drawRect(0,0,i,s);break;case"circle":o.drawEllipse(0,0,i,s);break;case"round-rect":o.drawRoundRect(0,0,i,s,Math.min(i,s)/4)}o.endFill();const l=(this.offsetX-k.$offsetLeft)/k.$zoomScale,c=(this.offsetY-k.$offsetTop)/k.$zoomScale,d=n.nextLibraryId;if(this.createShape({id:d,type:A.SHAPE,name:`Shape_${d}`,symbol:"",recodes:o._$recode?o._$recode.slice(0):[],bounds:{xMin:0,xMax:i,yMin:0,yMax:s}},l+r/2,c+r/2),r){const t=new a;switch(t.lineStyle(r,document.getElementById("stroke-color").value),e){case"rectangle":t.drawRect(0,0,i,s);break;case"circle":t.drawEllipse(0,0,i,s);break;case"round-rect":t.drawRoundRect(0,0,i,s,Math.min(i,s)/4)}t.endLine();const o=Math.abs(t._$xMax-t._$xMin)-i,l=Math.abs(t._$yMax-t._$yMin)-s,c=this.offsetX-k.$offsetLeft,d=this.offsetY-k.$offsetTop,h=n.nextLibraryId;this.createShape({id:h,type:A.SHAPE,name:`Shape_${h}`,symbol:"",recodes:t._$recode?t._$recode.slice(0):[],bounds:{xMin:-o/2,xMax:i+o/2,yMin:-l/2,yMax:s+l/2}},c+o/2,d+l/2)}return this.reloadScreen()}mouseDown(e){this.pageX=e.pageX,this.pageY=e.pageY,this.offsetX=e.offsetX,this.offsetY=e.offsetY,"stage-area"!==e.target.id&&(this.offsetX+=e.target.offsetLeft,this.offsetY+=e.target.offsetTop);const t=document.getElementById("draw-rect");t.style.left=`${e.pageX}px`,t.style.top=`${e.pageY}px`,t.style.width="0px",t.style.height="0px",t.style.display="",t.style.background=document.getElementById("fill-color").value,t.style.borderRadius="",t.style.border="";const a=0|document.getElementById("stroke-size").value;a&&(t.style.borderRadius=`${a}px`,t.style.border=`${a}px solid ${document.getElementById("stroke-color").value}`)}mouseMove(e){e.preventDefault();const t=e.pageX,a=e.pageY,r=document.getElementById("draw-rect");if("circle"===this.name&&(r.style.borderRadius="50%"),k.$shiftKey){const i=Math.max(Math.abs(t-this.pageX),Math.abs(a-this.pageY));this.pageX<t&&(r.style.left=`${this.pageX}px`),this.pageY<a&&(r.style.top=`${this.pageY}px`),this.pageX>t&&(this.offsetX=e.offsetX,r.style.left=this.pageX-i+"px"),this.pageY>a&&(this.offsetY=e.offsetY,r.style.top=this.pageY-i+"px"),r.style.width=`${i}px`,r.style.height=`${i}px`}else this.pageX>t&&(this.offsetX=e.offsetX,r.style.left=`${t}px`),this.pageY>a&&(this.offsetY=e.offsetY,r.style.top=`${a}px`),r.style.width=`${Math.abs(t-this.pageX)}px`,r.style.height=`${Math.abs(a-this.pageY)}px`;if("round-rect"===this.name){const e=Math.min(parseFloat(r.style.width),parseFloat(r.style.height));r.style.borderRadius=(e/8|0)+"px"}}}class ue extends de{constructor(){super("arrow"),this._$saved=!1,this._$activeElement="",this._$activeElements=[],this._$xReverse=!1,this._$yReverse=!1}initialize(){this.addEventListener(re.MOUSE_OVER,(e=>{const t=0|e.currentTarget.dataset.layerId,a=document.getElementById(`layer-lock-icon-${t}`);a&&!a.classList.contains("icon-active")&&k.$setCursor("move")})),this.addEventListener(re.MOUSE_OUT,(()=>{k.$setCursor("auto")})),this.addEventListener(re.CHANGE,(e=>{this.changeCharacter(e)})),this.addEventListener(re.MOUSE_LEAVE,(()=>{this.active=!1})),this.addEventListener(re.MOUSE_DOWN,(e=>{switch(this.active=!1,!0){case e.displayObject:this.active=!0,this._$activeElement=ue.DISPLAY_OBJECT,k.$endMenu(),this.activateElement(e);break;case e.screen:this.active=!0,this._$activeElement=ue.SCREEN,k.$endMenu(),this.clear(),this.startRect(e);break;case e.transform:this.active=!0,this._$activeElement=ue.TRANSFORM,k.$endMenu(),this.startPosition(e),this.setReverse();break;case e.grid:this.active=!0,this._$activeElement=ue.GRID,k.$endMenu(),this.startPosition(e);break;default:this._$activeElement=""}})),this.addEventListener(re.MOUSE_MOVE,(e=>{if(this.active)switch(e.stopPropagation(),e.preventDefault(),this._$activeElement){case ue.DISPLAY_OBJECT:this.moveDisplayObject(e);break;case ue.SCREEN:this.moveRect(e);break;case ue.TRANSFORM:this.moveTransform(e);break;case ue.GRID:this.moveGrid(e)}})),this.addEventListener(re.MOUSE_UP,(e=>{if(this._$activeElement){if(this._$activeElement===ue.SCREEN)e.stopPropagation(),this.endRect();this._$activeElement="",this._$saved=!1}})),this.addEventListener(re.START,(()=>{k.$setCursor(this._$cursor),this.changeNodeEvent(),k.$timelineLayer.activeCharacter();const e=document.getElementById("target-rect");e&&e.setAttribute("class","arrow")})),this.addEventListener(re.END,(()=>{this.clearActiveElement(),k.$transformController.hide(),k.$gridController.hide(),k.$tweenController.clearPointer(),k.$controller.default()})),this.addEventListener(re.DBL_CLICK,(e=>{e.screen&&!this._$activeElements.length&&this.moveScene()})),this.dispatchEvent(re.START),k.$tools.activeTool=this}get activeElements(){return this._$activeElements}static get SCREEN(){return"screen"}static get TRANSFORM(){return"transform"}static get DISPLAY_OBJECT(){return"displayObject"}static get GRID(){return"grid"}clear(){this.clearActiveElement(),k.$clearShapePointer(),k.$transformController.hide(),k.$gridController.hide(),k.$tweenController.clearPointer(),k.$controller.default(),k.$timelineLayer.clear(),k.$referenceController.resetPointer()}save(){this._$saved||(this._$saved=!0,k.$currentWorkSpace().temporarilySaved())}clearActiveElement(){this._$activeElements.length=0}deleteDisplayObject(){const e=this.activeElements;if(!e.length)return;this.save();const t=k.$timelineFrame.currentFrame,a=new Map,r=k.$currentWorkSpace().scene;for(let i=0;i<e.length;++i){const s=e[i],n=r.getLayer(0|s.dataset.layerId);if(!n)continue;const o=n.getCharacter(0|s.dataset.characterId);o&&(a.has(n.id)||a.set(n.id,{layer:n,range:o.getRange(t)}),o.remove(n))}this.clearActiveElement();for(const e of a.values()){const a=e.layer,r=e.range,i=a.getActiveCharacter(r.startFrame);if(i.length){a.sort(i,t);for(let e=0;e<i.length;++e)i[e].getPlace(t).depth=e}else a.addEmptyCharacter(new L({startFrame:r.startFrame,endFrame:r.endFrame}));a.reloadStyle()}this.reloadScreen(),this._$saved=!1}addElement(e,t=!1){if(!e)return!1;for(let t=0;t<this._$activeElements.length;++t){if(this._$activeElements[t].dataset.characterId===e.dataset.characterId)return k.$shiftKey?(k.$tweenController.clearPointer(),this._$activeElements.splice(t,1),k.$referenceController.pointer=null):this._$activeElements.splice(t,1,e),!1}t||k.$shiftKey?k.$referenceController.pointer=null:this.clearActiveElement(),this._$activeElements.push(e);const a=k.$currentWorkSpace().scene.getLayer(0|e.dataset.layerId).getCharacter(0|e.dataset.characterId);if(!a)return!1;const r=a.getRange(k.$timelineFrame.currentFrame);return a.hasTween(r.startFrame)&&k.$tweenController.clearPointer().relocationPointer(),!0}activateElement(e){let t=this.target;const a=0|t.dataset.layerId,r=k.$currentWorkSpace().scene.getLayer(a);if(r.lock)return;this.pageX=e.pageX,this.pageY=e.pageY,k.$timelineLayer.clear();const i=r.getCharacter(0|t.dataset.characterId);if(!i)return;const s=k.$timelineFrame.currentFrame,n=i.getPlace(s);let o=-1;const l=[];if(k.$altKey&&!n.tweenFrame){const e=i.clone();for(const[t,a]of e._$places){let e=0;const i=r.getActiveCharacter(t);for(let a=0;a<i.length;++a)e=Math.max(i[a].getPlace(t).depth,e);a.depth=e+1}r.addCharacter(e),l.push(k.$screen.appendCharacter(e,s,r.id)),o=e.id}Promise.all(l).then((a=>{if(o>-1){const e=document.getElementById("stage-area");for(let t=0;t<a.length;++t){const r=a[t];r&&(e.appendChild(r.div),r.div.appendChild(r.canvas))}for(t=document.getElementById(`character-${o}`);k.$sleepCanvases.length;)k.$poolCanvas(k.$sleepCanvases.pop())}this.addElement(t),this.updateControllerProperty(),1===this._$activeElements.length&&i.showShapeColor(e),k.$transformController.show().relocation(),k.$gridController.show().relocation(),this.activeTimeline()}))}activeTimeline(){k.$timelineLayer.clear();const e=k.$timelineFrame.currentFrame,t=k.$ctrlKey;k.$ctrlKey=this._$activeElements.length>1;const a=k.$currentWorkSpace().scene;for(let t=0;t<this._$activeElements.length;++t){const r=0|this._$activeElements[t].dataset.layerId,i=document.getElementById(`layer-id-${r}`);k.$timelineLayer.targetLayers.has(i.id)||(k.$timelineLayer.targetLayer=i);const s=a.getLayer(r);k.$timelineLayer.addTargetFrame(s,e)}k.$ctrlKey=t}changeCharacter(e){if(1!==this._$activeElements.length)return;const t=k.$currentWorkSpace(),a=t.scene,r=this._$activeElements[0],i=0|r.dataset.layerId,s=a.getLayer(i),n=0|r.dataset.characterId,o=s.getCharacter(n);o.dispose();const l=o.getRange(k.$timelineFrame.currentFrame),c=o.split(s,l.startFrame,l.endFrame);s.addCharacter(c),c._$libraryId=0|e.target.value,c.dispose();const d=t.getLibrary(c._$libraryId);if(d.type===A.MOVIE_CLIP)for(const e of c._$places.values())e.loop=k.$getDefaultLoopConfig();document.getElementById("instance-type-name").getElementsByTagName("i")[0].setAttribute("class",`library-type-${d.type}`),k.$timelineLayer.activeCharacter(),c.hasTween(l.startFrame)&&k.$tweenController.clearPointer().relocationPointer(),this.reloadScreen(),k.$transformController.show().relocation()}startRect(e){this.pageX=e.pageX,this.pageY=e.pageY;const t=document.getElementById("stage-rect");t.style.left=`${e.pageX}px`,t.style.top=`${e.pageY}px`,t.style.width="0px",t.style.height="0px",t.style.display=""}moveRect(e){const t=e.pageX,a=e.pageY,r=document.getElementById("stage-rect");this.pageX>t&&(r.style.left=`${t}px`),this.pageY>a&&(r.style.top=`${a}px`),r.style.width=`${Math.abs(t-this.pageX)}px`,r.style.height=`${Math.abs(a-this.pageY)}px`}endRect(){const e=document.getElementById("stage-rect");e.style.display="none";const t=parseFloat(e.style.width),a=parseFloat(e.style.height);if(!t||!a)return;const r=parseFloat(e.style.left),i=parseFloat(e.style.top),s=r+t,n=i+a,o=document.getElementById("stage-area").children;for(let e=0;e<o.length;++e){const t=o[e];switch(!0){case!t.dataset.child:case"tween"===t.dataset.child:case"true"===t.dataset.preview:case t.classList.contains("standard-point"):continue}const a=t.getBoundingClientRect();switch(!0){case a.bottom<i:case a.top>n:case a.right<r:case a.left>s:continue}const l=0|t.dataset.layerId;document.getElementById(`layer-lock-icon-${l}`).classList.contains("icon-active")||this.addElement(t,!0)}this._$activeElements.length&&(this.updateControllerProperty(),k.$transformController.show().relocation(),this.activeTimeline())}setReverse(){const e=+document.getElementById("transform-scale-x").value,t=document.getElementById("transform-scale-y").value;this._$xReverse=0>e,this._$yReverse=0>t}startPosition(e){this.pageX=e.pageX,this.pageY=e.pageY}moveGrid(e){k.$setCursor("move"),e.preventDefault();const t=(e.pageX-this.pageX)/k.$zoomScale,a=(e.pageY-this.pageY)/k.$zoomScale;let r=+document.getElementById("nine-slice-setting-x").value,i=+document.getElementById("nine-slice-setting-y").value,s=+document.getElementById("nine-slice-setting-w").value,n=+document.getElementById("nine-slice-setting-h").value;switch(this.target.id){case"grid-top-left":r+=t,s-=t,i+=a,n-=a;break;case"grid-top-right":s+=t,i+=a;break;case"grid-bottom-left":r+=t,s-=t,n+=a;break;case"grid-bottom-right":s+=t,n+=a}document.getElementById("nine-slice-setting-x").value=`${r}`,document.getElementById("nine-slice-setting-y").value=`${i}`,document.getElementById("nine-slice-setting-w").value=`${s}`,document.getElementById("nine-slice-setting-h").value=`${n}`,this.startPosition(e),k.$gridController.updateShapeGrid(r,i,s,n),this.reloadScreen()}moveTransform(e){k.$setCursor("move"),e.preventDefault(),this.save();let t=!1;switch(this.target.id){case"scale-top-left":{const a=this.updateLeftScaleX(e),r=this.updateTopScaleY(e);(a||r)&&(t=!0,k.$shiftKey&&this.adjustmentScale(a,r))}break;case"scale-center-left":this.updateLeftScaleX(e)&&(t=!0);break;case"scale-bottom-left":{const a=this.updateLeftScaleX(e),r=this.updateBottomScaleY(e);(a||r)&&(t=!0,k.$shiftKey&&this.adjustmentScale(a,r))}break;case"scale-center-bottom":this.updateBottomScaleY(e)&&(t=!0);break;case"scale-bottom-right":{const a=this.updateRightScaleX(e),r=this.updateBottomScaleY(e);(a||r)&&(t=!0,k.$shiftKey&&this.adjustmentScale(a,r))}break;case"scale-center-right":this.updateRightScaleX(e)&&(t=!0);break;case"scale-top-right":{const a=this.updateRightScaleX(e),r=this.updateTopScaleY(e);(a||r)&&(t=!0,k.$shiftKey&&this.adjustmentScale(a,r))}break;case"scale-center-top":this.updateTopScaleY(e)&&(t=!0);break;case"target-rotation":this.updateRotate(e)&&(t=!0);break;case"reference-point":this.updateReferencePoint(e);break;default:return}this.startPosition(e),t&&this.reloadScreen()}adjustmentScale(e=0,t=0){if(e!==t){if(e){const t=+document.getElementById("transform-scale-y").value;k.$transformController.updateScaleY((t+e)/100)}if(t){const e=+document.getElementById("transform-scale-x").value;k.$transformController.updateScaleX((e+t)/100)}}}updateTopScaleY(e){let t=this.pageY-e.pageY;if(!t)return 0;this._$yReverse&&(t*=-1);const a=+document.getElementById("transform-scale-y").value;return k.$transformController.updateScaleY((a+t)/100),t}updateRotate(e){const t=e.pageX-this.pageX;if(!t)return 0;let a=+document.getElementById("transform-rotate").value+t;return a=k.$clamp((0|a)%360,Pe.MIN_ROTATE,Pe.MAX_ROTATE),k.$transformController.updateRotate(a),1}updateReferencePoint(e){const t=(e.pageX-this.pageX)/k.$zoomScale,a=(e.pageY-this.pageY)/k.$zoomScale,r=k.$tools.getDefaultTool("arrow").activeElements,i=document.getElementById("reference-point");if(r.length>1){const e=k.$referenceController.pointer;e.x+=t,e.y+=a,k.$referenceController.setInputValue(e.x,e.y),i.style.left=`${i.offsetLeft+t}px`,i.style.top=`${i.offsetTop+a}px`}else{const e=r[0],s=0|e.dataset.layerId,n=k.$currentWorkSpace().scene.getLayer(s).getCharacter(0|e.dataset.characterId),o=k.$timelineFrame.currentFrame,l=n.getRange(o),c=n.getPlace(l.startFrame);if(!c.point){const e=n.getBounds();c.point={x:c.matrix[4]+Math.abs(e.xMax-e.xMin)/2,y:c.matrix[5]+Math.abs(e.yMax-e.yMin)/2}}c.point.x+=t,c.point.y+=a,k.$referenceController.setInputValue(c.point.x,c.point.y);const d=k.$offsetLeft+c.point.x*k.$zoomScale-i.offsetWidth/2,h=k.$offsetTop+c.point.y*k.$zoomScale-i.offsetHeight/2;i.setAttribute("style",`left: ${d}px; top: ${h}px;`),c.tweenFrame&&k.$tweenController.relocationPlace(n,l.startFrame)}}updateLeftScaleX(e){let t=this.pageX-e.pageX;if(!t)return 0;this._$xReverse&&(t*=-1);const a=+document.getElementById("transform-scale-x").value;return k.$transformController.updateScaleX((a+t)/100),t}updateBottomScaleY(e){let t=e.pageY-this.pageY;if(!t)return 0;this._$yReverse&&(t*=-1);const a=+document.getElementById("transform-scale-y").value;return k.$transformController.updateScaleY((a+t)/100),t}updateRightScaleX(e){let t=e.pageX-this.pageX;if(!t)return 0;this._$xReverse&&(t*=-1);const a=+document.getElementById("transform-scale-x").value;return k.$transformController.updateScaleX((a+t)/100),t}moveDisplayObject(e=null){this.save();const t=k.$currentWorkSpace().scene,a=k.$timelineFrame.currentFrame,r=e?e.pageX-this.pageX:this.pageX,i=e?e.pageY-this.pageY:this.pageY,s=k.$sceneChange.concatenatedMatrix,{Matrix:n}=next2d.geom,o=new n(s[0],s[1],s[2],s[3],s[4],s[5]);o.invert();let l=Number.MAX_VALUE,c=Number.MAX_VALUE;for(let e=0;e<this._$activeElements.length;++e){const n=this._$activeElements[e],d=document.getElementById(n.id);if(!d)continue;const h=0|d.dataset.layerId,u=t.getLayer(h),m=u.getCharacter(0|d.dataset.characterId);this.initPlace(m,h,a);const g=m.getPlace(a),p=r*o.a+i*o.c,f=r*o.b+i*o.d;g.matrix[4]+=p/k.$zoomScale,g.matrix[5]+=f/k.$zoomScale;const $=m.getBounds(s);g.point?(g.point.x+=r/k.$zoomScale,g.point.y+=i/k.$zoomScale):g.point={x:k.$sceneChange.offsetX+$.xMin+Math.abs($.xMax-$.xMin)/2,y:k.$sceneChange.offsetY+$.yMin+Math.abs($.yMax-$.yMin)/2};let y=null;k.$sceneChange.matrix.length&&(y=k.$multiplicationMatrix(s,g.matrix));const _=m.getBounds(y);m.screenX=_.xMin,m.screenY=_.yMin;let b="position: absolute;";b+=`pointer-events: ${d.dataset.pointer};`;const v=k.$offsetLeft+(k.$sceneChange.offsetX+$.xMin)*k.$zoomScale,w=k.$offsetTop+(k.$sceneChange.offsetY+$.yMin)*k.$zoomScale;b+=`left: ${v}px;`,b+=`top: ${w}px;`;let S=null;if(null!==u.maskId){const e=t.getLayer(u.maskId);if(e.lock&&e._$characters.length){const t=k.$sceneChange.concatenatedMatrix,r=e._$characters[0],i=r.getPlace(a);r._$maskPlaceFrame!==i.frame&&(r.dispose(),r._$maskPlaceFrame=i.frame),S=r.draw(k.$getCanvas()).then((e=>{const a=r.getBounds(t),i=(a.xMin-$.xMin)*k.$zoomScale,s=(a.yMin-$.yMin)*k.$zoomScale;e._$base64||(e._$base64=e.toDataURL());const n=e._$base64,o=e._$width*k.$zoomScale,l=e._$height*k.$zoomScale;b+=`mask: url(${n}), none;`,b+=`-webkit-mask: url(${n}), none;`,b+=`mask-size: ${o}px ${l}px;`,b+=`-webkit-mask-size: ${o}px ${l}px;`,b+="mask-repeat: no-repeat;",b+="-webkit-mask-repeat: no-repeat;",b+=`mask-position: ${i}px ${s}px;`,b+=`-webkit-mask-position: ${i}px ${s}px;`;const c=m._$canvas;return b+=`mix-blend-mode: ${c.style.mixBlendMode};`,b+=`filter: ${c.style.filter};`,Promise.resolve(b)}))}}S?S.then((e=>{d.setAttribute("style",e)})):d.setAttribute("style",b),l=Math.min(l,m.x),c=Math.min(c,m.y),m.relocationTween(a)}if(e&&(this.pageX=e.pageX,this.pageY=e.pageY),document.getElementById("object-x").value=+l.toFixed(2),document.getElementById("object-y").value=+c.toFixed(2),this._$activeElements.length>1){const e=k.$referenceController.pointer;e.x+=r,e.y+=i}k.$transformController.show().relocation(),k.$gridController.show().relocation();const d=document.getElementById("timeline-onion-skin");d&&d.classList.contains("onion-skin-active")&&this.reloadScreen()}initPlace(e,t,a){const r=k.$currentWorkSpace().scene.getLayer(t);let i=a;for(;i>0;){const t=r.getChildren(i);if(t&&"key-frame"===t.dataset.frameState){e._$places.has(i)||e.setPlace(i,e.getClonePlace(i));break}i--}}updateControllerProperty(){if(!this._$activeElements.length)return;const e=k.$currentWorkSpace().scene;let t=null,a=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MAX_VALUE,s=-Number.MAX_VALUE,n=Number.MAX_VALUE,o=-Number.MAX_VALUE;for(let l=0;l<this._$activeElements.length;++l){const c=this._$activeElements[l],d=0|c.dataset.layerId;t=e.getLayer(d).getCharacter(0|c.dataset.characterId),a=Math.min(a,t.x),r=Math.min(r,t.y);const h=t.getBounds();i=Math.min(i,h.xMin),s=Math.max(s,h.xMax),n=Math.min(n,h.yMin),o=Math.max(o,h.yMax)}const l=Math.abs(s-i),c=Math.abs(o-n);document.getElementById("object-width").value=""+ +l.toFixed(2),document.getElementById("object-height").value=""+ +c.toFixed(2),document.getElementById("object-x").value=""+ +a.toFixed(2),document.getElementById("object-y").value=""+ +r.toFixed(2),k.$controller.showObjectSetting(["object-area"]),k.$controller.hideObjectSetting(["stage-setting","fill-color-setting"]),this._$activeElements.length>1?(k.$controller.hideObjectSetting(["object-setting","color-setting","blend-setting","loop-setting","filter-setting","video-setting","instance-setting","text-setting","nine-slice-setting","sound-setting","ease-setting"]),k.$referenceController.pointer||k.$referenceController.resetPointer(),document.getElementById("transform-scale-x").value=100,document.getElementById("transform-scale-y").value=100,document.getElementById("transform-rotate").value=0):t.showController()}moveScene(){const e=document.getElementById("scene-name-menu-list").lastElementChild;e&&(k.$timelinePlayer.executeTimelineStop(),k.$sceneChange.offsetX=+e.dataset.offsetX,k.$sceneChange.offsetY=+e.dataset.offsetY,k.$activeCharacterIds.pop(),k.$sceneChange.matrix.pop(),k.$sceneChange.execute(0|e.dataset.libraryId),e.remove())}}class me extends de{constructor(){super("arrow-transform"),this._$validity=!1}get validity(){return this._$validity}initialize(){const e=k.$tools.getDefaultTool("arrow");for(const t of e._$events.keys())t!==re.START&&t!==re.END&&this.addEventListener(t,(e=>{k.$tools.getDefaultTool("arrow").dispatchEvent(t,e)}));this.addEventListener(re.START,(()=>{k.$setCursor(this._$cursor),this.changeNodeEvent();const e=document.getElementById("target-rect");e&&e.setAttribute("class",""),k.$timelineLayer.activeCharacter(),this._$validity=!0,k.$transformController.show().relocation()})),this.addEventListener(re.END,(()=>{k.$tools.getDefaultTool("arrow").clearActiveElement(),k.$transformController.hide(),k.$gridController.hide(),k.$tweenController.clearPointer(),k.$controller.default(),this._$validity=!1}))}}class ge extends de{constructor(){super("bucket")}initialize(){this.addEventListener(re.START,(()=>{this.setCursor(),this.changeNodeEvent()})),this.addEventListener(re.MOUSE_DOWN,(e=>{this.setCursor(),e.stopPropagation(),e.displayObject&&this.mouseDown(e)})),this.addEventListener(re.MOUSE_MOVE,(e=>{this.setCursor(),e.stopPropagation()})),this.addEventListener(re.MOUSE_UP,(e=>{this.setCursor(),e.stopPropagation(),k.$tools.reset()}))}setCursor(){const e=k.$intToRGB(0|`0x${document.getElementById("fill-color").value.slice(1)}`);k.$setCursor(`url('data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="rgb(${e.R},${e.G},${e.B})" d="M24 19.007c0-3.167-1.409-6.771-2.835-9.301l-.006-.01-.014-.026c-.732-1.392-1.914-3.052-3.619-4.757-2.976-2.976-5.476-3.912-6.785-3.913-.413 0-.708.094-.859.245l-.654.654c-1.898-.236-3.42.105-4.294.982-.876.875-1.164 2.159-.792 3.524.242.893.807 1.891 1.752 2.836.867.867 2.062 1.684 3.615 2.327.488-.839 1.654-1.019 2.359-.315.586.586.584 1.533-.002 2.119s-1.533.589-2.121 0c-.229-.229-.366-.515-.416-.812-1.646-.657-3.066-1.534-4.144-2.612-.728-.728-1.289-1.528-1.664-2.349l-2.835 2.832c-.445.447-.685 1.064-.686 1.82.001 1.635 1.122 3.915 3.714 6.506 2.764 2.764 5.58 4.243 7.431 4.243.649 0 1.181-.195 1.548-.562l8.086-8.079c.911.875-.777 3.541-.777 4.65 0 1.104.896 1.999 2 1.998 1.104 0 1.998-.895 1.998-2zm-18.912-12.974c-.236-.978-.05-1.845.554-2.444.526-.53 1.471-.791 2.656-.761l-3.21 3.205zm9.138 2.341l-.03-.029c-1.29-1.291-3.802-4.354-3.095-5.062.715-.715 3.488 1.521 5.062 3.095.862.863 2.088 2.248 2.938 3.459-1.718-1.073-3.493-1.469-4.875-1.463zm-3.875 12.348c-.547-.082-1.5-.547-1.9-.928l7.086-7.086c.351.37 1.264.931 1.753 1.075l-6.939 6.939z"/></svg>'),auto`)}mouseDown(e){const t=e.target;if(t.dataset.instanceType===A.SHAPE){const{Graphics:e}=window.next2d.display,a=k.$currentWorkSpace();a.temporarilySaved();const r=a.getLibrary(0|t.dataset.libraryId),i=k.$intToRGB(0|`0x${document.getElementById("fill-color").value.slice(1)}`);switch(r._$recodes[r._$recodes.length-1]){case e.END_FILL:r._$recodes.splice(r._$recodes.length-6,6,e.FILL_STYLE,i.R,i.G,i.B,255,e.END_FILL);break;case e.END_STROKE:r._$recodes.push(e.FILL_STYLE,i.R,i.G,i.B,255,e.END_FILL)}r.cacheClear(),this.reloadScreen()}}}class pe extends he{constructor(){super("circle")}createCharacter(e="circle"){return super.createCharacter(e)}}class fe extends de{constructor(){super("hand")}initialize(){this.setCursor("grab"),this.addEventListener(re.START,(()=>{k.$setCursor(this._$cursor),this.changeNodeEvent(!1)})),this.addEventListener(re.MOUSE_MOVE,(e=>{if(k.$setCursor(this._$cursor),!this.active)return;const t=document.getElementById("screen");t.scrollLeft+=this.pageX-e.pageX,t.scrollTop+=this.pageY-e.pageY,this.pageX=e.pageX,this.pageY=e.pageY})),this.addEventListener(re.MOUSE_UP,(()=>{this.active=!1,this.setCursor("grab"),k.$setCursor(this._$cursor)})),this.addEventListener(re.MOUSE_DOWN,(e=>{this.active=!0,this.setCursor("grabbing"),k.$setCursor(this._$cursor),this.pageX=e.pageX,this.pageY=e.pageY}))}}class $e extends de{constructor(){super("pen")}initialize(){this.addEventListener(re.START,(()=>{this.setCursor(),this.changeNodeEvent(!1)})),this.addEventListener(re.MOUSE_DOWN,(e=>{this.setCursor(),e.stopPropagation(),this.clearPenPointer();let t=e.offsetX,a=e.offsetY;"stage-area"!==e.target.id&&(t+=e.target.offsetLeft,a+=e.target.offsetTop),this.offsetX=t,this.offsetY=a})),this.addEventListener(re.MOUSE_MOVE,(e=>{this.setCursor(),e.stopPropagation(),e.screen&&this.active&&this.mouseMove(e)})),this.addEventListener(re.MOUSE_UP,(e=>{this.setCursor(),e.stopPropagation(),this.mouseUp()}))}clearPenPointer(){const e=document.getElementById("stage-area");for(let t=0;e.children.length>t;++t){const a=e.children[t];a.dataset.penPointer&&(a.remove(),--t)}}setCursor(){const e=k.$intToRGB(0|`0x${document.getElementById("stroke-color").value.slice(1)}`);k.$setCursor(`url('data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24"><path fill="rgb(${e.R},${e.G},${e.B})" d="M1.438 16.875l5.688 5.689-7.126 1.436 1.438-7.125zm22.562-11.186l-15.46 15.46-5.688-5.689 15.459-15.46 5.689 5.689zm-4.839-2.017l-.849-.849-12.614 12.599.85.849 12.613-12.599z"/></svg>') 0 12, auto`)}mouseMove(e){const t=0|document.getElementById("stroke-size").value;if(t){e.preventDefault();let a=e.offsetX,r=e.offsetY;"stage-area"!==e.target.id&&(a+=e.target.offsetLeft,r+=e.target.offsetTop);const i=document.getElementById("stage-area"),s=document.createElement("div");s.dataset.penPointer="true",s.classList.add("pen-pointer"),s.style.width=`${t}px`,s.style.height=`${t}px`,s.style.left=`${a}px`,s.style.top=`${r}px`,s.style.backgroundColor=document.getElementById("stroke-color").value,s.style.borderRadius=t/2+"px",i.appendChild(s)}}mouseUp(){k.$timelineLayer.attachLayer();const{Shape:e}=window.next2d.display,t=0|document.getElementById("stroke-size").value,a=new e;a.graphics.lineStyle(t,document.getElementById("stroke-color").value);const r=this.offsetX-k.$offsetLeft,i=this.offsetY-k.$offsetTop;a.graphics.moveTo(0,0);const s=document.getElementById("stage-area").children;for(let e=0;s.length>e;++e){const t=s[e];t.dataset.penPointer&&(a.graphics.lineTo((t.offsetLeft-k.$offsetLeft-r)/k.$zoomScale,(t.offsetTop-k.$offsetTop-i)/k.$zoomScale),t.remove(),--e)}a.graphics.endLine();const n=k.$currentWorkSpace().nextLibraryId,o=r/k.$zoomScale+t/2/k.$zoomScale,l=i/k.$zoomScale+t/2/k.$zoomScale;this.createShape({id:n,type:A.SHAPE,name:`Shape_${n}`,symbol:"",recodes:a.graphics._$recode.slice(0),bounds:{xMin:a.graphics._$xMin,xMax:a.graphics._$xMax,yMin:a.graphics._$yMin,yMax:a.graphics._$yMax}},o,l),this.reloadScreen(),k.$tools.reset()}}class ye extends he{constructor(){super("rectangle")}createCharacter(e="rectangle"){return super.createCharacter(e)}}class _e extends he{constructor(){super("round-rect")}createCharacter(e="round-rect"){return super.createCharacter(e)}}class be extends de{constructor(){super("text")}initialize(){this.addEventListener(re.START,(()=>{k.$setCursor("text"),this.changeNodeEvent(!1)})),this.addEventListener(re.MOUSE_DOWN,(e=>{k.$setCursor("text"),e.stopPropagation(),e.screen&&this.mouseDown(e)})),this.addEventListener(re.MOUSE_MOVE,(e=>{k.$setCursor("text"),e.stopPropagation(),e.screen&&this.mouseMove(e)})),this.addEventListener(re.MOUSE_UP,(e=>{k.$setCursor("text"),e.screen&&(e.stopPropagation(),this.mouseUp(),k.$tools.reset())}))}mouseDown(e){let t=e.offsetX,a=e.offsetY;"stage-area"!==e.target.id&&(t+=e.target.offsetLeft,a+=e.target.offsetTop),this.pageX=e.pageX,this.pageY=e.pageY,this.offsetX=t,this.offsetY=a;const r=document.getElementById("draw-text");r.style.left=`${e.pageX}px`,r.style.top=`${e.pageY}px`,r.style.width="0px",r.style.height="0px",r.style.display="",r.style.border="1px dashed gray"}mouseMove(e){e.preventDefault();const t=e.pageX,a=e.pageY,r=document.getElementById("draw-text");this.pageX>t&&(this.offsetX=e.offsetX,r.style.left=`${t}px`),this.pageY>a&&(this.offsetY=e.offsetY,r.style.top=`${a}px`),r.style.width=`${Math.abs(t-this.pageX)}px`,r.style.height=`${Math.abs(a-this.pageY)}px`}mouseUp(){k.$timelineLayer.attachLayer();const e=document.getElementById("draw-text"),t=k.$currentWorkSpace();t.temporarilySaved();const a=(this.offsetX-k.$offsetLeft)/k.$zoomScale,r=(this.offsetY-k.$offsetTop)/k.$zoomScale,i=parseFloat(e.style.width)/k.$zoomScale,s=parseFloat(e.style.height)/k.$zoomScale,n=t.nextLibraryId;this.createTextField({id:n,type:A.TEXT,name:`Text_${n}`,symbol:"",bounds:{xMin:0,xMax:i,yMin:0,yMax:s},originBounds:{xMin:0,xMax:i,yMin:0,yMax:s}},a,r),this.reloadScreen(),e.style.display="none"}}class ve extends de{constructor(){super("transform"),this._$element=null,this._$deletePointer=null}initialize(){this.setCursor('url(\'data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 48 48"><path fill="white" d="M27.8,39.7c-0.1,0-0.2,0-0.4-0.1c-0.2-0.1-0.4-0.3-0.6-0.5l-3.7-8.6l-4.5,4.2C18.5,34.9,18.3,35,18,35c-0.1,0-0.3,0-0.4-0.1C17.3,34.8,17,34.4,17,34l0-22c0-0.4,0.2-0.8,0.6-0.9C17.7,11,17.9,11,18,11c0.2,0,0.5,0.1,0.7,0.3l16,15c0.3,0.3,0.4,0.7,0.3,1.1c-0.1,0.4-0.5,0.6-0.9,0.7l-6.3,0.6l3.9,8.5c0.1,0.2,0.1,0.5,0,0.8c-0.1,0.2-0.3,0.5-0.5,0.6l-2.9,1.3C28.1,39.7,27.9,39.7,27.8,39.7z"/><path fill="black" d="M18,12l16,15l-7.7,0.7l4.5,9.8l-2.9,1.3l-4.3-9.9L18,34L18,12 M18,10c-0.3,0-0.5,0.1-0.8,0.2c-0.7,0.3-1.2,1-1.2,1.8l0,22c0,0.8,0.5,1.5,1.2,1.8C17.5,36,17.8,36,18,36c0.5,0,1-0.2,1.4-0.5l3.4-3.2l3.1,7.3c0.2,0.5,0.6,0.9,1.1,1.1c0.2,0.1,0.5,0.1,0.7,0.1c0.3,0,0.5-0.1,0.8-0.2l2.9-1.3c0.5-0.2,0.9-0.6,1.1-1.1c0.2-0.5,0.2-1.1,0-1.5l-3.3-7.2l4.9-0.4c0.8-0.1,1.5-0.6,1.7-1.3c0.3-0.7,0.1-1.6-0.5-2.1l-16-15C19,10.2,18.5,10,18,10L18,10z"/></svg>\') 6 6,auto'),this.addEventListener(re.START,(()=>{k.$setCursor(this._$cursor),this.changeNodeEvent(),this._$deletePointer=this.deletePointer.bind(this),window.addEventListener("keydown",this._$deletePointer)})),this.addEventListener(re.END,(()=>{window.removeEventListener("keydown",this._$deletePointer)})),this.addEventListener(re.MOUSE_DOWN,(e=>{switch(!0){case e.displayObject:this._$element=null,this.mouseDownForDisplayObject();break;case e.shapePointer:this.mouseDownForPointer(e);break;default:this._$element=null}})),this.addEventListener(re.DBL_CLICK,(e=>{switch(k.$setCursor(this._$cursor),e.stopPropagation(),!0){case e.shapePointer:this.addCurvePointer(e);break;case e.screen:this.addPointer(e)}})),this.addEventListener(re.MOUSE_UP,(e=>{k.$setCursor(this._$cursor),e.stopPropagation()})),this.addEventListener(re.MOUSE_MOVE,(e=>{k.$setCursor(this._$cursor),this.active&&(e.stopPropagation(),this.movePointer(e))}))}addPointer(e){this.clearActivePointer();const t=k.$timelineFrame.currentFrame;let a=null,r=Number.MAX_VALUE;const i=document.getElementById("stage-area").children,s=k.$currentWorkSpace(),n=s.scene;let o=e.offsetX,l=e.offsetY;if("stage-area"!==e.target.id){const t=0|e.target.dataset.layerId,a=0|e.target.dataset.characterId,r=n.getLayer(t).getCharacter(a);o=r.screenX+k.$offsetLeft+e.offsetX,l=r.screenY+k.$offsetTop+e.offsetY}for(let e=0;e<i.length;++e){const t=i[e];if(!t.dataset.shapePointer)continue;if("true"===t.dataset.curve)continue;const s=Math.sqrt(Math.pow(t.offsetLeft-o,2)+Math.pow(t.offsetTop-l,2));r>s&&(a=t),r=Math.min(r,s)}if(!a)return;const c=s.getLibrary(0|a.dataset.libraryId);if(!c)return;const d=[],h=0|a.dataset.position;for(let e=h+1;e<i.length;++e){const t=i[e];if("true"!==t.dataset.curve){d.push(t);break}}if(!d.length)for(let e=0;e<i.length;++e){const t=i[e];if(t.dataset.shapePointer&&"true"!==t.dataset.curve){d.push(t);break}}for(let e=h-1;;--e){const t=i[e];if(!t.dataset.shapePointer)break;if("true"!==t.dataset.curve){d.push(t);break}}if(1===d.length)for(let e=i.length-1;;--e){const t=i[e];if(!t.dataset.shapePointer)break;if("true"!==t.dataset.curve){d.push(t);break}}let u=null;r=Number.MAX_VALUE;for(let e=0;e<d.length;++e){const t=d[e],a=Math.sqrt(Math.pow(t.offsetLeft-o,2)+Math.pow(t.offsetTop-l,2));r>a&&(u=t),r=Math.min(r,a)}const{Graphics:m}=window.next2d.display,g=0|a.dataset.layerId,p=0|a.dataset.characterId,f=n.getLayer(g).getCharacter(p),$=f.getPlace(t).matrix,y=Math.sqrt($[0]*$[0]+$[1]*$[1]),_=Math.sqrt($[2]*$[2]+$[3]*$[3]),b=0|a.dataset.index,v=0|u.dataset.index;v>b?c._$recodes.splice(b+2,0,m.LINE_TO,(o-k.$offsetLeft-f.screenX+c._$bounds.xMin)/y,(l-k.$offsetTop-f.screenY+c._$bounds.yMin)/_):c._$recodes.splice(v+2,0,m.LINE_TO,(o-k.$offsetLeft-f.screenX+c._$bounds.xMin)/y,(l-k.$offsetTop-f.screenY+c._$bounds.yMin)/_);for(let e=0;e<i.length;++e){const t=i[e];t.dataset.shapePointer&&("true"!==t.dataset.curve&&(t.remove(),--e))}const w=c.reloadBounds(k.$hitColor?0|k.$hitColor.width:0);c._$bounds.xMin=w.xMin,c._$bounds.xMax=w.xMax,c._$bounds.yMin=w.yMin,c._$bounds.yMax=w.yMax,c.cacheClear(),n.changeFrame(t),c.createPointer(g,p)}addCurvePointer(e){this.clearActivePointer();const{Graphics:t}=window.next2d.display,a=k.$currentWorkSpace(),r=e.target;if(!("true"===r.dataset.curve)){const e=0|r.dataset.type,i=0|r.dataset.index,s=0|r.dataset.layerId,n=0|r.dataset.characterId,o=a.getLibrary(0|r.dataset.libraryId),l=o._$recodes[i],c=o._$recodes[i+1],d=r.previousElementSibling;let h=2;d&&"true"===d.dataset.shapePointer&&(h=0|d.dataset.index);const u=(l+o._$recodes[h])/2,m=(c+o._$recodes[h+1])/2;switch(e){case t.LINE_TO:{a.temporarilySaved(),o._$recodes.splice(i,0,u,m),o._$recodes[i-1]=t.CURVE_TO,o.cacheClear();const e=k.$timelineFrame.currentFrame;a.scene.changeFrame(e),o.createPointer(s,n)}break;case t.CURVE_TO:{a.temporarilySaved(),o._$recodes.splice(i,0,u,m),o._$recodes[i-3]=t.CUBIC,o.cacheClear();const e=k.$timelineFrame.currentFrame;k.$currentWorkSpace().scene.changeFrame(e),o.createPointer(s,n)}}}}clearActivePointer(){const e=document.getElementById("stage-area").children,t=e.length;for(let a=0;a<t;++a){const t=e[a];"true"===t.dataset.shapePointer&&(t.style.backgroundColor="")}}mouseDownForPointer(e){k.$currentWorkSpace().temporarilySaved();const{Graphics:t}=window.next2d.display,a=document.getElementById("stage-area");this.clearActivePointer();const r=this.target;this._$element=r,this.pageX=e.pageX-r.offsetLeft,this.pageY=e.pageY-r.offsetTop;const i=this.target;i.style.backgroundColor=k.$shapePointerColor;const s=0|i.dataset.position,n=0|i.dataset.type,o="true"===i.dataset.curve;switch(n){case t.CURVE_TO:o?a.children[s+1].style.backgroundColor=k.$shapeLinkedPointerColor:a.children[s-1].style.backgroundColor=k.$shapeLinkedPointerColor;break;case t.CUBIC:if(o)for(let e=1;e<3;++e){const t=a.children[s+e];if(t.style.backgroundColor=k.$shapeLinkedPointerColor,"true"!==t.dataset.curve){1===e&&(a.children[s-1].style.backgroundColor=k.$shapeLinkedPointerColor);break}}else a.children[s-1].style.backgroundColor=k.$shapeLinkedPointerColor,a.children[s-2].style.backgroundColor=k.$shapeLinkedPointerColor}}mouseDownForDisplayObject(){const e=this.target;if(e.dataset.instanceType!==A.SHAPE)return;k.$tools.getDefaultTool("arrow").clear();const t=0|e.dataset.layerId,a=0|e.dataset.characterId;k.$currentWorkSpace().getLibrary(0|e.dataset.libraryId).createPointer(t,a)}movePointer(e){const t=this.target;if("true"!==t.dataset.shapePointer)return;const a=k.$currentWorkSpace(),r=a.getLibrary(0|t.dataset.libraryId);if(!r)return void k.$clearShapePointer();e.preventDefault();const i=k.$timelineFrame.currentFrame,s=0|t.dataset.layerId,n=0|t.dataset.characterId,o=a.scene;let l=o.getLayer(s).getCharacter(n).getPlace(i).matrix;k.$sceneChange.matrix.length&&(l=k.$multiplicationMatrix(k.$sceneChange.concatenatedMatrix,l));const c=e.pageX-this.pageX,d=e.pageY-this.pageY,{Matrix:h}=window.next2d.geom,u=new h(l[0],l[1],l[2],l[3],l[4],l[5]);u.invert();const m=c-t.offsetLeft,g=d-t.offsetTop,p=m*u.a+g*u.c,f=m*u.b+g*u.d,$=0|t.dataset.index;r._$recodes[$]+=p/k.$zoomScale,r._$recodes[$+1]+=f/k.$zoomScale;const y=0|t.dataset.syncId;y&&(r._$recodes[y]+=p/k.$zoomScale,r._$recodes[y+1]+=f/k.$zoomScale),t.style.left=`${c}px`,t.style.top=`${d}px`;const _=r.reloadBounds(k.$hitColor?0|k.$hitColor.width:0);r._$bounds.xMin=_.xMin,r._$bounds.xMax=_.xMax,r._$bounds.yMin=_.yMin,r._$bounds.yMax=_.yMax,r.cacheClear(),o.changeFrame(i)}deletePointer(e){if(k.$setCursor(this._$cursor),k.$keyLock||"Backspace"!==e.key)return;e.stopPropagation();let t=0;const a=document.getElementById("stage-area").children;for(let e=0;a.length>e;++e){const r=a[e];r.dataset.shapePointer&&("false"===r.dataset.curve&&t++)}const r=this._$element;if(!r)return;const i="true"===r.dataset.curve;if(!r.dataset.syncId&&(t>2||i)){const e=k.$currentWorkSpace();e.temporarilySaved();const{Graphics:t}=window.next2d.display,a=e.getLibrary(0|r.dataset.libraryId),s=0|r.dataset.index;switch(0|r.dataset.type){case t.MOVE_TO:break;case t.LINE_TO:a._$recodes.splice(s-1,3);break;case t.CUBIC:{let e=s;for(;a._$recodes[--e]!==t.CUBIC;);i?(a._$recodes[e]=t.CURVE_TO,a._$recodes.splice(s,2)):a._$recodes.splice(e,7)}break;case t.CURVE_TO:{let e=s;for(;a._$recodes[--e]!==t.CURVE_TO;);i?(a._$recodes[e]=t.LINE_TO,a._$recodes.splice(s,2)):a._$recodes.splice(e,5)}}const n=a.reloadBounds(k.$hitColor?0|k.$hitColor.width:0);a._$bounds.xMin=n.xMin,a._$bounds.xMax=n.xMax,a._$bounds.yMin=n.yMin,a._$bounds.yMax=n.yMax,a.cacheClear();const o=k.$timelineFrame.currentFrame,l=e.scene;l.changeFrame(o);const c=0|r.dataset.layerId,d=0|r.dataset.characterId;l.getLayer(c).getCharacter(d)&&a.createPointer(c,d)}}}class ke extends de{constructor(){super("zoom")}initialize(){this.setCursor('url(\'data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 24 24"><path d="M13 10h-3v3h-2v-3h-3v-2h3v-3h2v3h3v2zm8.172 14l-7.387-7.387c-1.388.874-3.024 1.387-4.785 1.387-4.971 0-9-4.029-9-9s4.029-9 9-9 9 4.029 9 9c0 1.761-.514 3.398-1.387 4.785l7.387 7.387-2.828 2.828zm-12.172-8c3.859 0 7-3.14 7-7s-3.141-7-7-7-7 3.14-7 7 3.141 7 7 7z"/></svg>\') 6 6,auto'),this.addEventListener(re.START,(()=>{k.$setCursor(this._$cursor),this.changeNodeEvent(!1)})),this.addEventListener(re.MOUSE_DOWN,(e=>{this.startRect(e)})),this.addEventListener(re.MOUSE_MOVE,(e=>{this.moveRect(e)})),this.addEventListener(re.MOUSE_UP,(()=>{this.execute()}))}startRect(e){this.active=!0,k.$setCursor(this._$cursor),this.pageX=e.pageX,this.pageY=e.pageY;const t=document.getElementById("stage-rect");t.style.left=`${e.pageX}px`,t.style.top=`${e.pageY}px`,t.style.width="0px",t.style.height="0px",t.style.display=""}moveRect(e){if(k.$setCursor(this._$cursor),!this.active)return;const t=e.pageX,a=e.pageY,r=document.getElementById("stage-rect");this.pageX>t&&(r.style.left=`${t}px`),this.pageY>a&&(r.style.top=`${a}px`),r.style.width=`${Math.abs(t-this.pageX)}px`,r.style.height=`${Math.abs(a-this.pageY)}px`}execute(){this.active=!1,k.$setCursor(this._$cursor);const e=document.getElementById("stage-rect");if(!e)return;const t=e.offsetLeft,a=e.offsetTop;e.style.display="none";const r=parseFloat(e.style.width),i=parseFloat(e.style.height);if(!r||!i)return;const s=k.$currentWorkSpace(),n=Math.max(s.stage.width/r,s.stage.height/i,k.$zoomScale),o=document.getElementById("screen"),l=t-o.offsetLeft+r/2,c=a-o.offsetTop+i/2;o.scrollLeft-=o.clientWidth/2-l,o.scrollTop-=o.clientHeight/2-c,k.$screenZoom.execute(n-k.$zoomScale),k.$tools.activeTool&&k.$tools.activeTool.dispatchEvent(re.END);const d=k.$tools.getDefaultTool("zoom");d.dispatchEvent(re.START),k.$tools.activeTool=d}}class we{constructor(e=""){this._$name=e,this._$saved=!1,this._$pointX=0,this._$pointY=0,this._$focus=!1,this._$currentValue=null,this._$currentTarget=null,this._$lockTarget=null,this._$mouseMove=null,this._$mouseUp=null,this._$handler=null,k.$readEnd++,"complete"!==document.readyState?(this._$handler=this.initialize.bind(this),window.addEventListener("DOMContentLoaded",this._$handler)):this.initialize()}initialize(){if(this._$handler&&(window.removeEventListener("DOMContentLoaded",this._$handler),this._$handler=null),this.name){const e=document.getElementById(`${this.name}-setting-title`);e&&e.addEventListener("mousedown",(()=>{this.clickTitle()}))}k.$initializeEnd()}focusIn(e){this._$focus=!0,this._$currentValue=+e.target.value,k.$keyLock=!0}focusOut(){this._$focus=!1,this._$currentValue=null,this._$currentTarget=null,this._$lockTarget=null,k.$keyLock=!1}mouseOut(e){e.stopPropagation(),!this._$focus&&this._$currentTarget||(k.$setCursor("auto"),e.target.style.cursor="")}mouseDown(e){this._$focus||(e.preventDefault(),this._$saved=!1,this._$pointX=e.screenX,this._$currentTarget=e.target,this._$currentValue=+e.target.value,k.$setCursor("ew-resize"),this._$mouseMove||(this._$mouseMove=this.mouseMove.bind(this)),this._$mouseUp||(this._$mouseUp=this.mouseUp.bind(this)),window.addEventListener("mousemove",this._$mouseMove),window.addEventListener("mouseup",this._$mouseUp))}mouseUp(){window.removeEventListener("mousemove",this._$mouseMove),window.removeEventListener("mouseup",this._$mouseUp),k.$setCursor("auto"),this._$currentTarget&&(this._$currentTarget.style.cursor="",this._$currentTarget.focus())}mouseMove(e,t=!0){!this._$focus&&this._$currentTarget&&window.requestAnimationFrame((()=>{if(this._$focus||!this._$currentTarget)return;e.preventDefault(),k.$setCursor("ew-resize");const a=e.screenX-this._$pointX;let r=+this._$currentTarget.value;isNaN(r)&&(r=0),this._$currentTarget.value=this.executeFunction(this._$currentTarget.id,r+a),this._$currentValue=+this._$currentTarget.value,this._$lockTarget&&(this._$lockTarget.value=this.executeFunction(this._$lockTarget.id,+this._$lockTarget.value+a)),this._$pointX=e.screenX,t&&this.reloadScreen()}))}reloadScreen(){const e=k.$currentWorkSpace();if(!e)return;const t=e.scene;t&&t.changeFrame(k.$timelineFrame.currentFrame)}mouseOver(e){switch(e.stopPropagation(),!0){case this._$focus:case null!==this._$currentTarget:case null!==this._$currentValue:return;default:k.$setCursor("ew-resize"),e.target.style.cursor="ew-resize"}}clickTitle(){const e=document.getElementById(`${this.name}-setting-view-area`),t=document.getElementById(`${this.name}-setting-title`).getElementsByTagName("i")[0];"none"===e.style.display?(e.style.display="",t.setAttribute("class","active")):(e.style.display="none",t.setAttribute("class","disable"))}executeFunction(e,t){this.save();const a=e.split("-");let r=a.map((e=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`)).join("");return`change${r}`in this||(a.pop(),r=a.map((e=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`)).join("")),this[`change${r}`](t)}finishInput(e,t=!0){if("Enter"!==e.key){if("focusout"===e.type){this._$currentTarget=e.target;const a=this.executeFunction(e.target.id,e.target.value);this._$lockTarget&&(this._$lockTarget.value=this.executeFunction(this._$lockTarget.id,+this._$lockTarget.value+a-this._$currentValue)),e.target.value=a,this._$currentValue=a,this.focusOut(),t&&this.reloadScreen()}}else e.currentTarget.blur()}save(){if(this._$saved)return;this._$saved=!0;const e=k.$currentWorkSpace();e&&e.temporarilySaved()}setChangeEvent(e){e&&e.addEventListener("change",(e=>{this._$currentTarget=e.target,this.executeFunction(e.target.id,e.target.value),this._$currentTarget=null,this.reloadScreen()}))}setInputEvent(e){e&&(e.addEventListener("mouseover",(e=>{this.mouseOver(e)})),e.addEventListener("mouseout",(e=>{this.mouseOut(e)})),e.addEventListener("mousedown",(e=>{this.mouseDown(e)})),e.addEventListener("focusin",(e=>{this.focusIn(e)})),e.addEventListener("focusout",(e=>{this.finishInput(e)})),e.addEventListener("keypress",(e=>{this.finishInput(e)})))}setClickEvent(e){e&&e.addEventListener("click",(e=>{this._$currentTarget=e.target,this.executeFunction(e.target.id,e.target.value),this._$currentTarget=null,this.reloadScreen()}))}get name(){return this._$name}}class Se extends we{constructor(e){super(e),this._$currentPointer=null,this._$drawGradientContext=null,this._$mouseMoveGradientColorPointer=null,this._$mouseUpGradientColorPointer=null}static get GRADIENT_CANVAS_WIDTH(){return 255}static get GRADIENT_CANVAS_HEIGHT(){return 30}static get MIN_GRADIENT_POINTER(){return 0}static get MAX_GRADIENT_POINTER(){return 255}initialize(){super.initialize();const e=document.createElement("canvas");e.width=Se.GRADIENT_CANVAS_WIDTH*window.devicePixelRatio,e.height=Se.GRADIENT_CANVAS_HEIGHT*window.devicePixelRatio,this._$drawGradientContext=e.getContext("2d")}changeGradientColor(e){if(!this._$currentTarget)return e;const t=0|this._$currentTarget.dataset.filterId;if(!this._$filters.has(t))return e;if(this._$currentPointer){const a=this._$filters.get(t).filter,r=0|this._$currentPointer.dataset.index;a._$colors[r]=0|`0x${e.slice(1)}`,this._$currentPointer.dataset.color=e,this._$currentPointer.getElementsByTagName("i")[0].style.backgroundColor=e,this.updateFilterGradientCanvas(a),this.disposeCharacterImage(),this.reloadScreen()}return e}changeGradientAlpha(e){if(e=k.$clamp(+e,xe.MIN_ALPHA,xe.MAX_ALPHA),!this._$currentTarget)return e;const t=0|this._$currentTarget.dataset.filterId;if(!this._$filters.has(t))return e;if(this._$currentPointer){const a=this._$filters.get(t).filter,r=0|this._$currentPointer.dataset.index;a._$alphas[r]=e,this._$currentPointer.dataset.alpha=e,this.updateFilterGradientCanvas(a),this.disposeCharacterImage(),this.reloadScreen()}return e}addGradientGlowFilter(e=null,t=!0){const a=document.getElementById("filter-setting-list");if(!a)return;const r=this.createFilter(G,e);e||(e=this._$filters.get(r).filter);const i=`\n${Me.createHeaderHTML(r,"GradientGlow")}\n\n        <div class="filter-view-area-right">\n\n            <div class="filter-container">\n                ${Me.createBlurX(r,e.blurX)}\n                ${Me.createStrength(r,e.strength)}\n            </div>\n\n            <div class="filter-container">\n                ${Me.createBlurY(r,e.blurY)}\n                ${Me.createAngle(r,e.angle)}\n            </div>\n\n            <div class="filter-container">\n                ${Me.createDistance(r,e.distance)}\n            </div>\n\n            <div class="filter-container">\n                ${Me.createGradientColorPalette(r)}\n            </div>\n            \n            <div class="filter-container">\n                ${Me.createGradientColor(r)}\n                ${Me.createGradientAlpha(r)}\n            </div>\n            \n            <div class="filter-container">\n                ${Me.createKnockout(r)}\n            </div>\n\n            <div class="filter-container">\n                ${Me.createBevelType(r)}\n                ${Me.createQuality(r)}\n            </div>\n            \n        </div>\n    </div>\n</div>\n`;a.insertAdjacentHTML("beforeend",i);const s=document.getElementById(`gradient-canvas-${r}`);s.width=xe.GRADIENT_CANVAS_WIDTH*window.devicePixelRatio,s.height=xe.GRADIENT_CANVAS_HEIGHT*window.devicePixelRatio,s.style.width=`${xe.GRADIENT_CANVAS_WIDTH}px`,s.style.height=`${xe.GRADIENT_CANVAS_HEIGHT}px`,e.context=s.getContext("2d"),this.setCommonEvent(r),e.knockout&&(document.getElementById(`knockout-${r}`).checked=!0);const n=[`blurX-${r}`,`blurY-${r}`,`strength-${r}`,`angle-${r}`,`gradientAlpha-${r}`,`distance-${r}`];for(let e=0;e<n.length;++e)this.setInputEvent(document.getElementById(n[e]));const o=[`knockout-${r}`];for(let e=0;e<o.length;++e)this.setClickEvent(document.getElementById(o[e]));const l=[`gradientColor-${r}`,`type-${r}`,`quality-${r}`];for(let e=0;e<l.length;++e)this.setChangeEvent(document.getElementById(l[e]));for(let t=0;t<e.ratios.length;++t){const a=e.ratios[t],i=`#${e.colors[t].toString(16).padStart(6,"0")}`,s=e.alphas[t];this.addFilterGradientColorPointer(r,t,a,i,s)}this.setCreateGradientColorPointerEvent(r),this.updateFilterGradientCanvas(e),t&&this.disposeCharacterImage(),k.$addModalEvent(document.getElementById(`filter-id-${r}`))}addGradientBevelFilter(e=null,t=!0){const a=document.getElementById("filter-setting-list");if(!a)return;const r=this.createFilter(H,e);e||(e=this._$filters.get(r).filter);const i=`\n${Me.createHeaderHTML(r,"GradientBevel")}\n\n        <div class="filter-view-area-right">\n\n            <div class="filter-container">\n                ${Me.createBlurX(r,e.blurX)}\n                ${Me.createStrength(r,e.strength)}\n            </div>\n\n            <div class="filter-container">\n                ${Me.createBlurY(r,e.blurY)}\n                ${Me.createAngle(r,e.angle)}\n            </div>\n            \n            <div class="filter-container">\n                ${Me.createDistance(r,e.distance)}\n            </div>\n            \n            <div class="filter-container">\n                ${Me.createGradientColorPalette(r)}\n            </div>\n            \n            <div class="filter-container">\n                ${Me.createGradientColor(r)}\n                ${Me.createGradientAlpha(r)}\n            </div>\n            \n            <div class="filter-container">\n                ${Me.createKnockout(r)}\n            </div>\n\n            <div class="filter-container">                \n                ${Me.createBevelType(r)}\n                ${Me.createQuality(r)}\n            </div>\n            \n        </div>\n    </div>\n</div>\n`;a.insertAdjacentHTML("beforeend",i);const s=document.getElementById(`gradient-canvas-${r}`);s.width=Se.GRADIENT_CANVAS_WIDTH*window.devicePixelRatio,s.height=Se.GRADIENT_CANVAS_HEIGHT*window.devicePixelRatio,s.style.width=`${Se.GRADIENT_CANVAS_WIDTH}px`,s.style.height=`${Se.GRADIENT_CANVAS_HEIGHT}px`,e.context=s.getContext("2d"),this.setCommonEvent(r),e.knockout&&(document.getElementById(`knockout-${r}`).checked=!0);const n=[`blurX-${r}`,`blurY-${r}`,`strength-${r}`,`angle-${r}`,`gradientAlpha-${r}`,`distance-${r}`];for(let e=0;e<n.length;++e)this.setInputEvent(document.getElementById(n[e]));const o=[`knockout-${r}`];for(let e=0;e<o.length;++e)this.setClickEvent(document.getElementById(o[e]));const l=[`gradientColor-${r}`,`type-${r}`,`quality-${r}`];for(let e=0;e<l.length;++e)this.setChangeEvent(document.getElementById(l[e]));for(let t=0;t<e.ratios.length;++t){const a=e.ratios[t],i=`#${e.colors[t].toString(16).padStart(6,"0")}`,s=e.alphas[t];this.addFilterGradientColorPointer(r,t,a,i,s)}this.setCreateGradientColorPointerEvent(r),this.updateFilterGradientCanvas(e),t&&this.disposeCharacterImage(),k.$addModalEvent(document.getElementById(`filter-id-${r}`))}addGradientColorPointer(e){const t=0|e.target.dataset.filterId;if(!this._$filters.has(t))return;const a=this._$filters.get(t).filter,r=a.ratios.length,i=e.offsetX,s=document.getElementById(`gradientColor-${t}`).value,n=0|document.getElementById(`gradientAlpha-${t}`).value;a.ratios.push(i),a.colors.push(0|`0x${s.slice(1)}`),a.alphas.push(n),this.addFilterGradientColorPointer(t,r,i,s,n),this.updateFilterGradientCanvas(a),this.disposeCharacterImage(),this.reloadScreen()}setCreateGradientColorPointerEvent(e){const t=document.getElementById(`color-pointer-list-${e}`);t&&t.addEventListener("mousedown",(e=>{this.addGradientColorPointer(e)}))}updateFilterGradientCanvas(e){const t=this._$drawGradientContext;t.clearRect(0,0,Se.GRADIENT_CANVAS_WIDTH*window.devicePixelRatio,Se.GRADIENT_CANVAS_HEIGHT*window.devicePixelRatio);const a=e.adjustment();t.beginPath();const r=a.ratios.length,i=Math.ceil(255*a.ratios[r-1]*window.devicePixelRatio),s=t.createLinearGradient(0,0,i,0);for(let e=0;e<r;++e){const t=k.$intToRGB(a.colors[e]);s.addColorStop(a.ratios[e],`rgba(${t.R}, ${t.G}, ${t.B}, ${a.alphas[e]})`)}t.fillStyle=s,t.rect(0,0,Se.GRADIENT_CANVAS_WIDTH*window.devicePixelRatio,Se.GRADIENT_CANVAS_HEIGHT*window.devicePixelRatio),t.fill(),e.context.clearRect(0,0,Se.GRADIENT_CANVAS_WIDTH*window.devicePixelRatio,Se.GRADIENT_CANVAS_HEIGHT*window.devicePixelRatio),e.context.drawImage(t.canvas,0,0)}addFilterGradientColorPointer(e,t,a,r,i){const s=document.getElementById(`color-pointer-list-${e}`),n=`\n<div class="color-pointer" style="left: ${a-4}px;" data-filter-id="${e}" data-index="${t}" data-color="${r}" data-alpha="${i}">\n    <div class="color-pointer-triangle"></div>\n    <div class="color-pointer-rect">\n        <i class="pointer-color" style="background-color: ${r}"></i>\n    </div>\n</div>\n`;s.insertAdjacentHTML("beforeend",n);const o=s.lastElementChild;o.addEventListener("mousedown",(e=>{this.mouseDownGradientColorPointer(e)})),t&&o.addEventListener("dblclick",(e=>{this.removeGradientColorPointer(e)})),this._$currentPointer=o}removeGradientColorPointer(e){const t=0|e.target.dataset.filterId;if(!this._$filters.has(t))return;const a=document.getElementById(`color-pointer-list-${t}`);if(2>=a.children.length)return;const r=0|e.target.dataset.index,i=this._$filters.get(t).filter;i.ratios.splice(r,1),i.colors.splice(r,1),i.alphas.splice(r,1),e.target.remove();for(let e=r;e<a.children.length;++e){const t=a.children[e],r=(0|t.dataset.index)-1;t.dataset.index=`${r}`}super.focusOut(),this.updateFilterGradientCanvas(i),this.disposeCharacterImage(),this.reloadScreen()}mouseDownGradientColorPointer(e){e.stopPropagation(),this._$saved=!1,this._$pointX=e.screenX,this._$currentTarget=e.target,this._$currentPointer=e.target;const t=e.target.dataset.filterId;document.getElementById(`gradientColor-${t}`).value=e.target.dataset.color,document.getElementById(`gradientAlpha-${t}`).value=e.target.dataset.alpha,this._$mouseMoveGradientColorPointer||(this._$mouseMoveGradientColorPointer=this.mouseMoveGradientColorPointer.bind(this)),this._$mouseUpGradientColorPointer||(this._$mouseUpGradientColorPointer=this.mouseUpGradientColorPointer.bind(this)),window.addEventListener("mousemove",this._$mouseMoveGradientColorPointer),window.addEventListener("mouseup",this._$mouseUpGradientColorPointer)}mouseMoveGradientColorPointer(e){const t=this._$currentTarget;if(!t)return;const a=0|t.dataset.index;a&&window.requestAnimationFrame((()=>{e.preventDefault();const r=0|t.dataset.filterId;if(!this._$filters.has(r))return;const i=parseFloat(t.style.left),s=k.$clamp(i+(e.screenX-this._$pointX)+4,Se.MIN_GRADIENT_POINTER,Se.MAX_GRADIENT_POINTER);t.style.left=s-4+"px";const n=this._$filters.get(r).filter;n._$ratios[a]=s,this._$pointX&&(this._$pointX=e.screenX),this.updateFilterGradientCanvas(n),this.disposeCharacterImage(),this.reloadScreen()}))}mouseUpGradientColorPointer(){window.removeEventListener("mousemove",this._$mouseMoveGradientColorPointer),window.removeEventListener("mouseup",this._$mouseUpGradientColorPointer),k.$setCursor("auto"),super.focusOut()}}k.$view=new class{constructor(){this._$handler=null,k.$readEnd++,"complete"!==document.readyState?(this._$handler=this.initialize.bind(this),window.addEventListener("DOMContentLoaded",this._$handler)):this.initialize()}initialize(){this._$handler&&(window.removeEventListener("DOMContentLoaded",this._$handler),this._$handler=null);const e=document.getElementById("view");e&&e.addEventListener("mousedown",(e=>{this.mouseDown(e)})),k.$initializeEnd()}mouseDown(e){e.button||k.$endMenu()}};k.$alignController=new class extends we{constructor(){super("align")}initialize(){super.initialize();const e=["align-position-left","align-position-center","align-position-right","align-position-top","align-position-middle","align-position-bottom","align-stage-position-left","align-stage-position-center","align-stage-position-right","align-stage-position-top","align-stage-position-middle","align-stage-position-bottom"];for(let t=0;t<e.length;++t){const a=document.getElementById(e[t]);a&&a.addEventListener("mousedown",(e=>{e.stopPropagation(),this.executeFunction(e.target.id)}))}}changeAlignStagePositionLeft(){k.$screenMenu.alignment("left","stage")}changeAlignPositionLeft(){k.$screenMenu.alignment("left")}changeAlignStagePositionCenter(){k.$screenMenu.alignment("center","stage")}changeAlignPositionCenter(){k.$screenMenu.alignment("center")}changeAlignStagePositionRight(){k.$screenMenu.alignment("right","stage")}changeAlignPositionRight(){k.$screenMenu.alignment("right")}changeAlignStagePositionTop(){k.$screenMenu.alignment("top","stage")}changeAlignPositionTop(){k.$screenMenu.alignment("top")}changeAlignStagePositionMiddle(){k.$screenMenu.alignment("middle","stage")}changeAlignPositionMiddle(){k.$screenMenu.alignment("middle")}changeAlignStagePositionBottom(){k.$screenMenu.alignment("bottom","stage")}changeAlignPositionBottom(){k.$screenMenu.alignment("bottom")}};k.$blendController=new class extends we{constructor(){super("blend")}initialize(){super.initialize(),this.setChangeEvent(document.getElementById("blend-select"))}changeBlendSelect(e){const t=k.$tools.getDefaultTool("arrow").activeElements;if(!t.length)return;const a=k.$currentWorkSpace().scene,r=t[0],i=a.getLayer(0|r.dataset.layerId).getCharacter(0|r.dataset.characterId),s=k.$timelineFrame.currentFrame;let n=i.getPlace(s);n.tweenFrame&&(i.endFrame-1>s&&!i.hasTween(s)&&(k.$timelineTool.executeTimelineKeyAdd(),n=i.getPlace(s)),n=i.getPlace(n.tweenFrame)),n.blendMode=`${e}`,n.tweenFrame&&i.updateTweenBlend(s),i.dispose()}};class Ie extends we{constructor(){super("color")}static get MIN_OFFSET(){return-255}static get MAX_OFFSET(){return 255}static get MIN_MULTIPLIER(){return 0}static get MAX_MULTIPLIER(){return 100}initialize(){super.initialize();const e=["color-alpha-offset","color-red-offset","color-green-offset","color-blue-offset","color-alpha-multiplier","color-red-multiplier","color-green-multiplier","color-blue-multiplier"];for(let t=0;t<e.length;++t){const a=document.getElementById(e[t]);a&&this.setInputEvent(a)}}changeColorRedMultiplier(e){return e=k.$clamp(+e,Ie.MIN_MULTIPLIER,Ie.MAX_MULTIPLIER),this.updateColor(0,e/100),e}changeColorGreenMultiplier(e){return e=k.$clamp(+e,Ie.MIN_MULTIPLIER,Ie.MAX_MULTIPLIER),this.updateColor(1,e/100),e}changeColorBlueMultiplier(e){return e=k.$clamp(+e,Ie.MIN_MULTIPLIER,Ie.MAX_MULTIPLIER),this.updateColor(2,e/100),e}changeColorAlphaMultiplier(e){return e=k.$clamp(+e,Ie.MIN_MULTIPLIER,Ie.MAX_MULTIPLIER),this.updateColor(3,e/100),e}changeColorRedOffset(e){return e=k.$clamp(0|e,Ie.MIN_OFFSET,Ie.MAX_OFFSET),this.updateColor(4,e),e}changeColorGreenOffset(e){return e=k.$clamp(0|e,Ie.MIN_OFFSET,Ie.MAX_OFFSET),this.updateColor(5,e),e}changeColorBlueOffset(e){return e=k.$clamp(0|e,Ie.MIN_OFFSET,Ie.MAX_OFFSET),this.updateColor(6,e),e}changeColorAlphaOffset(e){return e=k.$clamp(0|e,Ie.MIN_OFFSET,Ie.MAX_OFFSET),this.updateColor(7,e),e}updateColor(e,t){const a=k.$tools.getDefaultTool("arrow").activeElements;if(!a.length)return;const r=k.$currentWorkSpace().scene,i=a[0],s=r.getLayer(0|i.dataset.layerId).getCharacter(0|i.dataset.characterId),n=k.$timelineFrame.currentFrame;s.getPlace(n).colorTransform[e]=t,s.relocationTween(n),s.dispose()}}k.$colorTransformController=new Ie;k.$confirmModal=new class extends we{constructor(){super(""),this._$files=[],this._$state="hide",this._$currentObject=null,this._$mapping=new Map,this._$layers=new Map,this._$ignore=new Map,this._$callback=null}get files(){return this._$files}set files(e){this._$files=e}initialize(){super.initialize();const e=["confirm-overwriting","confirm-skip","confirm-all-overwriting","confirm-all-skip"];for(let t=0;t<e.length;++t){const a=document.getElementById(e[t]);a&&a.addEventListener("mousedown",(e=>{e.stopPropagation();return this[`execute${e.target.id.split("-").map((e=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`)).join("")}`](e)}))}}addCallback(e){this._$callback=e}executeConfirmAllOverwriting(){this.save();const e=[],t=k.$currentWorkSpace();this._$files.unshift(this._$currentObject);for(let a=0;a<this._$files.length;++a){const r=this._$files[a];if(!r)continue;const i=t._$nameMap.get(r.path);switch(r.type){case"move":this._$currentObject=r,this.moveOverwriting(i);break;case"copy":this._$currentObject=r,this.copyOverwriting(i);break;default:e.push(new Promise((e=>{k.$libraryController.loadFile(r.file,e,r.folderId,r.file.name,i)})))}}return this._$currentObject=null,this._$files.length=0,Promise.all(e).then((()=>{this._$callback&&this.executeCallBack(),this.hide(),k.$libraryController.reload(),this.reloadScreen(),this._$saved=!1}))}executeConfirmAllSkip(){for(let e=0;e<this._$files.length;++e){const t=this._$files[e];if("copy"!==t.type)continue;const a=t.layer,r=t.character;this._$ignore.set(r.libraryId,!0),a&&r&&a.deleteCharacter(r.id)}this._$currentObject=null,this._$files.length=0,this.hide()}cloneFolderItem(e,t,a){const r=k.$workSpaces[e],i=k.$currentWorkSpace();for(const s of r._$libraries.values()){if(s.folderId!==t)continue;if(this._$mapping.has(s.id))continue;const n=s.getPathWithWorkSpace(r);if(i._$nameMap.has(n)){this.files.push({file:s,character:null,layer:null,path:n,workSpaceId:e,type:"copy"});continue}let o=null;if(s.type===A.MOVIE_CLIP)o=this.cloneMovieClip(e,s);else{const t=k.$activeWorkSpaceId;k.$activeWorkSpaceId=e,o=s.clone(),k.$activeWorkSpaceId=t}o._$id=i.nextLibraryId,o.folderId=a.id,this._$mapping.set(s.id,o._$id),k.$libraryController.createInstance(o.type,o.name,o.id,o.symbol),i._$libraries.set(o.id,o),o.type===A.FOLDER&&this.cloneFolderItem(e,s.id,o)}}cloneMovieClip(e,t){const a=k.$workSpaces[e],r=k.$currentWorkSpace(),i=k.$activeWorkSpaceId;k.$activeWorkSpaceId=e;const s=t.clone();k.$activeWorkSpaceId=i;for(const t of s._$layers.values())for(let i=0;i<t._$characters.length;++i){const s=t._$characters[i];if(this._$mapping.has(s.libraryId)){s.libraryId=this._$mapping.get(s.libraryId);continue}const n=a.getLibrary(s.libraryId),o=n.getPathWithWorkSpace(a);if(r._$nameMap.has(o)){this.files.push({file:n,character:s,layer:t,path:o,workSpaceId:e,type:"copy"});continue}let l=null;if(n.type===A.MOVIE_CLIP)l=this.cloneMovieClip(e,n);else{const t=k.$activeWorkSpaceId;k.$activeWorkSpaceId=e,l=n.clone(),k.$activeWorkSpaceId=t}l&&(s.libraryId=l._$id=r.nextLibraryId,this._$mapping.set(n.id,l.id),l.folderId&&this.createFolder(e,n),k.$libraryController.createInstance(l.type,l.name,l.id,l.symbol),r._$libraries.set(l.id,l))}return s}copyOverwriting(e=0,t=""){const a=k.$currentWorkSpace(),r=this._$currentObject.file,i=e||a.nextLibraryId;if(!this._$mapping.has(r.id)){if(this._$mapping.set(r.id,i),e){const t=document.getElementById(`library-child-id-${e}`);if(t&&t.remove(),r.type!==A.FOLDER)for(const t of a._$libraries.values())if(t.type===A.MOVIE_CLIP)for(const a of t._$layers.values())for(let t=0;t<a._$characters.length;++t){const r=a._$characters[t];r.dispose(),r.libraryId===e&&(r.libraryId=i)}a.removeLibrary(e)}let s=null;if(r.type===A.MOVIE_CLIP)s=this.cloneMovieClip(this._$currentObject.workSpaceId,r);else{const e=k.$activeWorkSpaceId;k.$activeWorkSpaceId=this._$currentObject.workSpaceId,s=r.clone(),k.$activeWorkSpaceId=e}s._$id=i,t&&(s._$name=t),k.$libraryController.createInstance(s.type,s.name,s.id,s.symbol),a._$libraries.set(s.id,s),s.folderId&&this.createFolder(this._$currentObject.workSpaceId,s)}this.addLayer(i)}pasteDisplayObject(e,t,a){const r=k.$timelineFrame.currentFrame;let i=null;const s=e.getActiveCharacter(r);if(s.length&&(i=s[0].getRange(r)),!i){const t=e.getActiveEmptyCharacter(r);t&&(i={startFrame:t.startFrame,endFrame:t.endFrame},e.deleteEmptyCharacter(t))}if(!i){k.$timelineTool.executeTimelineFrameAdd();const t=e.getActiveCharacter(r);if(t.length&&(i=t[0].getRange(r)),!i){const t=e.getActiveEmptyCharacter(r);t&&(i={startFrame:t.startFrame,endFrame:t.endFrame},e.deleteEmptyCharacter(t))}}const n=new Map,o=e.getActiveCharacter(Math.min(1,i.startFrame-1));for(let e=0;e<o.length;++e){const t=o[e];if(t.endFrame>r)continue;const a=t.libraryId;n.has(a)||n.set(a,[]),n.get(a).push(t)}const l=t.libraryId,c=t.getPlace(a);if(c.depth=e.getActiveCharacter(r).length,n.size&&n.has(l)){const e=n.get(l),t=e.pop();e.length&&n.delete(l),t.startFrame=Math.min(t.startFrame,i.startFrame),t.endFrame=Math.max(t.endFrame,i.endFrame),t.setPlace(i.startFrame,c)}else t.startFrame=i.startFrame,t.endFrame=i.endFrame,t._$places.clear(),t._$tween.clear(),t.setPlace(i.startFrame,c),e.addCharacter(t)}createFolder(e,t){const a=k.$workSpaces[e],r=k.$currentWorkSpace();let i=t,s=a.getLibrary(t.folderId);for(;;){const e=s.getPathWithWorkSpace(a);if(r._$nameMap.has(e)){i.folderId=r._$nameMap.get(e);break}const t=s.clone();if(i.folderId=t._$id=r.nextLibraryId,k.$libraryController.createInstance(t.type,t.name,t.id,t.symbol),r._$libraries.set(t.id,t),!s.folderId)break;i=s,s=a.getLibrary(s.folderId)}}checkFolder(e,t=""){const a=k.$currentWorkSpace();for(const r of a._$libraries.values()){if(r.folderId!==e.id)continue;if(r.type===A.FOLDER){const e=t?r.name:`${t}/${r.name}`;this.checkFolder(r,e)}r.folderId=0;const i=t?r.path:`${t}/${r.path}`;r.folderId=e.id,a._$nameMap.has(i)&&(k.$confirmModal.files.push({file:r,folderId:e.id,path:i,type:"move"}),k.$confirmModal.show())}}deleteFolderItem(e){const t=k.$currentWorkSpace();for(const a of t._$libraries.values())a.folderId===e.id&&(a.type===A.FOLDER?this.deleteFolderItem(a):this.removeCharacter(a.id),document.getElementById(`library-child-id-${a.id}`).remove(),t.removeLibrary(a.id))}removeCharacter(e){const t=k.$currentWorkSpace();for(const a of t._$libraries.values())if(a.type===A.MOVIE_CLIP)for(const t of a._$layers.values())for(let a=0;a<t._$characters.length;++a){const r=t._$characters[a];r.libraryId===e&&t.deleteCharacter(r.id)}}moveOverwriting(e){const t=k.$currentWorkSpace(),a=this._$currentObject.file,r=document.getElementById(`library-child-id-${e}`);r&&r.remove(),document.getElementById(`library-child-id-${a.id}`).remove();const i=t.getLibrary(e);if(a.folderId=i.folderId,a.type!==A.FOLDER){for(const r of t._$libraries.values())if(r.type===A.MOVIE_CLIP)for(const t of r._$layers.values())for(let r=0;r<t._$characters.length;++r){const i=t._$characters[r];i.libraryId===a.id&&(i.libraryId=e,i.dispose())}}else{this.deleteFolderItem(i);for(const r of t._$libraries.values())r.folderId===a.id&&(r.folderId=e)}t.removeLibrary(a.id),a._$id=e,k.$libraryController.createInstance(a.type,a.name,a.id,a.symbol),t._$libraries.set(a.id,a);const s=k.$currentWorkSpace().scene;for(const e of s._$layers.values())for(let t=0;t<e._$characters.length;++t)e._$characters[t].dispose()}executeConfirmOverwriting(){this.save();const e=document.getElementById("confirm-file-name").value;let t=this._$currentObject.file.name;t.indexOf(".swf")>-1&&(t=t.replace(".swf",""));const a=k.$currentWorkSpace();let r=0;switch(e===t&&(r=a._$nameMap.get(this._$currentObject.path)),this._$currentObject.type){case"move":if(r)this.moveOverwriting(r);else{const t=this._$currentObject.file;t.name=e,t.folderId=this._$currentObject.folderId,t.type===A.FOLDER&&(this._$files.length=0),document.getElementById(`library-child-id-${t.id}`).remove(),k.$libraryController.createInstance(t.type,t.name,t.id,t.symbol)}this.setup();break;case"copy":this.copyOverwriting(r,e),this.setup();break;default:new Promise((t=>{k.$libraryController.loadFile(this._$currentObject.file,t,this._$currentObject.folderId,e,r)})).then((()=>{this.setup()}))}this._$saved=!1}addLayer(e){const t=this._$currentObject.character;if(!t)return;t.libraryId=e;const a=this._$currentObject.layer;if(a){const e=this._$currentObject.copyFrame;e?this.pasteDisplayObject(a,t,e):(a.addCharacter(t),this._$layers.has(a.id)||this._$layers.set(a.id,a)),a.reloadStyle()}}executeConfirmSkip(){if("copy"===this._$currentObject.type){const e=this._$currentObject.layer,t=this._$currentObject.character;this._$ignore.set(t.libraryId,!0),e&&t&&e.deleteCharacter(t.id)}this.setup()}executeCallBack(){this._$callback(this._$ignore),this._$callback=null}hide(){if("hide"===this._$state)return;this._$state="hide";const e=document.getElementById("confirm-modal");e&&(e.classList.contains("fadeOut")||e.setAttribute("class","fadeOut"))}show(){if("show"===this._$state)return;this._$state="show",k.$endMenu();const e=document.getElementById("confirm-modal");e&&(e.classList.contains("fadeIn")||e.setAttribute("class","fadeIn")),this.setup()}clear(){this._$callback=null,this._$layers.clear(),this._$mapping.clear(),this._$ignore.clear()}setup(){if(this._$currentObject=this._$files.shift(),this._$currentObject&&this._$mapping.size)for(;this._$mapping.has(this._$currentObject.file.id);){const e=this._$mapping.get(this._$currentObject.file.id);if(this.addLayer(e),this._$currentObject=this._$files.shift(),!this._$currentObject)break}if(!this._$currentObject){if(this._$callback&&k.$confirmModal.executeCallBack(),this.hide(),k.$libraryController.reload(),this._$layers.size)for(const e of this._$layers.values())e.setCharacterStyle();return this.clear(),void this.reloadScreen()}const e=document.getElementById("confirm-before-preview");for(;e.firstChild;)e.firstChild.remove();const t=document.getElementById("confirm-after-preview");for(;t.firstChild;)t.firstChild.remove();const a=document.getElementById("confirm-file-name");let r=this._$currentObject.file.name;r.indexOf(".swf")>-1&&(r=r.replace(".swf","")),a.value=r,a.focus();const i=k.$currentWorkSpace(),s=i.getLibrary(i._$nameMap.get(this._$currentObject.path));s&&s.getPreview().then((t=>{e.appendChild(t)}));const n=this._$currentObject.file;switch(n.type){case"image/svg+xml":case"image/png":case"image/jpeg":case"image/gif":{const e=new Image;e.onload=()=>{t.appendChild(e)},e.src=URL.createObjectURL(n)}break;case"video/mp4":{const e=document.createElement("video");e.crossOrigin="anonymous",e.type="video/mp4",e.muted=!0,e.autoplay=!1,e.controls=!0,e.onloadedmetadata=()=>{t.appendChild(e)},e.src=URL.createObjectURL(n),e.load()}break;case"audio/mpeg":{const e=document.createElement("audio");e.preload="auto",e.autoplay=!1,e.loop=!1,e.controls=!0,e.src=URL.createObjectURL(n),e.load(),t.appendChild(e)}break;case"application/x-shockwave-flash":break;default:if("copy"===this._$currentObject.type){const e=k.$activeWorkSpaceId;k.$activeWorkSpaceId=this._$currentObject.workSpaceId,this._$currentObject.file.getPreview().then((e=>{t.appendChild(e)})),k.$activeWorkSpaceId=e}else this._$currentObject.file.getPreview().then((e=>{t.appendChild(e)}))}}};k.$controller=new class extends we{initialize(){super.initialize();const e=document.getElementById("controller");e&&e.addEventListener("mouseover",(()=>{k.$setCursor("auto")}))}showObjectSetting(e){for(let t=0;t<e.length;++t){const a=document.getElementById(e[t]);a&&a.setAttribute("style","")}}hideObjectSetting(e){for(let t=0;t<e.length;++t){const a=document.getElementById(e[t]);a&&a.setAttribute("style","display: none;")}}default(){k.$filterController.clear(),this.hideObjectSetting(["object-area","ruler-setting","instance-setting","fill-color-setting"]),this.showObjectSetting(["stage-setting","sound-setting","object-setting","color-setting","blend-setting","filter-setting"]);const e=k.$currentWorkSpace();if(!e)return;const t=e.scene;if(!t)return;const a=document.getElementById("object-name");a&&(a.value=t.name);const r=document.getElementById("object-symbol");r&&(r.value=t.symbol)}};class Ee{constructor(){this._$pointX=0,this._$mouseMove=null,this._$mouseUp=null,this._$handler=null,k.$readEnd++,"complete"!==document.readyState?(this._$handler=this.initialize.bind(this),window.addEventListener("DOMContentLoaded",this._$handler)):this.initialize()}static get DEFAULT_SIZE(){return 360}initialize(){document.documentElement.style.setProperty("--controller-width",`${Ee.DEFAULT_SIZE}px`);const e=document.getElementById("controller-adjustment");e&&e.addEventListener("mousedown",(e=>{this.mouseDown(e)})),k.$initializeEnd()}mouseDown(e){e.preventDefault(),e.stopPropagation(),this._$pointX=e.screenX,this._$mouseMove||(this._$mouseMove=this.mouseMove.bind(this)),this._$mouseUp||(this._$mouseUp=this.mouseUp.bind(this)),window.addEventListener("mousemove",this._$mouseMove),window.addEventListener("mouseup",this._$mouseUp)}mouseMove(e){k.$setCursor("col-resize"),window.requestAnimationFrame((()=>{e.preventDefault(),e.stopPropagation();const t=k.$currentWorkSpace(),a=this._$pointX-e.screenX,r=Math.max(Ee.DEFAULT_SIZE,t._$controllerWidth+a);document.documentElement.style.setProperty("--controller-width",`${r}px`),t._$controllerWidth=r,this._$pointX=e.screenX,k.$rebuildTimeline()}))}mouseUp(){window.removeEventListener("mousemove",this._$mouseMove),window.removeEventListener("mouseup",this._$mouseUp),k.$setCursor("auto")}}k.$controllerAdjustment=new Ee;class xe extends Se{constructor(){super("filter"),this._$filterId=0,this._$filters=new Map}static get MIN_BLUR(){return 0}static get MAX_BLUR(){return 255}static get MIN_ALPHA(){return 0}static get MAX_ALPHA(){return 100}static get MIN_STRENGTH(){return 0}static get MAX_STRENGTH(){return 255}static get MIN_ROTATE(){return-360}static get MAX_ROTATE(){return 360}static get MIN_DISTANCE(){return-255}static get MAX_DISTANCE(){return 255}static get MIN_COLOR(){return 0}static get MAX_COLOR(){return 16777215}static get MIN_QUALITY(){return 0}static get MAX_QUALITY(){return 16}initialize(){super.initialize();const e=document.getElementById("filter-add");e&&e.addEventListener("mousedown",(()=>{this.addFilter(),this.disposeCharacterImage(),this.reloadScreen()}))}lock(e){e.preventDefault(),e.stopPropagation();const t=0|e.currentTarget.dataset.filterId;if(!this._$filters.has(t))return;const a=this._$filters.get(t);a.lock=!a.lock,this._$currentValue=null,e.currentTarget.childNodes[1].setAttribute("class",a.lock?"active":"disable")}clickNodeTitle(e){const t=0|e.target.dataset.filterId,a=document.getElementById(`filter-view-area-${t}`);a&&("none"===a.style.display?(a.setAttribute("style",""),document.getElementById(`filter-title-arrow-${t}`).setAttribute("class","arrow active")):(a.setAttribute("style","display: none;"),document.getElementById(`filter-title-arrow-${t}`).setAttribute("class","arrow disable")))}changeState(e){const t=0|e.target.dataset.filterId;if(!this._$filters.has(t))return;const a=this._$filters.get(t);a.filter.state=!a.filter.state;const r=document.getElementById(`filter-state-${t}`);r&&r.setAttribute("class",a.filter.state?"filter-active":"filter-disable"),this.disposeCharacterImage()}removeFilter(e){const t=k.$tools.getDefaultTool("arrow").activeElements;if(!t.length)return;const a=0|e.target.dataset.filterId,r=t[0],i=k.$currentWorkSpace().scene.getLayer(0|r.dataset.layerId).getCharacter(0|r.dataset.characterId),s=k.$timelineFrame.currentFrame;let n=i.getPlace(s);n.tweenFrame&&(i.endFrame-1>s&&!i.hasTween(s)&&(k.$timelineTool.executeTimelineKeyAdd(),n=i.getPlace(s)),n=i.getPlace(n.tweenFrame));const o=this._$filters.get(a),l=n.filter.indexOf(o.filter);n.filter.splice(l,1),i.updateTweenFilter(s),this._$filters.delete(a),this._$filters.size||(document.querySelectorAll(".filter-none")[0].style.display="");const c=document.getElementById(`filter-id-${a}`);c&&c.remove(),super.focusOut(),i.dispose()}focusIn(e){super.focusIn(e),this.setLockElement(e)}mouseDown(e){super.mouseDown(e),this.setLockElement(e)}setLockElement(e){if(this._$lockTarget=null,this._$focus)return;const t=0|e.target.dataset.filterId;if(!this._$filters.has(t))return;if(this._$filters.get(t).lock)switch(this._$currentTarget.dataset.name){case"blurX":this._$lockTarget=document.getElementById(`blurY-${t}`);break;case"blurY":this._$lockTarget=document.getElementById(`blurX-${t}`)}}changeBlurX(e){return e=k.$clamp(+e,xe.MIN_BLUR,xe.MAX_BLUR),this.updateProperty("blurX",e),e}changeBlurY(e){return e=k.$clamp(+e,xe.MIN_BLUR,xe.MAX_BLUR),this.updateProperty("blurY",e),e}changeStrength(e){return e=k.$clamp(+e,xe.MIN_STRENGTH,xe.MAX_STRENGTH),this.updateProperty("strength",e),e}changeAlpha(e){return e=k.$clamp(+e,xe.MIN_ALPHA,xe.MAX_ALPHA),this.updateProperty("alpha",e),e}changeShadowAlpha(e){return e=k.$clamp(+e,xe.MIN_ALPHA,xe.MAX_ALPHA),this.updateProperty("shadowAlpha",e),e}changeHighlightAlpha(e){return e=k.$clamp(+e,xe.MIN_ALPHA,xe.MAX_ALPHA),this.updateProperty("highlightAlpha",e),e}changeAngle(e){return 0>(e=k.$clamp((0|e)%360,xe.MIN_ROTATE,xe.MAX_ROTATE))&&(e+=360),this.updateProperty("angle",e),e}changeDistance(e){return e=k.$clamp(+e,xe.MIN_DISTANCE,xe.MAX_DISTANCE),this.updateProperty("distance",e),e}changeColor(e){return this.updateProperty("color",k.$clamp(0|`0x${e.slice(1)}`,xe.MIN_COLOR,xe.MAX_COLOR)),e}changeShadowColor(e){return this.updateProperty("shadowColor",k.$clamp(0|`0x${e.slice(1)}`,xe.MIN_COLOR,xe.MAX_COLOR)),e}changeHighlightColor(e){return this.updateProperty("highlightColor",k.$clamp(0|`0x${e.slice(1)}`,xe.MIN_COLOR,xe.MAX_COLOR)),e}changeQuality(e){e=k.$clamp(0|e,xe.MIN_QUALITY,xe.MAX_QUALITY),this.updateProperty("quality",e)}changeType(e){switch(e){case"inner":case"outer":case"full":this.updateProperty("type",e)}}changeKnockout(){this.updateProperty("knockout",!!this._$currentTarget.checked)}changeInner(){this.updateProperty("inner",!!this._$currentTarget.checked)}changeHideObject(){this.updateProperty("hideObject",!!this._$currentTarget.checked)}updateProperty(e,t){if(!this._$currentTarget)return;const a=0|this._$currentTarget.dataset.filterId;if(!this._$filters.has(a))return;const r=this._$filters.get(a);r.filter[e]!==t&&(r.filter[e]=t,this.disposeCharacterImage())}disposeCharacterImage(){const e=k.$tools.getDefaultTool("arrow").activeElements;if(!e.length)return;const t=e[0],a=k.$currentWorkSpace().scene.getLayer(0|t.dataset.layerId).getCharacter(0|t.dataset.characterId);a.relocationTween(k.$timelineFrame.currentFrame),a.dispose()}setCommonEvent(e){this.setLockEvent(document.getElementById(`filter-${e}-lock`)),this.setTitleEvent(document.getElementById(`filter-name-${e}`)),this.setStateEvent(document.getElementById(`filter-state-${e}`)),this.setTrashEvent(document.getElementById(`trash-${e}`))}setLockEvent(e){e&&e.addEventListener("mousedown",(e=>{this.lock(e)}))}setTitleEvent(e){e&&e.addEventListener("mousedown",(e=>{this.clickNodeTitle(e)}))}setStateEvent(e){if(!e)return;const t=0|e.dataset.filterId;if(this._$filters.has(t)){const a=this._$filters.get(t);e.setAttribute("class",a.filter.state?"filter-active":"filter-disable")}e.addEventListener("mousedown",(e=>{this.save(),this.changeState(e),this.reloadScreen(),this._$saved=!1}))}setTrashEvent(e){e&&e.addEventListener("click",(e=>{this.removeFilter(e),this.reloadScreen()}))}addFilter(){const e=document.querySelectorAll(".filter-none")[0];e&&e.setAttribute("style","display: none;");const t=document.getElementById("filter-select");t&&this[`add${t.value}`]()}clear(){this._$filterId=0,this._$filters.clear();const e=document.getElementById("filter-setting-list");if(!e)return;const t=document.querySelectorAll(".filter-none")[0];for(;e.firstChild;)e.firstChild.remove();t.setAttribute("style",""),e.appendChild(t)}createFilter(e,t=null){if(!t){const a=k.$tools.getDefaultTool("arrow").activeElements;if(!a.length)return-1;t=new e;const r=a[0],i=k.$currentWorkSpace().scene.getLayer(0|r.dataset.layerId).getCharacter(0|r.dataset.characterId),s=k.$timelineFrame.currentFrame;let n=i.getPlace(s);n.tweenFrame&&(i.endFrame-1>s&&!i.hasTween(s)&&(k.$timelineTool.executeTimelineKeyAdd(),n=i.getPlace(s)),n=i.getPlace(n.tweenFrame),i.updateTweenFilter(s)),n.filter.push(t)}const a=this._$filterId++;return this._$filters.set(a,{id:a,lock:!1,filter:t,context:null}),a}addDropShadowFilter(e=null,t=!0){const a=document.getElementById("filter-setting-list");if(!a)return;const r=this.createFilter(Y,e);e||(e=this._$filters.get(r).filter);const i=`\n${Me.createHeaderHTML(r,"DropShadow")}\n\n        <div class="filter-view-area-right">\n        \n            <div class="filter-container">\n                ${Me.createBlurX(r,e.blurX)}\n                ${Me.createStrength(r,e.strength)}\n            </div>\n    \n            <div class="filter-container">\n                ${Me.createBlurY(r,e.blurY)}\n                ${Me.createAngle(r,e.angle)}\n            </div>\n\n            <div class="filter-container">\n                ${Me.createDistance(r,e.distance)}\n            </div>\n    \n            <div class="filter-container">\n                ${Me.createColor(r,e.color)}\n                ${Me.createAlpha(r,e.alpha)}\n            </div>\n            \n            <div class="filter-container">\n                ${Me.createKnockout(r)}\n            </div>\n\n            <div class="filter-container">\n                ${Me.createInnerShadow(r)}\n            </div>\n    \n            <div class="filter-container">\n                ${Me.createHideObject(r)}\n            </div>\n\n            <div class="filter-container">\n                ${Me.createQuality(r)}\n            </div> \n            \n        </div>\n    </div>\n</div>\n`;a.insertAdjacentHTML("beforeend",i),this.setCommonEvent(r),e.knockout&&(document.getElementById(`knockout-${r}`).checked=!0),e.inner&&(document.getElementById(`inner-${r}`).checked=!0),e.hideObject&&(document.getElementById(`hideObject-${r}`).checked=!0);const s=[`blurX-${r}`,`blurY-${r}`,`strength-${r}`,`angle-${r}`,`alpha-${r}`,`distance-${r}`];for(let e=0;e<s.length;++e)this.setInputEvent(document.getElementById(s[e]));const n=[`knockout-${r}`,`inner-${r}`,`hideObject-${r}`];for(let e=0;e<n.length;++e)this.setClickEvent(document.getElementById(n[e]));const o=[`color-${r}`,`quality-${r}`];for(let e=0;e<o.length;++e)this.setChangeEvent(document.getElementById(o[e]));t&&this.disposeCharacterImage(),k.$addModalEvent(document.getElementById(`filter-id-${r}`))}addBlurFilter(e=null,t=!0){const a=document.getElementById("filter-setting-list");if(!a)return;const r=this.createFilter(j,e);e||(e=this._$filters.get(r).filter);const i=`\n${Me.createHeaderHTML(r,"Blur")}\n        \n        <div class="filter-view-area-right">\n        \n            <div class="filter-container">\n                ${Me.createBlurX(r,e.blurX)}\n            </div>\n        \n            <div class="filter-container">\n                ${Me.createBlurY(r,e.blurY)}\n            </div>\n        \n            <div class="filter-container">\n                ${Me.createQuality(r)}\n            </div> \n        \n        </div>\n    </div>\n</div>\n`;a.insertAdjacentHTML("beforeend",i),this.setCommonEvent(r);const s=[`blurX-${r}`,`blurY-${r}`];for(let e=0;e<s.length;++e)this.setInputEvent(document.getElementById(s[e]));const n=[`quality-${r}`];for(let e=0;e<n.length;++e)this.setChangeEvent(document.getElementById(n[e]));t&&this.disposeCharacterImage(),k.$addModalEvent(document.getElementById(`filter-id-${r}`))}addGlowFilter(e=null,t=!0){const a=document.getElementById("filter-setting-list");if(!a)return;const r=this.createFilter(W,e);e||(e=this._$filters.get(r).filter);const i=`\n${Me.createHeaderHTML(r,"Glow")}\n\n        <div class="filter-view-area-right">\n\n            <div class="filter-container">\n                ${Me.createBlurX(r,e.blurX)}\n                ${Me.createStrength(r,e.strength)}\n            </div>\n            \n            <div class="filter-container">\n                ${Me.createBlurY(r,e.blurY)}\n            </div>\n\n            <div class="filter-container">\n                ${Me.createColor(r,e.color)}\n                ${Me.createAlpha(r,e.alpha)}\n            </div>\n            \n            <div class="filter-container">\n                ${Me.createInnerShadow(r)}\n            </div>\n            \n            <div class="filter-container">\n                ${Me.createKnockout(r)}\n            </div>\n\n            <div class="filter-container">\n                ${Me.createQuality(r)}\n            </div> \n            \n        </div>\n    </div>\n</div>\n`;a.insertAdjacentHTML("beforeend",i),this.setCommonEvent(r),e.knockout&&(document.getElementById(`knockout-${r}`).checked=!0),e.inner&&(document.getElementById(`inner-${r}`).checked=!0);const s=[`blurX-${r}`,`blurY-${r}`,`strength-${r}`,`alpha-${r}`,`distance-${r}`];for(let e=0;e<s.length;++e)this.setInputEvent(document.getElementById(s[e]));const n=[`knockout-${r}`,`inner-${r}`];for(let e=0;e<n.length;++e)this.setClickEvent(document.getElementById(n[e]));const o=[`color-${r}`,`quality-${r}`];for(let e=0;e<o.length;++e)this.setChangeEvent(document.getElementById(o[e]));t&&this.disposeCharacterImage(),k.$addModalEvent(document.getElementById(`filter-id-${r}`))}addBevelFilter(e=null,t=!0){const a=document.getElementById("filter-setting-list");if(!a)return;const r=this.createFilter(X,e);if(0>r)return;e||(e=this._$filters.get(r).filter);const i=`\n${Me.createHeaderHTML(r,"Bevel")}\n        \n        <div class="filter-view-area-right">\n\n            <div class="filter-container">\n                ${Me.createBlurX(r,e.blurX)}\n                ${Me.createStrength(r,e.strength)}\n            </div>\n\n            <div class="filter-container">\n                ${Me.createBlurY(r,e.blurY)}\n                ${Me.createAngle(r,e.angle)}\n            </div>\n\n            <div class="filter-container">\n                ${Me.createDistance(r,e.distance)}\n            </div>\n\n            <div class="filter-container">\n                ${Me.createShadowColor(r,e.shadowColor)}\n                ${Me.createShadowAlpha(r,e.shadowAlpha)}\n            </div>\n            \n            <div class="filter-container">\n                ${Me.createHighlightColor(r,e.highlightColor)}\n                ${Me.createHighlightAlpha(r,e.highlightAlpha)}\n            </div>\n            \n            <div class="filter-container">\n                ${Me.createKnockout(r)}\n            </div>\n\n            <div class="filter-container">\n                ${Me.createBevelType(r)}\n                ${Me.createQuality(r)}\n            </div>\n            \n        </div>\n    </div>\n</div>\n`;a.insertAdjacentHTML("beforeend",i),this.setCommonEvent(r),e.knockout&&(document.getElementById(`knockout-${r}`).checked=!0);const s=[`blurX-${r}`,`blurY-${r}`,`strength-${r}`,`angle-${r}`,`shadowAlpha-${r}`,`highlightAlpha-${r}`,`distance-${r}`];for(let e=0;e<s.length;++e)this.setInputEvent(document.getElementById(s[e]));const n=[`knockout-${r}`];for(let e=0;e<n.length;++e)this.setClickEvent(document.getElementById(n[e]));const o=[`shadowColor-${r}`,`highlightColor-${r}`,`type-${r}`,`quality-${r}`];for(let e=0;e<o.length;++e)this.setChangeEvent(document.getElementById(o[e]));t&&this.disposeCharacterImage(),k.$addModalEvent(document.getElementById(`filter-id-${r}`))}}k.$filterController=new xe;class Me{static createHeaderHTML(e,t){return`\n<div id="filter-id-${e}" class="filter-border">\n\n    <div class="filter-title">\n        <i id="filter-title-arrow-${e}" class="arrow active"></i>\n        <span id="filter-name-${e}" data-filter-id="${e}">${t}</span>\n        <i class="filter-active" id="filter-state-${e}" data-filter-id="${e}" data-detail="{{フィルターを表示・非表示する}}"></i>\n        <i class="trash" id="trash-${e}" data-filter-id="${e}" data-detail="{{フィルターを削除}}"></i>\n    </div>\n    \n    <div id="filter-view-area-${e}" class="filter-view-area">\n    \n        <div class="filter-view-area-left">\n        \n            <div id="filter-${e}-lock" data-filter-id="${e}" class="filter-lock">\n                ┌\n                <div class="disable" data-detail="{{比率を固定}}"></div>\n                └\n            </div>\n        \n        </div>\n`}static createBlurX(e,t){return`\n<div class="filter-text">BlurX</div>\n<div><input type="text" id="blurX-${e}" value="${t}" data-name="blurX" data-filter-id="${e}" data-detail="{{水平方向にぼかす}}" autocomplete="off" tabindex="-1"></div>\n`}static createBlurY(e,t){return`\n<div class="filter-text">BlurY</div>\n<div><input type="text" id="blurY-${e}" value="${t}" data-name="blurY" data-filter-id="${e}" data-detail="{{垂直方向にぼかす}}" autocomplete="off" tabindex="-1"></div>\n`}static createStrength(e,t){return`\n<div class="filter-text">Strength</div>\n<div><input type="text" id="strength-${e}" value="${t}" data-filter-id="${e}" data-name="strength" data-detail="{{フィルター強度}}" autocomplete="off" tabindex="-1"></div>\n`}static createAngle(e,t){return`\n<div class="filter-text">Angle</div>\n<div><input type="text" id="angle-${e}" value="${t}" data-filter-id="${e}" data-name="angle" data-detail="{{フィルター角度}}" autocomplete="off" tabindex="-1"></div>\n`}static createDistance(e,t){return`\n<div class="filter-text">Distance</div>\n<div><input type="text" id="distance-${e}" value="${t}" data-filter-id="${e}" data-name="distance" data-detail="{{フィルター距離}}" autocomplete="off" tabindex="-1"></div>\n`}static createShadowColor(e,t){return`\n<div class="filter-text">Shadow<br>Color</div>\n<div><input type="color" id="shadowColor-${e}" value="#${t.toString(16).padStart(6,"0")}" data-filter-id="${e}" data-name="shadowColor" data-detail="{{シャドウのカラー}}" tabindex="-1"></div>\n`}static createShadowAlpha(e,t){return`\n<div class="filter-text">Shadow<br>Alpha</div>\n<div><input type="text" id="shadowAlpha-${e}" value="${t}" data-filter-id="${e}" data-name="shadowAlpha" data-detail="{{シャドウのアルファ}}" autocomplete="off" tabindex="-1"></div>\n`}static createHighlightColor(e,t){return`\n<div class="filter-text">Highlight<br>Color</div>\n<div><input type="color" id="highlightColor-${e}" value="#${t.toString(16).padStart(6,"0")}" data-filter-id="${e}" data-name="highlightColor" data-detail="{{ハイライトのカラー}}" tabindex="-1"></div>\n`}static createHighlightAlpha(e,t){return`\n<div class="filter-text">Highlight<br>Alpha</div>\n<div><input type="text" id="highlightAlpha-${e}" value="${t}" data-filter-id="${e}" data-name="highlightAlpha" data-detail="{{ハイライトのアルファ}}" autocomplete="off" tabindex="-1"></div>\n`}static createKnockout(e){return`\n<div><input type="checkbox" id="knockout-${e}" data-name="knockout" data-filter-id="${e}" tabindex="-1"></div>\n<div class="filter-text-long">\n    <label for="knockout-${e}">Knockout</label>\n</div>\n`}static createBevelType(e){return`\n<div class="filter-text-long">Type</div>\n<div>\n    <select id="type-${e}" data-name="type" data-filter-id="${e}" tabindex="-1">\n        <option value="inner">Inner</option>\n        <option value="outer">Outer</option>\n        <option value="full">Full</option>\n    </select>\n</div>\n`}static createQuality(e){return`\n<div class="filter-text-long">Quality</div>\n<div>\n    <select id="quality-${e}" data-name="quality" data-filter-id="${e}" tabindex="-1">\n        <option value="1">Low</option>\n        <option value="2">Middle</option>\n        <option value="3">High</option>\n    </select>\n</div>\n`}static createInnerShadow(e){return`\n<div><input type="checkbox" id="inner-${e}" data-name="inner" data-filter-id="${e}" tabindex="-1"></div>\n<div class="filter-text-long">\n    <label for="inner-${e}">Inner Shadow</label>\n</div>\n`}static createHideObject(e){return`\n<div><input type="checkbox" id="hideObject-${e}" data-name="hideObject" data-filter-id="${e}" tabindex="-1"></div>\n<div class="filter-text-long">\n    <label for="hideObject-${e}">Hide Object</label>\n</div>\n`}static createColor(e,t){return`\n<div class="filter-text">Color</div>\n<div><input type="color" id="color-${e}" value="#${t.toString(16).padStart(6,"0")}" data-filter-id="${e}" data-name="color" data-detail="{{シャドウのカラー}}" tabindex="-1"></div>\n`}static createAlpha(e,t){return`\n<div class="filter-text">Alpha</div>\n<div><input type="text" id="alpha-${e}" value="${t}" data-filter-id="${e}" data-name="alpha" data-detail="{{シャドウのアルファ}}" autocomplete="off" tabindex="-1"></div>\n`}static createGradientColor(e){return`\n<div class="filter-text">Color</div>\n<div><input type="color" id="gradientColor-${e}" value="#000000" data-filter-id="${e}" data-name="gradientColor" data-detail="{{グラデーションカラー}}" tabindex="-1"></div>\n`}static createGradientAlpha(e){return`\n<div class="filter-text">Alpha</div>\n<div><input type="text" id="gradientAlpha-${e}" value="100" data-filter-id="${e}" data-name="gradientAlpha" data-detail="{{グラデーションのアルファ}}" autocomplete="off" tabindex="-1"></div>\n        `}static createGradientColorPalette(e){return`\n<div id="gradient-color-palette-${e}" class="gradient-color-palette">\n    <div id="color-palette-${e}" class="color-palette">\n        <canvas id="gradient-canvas-${e}"></canvas>\n    </div>\n    <div id="color-pointer-list-${e}" data-filter-id="${e}" class="color-pointer-list" data-detail="{{カラーポインターを追加}}"></div>\n</div>\n`}}k.$gridController=new class extends we{constructor(){super("nine-slice"),this._$state="hide",this._$elementIds=["grid-top-left","grid-top-right","grid-bottom-left","grid-bottom-right"],this._$gridMouseMove=null,this._$gridMouseUp=null}initialize(){super.initialize();const e=["nine-slice-setting-x","nine-slice-setting-y","nine-slice-setting-w","nine-slice-setting-h"];for(let t=0;t<e.length;++t)this.setInputEvent(document.getElementById(e[t]));for(let e=0;e<this._$elementIds.length;++e){const t=document.getElementById(this._$elementIds[e]);t&&(t.style.display="none",t.addEventListener("mousedown",(e=>{this.standbyPointer(e)})))}}standbyPointer(e){e.stopPropagation();const t=k.$tools.activeTool;t&&(e.grid=!0,t.dispatchEvent(re.MOUSE_DOWN,e))}changeNineSliceSettingX(e){return this.updateShapeGrid(+e,+document.getElementById("nine-slice-setting-y").value,+document.getElementById("nine-slice-setting-w").value,+document.getElementById("nine-slice-setting-h").value),+e}changeNineSliceSettingY(e){return this.updateShapeGrid(+document.getElementById("nine-slice-setting-x").value,+e,+document.getElementById("nine-slice-setting-w").value,+document.getElementById("nine-slice-setting-h").value),+e}changeNineSliceSettingW(e){return this.updateShapeGrid(+document.getElementById("nine-slice-setting-x").value,+document.getElementById("nine-slice-setting-y").value,+e,+document.getElementById("nine-slice-setting-h").value),+e}changeNineSliceSettingH(e){return this.updateShapeGrid(+document.getElementById("nine-slice-setting-x").value,+document.getElementById("nine-slice-setting-y").value,+document.getElementById("nine-slice-setting-w").value,+e),+e}updateShapeGrid(e,t,a,r){const i=k.$tools.getDefaultTool("arrow").activeElements;if(!i.length)return;const s=k.$currentWorkSpace().getLibrary(0|i[0].dataset.libraryId);switch(0){case e:case t:s._$grid=null,this.hide();break;default:s._$grid={x:e,y:t,w:a,h:r},this.show().relocation()}s.cacheClear()}show(){if("show"!==this._$state){this._$state="show";for(let e=0;e<this._$elementIds.length;++e){const t=document.getElementById(this._$elementIds[e]);t&&(t.style.display="")}}return this}hide(){if("hide"!==this._$state){for(let e=0;e<this._$elementIds.length;++e){const t=document.getElementById(this._$elementIds[e]);t&&(t.style.display="none")}this._$state="hide"}}relocation(){const e=k.$tools.getDefaultTool("arrow").activeElements;if(!e.length||e.length>1)return this.hide();const t=e[0],a=0|t.dataset.characterId,r=document.getElementById(`character-${a}`);if(!r)return this.hide();const i=k.$currentWorkSpace(),s=i.getLibrary(0|t.dataset.libraryId);if(!s||s.type!==A.SHAPE)return this.hide();const n=s._$grid;if(!n)return this.hide();const o=0|t.dataset.layerId,l=i.scene.getLayer(o).getCharacter(0|t.dataset.characterId);if(l.rotation)return void this.hide();const c=l.getBounds(),d=l.getPlace(k.$timelineFrame.currentFrame).matrix,h=Math.sqrt(d[0]*d[0]+d[1]*d[1]),u=Math.sqrt(d[2]*d[2]+d[3]*d[3]),m=r.offsetLeft,g=r.offsetTop,p=l.width-Math.abs(c.xMax-c.xMin),f=l.height-Math.abs(c.yMax-c.yMin),$=document.getElementById("grid-top-left");$.style.left=m+n.x*k.$zoomScale-4+"px",$.style.top=g+n.y*k.$zoomScale-4+"px";const y=document.getElementById("grid-top-right");y.style.left=m+(n.x+n.w)*k.$zoomScale*h+p-4+"px",y.style.top=g+n.y*k.$zoomScale-4+"px";const _=document.getElementById("grid-bottom-left");_.style.left=m+n.x*k.$zoomScale-4+"px",_.style.top=g+(n.y+n.h)*k.$zoomScale*u+f-4+"px";const b=document.getElementById("grid-bottom-right");b.style.left=m+(n.x+n.w)*k.$zoomScale*h+p-4+"px",b.style.top=g+(n.y+n.h)*k.$zoomScale*u+f-4+"px"}};k.$instanceSelectController=new class extends we{initialize(){super.initialize();const e=document.getElementById("instance-setting");e&&(e.style.display="none")}createInstanceSelect(e){const t=k.$currentWorkSpace(),a=document.getElementById("instance-type-name");for(;a.children.length;)a.children[0].remove();const r=document.createElement("i");r.setAttribute("class",`library-type-${e.type}`),a.appendChild(r);const i=document.createElement("select");i.classList.add("instance-select"),i.addEventListener("change",(e=>{const t=k.$tools.activeTool;t&&(e.displayObject=!0,t.dispatchEvent(re.CHANGE,e))}));for(const a of t._$libraries.values()){if(!a.id)continue;switch(a.type){case A.FOLDER:case A.SOUND:continue}const r=document.createElement("option");r.value=a.id;let s=a.name;if(a._$folderId){let e=a;for(;e._$folderId;)e=t.getLibrary(e._$folderId),s=`${e.name}/${s}`}r.innerHTML=s,a.id===e.id&&(r.defaultSelected=!0),i.appendChild(r)}a.appendChild(i)}};k.$javascriptController=new class{reload(){const e=document.getElementById("javascript-internal-list-box");if(!e)return;const t=e.children;for(;t.length;)t[0].remove();const a=k.$currentWorkSpace();if(a)for(const t of a._$libraries.values()){if(t._$type!==A.MOVIE_CLIP)continue;if(!t._$actions.size)continue;const a=t.id,r=`<div id="script-${a}" data-library-id="${a}" class="internal-parent"><i></i>${t._$name}</div>`;e.insertAdjacentHTML("beforeend",r);document.getElementById(`script-${a}`).addEventListener("dblclick",(e=>{k.$sceneChange.reload(0|e.currentTarget.dataset.libraryId)}));for(const r of t._$actions.keys()){const t=`<div id="script-${a}-${r}" data-library-id="${a}" data-frame="${r}" class="internal-child"><i></i>frame ${r}</div>`;e.insertAdjacentHTML("beforeend",t);document.getElementById(`script-${a}-${r}`).addEventListener("mousedown",(e=>{k.$javaScriptEditor.hide();const t=e.currentTarget,a=k.$currentWorkSpace().getLibrary(0|t.dataset.libraryId),r=0|t.dataset.frame;k.$javaScriptEditor.show(null,r,a)}))}}}};k.$libraryController=new class{constructor(){this._$saved=!1,this._$activeInstances=new Map,this._$copyMapping=new Map,this._$handler=null,k.$readEnd++,"complete"!==document.readyState?(this._$handler=this.initialize.bind(this),window.addEventListener("DOMContentLoaded",this._$handler)):this.initialize()}get activeInstances(){return this._$activeInstances}set activeInstance(e){switch(!0){case k.$ctrlKey&&this.activeInstances.size>0:{const t=0|e.dataset.libraryId;this.activeInstances.has(t)?(this.activeInstances.delete(t),e.classList.remove("active")):(this.activeInstances.set(t,e),e.classList.add("active"))}break;case k.$shiftKey&&this.activeInstances.size>0:{const t=Array.from(document.getElementById("library-list-box").children),a=t.indexOf(this.activeInstances.values().next().value),r=t.indexOf(e);if(-1===r)return;if(this.clearActive(),r===a){this.activeInstances.set(0|e.dataset.libraryId,e),e.classList.add("active");break}if(r>a){const e=r-a+1;for(let r=0;e>r;++r){const e=t[a+r];this.activeInstances.set(0|e.dataset.libraryId,e),e.classList.add("active")}}else{const e=a-r+1;for(let r=0;e>r;++r){const e=t[a-r];this.activeInstances.set(0|e.dataset.libraryId,e),e.classList.add("active")}}}break;default:this.clearActive(),e&&(this.activeInstances.set(0|e.dataset.libraryId,e),e.classList.add("active"))}}cloneMovieClip(e,t){const a=k.$workSpaces[e],r=k.$currentWorkSpace(),i=k.$activeWorkSpaceId;k.$activeWorkSpaceId=e;const s=t.clone();k.$activeWorkSpaceId=i;for(const t of s._$layers.values()){const n=new T;for(let s=0;s<t._$characters.length;++s){k.$activeWorkSpaceId=e;const o=new M(JSON.parse(JSON.stringify(t._$characters[s].toObject())));o._$id=r._$characterId++,k.$activeWorkSpaceId=i;const l=a.getLibrary(o.libraryId);if(this._$copyMapping.has(l.id)){o.libraryId=this._$copyMapping.get(l.id),n.addCharacter(o);continue}l.folderId&&this.cloneFolder(e,l.id);const c=l.getPathWithWorkSpace(a);if(r._$nameMap.has(c)){k.$confirmModal.files.push({file:l,character:o,layer:n,path:c,workSpaceId:e,type:"copy"});continue}const d=l.type===A.MOVIE_CLIP?this.cloneMovieClip(l):l.clone();if(d.folderId){const e=a.getLibrary(d.folderId);d.folderId=0,e&&(d.folderId=r._$libraries.get(e.getPathWithWorkSpace(a)))}const h=r.nextLibraryId;this._$copyMapping.set(l.id,h),d._$id=o.libraryId=h,r._$libraries.set(d.id,d),this.createInstance(d.type,d.name,d.id,d.symbol),r._$nameMap.set(c,d.id),n.addCharacter(o)}for(let e=0;e<t._$emptys.length;++e)n.addEmptyCharacter(t._$emptys[e].clone());n.id=t.id,s.setLayer(n.id,n)}return s}cloneFolder(e,t){const a=k.$workSpaces[e],r=k.$currentWorkSpace(),i=a.getLibrary(t);if(!i)return;const s=[];let n=i;for(;n.folderId;)n=a.getLibrary(n.folderId),s.unshift(n);const o=new Map;for(let e=0;s.length>e;++e){const t=s[e],i=t.getPathWithWorkSpace(a);if(r._$nameMap.has(i)){o.set(t.id,r._$nameMap.get(i));continue}const n=t.clone();n._$id=r.nextLibraryId,r._$libraries.set(n.id,n),o.set(t.id,n.id),n.folderId&&(n.folderId=o.get(n.folderId)),this.createInstance(n.type,n.name,n.id,n.symbol),r._$nameMap.set(i,n.id)}}clone(e,t,a=null,r=null){const i=k.$workSpaces[e],s=k.$currentWorkSpace(),n=i.getLibrary(t);if(!n)return;n.folderId&&this.cloneFolder(e,n.id);const o=n.getPathWithWorkSpace(i);if(s._$nameMap.has(o))return void k.$confirmModal.files.push({file:n,character:r,layer:a,path:o,workSpaceId:e,type:"copy"});const l=k.$activeWorkSpaceId;k.$activeWorkSpaceId=e;const c=n.type===A.MOVIE_CLIP?this.cloneMovieClip(n):n.clone();if(k.$activeWorkSpaceId=l,c.folderId){const e=i.getLibrary(c.folderId);c.folderId=0,e&&(c.folderId=s._$libraries.get(e.getPathWithWorkSpace(i)))}c._$id=s.nextLibraryId,s._$libraries.set(c.id,c),this.createInstance(c.type,c.name,c.id,c.symbol),s._$nameMap.set(o,c.id),this.reload()}clearActive(){for(const e of this.activeInstances.values())e.classList.remove("active");this.activeInstances.clear()}initialize(){this._$handler&&(window.removeEventListener("DOMContentLoaded",this._$handler),this._$handler=null);const e=document.getElementById("library-list-box");e&&(e.addEventListener("dragover",(function(e){e.preventDefault()})),e.addEventListener("drop",(e=>{this.drop(e)})),e.addEventListener("dragstart",(()=>{this.dragstart()})),e.addEventListener("dragend",(()=>{this.dragend()})),e.addEventListener("mousedown",(e=>{e.stopPropagation(),e.button||this.clearActive()}))),k.$initializeEnd()}clearSoundSelect(){const e=document.getElementById("sound-select");if(e)for(;e.children.length;)e.children[0].remove()}clearLibrary(){const e=document.getElementById("library-list-box");if(e)for(;e.children.length;)e.children[0].remove();k.$currentWorkSpace()._$nameMap.clear(),k.$confirmModal.hide()}reload(e=null){const t=k.$currentWorkSpace();e||(e=Array.from(t._$libraries.values())),this.clearLibrary(),this.clearSoundSelect(),e.sort(((e,t)=>{const a=e.name.toLowerCase(),r=t.name.toLowerCase();return a<r?-1:a>r?1:0}));const a=new Map,r=new Map;for(let i=0;i<e.length;++i){const s=e[i];if(s.id){if(this.createInstance(s.type,s.name,s.id,s.symbol),t._$nameMap.set(s.path,s.id),"folder"===s.type&&s.mode===F.OPEN&&this.openFolder(s),s.folderId){const e=document.getElementById(`library-child-id-${s.id}`);e.remove(),r.has(s.folderId)||r.set(s.folderId,[]),r.get(s.folderId).push(e)}"folder"===s.type&&a.set(s.id,s)}}if(a.size){const e=document.getElementById("library-list-box"),t=new Map;for(;a.size!==t.size;){for(const[i,s]of a){if(!r.has(i)){t.set(i,!0);continue}if(t.has(i))continue;const a=document.getElementById(`library-child-id-${s.id}`);if(!a)continue;const n=r.get(i);for(let t=n.length-1;t>-1;--t){const r=n[t];e.insertBefore(r,a.nextElementSibling),s.mode===F.CLOSE&&(r.style.display="none")}t.set(i,!0)}for(const[e,t]of a)r.has(e)&&!t.folderId&&this.updateFolderStyle(t,t.mode)}t.clear(),a.clear(),r.clear()}}createInstance(e,t,a,r=""){const i=`\n<div draggable="true" class="library-list-box-child" id="library-child-id-${a}" data-library-id="${a}">\n    <div class="library-list-box-name">\n        <i class="library-type-${e===A.FOLDER?"arrow close":"space"}" id="arrow-${a}" data-library-id="${a}"></i>\n        <i class="library-type-${e} " id="${e}-${a}" data-library-id="${a}"></i>\n        <p>\n            <span id="library-name-${a}" class="view-text" data-type="name" data-library-id="${a}">${t}</span>\n            <input type="text" id="library-name-input-${a}" data-library-id="${a}" data-type="name" value="${t}" style="display: none;" autocomplete="off" tabindex="-1">\n        </p>\n    </div>\n    <div class="library-list-box-symbol">\n        <p>\n            <span id="library-symbol-name-${a}" class="view-symbol-text" data-type="symbol" data-library-id="${a}">${r}</span>\n            <input type="text" id="library-symbol-name-input-${a}" data-library-id="${a}" data-type="symbol" value="${r}" style="display: none;" autocomplete="off" tabindex="-1">\n        </p>\n    </div>\n</div>`;document.getElementById("library-list-box").insertAdjacentHTML("beforeend",i),e===A.MOVIE_CLIP&&document.getElementById(`${e}-${a}`).addEventListener("dblclick",(e=>{this.changeScene(0|e.currentTarget.dataset.libraryId)}));const s=document.getElementById(`library-child-id-${a}`);if(this.activeInstances.has(a)&&(this.activeInstances.set(a,s),s.classList.add("active")),s.addEventListener("mousedown",(e=>{this.selectInstance(e)})),"folder"===e){s.addEventListener("dragover",(e=>{e.preventDefault()})),s.addEventListener("drop",(e=>{this.folderIn(e)}));document.getElementById(`arrow-${a}`).addEventListener("mousedown",(e=>{this.clickFolder(e)}));const t=document.getElementById(`${e}-${a}`);t.addEventListener("dblclick",(e=>{this.clickFolder(e)})),t.classList.remove("library-type-folder"),t.classList.add("library-type-folder-close")}if(e===A.SOUND){const e=document.createElement("option");e.value=`${a}`,e.innerHTML=t,document.getElementById("sound-select").appendChild(e)}const n=[`library-name-${a}`];"folder"!==e&&n.push(`library-symbol-name-${a}`);for(let e=0;e<n.length;++e)document.getElementById(n[e]).addEventListener("dblclick",(e=>{this.inputStart(e)}));const o=[`library-name-input-${a}`];"folder"!==e&&o.push(`library-symbol-name-input-${a}`);for(let e=0;e<o.length;++e){const t=document.getElementById(o[e]);t.addEventListener("focusout",(e=>{this.inputEnd(e)})),t.addEventListener("keypress",(e=>{this.inputEnd(e)}))}return{id:a,type:e,name:t,symbol:r}}changeScene(e){k.$screenRuler.clear(),k.$activeCharacterIds.length=0,k.$sceneChange.reload(e)}selectInstance(e){if(e.button||k.$keyLock)return;k.$endMenu(),e.stopPropagation();const t=e.currentTarget;(k.$ctrlKey||k.$shiftKey||!t.classList.contains("active"))&&(this.activeInstance=t,k.$libraryPreview.loadImage(0|t.dataset.libraryId))}inputStart(e){k.$keyLock=!0,e.stopPropagation();const t=e.target,a=0|t.dataset.libraryId,r=document.getElementById(`library-child-id-${a}`);r.classList.remove("active"),r.draggable=!1;const i="name"===t.dataset.type?`library-name-input-${a}`:`library-symbol-name-input-${a}`,s=document.getElementById(i);s.value=t.textContent,s.style.display="",s.focus(),t.style.display="none"}inputEnd(e){if("Enter"!==e.key){if("focusout"===e.type){this.save();const t=e.target,a=0|t.dataset.libraryId,r=k.$currentWorkSpace(),i=r.getLibrary(a),s="name"===t.dataset.type?`library-name-${a}`:`library-symbol-name-${a}`,n=document.getElementById(s);let o=t.value;if(n.textContent!==o){if("name"===t.dataset.type){const e=i.name;if(i.name=o,i.type===A.SOUND&&k.$soundController.createSoundElements(),r._$nameMap.has(i.path)){i.name=e,o=e;const a=document.getElementById("detail-modal");a.textContent=k.$currentLanguage.replace("{{同名のアイテムが存在します}}"),a.style.left=`${t.offsetLeft}px`,a.style.top=`${t.offsetTop}px`,a.setAttribute("class","fadeIn"),a.dataset.timerId=setTimeout((()=>{a.classList.contains("fadeOut")||a.setAttribute("class","fadeOut")}),1500)}}else i.symbol=o;n.textContent=o}n.style.display="";const l=document.getElementById(`library-child-id-${a}`);this.activeInstances.has(a)&&l.classList.add("active"),t.style.display="none",l.draggable=!0,k.$keyLock=!1,this._$saved=!1,"name"===t.dataset.type&&this.reload()}}else e.target.blur()}clickFolder(e){e.stopPropagation();const t=k.$currentWorkSpace().getLibrary(0|e.target.dataset.libraryId);t.mode===F.OPEN?this.closeFolder(t):this.openFolder(t),this.updateFolderStyle(t,t.mode)}updateFolderStyle(e,t){const a=k.$currentWorkSpace(),r=document.getElementById("library-list-box").children;let i=20,s=e.folderId;if(s)for(;;){const e=a.getLibrary(s);if(!e)break;if(i+=20,s=e.folderId,!s)break}for(let s=0;s<r.length;++s){const n=r[s],o=a.getLibrary(0|n.dataset.libraryId);if(!o.folderId)continue;if(o.folderId!==e.id)continue;let l=`padding-left: ${i}px;`;t!==F.OPEN&&(l+="display: none;"),n.setAttribute("style",l),o.type===A.FOLDER&&this.updateFolderStyle(o,t===F.OPEN?o.mode:t)}}openFolder(e){e.mode=F.OPEN;const t=document.getElementById(`folder-${e.id}`);t.classList.remove("library-type-folder-close"),t.classList.add("library-type-folder-open");const a=document.getElementById(`arrow-${e.id}`);a.classList.add("open"),a.classList.remove("close")}closeFolder(e){e.mode=F.CLOSE;const t=document.getElementById(`folder-${e.id}`);t.classList.remove("library-type-folder-open"),t.classList.add("library-type-folder-close");const a=document.getElementById(`arrow-${e.id}`);a.classList.remove("open"),a.classList.add("close")}dragstart(){const e=document.getElementById("stage-area").children;for(let t=1;t<e.length;++t)e[t].style.pointerEvents="none"}dragend(){const e=document.getElementById("stage-area").children;for(let t=1;t<e.length;++t){const a=e[t];a.dataset.preview||(a.style.pointerEvents="")}}drop(e){e.preventDefault(),e.stopPropagation(),this.save();if(e.dataTransfer.items.length){if(k.$saveProgress.active)return;this.clearActive(),k.$saveProgress.start(),k.$saveProgress.loadFiles();const t=[],a=e.dataTransfer.items;for(let e=0;e<a.length;++e)t.push(this.scanFiles(a[e].webkitGetAsEntry()));Promise.all(t).then((()=>{k.$saveProgress.end()}))}else this.folderOut();this._$saved=!1}scanFiles(e,t=0){if(e.isDirectory){const a=k.$currentWorkSpace().addLibrary({id:k.$currentWorkSpace().nextLibraryId,type:A.FOLDER,name:e.name,symbol:""});return t&&(a.folderId=t),new Promise((t=>{e.createReader().readEntries((e=>{const r=[];for(let t=0;t<e.length;++t)r.push(this.scanFiles(e[t],a.id));Promise.all(r).then((()=>{this.updateFolderStyle(a,a.mode),t()}))}))}))}return new Promise((a=>{e.file((e=>{this.loadFile(e,a,t)}))}))}removeLibrary(e){const t=document.getElementById(`library-child-id-${e}`);t&&t.remove();const a=k.$currentWorkSpace(),r=a.getLibrary(e);if(r){if(r.type===A.MOVIE_CLIP){const e=new Map;for(const t of r._$layers.values())for(let r=0;r<t._$characters.length;++r){const i=t._$characters[r];e.has(i.libraryId)||e.set(i.libraryId,!0);const s=a.getLibrary(i.libraryId);s&&s.type===A.MOVIE_CLIP&&this.removeLibrary(i.libraryId)}if(e.size)for(const t of e.keys()){const e=a.getLibrary(t);if(!e)continue;const r=document.getElementById(`library-child-id-${t}`);r&&r.remove(),e.remove(),a.removeLibrary(t)}}a.removeLibrary(e)}}loadFile(e,t,a=0,r="",i=0){const s=k.$currentWorkSpace();let n=r||e.name;if(n.indexOf(".swf")>-1&&(n=n.replace(".swf","")),a){let e=s.getLibrary(a);for(n=`${e.name}/${n}`;e._$folderId;)e=s.getLibrary(e._$folderId),n=`${e.name}/${n}`}if(!i&&s._$nameMap.has(n)){const r=s.getLibrary(s._$nameMap.get(n));if(r.type!==A.FOLDER)return k.$confirmModal.files.push({file:e,folderId:a,path:n}),k.$confirmModal.show(),t();if(n+=`/${n}`,s._$nameMap.has(n))return k.$confirmModal.files.push({file:e,folderId:r.id,path:n}),k.$confirmModal.show(),t();a=r.id}switch(i&&this.removeLibrary(i),e.type){case"image/svg+xml":e.text().then((o=>{if(!a){const t=s.addLibrary(this.createInstance(A.FOLDER,r||e.name,i||s.nextLibraryId));t.mode=F.OPEN,a=t.id}const l=this.createInstance(A.MOVIE_CLIP,r||e.name,i||s.nextLibraryId),c=s.addLibrary(l);s._$nameMap.set(n,l.id);const d=document.getElementById(`library-child-id-${l.id}`);if(d&&(this.activeInstances.set(l.id,d),d.classList.add("active")),a){c.folderId=a;const e=s.getLibrary(a);this.updateFolderStyle(e,e.mode)}ee.parse(o,c,a),k.$instanceSelectController.createInstanceSelect(c),k.$libraryController.reload(),k.$libraryPreview.loadImage(c.id),i&&this.reloadScreen(i),t()}));break;case"image/png":case"image/jpeg":case"image/gif":e.arrayBuffer().then((o=>{const l=new Blob([o],{type:e.type}),c=new Image;return c.src=URL.createObjectURL(l),c.decode().then((()=>{const o=c.width,l=c.height,d=k.$getCanvas();d.width=o,d.height=l;const h=d.getContext("2d");h.drawImage(c,0,0,o,l);const u=new Uint8Array(h.getImageData(0,0,o,l).data);k.$poolCanvas(d);const m=this.createInstance(A.BITMAP,r||e.name,i||s.nextLibraryId);s._$nameMap.set(n,m.id);const g=document.getElementById(`library-child-id-${m.id}`);g&&(this.activeInstances.set(m.id,g),g.classList.add("active")),m.width=c.width,m.height=c.height,m.imageType=e.type,m.buffer=new Uint8Array(u);const p=s.addLibrary(m);if(a){p.folderId=a;const e=s.getLibrary(a);this.updateFolderStyle(e,e.mode)}k.$instanceSelectController.createInstanceSelect(p),k.$libraryController.reload(),k.$libraryPreview.loadImage(p.id),i&&this.reloadScreen(i),t()}))}));break;case"video/mp4":e.arrayBuffer().then((o=>{const l=new Blob([o],{type:e.type}),c=document.createElement("video");c.onloadedmetadata=()=>{const l=this.createInstance(A.VIDEO,r||e.name,i||s.nextLibraryId);s._$nameMap.set(n,l.id);const d=document.getElementById(`library-child-id-${l.id}`);d&&(this.activeInstances.set(l.id,d),d.classList.add("active")),l.width=c.videoWidth,l.height=c.videoHeight,l.buffer=new Uint8Array(o);const h=s.addLibrary(l);if(a){h.folderId=a;const e=s.getLibrary(a);this.updateFolderStyle(e,e.mode)}k.$instanceSelectController.createInstanceSelect(h),k.$libraryController.reload(),k.$libraryPreview.loadImage(h.id),i&&this.reloadScreen(i),t()},c.src=URL.createObjectURL(l),c.load()}));break;case"audio/mpeg":e.arrayBuffer().then((o=>{const l=this.createInstance(A.SOUND,r||e.name,i||s.nextLibraryId);s._$nameMap.set(n,l.id);const c=document.getElementById(`library-child-id-${l.id}`);c&&(this.activeInstances.set(l.id,c),c.classList.add("active")),l.buffer=new Uint8Array(o);const d=s.addLibrary(l);if(a){d.folderId=a;const e=s.getLibrary(a);this.updateFolderStyle(e,e.mode)}k.$libraryController.reload(),k.$libraryPreview.loadImage(d.id),i&&this.reloadScreen(i),t()}));break;case"application/x-shockwave-flash":e.arrayBuffer().then((o=>{if(!a){const e=s.addLibrary(this.createInstance(A.FOLDER,n,i||s.nextLibraryId));e.mode=F.OPEN,a=e.id}(new V).setData(new Uint8Array(o)).run(r||e.name,t,a,i)}));break;default:t()}}folderOut(){if(!this.activeInstances.size)return void this.reload();this.save();const e=k.$currentWorkSpace();let t=!1;for(const a of this.activeInstances.values()){const r=e.getLibrary(0|a.dataset.libraryId);if(!r||!r.folderId)continue;const i=r.folderId;r.folderId=0;const s=r.path;r.folderId=i,e._$nameMap.has(s)?(t=!0,k.$confirmModal.files.push({file:r,folderId:0,path:s,type:"move"}),k.$confirmModal.show()):r.folderId&&(r.folderId=0,a.setAttribute("style",""))}t||this.reload(),this._$saved=!1}folderIn(e){if(!this.activeInstances.size)return;e.stopPropagation(),e.preventDefault();const t=k.$currentWorkSpace(),a=e.currentTarget,r=t.getLibrary(0|a.dataset.libraryId);this.save();let i=!1;for(const e of this.activeInstances.values()){const a=t.getLibrary(0|e.dataset.libraryId);if(!a)continue;if(a.id===r.id)continue;const s=`${t.getLibrary(r.id).name}/${a.path}`;t._$nameMap.has(s)?(i=!0,k.$confirmModal.files.push({file:a,folderId:0,path:s,type:"move"}),k.$confirmModal.show()):a.folderId=r.id}i||this.reload(),this._$saved=!1}save(){this._$saved||(this._$saved=!0,k.$currentWorkSpace().temporarilySaved())}reloadScreen(e){k.$changeLibraryId=e;const t=k.$timelineFrame.currentFrame;k.$currentWorkSpace().scene.changeFrame(t),k.$changeLibraryId=0}};class Le extends we{constructor(){super(),this._$saved=!1,this._$lock=!1,this._$instance=null,this._$xScale=1,this._$yScale=1,this._$currentFrame=1,this._$startFrame=1,this._$endFrame=1,this._$width=0,this._$height=0}static get MAX_SIZE(){return 4095}static get MIN_SIZE(){return 1}static get MIN_QUALITY(){return 1}static get MAX_QUALITY(){return 100}static get DEFAULT_SIZE(){return 450}initialize(){super.initialize();const e=["library-menu-export","library-export-hide-icon","library-export-size-lock","library-export-execution"];for(let t=0;t<e.length;++t){const a=document.getElementById(e[t]);a&&a.addEventListener("mousedown",(e=>{if(e.button)return;e.stopPropagation();this[`execute${e.currentTarget.id.split("-").map((e=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`)).join("")}`](e)}))}const t=["export-width","export-height","export-start-frame","export-end-frame","export-current-frame","export-jpeg-quality"];for(let e=0;e<t.length;++e){const a=document.getElementById(t[e]);a&&this.setInputEvent(a)}const a=document.getElementById("library-export-file-type");a&&a.addEventListener("change",(e=>{const t=document.getElementById("jpeg-quality-area");if(!t)return;const a=e.target.value;t.style.display="jpeg"===a||"webp"===a?"":"none"}))}finishInput(e){super.finishInput(e,!1)}mouseMove(e){super.mouseMove(e,!1)}executeLibraryExportExecution(){k.$endMenu();const e=document.getElementById("library-export-file-type").value,t="webp"===e||"jpeg"===e?parseInt(document.getElementById("export-jpeg-quality").value)/100:1,a=document.getElementById("export-name").value,r=document.getElementById("library-export-location").value;switch(this._$instance.type){case A.MOVIE_CLIP:if("local"===r){const r=[],i=new JSZip;for(let s=this._$startFrame;this._$endFrame>=s;++s)r.push(this.getCanvas(s).then((r=>{i.file(`${a}_frame_${s}.${e}`,r.toDataURL(`image/${e}`,t).replace(/^.*,/,""),{base64:!0}),k.$poolCanvas(r)})));Promise.all(r).then((()=>{i.generateAsync({type:"blob"}).then((e=>{const t=URL.createObjectURL(e),r=document.createElement("a");r.download=`${a}.zip`,r.href=t,r.click(),URL.revokeObjectURL(t)}))}))}else{this.save();const t=k.$currentWorkSpace();let r=a;for(;t._$nameMap.has(r);)r+="_bitmap";const i=k.$libraryController.createInstance(A.FOLDER,r,t.nextLibraryId);t._$nameMap.set(r,i.id);const s=t.addLibrary(i);k.$instanceSelectController.createInstanceSelect(s);const n=[];for(let a=this._$startFrame;this._$endFrame>=a;++a)n.push(this.getCanvas(a).then((s=>{const n=`${r}_frame_${a}`,o=k.$libraryController.createInstance(A.BITMAP,n,t.nextLibraryId);o.width=s.width,o.height=s.height,o.imageType=`image/${e}`;const l=s.getContext("2d");o.buffer=new Uint8Array(l.getImageData(0,0,s.width,s.height).data),t._$nameMap.set(n,o.id);const c=t.addLibrary(o);c.folderId=i.id,k.$instanceSelectController.createInstanceSelect(c),k.$poolCanvas(s)})));Promise.all(n).then((()=>{k.$libraryController.reload(),this._$saved=!1}))}break;case A.VIDEO:{const e=a.split(".");"mp4"===e[e.length-1]&&e.pop();const t=document.createElement("a");t.download=`${e.join(".")}.mp4`,t.href=URL.createObjectURL(new Blob([new Uint8Array(this._$instance._$buffer)],{type:"video/mp4"})),t.click()}break;case A.SOUND:{const e=a.split(".");"mp3"===e[e.length-1]&&e.pop();const t=document.createElement("a");t.download=`${e.join(".")}.mp3`,t.href=URL.createObjectURL(new Blob([new Uint8Array(this._$instance._$buffer)],{type:"audio/mp3"})),t.click()}break;default:this.getCanvas().then((i=>{if("local"===r){const r=document.createElement("a");r.download=`${a}.${e}`,r.href=i.toDataURL(`image/${e}`,t),r.click()}else{this.save();const t=k.$currentWorkSpace();let r=a;for(;t._$nameMap.has(r);)r+="_bitmap";const s=k.$libraryController.createInstance(A.BITMAP,r,t.nextLibraryId);s.width=i.width,s.height=i.height,s.imageType=`image/${e}`;const n=i.getContext("2d");s.buffer=new Uint8Array(n.getImageData(0,0,i.width,i.height).data),t._$nameMap.set(r,s.id);const o=t.addLibrary(s);k.$instanceSelectController.createInstanceSelect(o),k.$libraryController.reload(),this._$saved=!1}k.$poolCanvas(i)}))}}executeLibraryExportSizeLock(e){this._$lock=!this._$lock,this._$currentValue=null,e.currentTarget.childNodes[1].setAttribute("class",this._$lock?"active":"disable")}changeExportJpegQuality(e){return e=k.$clamp(+e,Le.MIN_QUALITY,Le.MAX_QUALITY,1)}changeExportWidth(e){const t=(e=k.$clamp(+e,Le.MIN_SIZE,Le.MAX_SIZE,1))/this._$width;return this._$lock&&(this._$yScale+=t-this._$xScale,document.getElementById("export-height").value=`${Math.ceil(this._$height*this._$yScale)}`),this._$xScale=t,this.appendImage(),e}changeExportHeight(e){const t=(e=k.$clamp(+e,Le.MIN_SIZE,Le.MAX_SIZE,1))/this._$height;return this._$lock&&(this._$xScale+=t-this._$yScale,document.getElementById("export-width").value=`${Math.ceil(this._$width*this._$xScale)}`),this._$yScale=t,this.appendImage(),e}changeExportStartFrame(e){e=k.$clamp(0|e,1,this._$instance.totalFrame),this._$startFrame=e;const t=document.getElementById("export-end-frame");return e>(0|t.value)&&(t.value=`${e}`,this._$endFrame=e),e>this._$currentFrame&&(document.getElementById("export-current-frame").value=`${e}`,this._$currentFrame=e),this.reloadMovieClip(),this.appendImage(),e}changeExportEndFrame(e){e=k.$clamp(0|e,1,this._$instance.totalFrame),this._$endFrame=e;const t=document.getElementById("export-start-frame");return(0|t.value)>e&&(t.value=`${e}`,this._$startFrame=e),this._$currentFrame>e&&(document.getElementById("export-current-frame").value=`${e}`,this._$currentFrame=e),this.reloadMovieClip(),this.appendImage(),e}changeExportCurrentFrame(e){return e=k.$clamp(0|e,this._$startFrame,this._$endFrame),this._$currentFrame=e,this.appendImage(),e}executeLibraryExportHideIcon(){k.$endMenu()}reloadMovieClip(){const e=this.getBounds();this._$width=Math.abs(e.xMax-e.xMin),this._$height=Math.abs(e.yMax-e.yMin),document.getElementById("export-start-frame").value=`${this._$startFrame}`,document.getElementById("export-end-frame").value=`${this._$endFrame}`,document.getElementById("export-width").value=`${Math.ceil(this._$width)}`,document.getElementById("export-height").value=`${Math.ceil(this._$height)}`}executeLibraryMenuExport(){const e=k.$libraryController.activeInstances;if(!e.size)return;const t=e.values().next().value;if(this._$instance=k.$currentWorkSpace().getLibrary(0|t.dataset.libraryId),this._$instance.type===A.FOLDER)return void k.$endMenu();this._$lock=!1,this._$xScale=1,this._$yScale=1,document.getElementById("library-export-size-lock").childNodes[1].setAttribute("class","disable");const a=document.getElementById("library-export-container-area"),r=document.getElementById("library-export-size-area"),i=document.getElementById("library-export-file-area"),s=document.getElementById("library-export-location").parentElement;switch(s.style.display="",this._$instance.type){case A.MOVIE_CLIP:this._$currentFrame=1,this._$startFrame=1,this._$endFrame=this._$instance.totalFrame,a.style.display="",r.style.display="",i.style.display="",this.reloadMovieClip();break;case A.VIDEO:case A.SOUND:a.style.display="none",r.style.display="none",i.style.display="none",s.style.display="none";break;default:{a.style.display="none",r.style.display="",i.style.display="";const e=this._$instance.getBounds();this._$width=Math.abs(e.xMax-e.xMin),this._$height=Math.abs(e.yMax-e.yMin),document.getElementById("export-width").value=`${Math.ceil(this._$width)}`,document.getElementById("export-height").value=`${Math.ceil(this._$height)}`}}document.getElementById("export-name").value=`${this._$instance.name}`,this.appendImage(),k.$endMenu("library-export-modal");const n=document.getElementById("library-export-modal");n.style.display="",n.setAttribute("class","fadeIn")}getBounds(){const e=[1,0,0,1,0,0];let t=Number.MAX_VALUE,a=-Number.MAX_VALUE,r=Number.MAX_VALUE,i=-Number.MAX_VALUE;for(let s=this._$startFrame;this._$endFrame>=s;++s){const n=this._$instance.getBounds(e,s);t=Math.min(n.xMin,t),a=Math.max(n.xMax,a),r=Math.min(n.yMin,r),i=Math.max(n.yMax,i)}return{xMin:t,xMax:a,yMin:r,yMax:i}}removeImage(){const e=document.getElementById("library-export-image");if(e)for(;e.firstChild;){const t=e.firstChild;k.$poolCanvas(t),t.remove()}}appendImage(){switch(this._$instance.type){case A.VIDEO:case A.SOUND:this._$instance.getPreview().then((e=>{this.removeImage(),document.getElementById("library-export-image").appendChild(e)}));break;default:this.getCanvas(this._$currentFrame,!0).then((e=>{this.removeImage(),document.getElementById("library-export-image").appendChild(e)}))}}getCanvas(e=1,t=!1){const a=k.$zoomScale;k.$zoomScale=1;const r=this._$instance.getBounds([1,0,0,1,0,0],e);let i=Math.abs(r.xMax-r.xMin),s=Math.abs(r.yMax-r.yMin);if(!i||!s)return Promise.resolve(k.$getCanvas());let n=this._$xScale,o=0;t&&this._$width*this._$xScale>Le.DEFAULT_SIZE&&(o=Le.DEFAULT_SIZE/(this._$width*this._$xScale));let l=this._$yScale,c=0;return t&&this._$height*this._$yScale>Le.DEFAULT_SIZE&&(c=Le.DEFAULT_SIZE/(this._$height*this._$yScale)),o&&(n*=o,l*=o),c&&(n*=c,l*=c),n/=window.devicePixelRatio,l/=window.devicePixelRatio,this._$instance.draw(k.$getCanvas(),Math.ceil(i*n),Math.ceil(s*l),{frame:1,matrix:[n,0,0,l,0,0],colorTransform:[1,1,1,1,0,0,0,0],blendMode:"normal",filter:[]},e).then((e=>(k.$zoomScale=a,Promise.resolve(e))))}save(){this._$saved||(this._$saved=!0,k.$currentWorkSpace().temporarilySaved())}}k.$libraryExport=new Le;k.$libraryKeyboardCommand=new class extends ne{constructor(){super("library")}initialize(){super.initialize();const e=document.getElementById("library-list-box");e&&(e.addEventListener("mouseleave",(()=>{this.active=!1})),e.addEventListener("mouseover",(()=>{this.active||(this.active=!0)})),e.addEventListener("mouseup",(()=>{this.active||(this.active=!0)}))),this.add("Backspace",(()=>{k.$libraryMenu.executeLibraryMenuDelete()})),this.add(k.$generateShortcutKey("Backspace",{ctrl:!0,shift:!0}),(()=>{k.$libraryMenu.executeLibraryMenuNoUseDelete()})),this.add(k.$generateShortcutKey("m",{ctrl:!0}),(()=>{k.$libraryMenu.executeLibraryMenuContainerAdd()})),this.add(k.$generateShortcutKey("f",{ctrl:!0}),(()=>{k.$libraryMenu.executeLibraryMenuFolderAdd()})),this.add(k.$generateShortcutKey("r",{ctrl:!0}),this.loadFile),this.add(k.$generateShortcutKey("c",{ctrl:!0}),(()=>{k.$libraryMenu.executeLibraryMenuCopy()})),this.add(k.$generateShortcutKey("v",{ctrl:!0}),(()=>{k.$libraryMenu.executeLibraryMenuPaste()})),this.add(k.$generateShortcutKey("s",{ctrl:!0,shift:!0}),(()=>{k.$libraryExport.executeLibraryMenuExport()})),this.add(k.$generateShortcutKey("s",{ctrl:!0,shift:!0}),(()=>{k.$libraryExport.executeLibraryMenuExport()})),this.add("ArrowDown",this.moveItem),this.add("ArrowUp",this.moveItem),this.add(k.$generateShortcutKey("ArrowDown",{shift:!0}),this.moveItem),this.add(k.$generateShortcutKey("ArrowUp",{shift:!0}),this.moveItem),this.add(k.$generateShortcutKey("a",{ctrl:!0}),(()=>{this.allItemSelect()})),this.add("e",k.$libraryMenu.executeLibraryMenuChangeScene)}allItemSelect(){const e=document.getElementById("library-list-box").children,t=k.$libraryController.activeInstances;t.clear();for(let a=0;e.length>a;++a){const r=e[a];r.classList.add("active");const i=0|r.dataset.libraryId;t.set(i,r)}}moveItem(e){const t=document.getElementById("library-list-box");if(!t)return;const a=Array.from(t.children);let r=0;const i=k.$libraryController.activeInstances;if(i.size){let e=null;const t=i.values();for(let a=0;i.size>a;++a)e=t.next().value;r=a.indexOf(e)}switch(e){case"ArrowDown":case"ArrowDownShift":r++;break;case"ArrowUp":case"ArrowUpShift":r--}const s=a[r];s&&(k.$libraryController.activeInstance=s,k.$libraryPreview.loadImage(0|s.dataset.libraryId))}loadFile(){k.$shiftKey=!1,k.$ctrlKey=!1,k.$altKey=!1,document.getElementById("library-menu-file-input").click()}};k.$libraryMenu=new class{constructor(){this._$saved=!1,this._$copyWorkSpaceId=-1,this._$copyLibraries=[],this._$adjusted=!1,this._$handler=null,k.$readEnd++,"complete"!==document.readyState?(this._$handler=this.initialize.bind(this),window.addEventListener("DOMContentLoaded",this._$handler)):this.initialize()}initialize(){this._$handler&&(window.removeEventListener("DOMContentLoaded",this._$handler),this._$handler=null);const e=document.getElementById("library-list-box");e&&(e.addEventListener("contextmenu",(e=>{this.show(e)})),e.addEventListener("mousedown",(e=>{e.button||this.hide()})));const t=["library-menu-container-add","library-menu-folder-add","library-menu-file","library-menu-delete","library-menu-no-use-delete","library-menu-empty-folder-delete","library-menu-copy","library-menu-paste","library-open-photopea","library-menu-change-scene"];for(let e=0;e<t.length;++e){const a=document.getElementById(t[e]);a&&a.addEventListener("mousedown",(e=>{if(e.button)return;k.$endMenu(),e.stopPropagation();this[`execute${e.target.id.split("-").map((e=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`)).join("")}`](e)}))}const a=document.getElementById("library-menu-file-input");a&&a.addEventListener("change",(e=>{if(k.$saveProgress.active)return;k.$saveProgress.start(),this.save(),k.$saveProgress.loadFiles();const t=[],a=e.target.files;for(let e=0;e<a.length;++e)t.push(new Promise((t=>{k.$libraryController.loadFile(a[e],t)})));Promise.all(t).then((()=>{k.$saveProgress.end()})),e.target.value="",this._$saved=!1})),k.$initializeEnd()}executeLibraryOpenPhotopea(){const e=k.$libraryController.activeInstances;if(!e.size)return;const t=k.$currentWorkSpace();for(let a of e.keys()){const e=t.getLibrary(a);e.type===A.BITMAP&&e.draw(k.$getCanvas(),Math.ceil(e.width),Math.ceil(e.height),{frame:1,matrix:[1,0,0,1,0,0],colorTransform:[1,1,1,1,0,0,0,0],blendMode:"normal",filter:[]},null,0,!0).then((t=>{const a={files:[t.toDataURL(e.imageType)]};k.$poolCanvas(t);const r=document.createElement("a");r.href=`https://www.photopea.com#${encodeURI(JSON.stringify(a))}`,r.target="_blank",r.click()}))}}executeLibraryMenuContainerAdd(){this.save();const e=k.$currentWorkSpace(),t=e.nextLibraryId;e.addLibrary({id:t,type:A.MOVIE_CLIP,name:`MovieClip_${t}`,symbol:""}),this._$saved=!1,k.$libraryController.reload()}executeLibraryMenuFolderAdd(){this.save();const e=k.$currentWorkSpace(),t=e.nextLibraryId,a=e.addLibrary({id:t,type:"folder",name:`Folder_${t}`,symbol:""}),r=k.$libraryController.activeInstances;if(r.size){for(let a of r.keys()){e.getLibrary(a).folderId=t}a.mode=F.OPEN}k.$libraryController.reload(),this._$saved=!1}executeLibraryMenuFile(e){e.preventDefault(),document.getElementById("library-menu-file-input").click()}executeLibraryMenuDelete(){const e=k.$libraryController.activeInstances;if(!e.size)return;this.save();const t=k.$currentWorkSpace();for(const a of e.values()){const e=0|a.dataset.libraryId,r=t.getLibrary(e);r&&(r.remove(),a.remove(),t.removeLibrary(e))}e.clear();k.$tools.getDefaultTool("arrow").clearActiveElement(),k.$transformController.hide(),k.$gridController.hide(),k.$tweenController.clearPointer(),k.$controller.default(),k.$javascriptController.reload(),k.$libraryController.reload(),k.$libraryPreview.dispose(),k.$timelineLayer.activeCharacter(),t.scene.changeFrame(k.$timelineFrame.currentFrame),this._$saved=!1}executeLibraryMenuEmptyFolderDelete(){const e=k.$currentWorkSpace(),t=[];for(let a of e._$libraries.values())a.type===A.FOLDER&&t.push(a);if(t.length){let a=!1;for(;;){const r=[];for(let i=0;i<t.length;++i){let s=!1;const n=t[i];for(let t of e._$libraries.values())if(t.folderId===n.id){s=!0;break}s||(a=!0,document.getElementById(`library-child-id-${n.id}`).remove(),e.removeLibrary(n.id),r.push(n))}if(!r.length)break;for(let e=0;e<r.length;++e){const a=t.indexOf(r[e]);t.splice(a,1)}}a&&k.$libraryController.reload()}}executeLibraryMenuNoUseDelete(){let e=!1;const t=k.$currentWorkSpace(),a=new Map;for(let e of t._$libraries.values())if(e.type===A.MOVIE_CLIP){for(let r of e._$layers.values()){const e=r._$characters;for(let r=0;r<e.length;++r){const i=e[r].libraryId;a.has(i)||a.set(i,0);const s=a.get(i)+1;a.set(i,s);const n=t.getLibrary(i);if("shape"===n.type&&n.bitmapId){a.has(n.bitmapId)||a.set(n.bitmapId,0);const e=a.get(i)+1;a.set(i,e)}}}if(e._$sounds.size)for(const t of e._$sounds.values())for(let e=0;e<t.length;++e){const r=t[e];a.set(r.characterId,!0)}}this.save();for(let r of t._$libraries.values())if(r.id&&!a.has(r.id)&&r.type!==A.FOLDER&&!r.symbol){if(e=!0,r.type===A.MOVIE_CLIP)for(let e of r._$layers.values()){const r=e._$characters;for(let e=0;e<r.length;++e){const i=r[e].libraryId;if(!a.has(i))continue;const s=t.getLibrary(i);if(!s||s.symbol)continue;const n=a.get(i)-1;a.set(i,n)}}t.removeLibrary(r.id)}for(;;){let e=!0;for(const[r,i]of a){if(i>0)continue;const s=t.getLibrary(r);if(!s.symbol&&(e=!1,s)){if(s.type===A.MOVIE_CLIP)for(let e of s._$layers.values()){const r=e._$characters;for(let e=0;e<r.length;++e){const i=r[e].libraryId;if(!a.has(i))continue;const s=t.getLibrary(i);if(!s||s.symbol)continue;const n=a.get(i)-1;a.set(i,n)}}t.removeLibrary(r),a.delete(r)}}if(e||!a.size)break}e&&(k.$libraryController.clearActive(),k.$javascriptController.reload(),k.$libraryController.reload()),this._$saved=!1}clearCopy(){this._$adjusted=!1,this._$copyWorkSpaceId=-1,this._$copyLibraries.length=0}executeLibraryMenuChangeScene(){const e=k.$libraryController._$activeInstances;if(1===e.size){const t=0|e.values().next().value.dataset.libraryId;k.$currentWorkSpace().getLibrary(t).type===A.MOVIE_CLIP&&k.$libraryController.changeScene(t)}}executeLibraryMenuCopy(){this.clearCopy(),this._$copyWorkSpaceId=k.$activeWorkSpaceId;const e=k.$currentWorkSpace(),t=k.$libraryController.activeInstances;for(const a of t.values()){const t=e.getLibrary(0|a.dataset.libraryId);t&&this._$copyLibraries.push(t.clone())}}executeLibraryMenuPaste(){if(!this._$copyLibraries.length)return;const e=k.$workSpaces[this._$copyWorkSpaceId],t=k.$currentWorkSpace();if(!this._$adjusted){this._$adjusted=!0;const t=new Map,a=[];for(let e=0;this._$copyLibraries.length>e;++e){const r=this._$copyLibraries[e];t.set(r.id,!0),r.folderId&&a.push(r)}for(let r=0;r<a.length;++r){let i=a[r];for(;i.folderId;){const s=e.getLibrary(i.folderId);if(t.has(s.id)){const e=this._$copyLibraries.indexOf(a[r]);e>-1&&this._$copyLibraries.splice(e,1);break}i=s}}}this.save();for(let a=0;this._$copyLibraries.length>a;++a){const r=this._$copyLibraries[a];let i=null;if(this._$copyWorkSpaceId===k.$activeWorkSpaceId)for(i=r.clone();;){const e=i.path;if(!t._$nameMap.has(e))break;i.name+="_copy"}else{const a=r.getPathWithWorkSpace(e);if(t._$nameMap.has(a)){k.$confirmModal.files.push({file:r,character:null,layer:null,path:a,workSpaceId:this._$copyWorkSpaceId,type:"copy"});continue}if(r.type===A.MOVIE_CLIP)i=k.$confirmModal.cloneMovieClip(this._$copyWorkSpaceId,r);else{const e=k.$activeWorkSpaceId;k.$activeWorkSpaceId=this._$copyWorkSpaceId,i=r.clone(),k.$activeWorkSpaceId=e}if(!i)continue;i.folderId&&k.$confirmModal.createFolder(this._$copyWorkSpaceId,i)}i._$id=t.nextLibraryId,k.$libraryController.createInstance(i.type,i.name,i.id,i.symbol),t._$libraries.set(i.id,i),i.type===A.FOLDER&&k.$confirmModal.cloneFolderItem(this._$copyWorkSpaceId,r.id,i)}k.$libraryController.reload(),k.$confirmModal.files.length?k.$confirmModal.show():k.$confirmModal.clear(),this._$saved=!1}show(e){const t=k.$libraryController.activeInstances;switch(t.size){case 0:default:document.getElementById("library-menu-export").setAttribute("style","opacity:0.5; pointer-events:none;"),document.getElementById("library-open-photopea").setAttribute("style","opacity:0.5; pointer-events:none;"),document.getElementById("library-menu-change-scene").setAttribute("style","opacity:0.5; pointer-events:none;");break;case 1:{document.getElementById("library-menu-export").setAttribute("style",""),document.getElementById("library-menu-change-scene").setAttribute("style","opacity:0.5; pointer-events:none;"),document.getElementById("library-open-photopea").setAttribute("style","opacity:0.5; pointer-events:none;");const e=t.values().next().value;switch(k.$currentWorkSpace().getLibrary(0|e.dataset.libraryId).type){case A.BITMAP:document.getElementById("library-open-photopea").setAttribute("style","");break;case A.MOVIE_CLIP:document.getElementById("library-menu-change-scene").setAttribute("style","");break;case A.FOLDER:document.getElementById("library-menu-export").setAttribute("style","opacity:0.5; pointer-events:none;")}}}const a=document.getElementById("library-menu");a.style.left=a.clientWidth+e.pageX+5>window.innerWidth?e.pageX-(a.clientWidth+e.pageX+10-window.innerWidth)+"px":`${e.pageX+5}px`,a.style.top=e.pageY-a.clientHeight/2+"px",a.setAttribute("class","fadeIn"),k.$endMenu("library-menu")}hide(){k.$endMenu()}save(){this._$saved||(this._$saved=!0,k.$currentWorkSpace().temporarilySaved())}};k.$libraryPreview=new class{constructor(){this._$currentId=-1,this._$handler=null,k.$readEnd++,"complete"!==document.readyState?(this._$handler=this.initialize.bind(this),window.addEventListener("DOMContentLoaded",this._$handler)):this.initialize()}initialize(){this._$handler&&(window.removeEventListener("DOMContentLoaded",this._$handler),this._$handler=null);const e=document.getElementById("library-preview-area");e&&(e.addEventListener("mousedown",(e=>{this.mousedown(e)})),e.addEventListener("dragstart",(()=>{k.$libraryController.dragstart()})),e.addEventListener("dragend",(()=>{k.$libraryController.dragend()}))),k.$initializeEnd()}mouseout(e){-1!==this._$currentId&&(e.stopPropagation(),document.getElementById("library-preview-area").draggable=!1)}mousedown(e){if(-1===this._$currentId)return;e.stopPropagation();const t=document.getElementById(`library-child-id-${this._$currentId}`);if(t){const e=document.getElementById("library-preview-area"),a=Array.from(document.getElementById("library-preview-area").children);k.$libraryController.activeInstance=t;for(let t=0;t<a.length;++t)e.appendChild(a[t]);e.draggable=!0}}dispose(){this._$currentId=-1;const e=document.getElementById("library-preview-area");if(e){for(;e.firstChild;)k.$poolCanvas(e.firstChild),e.firstChild.remove();e.draggable=!1}}loadImage(e){const t=k.$currentWorkSpace().getLibrary(e);t.type!==A.FOLDER?(this._$currentId=e,t.getPreview().then((e=>{this.dispose(),e&&document.getElementById("library-preview-area").appendChild(e),t.type===A.SOUND?k.$soundWaveform.draw(t._$buffer.slice()).then((e=>{document.getElementById("library-preview-area").prepend(e)})):k.$soundWaveform.stop()}))):this.dispose()}};k.$librarySearch=new class{constructor(){this._$handler=null,k.$readEnd++,"complete"!==document.readyState?(this._$handler=this.initialize.bind(this),window.addEventListener("DOMContentLoaded",this._$handler)):this.initialize()}initialize(){this._$handler&&(window.removeEventListener("DOMContentLoaded",this._$handler),this._$handler=null);const e=document.getElementById("library-search");e&&(e.addEventListener("focusin",(()=>{k.$keyLock=!0})),e.addEventListener("focusout",(()=>{k.$keyLock=!1})),e.addEventListener("input",(e=>{this.execute(e)}))),k.$initializeEnd()}execute(e){const t=e.target.value,a=document.getElementById("library-list-box").children,r=a.length;for(let e=0;e<r;++e){const r=a[e];!t||r.children[0].innerText.indexOf(t)>-1||r.children[1].innerText.indexOf(t)>-1?r.style.display="":r.style.display="none"}}};class Ce extends we{constructor(){super("loop"),this._$frameTarget="start"}initialize(){super.initialize();const e=["no-use-loop","loop-repeat","loop-no-repeat","fixed-one","loop-no-repeat-reversal","loop-repeat-reversal","frame-picker-button","target-start-button","target-end-button"];for(let t=0;t<e.length;++t){const a=document.getElementById(e[t]);a&&a.addEventListener("mousedown",(e=>{e.stopPropagation(),this.executeFunction(e.target.id,e)}))}const t=["loop-start-frame","loop-end-frame"];for(let e=0;e<t.length;++e){const a=document.getElementById(t[e]);a&&this.setInputEvent(a)}}static get DEFAULT(){return 5}static get REPEAT(){return 0}static get NO_REPEAT(){return 1}static get FIXED_ONE(){return 2}static get NO_REPEAT_REVERSAL(){return 3}static get REPEAT_REVERSAL(){return 4}changeLoopStartFrame(e){const t=k.$tools.getDefaultTool("arrow").activeElements;if(!t.length||t.length>1)return e;const a=t[0],r=k.$currentWorkSpace().scene.getLayer(0|a.dataset.layerId).getCharacter(0|a.dataset.characterId);if(!r)return e;const i=k.$currentWorkSpace().getLibrary(r.libraryId);if(!i)return e;e=k.$clamp(0|e,1,i.totalFrame);const s=k.$timelineFrame.currentFrame,n=r.getRange(s);let o=r.getPlace(n.startFrame);return o.loop?(o.loop.start=e,r.dispose(),this.reloadScreen(),e):e}changeLoopEndFrame(e){const t=k.$tools.getDefaultTool("arrow").activeElements;if(!t.length||t.length>1)return e;const a=t[0],r=k.$currentWorkSpace().scene.getLayer(0|a.dataset.layerId).getCharacter(0|a.dataset.characterId);if(!r)return e;const i=k.$currentWorkSpace().getLibrary(r.libraryId);if(!i)return e;e=k.$clamp(0|e,0,i.totalFrame);const s=k.$timelineFrame.currentFrame,n=r.getRange(s);let o=r.getPlace(n.startFrame);return o.loop?(o.loop.end=e,r.dispose(),this.reloadScreen(),e||"-"):e}changeFramePickerButton(){document.getElementById("loop-image-list").style.display="none",this.loadLoopFrameList()}changeTargetStartButton(){const e=document.getElementById("target-start-button");e.classList.contains("active")||e.classList.add("active"),document.getElementById("target-end-button").classList.remove("active"),this._$frameTarget="start"}changeTargetEndButton(){const e=document.getElementById("target-end-button");e.classList.contains("active")||e.classList.add("active"),document.getElementById("target-start-button").classList.remove("active"),this._$frameTarget="end"}changeLoopRepeat(){const e=document.getElementById("loop-repeat");this.clearLoopButton(e),e.classList.add("active"),this.updateLoopType(0)}changeLoopNoRepeat(){const e=document.getElementById("loop-no-repeat");this.clearLoopButton(e),e.classList.add("active"),this.updateLoopType(1)}changeFixedOne(){const e=document.getElementById("fixed-one");this.clearLoopButton(e),e.classList.add("active"),this.updateLoopType(2)}changeLoopNoRepeatReversal(){const e=document.getElementById("loop-no-repeat-reversal");this.clearLoopButton(e),e.classList.add("active"),this.updateLoopType(3)}changeLoopRepeatReversal(){const e=document.getElementById("loop-repeat-reversal");this.clearLoopButton(e),e.classList.add("active"),this.updateLoopType(4)}changeNoUseLoop(){const e=document.getElementById("no-use-loop");this.clearLoopButton(e),e.classList.add("active"),this.updateLoopType(5)}clearLoopButton(e){const t=e.parentNode.children;for(let e=0;e<t.length;++e)t[e].classList.remove("active")}reload(e){const t=document.getElementById("loop-setting-view-area").firstElementChild.children;for(let e=0;e<t.length;++e)t[e].classList.remove("active");const a=document.getElementById("loop-image-list"),r=a.getElementsByTagName("canvas");for(let e=0;e<r.length;++e)k.$poolCanvas(r[e]);for(;a.children.length;)a.children[0].remove();document.getElementById(["loop-repeat","loop-no-repeat","fixed-one","loop-no-repeat-reversal","loop-repeat-reversal","no-use-loop"][e.type]).classList.add("active"),document.getElementById("loop-start-frame").value=`${e.start}`,document.getElementById("loop-end-frame").value=`${e.end?e.end:"-"}`}loadLoopFrameList(){const e=k.$tools.getDefaultTool("arrow").activeElements;if(!e.length||e.length>1)return;const t=document.getElementById("loop-image-list"),a=t.getElementsByTagName("canvas");for(let e=0;e<a.length;++e)k.$poolCanvas(a[e]);for(;t.children.length;)t.children[0].remove();const r=k.$currentWorkSpace(),i=r.scene,s=e[0],n=0|s.dataset.layerId,o=i.getLayer(n),l=0|s.dataset.characterId,c=o.getCharacter(l),d=r.getLibrary(c.libraryId),h=[],u=d.totalFrame;for(let e=1;u>=e;++e)h.push(new Promise((t=>{window.requestAnimationFrame((()=>{const{Sprite:a,BitmapData:r}=window.next2d.display,{Matrix:i,ColorTransform:s}=window.next2d.geom,n=new a,o=n.addChild(d.createInstance(e));o.transform.matrix=new i,o.transform.colorTransform=new s;const l=d.getBounds([1,0,0,1,0,0]),c=Math.ceil(Math.abs(l.xMax-l.xMin)),h=Math.ceil(Math.abs(l.yMax-l.yMin)),u=Math.min(95/c,95/h),m=window.devicePixelRatio,g=new r(c*u*m,h*u*m,!0,0),p=new i(m,0,0,m,-l.xMin*m,-l.yMin*m);p.scale(u,u),g.draw(n,p,null,k.$getCanvas(),(a=>{for(a.style.width=g.width/m+"px",a.style.height=g.height/m+"px";k.$sleepCanvases.length;)k.$poolCanvas(k.$sleepCanvases.pop());return t({index:e-1,image:a})}))}))})));Promise.all(h).then((e=>{const a=[];for(let t=0;t<e.length;++t){const r=e[t];a[r.index]=r.image}for(let e=0;e<a.length;++e){const r=e+1,i=document.createElement("span");i.textContent=`[ ${r} ]`;const s=document.createElement("p");s.appendChild(a[e]);const n=document.createElement("div");n.dataset.frame=`${r}`,n.appendChild(s),n.appendChild(i),n.addEventListener("click",(e=>{this.clickImage(e)})),t.appendChild(n)}t.style.display=""}))}clickImage(e){e.stopPropagation();const t=document.getElementById(`loop-${this._$frameTarget}-frame`);this.save(),t.focus(),t.value=e.currentTarget.dataset.frame,t.blur(),this._$saved=!1}updateLoopType(e=0){const t=k.$tools.getDefaultTool("arrow").activeElements;if(!t.length||t.length>1)return;const a=t[0],r=k.$currentWorkSpace().scene.getLayer(0|a.dataset.layerId).getCharacter(0|a.dataset.characterId);if(!r)return;const i=k.$timelineFrame.currentFrame,s=r.getRange(i);let n=r.getPlace(s.startFrame);n.loop.type!==e&&(n.loop.type=e,r.dispose(),this.reloadScreen())}}k.$loopController=new Ce;k.$objectController=new class extends we{constructor(){super("object")}initialize(){super.initialize();const e=document.getElementById("object-name");e&&(e.addEventListener("focusout",(e=>{this.finishInput(e,!1)})),e.addEventListener("keypress",(e=>{this.finishInput(e,!1)})),e.addEventListener("focusin",(e=>{this.focusIn(e)})));const t=document.getElementById("object-symbol");t&&(t.addEventListener("focusout",(e=>{this.finishInput(e,!1)})),t.addEventListener("keypress",(e=>{this.finishInput(e,!1)})),t.addEventListener("focusin",(e=>{this.focusIn(e)})))}changeObjectSymbol(e){const t=k.$tools.getDefaultTool("arrow");switch(t.activeElements.length){case 0:k.$currentWorkSpace().scene.symbol=e;break;case 1:{const a=t.activeElements[0];k.$currentWorkSpace().getLibrary(0|a.dataset.libraryId).symbol=e}}return e}changeObjectName(e){const t=k.$tools.getDefaultTool("arrow");switch(t.activeElements.length){case 0:k.$currentWorkSpace().scene.name=e;break;case 1:{const a=t.activeElements[0];k.$currentWorkSpace().scene.getLayer(0|a.dataset.layerId).getCharacter(0|a.dataset.characterId).name=e}}return e}};k.$pluginController=new class{constructor(){this._$saved=!1,this._$selectElement=null,this._$deleteCommand=null,this._$handler=null,k.$readEnd++,"complete"!==document.readyState?(this._$handler=this.initialize.bind(this),window.addEventListener("DOMContentLoaded",this._$handler)):this.initialize()}initialize(){this._$handler&&(window.removeEventListener("DOMContentLoaded",this._$handler),this._$handler=null),this._$deleteCommand=this.deleteCommand.bind(this);const e=document.getElementById("plugin-list-box");e&&(e.addEventListener("mouseleave",(()=>{this.mouseleave()})),e.addEventListener("dragover",(e=>{e.preventDefault()})),e.addEventListener("drop",(e=>{this.dropElement(e)}))),k.$initializeEnd()}dropElement(e){this.save(),e.preventDefault();const t=k.$currentWorkSpace(),a=[],r=e.dataTransfer.files;for(let e=0;e<r.length;++e){const i=r[e];a.push(i.text().then((e=>{t._$plugins.set(i.name,{name:i.name,src:e})})))}Promise.all(a).then((()=>{this.reload(Array.from(k.$currentWorkSpace()._$plugins.values())),this._$saved=!1}))}mouseleave(){this._$selectElement&&this._$selectElement.classList.remove("active"),window.removeEventListener("keydown",this._$deleteCommand),this._$selectElement=null}reload(e){const t=["plugin-list-box","plugin-tools","plugin-menu"];for(let e=0;e<t.length;++e){const a=document.getElementById(t[e]);if(a)for(;a.children.length;)a.children[0].remove()}const a=document.getElementsByTagName("script");for(let e=0;e<a.length;++e){const t=a[e];t.dataset.plugin&&t.remove()}for(let t=0;t<e.length;++t){const a=e[t];document.getElementById(a.name)||(this.appendScript(a.name,a.src),this.appendNode(a.name))}}appendScript(e,t){const a=document.createElement("script");a.dataset.plugin="true",a.async=!0,a.id=e,a.type="text/javascript",a.src=URL.createObjectURL(new Blob([t],{type:"text/javascript"})),document.getElementsByTagName("head")[0].appendChild(a)}appendNode(e){const t=document.createElement("div");t.dataset.id=`${e}_node`,t.dataset.name=`${e}`,t.classList.add("plugin-list"),t.innerHTML=`<i></i>${e}`,t.addEventListener("mousedown",(e=>{this._$selectElement||window.addEventListener("keydown",this._$deleteCommand),this._$selectElement&&this._$selectElement.classList.remove("active"),this._$selectElement=e.currentTarget,this._$selectElement.classList.add("active")})),document.getElementById("plugin-list-box").appendChild(t)}deleteCommand(e){k.$keyLock||"Backspace"===e.key&&(this.save(),window.removeEventListener("keydown",this._$deleteCommand),this.dispose(this._$selectElement),this._$selectElement=null,this._$saved=!1)}dispose(e){const t=e.dataset.name,a=document.getElementById(t);a&&a.remove(),k.$currentWorkSpace()._$plugins.delete(t),e.remove()}save(){this._$saved||(this._$saved=!0,k.$currentWorkSpace().temporarilySaved())}};class Fe{constructor(){this._$screenX=0,this._$screenY=0,this._$moveModal=null,this._$endModal=null,this._$handler=null,k.$readEnd++,"complete"!==document.readyState?(this._$handler=this.initialize.bind(this),window.addEventListener("DOMContentLoaded",this._$handler)):this.initialize()}initialize(){this._$handler&&(window.removeEventListener("DOMContentLoaded",this._$handler),this._$handler=null);const e=["plugin-bar","plugin-hide-icon"];for(let t=0;t<e.length;++t){const a=document.getElementById(e[t]);a&&a.addEventListener("mousedown",(e=>{e.stopPropagation();this[`execute${e.target.id.split("-").map((e=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`)).join("")}`](e)}))}document.documentElement.style.setProperty("--plugin-panel-width",`${Fe.PLUGIN_DEFAULT_WIDTH}px`),document.documentElement.style.setProperty("--plugin-panel-height",`${Fe.PLUGIN_DEFAULT_HEIGHT}px`),k.$initializeEnd()}static get PLUGIN_DEFAULT_WIDTH(){return 200}static get PLUGIN_DEFAULT_HEIGHT(){return 200}executePluginBar(e){this._$screenX=e.screenX,this._$screenY=e.screenY,this._$moveModal||(this._$moveModal=this.moveModal.bind(this)),this._$endModal||(this._$endModal=this.endModal.bind(this)),window.addEventListener("mousemove",this._$moveModal),window.addEventListener("mouseup",this._$endModal)}moveModal(e){const t=document.getElementById("plugin-modal");t.style.left=`${t.offsetLeft+(e.screenX-this._$screenX)}px`,t.style.top=`${t.offsetTop+(e.screenY-this._$screenY)}px`,this._$screenX=e.screenX,this._$screenY=e.screenY}endModal(){k.$setCursor("auto"),window.removeEventListener("mousemove",this._$moveModal),window.removeEventListener("mouseup",this._$endModal)}executePluginHideIcon(){window.nt.hidePanel()}}k.$pluginPanel=new Fe;k.$referenceController=new class extends we{constructor(){super("reference"),this._$pointer=null}initialize(){super.initialize(),this._$pointer={x:0,y:0};const e=["transform-reference-x","transform-reference-y"];for(let t=0;t<e.length;++t)this.setInputEvent(document.getElementById(e[t]));const t=document.getElementById("reference-point");t&&t.addEventListener("dblclick",(e=>{e.stopPropagation(),this.resetPointer()}));const a=document.getElementById("reference-setting-box");if(a){const e=a.getElementsByClassName("reference-setting-box-child");for(let t=0;t<e.length;++t){e[t].addEventListener("mousedown",(e=>{e.stopPropagation(),this.moveNineReferencePoint(e)}))}}}get pointer(){return this._$pointer}set pointer(e){this._$pointer=e}moveNineReferencePoint(e){const t=k.$tools.getDefaultTool("arrow").activeElements;if(!t.length)return;const a=k.$currentWorkSpace().scene,r=k.$sceneChange.concatenatedMatrix;let i=Number.MAX_VALUE,s=-Number.MAX_VALUE,n=Number.MAX_VALUE,o=-Number.MAX_VALUE;for(let e=0;t.length>e;++e){const l=t[e],c=a.getLayer(0|l.dataset.layerId);if(!c||c.lock||c.disable)continue;const d=0|l.dataset.characterId;if(!document.getElementById(`character-${d}`))continue;const h=c.getCharacter(d).getBounds(r);i=Math.min(i,h.xMin),s=Math.max(s,h.xMin+Math.ceil(Math.abs(h.xMax-h.xMin))),n=Math.min(n,h.yMin),o=Math.max(o,h.yMin+Math.ceil(Math.abs(h.yMax-h.yMin)))}const l=i,c=n,d=s-i,h=o-n;let u=l+d/2,m=c+h/2;switch(e.target.dataset.position){case"top-left":u=l,m=c;break;case"top-center":u=l+d/2,m=c;break;case"top-right":u=l+d,m=c;break;case"center-left":u=l,m=c+h/2;break;case"center-right":u=l+d,m=c+h/2;break;case"bottom-left":u=l,m=c+h;break;case"bottom-center":u=l+d/2,m=c+h;break;case"bottom-right":u=l+d,m=c+h}if(this.save(),t.length>1)this._$pointer.x=u,this._$pointer.y=m;else{const e=t[0],a=k.$currentWorkSpace().scene.getLayer(0|e.dataset.layerId).getCharacter(0|e.dataset.characterId);if(!a)return;const r=k.$timelineFrame.currentFrame,i=a.getRange(r),s=a.getPlace(i.startFrame);s.point||(s.point={x:0,y:0}),s.point.x=u,s.point.y=m}this.setInputValue(u,m),k.$transformController.relocation(),this._$saved=!1}changeTransformReferenceX(e){e=k.$clamp(+e,-Number.MAX_VALUE,Number.MAX_VALUE);const t=k.$tools.getDefaultTool("arrow").activeElements;if(!t.length)return e;if(1===t.length){const a=t[0],r=k.$currentWorkSpace().scene.getLayer(0|a.dataset.layerId).getCharacter(0|a.dataset.characterId);if(!r)return e;const i=k.$timelineFrame.currentFrame;r.getPlace(i).point.x=e}else this._$pointer.x=e;return e}changeTransformReferenceY(e){e=k.$clamp(+e,-Number.MAX_VALUE,Number.MAX_VALUE);const t=k.$tools.getDefaultTool("arrow").activeElements;if(!t.length)return e;if(1===t.length){const a=t[0],r=k.$currentWorkSpace().scene.getLayer(0|a.dataset.layerId).getCharacter(0|a.dataset.characterId);if(!r)return e;const i=k.$timelineFrame.currentFrame;r.getPlace(i).point.y=e}else this._$pointer.y=e;return e}resetPointer(){k.$tools.getDefaultTool("arrow").activeElements.length&&(this._$pointer={x:0,y:0},this.moveNineReferencePoint({target:{dataset:{position:"center-top"}}}))}setInputValue(e=0,t=0){document.getElementById("transform-reference-x").value=`${e}`,document.getElementById("transform-reference-y").value=`${t}`}};k.$rulerController=new class extends we{constructor(){super("ruler")}initialize(){super.initialize();const e=document.getElementById("ruler-position");e&&this.setInputEvent(e)}changeRulerPosition(e){e|=0;const t=k.$screenRuler._$target;if(t){"x"===k.$screenRuler._$mode?t.style.left=`${Math.ceil(k.$offsetLeft+e*k.$zoomScale)}px`:t.style.top=`${Math.ceil(k.$offsetTop+e*k.$zoomScale)}px`}return e}setInputValue(e){const t=document.getElementById("ruler-position");t&&(t.value=`${Math.ceil(e/k.$zoomScale)}`)}};class Ae extends we{constructor(){super("fill-color"),this._$currentPointer=null,this._$viewGradientContext=null,this._$drawGradientContext=null,this._$mouseMoveGradientColorPointer=null,this._$mouseUpGradientColorPointer=null}static get GRADIENT_CANVAS_WIDTH(){return 255}static get GRADIENT_CANVAS_HEIGHT(){return 30}static get MIN_COLOR(){return 0}static get MAX_COLOR(){return 100}static get MIN_ALPHA(){return 0}static get MAX_ALPHA(){return 100}static get MIN_STROKE(){return 1}static get MAX_STROKE(){return 255}static get MIN_GRADIENT_POINTER(){return 0}static get MAX_GRADIENT_POINTER(){return 255}initialize(){super.initialize();const e=document.getElementById("gradient-canvas");if(e){e.style.transform=`scale(${1/window.devicePixelRatio}, ${1/window.devicePixelRatio})`,e.style.backfaceVisibility="hidden",e.style.transformOrigin="0 0";const t=Ae.GRADIENT_CANVAS_WIDTH*window.devicePixelRatio,a=Ae.GRADIENT_CANVAS_HEIGHT*window.devicePixelRatio;e.width=t,e.height=a,this._$viewGradientContext=e.getContext("2d");const r=document.createElement("canvas");r.width=t,r.height=a,this._$drawGradientContext=r.getContext("2d")}const t=["fill-alpha-value","fill-stroke-width-value"];for(let e=0;e<t.length;++e)this.setInputEvent(document.getElementById(t[e]));const a=["fill-color-type-select","fill-color-value","fill-bitmap-select"];for(let e=0;e<a.length;++e)this.setChangeEvent(document.getElementById(a[e]));const r=document.getElementById("color-pointer-list");r&&r.addEventListener("mousedown",(e=>{this.setGradientColorPointerEvent(e)}))}removeGradientColorPointer(e){const t=document.getElementById("color-pointer-list");if(t.children.length>2&&k.$hitColor){const a=0|e.target.dataset.index;k.$hitColor.ratios.splice(a,1),e.target.remove();for(let e=a;e<t.children.length;++e){const a=t.children[e],r=(0|a.dataset.index)-1;a.dataset.index=`${r}`}this.updateGradientCanvas(),k.$hitColor.shape.cacheClear(),this.reloadScreen()}}setGradientColorPointerEvent(e){if(!this._$currentPointer||!k.$hitColor)return;const t=document.getElementById("fill-color-value").value,a=0|document.getElementById("fill-alpha-value").value,r=k.$intToRGB(0|`0x${t.slice(1)}`),i={R:r.R,G:r.G,B:r.B,A:a/100*255,ratio:e.offsetX/255};k.$hitColor.ratios.push(i),k.$hitColor.ratios.sort(((e,t)=>{switch(!0){case e.ratio>t.ratio:return 1;case e.ratio<t.ratio:return-1;default:return 0}})),this.initializeGradient(),k.$hitColor.shape.cacheClear(),this.reloadScreen(),this._$currentPointer=e.target.children[k.$hitColor.ratios.indexOf(i)]}changeFillAlphaValue(e){if(e=k.$clamp(0|e,Ae.MIN_ALPHA,Ae.MAX_ALPHA),k.$hitColor){const{GradientType:t}=window.next2d.display;switch(k.$hitColor.type){case t.LINEAR:case t.RADIAL:this._$currentPointer&&(this._$currentPointer.dataset.alpha=e,k.$hitColor.shape.changeColor(0|this._$currentPointer.dataset.index),this.updateGradientCanvas());break;default:k.$hitColor.shape.changeColor()}}return e}changeFillStrokeWidthValue(e){if(e=k.$clamp(0|e,Ae.MIN_STROKE,Ae.MAX_STROKE),this._$currentValue!==e&&k.$hitColor){k.$hitColor.shape.changeColor();const{GradientType:e}=window.next2d.display;switch(k.$hitColor.type){case e.LINEAR:case e.RADIAL:this.updateGradientCanvas()}}return e}changeFillColorTypeSelect(e=""){const t=document.getElementById("fill-color-gradient-container"),a=document.getElementById("fill-color-bitmap-container"),r=document.getElementById("fill-color-rgba-container"),i=document.getElementById("fill-stroke-color-rgba-container");switch(e&&(k.$hitColor.shape.bitmapId=0),document.getElementById("fill-color-type-select").value){case"rgba":t.style.display="none",a.style.display="none",r.style.display="",i.style.display=k.$hitColor.width?"":"none";break;case"bitmap":t.style.display="none",a.style.display="",r.style.display="none",i.style.display=k.$hitColor.width?"":"none",this.createBitmapList();break;default:t.style.display="",a.style.display="none",r.style.display="",i.style.display=k.$hitColor.width?"":"none",e||this.initializeGradient()}e&&k.$hitColor.shape.changeStyle(e)}changeFillColorValue(e){if(k.$hitColor)if(this._$currentPointer){const t=this._$currentPointer.getElementsByTagName("i")[0];this._$currentPointer.dataset.color=e,t.style.backgroundColor=e,k.$hitColor.shape.changeColor(0|this._$currentPointer.dataset.index),this.updateGradientCanvas()}else k.$hitColor.shape.changeColor()}changeFillBitmapSelect(e){if(!k.$hitColor)return;const t=k.$currentWorkSpace().getLibrary(0|e);k.$hitColor.shape.bitmapId=t.id,k.$hitColor.shape.cacheClear()}createBitmapList(){const e=document.getElementById("fill-bitmap-select"),t=e.children;for(;t.length;)t[0].remove();const a=document.createElement("option");a.innerHTML="Image Selection",a.defaultSelected=!0,a.disabled=!0,e.appendChild(a);const r=k.$hitColor.shape.bitmapId,i=k.$currentWorkSpace();for(const t of i._$libraries.values()){if(t.type!==A.BITMAP)continue;const a=document.createElement("option");a.value=t.id,a.innerHTML=t.name,r&&r===t.id&&(a.selected=!0),e.appendChild(a)}}initializeGradient(){if(!k.$hitColor)return;const e=document.getElementById("color-pointer-list").children;for(;e.length;)e[0].remove();const t=k.$hitColor.ratios.length;for(let e=0;e<t;++e){const a=k.$hitColor.ratios[e],r=a.R.toString(16).padStart(2,"0"),i=a.G.toString(16).padStart(2,"0"),s=a.B.toString(16).padStart(2,"0");this.addGradientColorPointer(e,255*a.ratio,`#${r}${i}${s}`,a.A/255*100),e+1===t&&(document.getElementById("fill-color-value").value=`#${r}${i}${s}`,document.getElementById("fill-alpha-value").value=a.A/255*100)}this.updateGradientCanvas()}addGradientColorPointer(e,t,a,r){const i=document.getElementById("color-pointer-list"),s=`\n<div class="color-pointer" style="left: ${t-4}px;" data-index="${e}" data-color="${a}" data-alpha="${r}">\n    <div class="color-pointer-triangle"></div>\n    <div class="color-pointer-rect">\n        <i class="pointer-color" style="background-color: ${a}"></i>\n    </div>\n</div>\n`;i.insertAdjacentHTML("beforeend",s);const n=i.lastElementChild;n.addEventListener("mousedown",(e=>{this.mouseDownGradientColorPointer(e)})),n.addEventListener("dblclick",(e=>{this.removeGradientColorPointer(e)})),this._$currentPointer=n}updateGradientCanvas(){const e=this._$drawGradientContext;e.clearRect(0,0,Ae.GRADIENT_CANVAS_WIDTH*window.devicePixelRatio,Ae.GRADIENT_CANVAS_HEIGHT*window.devicePixelRatio),e.beginPath();const t=k.$hitColor.ratios,a=t.length,r=Math.ceil(255*t[a-1].ratio*window.devicePixelRatio),i=e.createLinearGradient(0,0,r,0);for(let e=0;e<a;++e){const a=t[e];i.addColorStop(a.ratio,`rgba(${a.R}, ${a.G}, ${a.B}, ${a.A/255})`)}e.fillStyle=i,e.rect(0,0,Ae.GRADIENT_CANVAS_WIDTH*window.devicePixelRatio,Ae.GRADIENT_CANVAS_HEIGHT*window.devicePixelRatio),e.fill();const s=this._$viewGradientContext;s.clearRect(0,0,Ae.GRADIENT_CANVAS_WIDTH*window.devicePixelRatio,Ae.GRADIENT_CANVAS_HEIGHT*window.devicePixelRatio),s.drawImage(e.canvas,0,0)}mouseDownGradientColorPointer(e){e.stopPropagation(),this._$saved=!1,this._$pointX=e.screenX,this._$currentPointer=e.target,document.getElementById("fill-color-value").value=e.target.dataset.color,document.getElementById("fill-alpha-value").value=e.target.dataset.alpha,this._$mouseMoveGradientColorPointer||(this._$mouseMoveGradientColorPointer=this.mouseMoveGradientColorPointer.bind(this)),this._$mouseUpGradientColorPointer||(this._$mouseUpGradientColorPointer=this.mouseUpGradientColorPointer.bind(this)),window.addEventListener("mousemove",this._$mouseMoveGradientColorPointer),window.addEventListener("mouseup",this._$mouseUpGradientColorPointer)}mouseMoveGradientColorPointer(e){const t=this._$currentPointer;t&&window.requestAnimationFrame((()=>{if(!k.$hitColor)return;this.save(),e.preventDefault();const a=parseFloat(t.style.left),r=k.$clamp(a+(e.screenX-this._$pointX)+4,Ae.MIN_GRADIENT_POINTER,Ae.MAX_GRADIENT_POINTER);t.style.left=r-4+"px",k.$hitColor.ratios[t.dataset.index].ratio=r/255,this._$pointX&&(this._$pointX=e.screenX),this.updateGradientCanvas(),k.$hitColor.shape.cacheClear(),this.reloadScreen()}))}mouseUpGradientColorPointer(){window.removeEventListener("mousemove",this._$mouseMoveGradientColorPointer),window.removeEventListener("mouseup",this._$mouseUpGradientColorPointer),k.$setCursor("auto"),super.focusOut()}}k.$shapeController=new Ae;class Te extends we{constructor(){super("sound")}static get MIN_VOLUME(){return 0}static get MAX_VOLUME(){return 100}static get MIN_LOOP_COUNT(){return 0}static get MAX_LOOP_COUNT(){return 65535}initialize(){super.initialize();const e=document.getElementById("sound-add");e&&e.addEventListener("mousedown",(()=>{const e=document.getElementById("sound-select");e&&e.options.length&&(this.save(),this.addSound(),this._$saved=!1)}))}addSound(e=null,t=0){const a=k.$currentWorkSpace();if(!e){const r=document.getElementById("sound-select"),i=k.$timelineFrame.currentFrame,s=a.scene;s._$sounds.has(i)||s._$sounds.set(i,[]);const n=s._$sounds.get(i);t=n.length,e={characterId:0|r.value,volume:100,loopCount:0,autoPlay:!1},n.push(e),this.setIcon(i)}const r=a.getLibrary(e.characterId),i=`\n<div id="sound-id-${t}" class="sound-border">\n    <div class="sound-title">\n      <span id="sound-name-${t}" data-sound-id="${t}">${r.name}</span>\n      <i class="trash" id="sound-trash-${t}" data-sound-id="${t}" data-detail="{{サウンドを削除}}"></i>\n    </div>\n\n    <div class="sound-container">\n        <div class="sound-setting-container">\n            <div class="sound-text">Volume</div>\n            <div><input type="text" id="sound-volume-${t}" data-sound-id="${t}" data-name="volume" value="100" data-detail="{{音量設定}}" autocomplete="off" tabindex="-1"></div>\n        \n            <div class="sound-text">Loop<br>Count</div>\n            <div><input type="text" id="sound-loop-count-${t}" data-sound-id="${t}" data-name="loop-count" value="0" data-detail="{{ループ回数}}" autocomplete="off" tabindex="-1"></div>\n        </div>\n    </div>\n</div>\n`;r&&r.getScenePreview().then((a=>{const i=document.getElementById(`sound-id-${t}`);if(!i)return;const s=i.getElementsByClassName("sound-container")[0],n=document.createElement("div");n.setAttribute("class","sound-setting-preview-container"),a.volume=e.volume/100,a.setAttribute("data-sound-id",t),a.addEventListener("volumechange",(e=>{this.volumeChange(e)})),a.setAttribute("id",`sound-preview-${t}`),n.appendChild(a),s.appendChild(n),k.$audioContext||(k.$audioContext=new window.AudioContext),k.$soundWaveform.draw(r._$buffer.slice()).then((e=>{const t=document.createElement("div");t.setAttribute("class","sound-setting-preview-container"),t.appendChild(e),s.appendChild(t)}))})),document.getElementById("sound-list-area").insertAdjacentHTML("beforeend",i);const s=document.getElementById(`sound-volume-${t}`);s.value=`${e.volume}`,this.setInputEvent(s);const n=document.getElementById(`sound-loop-count-${t}`);n.value=`${e.loopCount}`,this.setInputEvent(n),document.getElementById(`sound-trash-${t}`).addEventListener("click",(e=>{this.save(),this.trash(0|e.target.dataset.soundId),this.createSoundElements(),this._$saved=!1})),k.$addModalEvent(document.getElementById(`sound-id-${t}`))}volumeChange(e){const t=e.target,a=0|t.dataset.soundId,r=100*t.volume|0;document.getElementById(`sound-volume-${a}`).value=`${r}`;const i=k.$timelineFrame.currentFrame,s=k.$currentWorkSpace().scene;if(s._$sounds.has(i)){s._$sounds.get(i)[a].volume=r}}changeSoundVolume(e){return e=k.$clamp(0|e,Te.MIN_VOLUME,Te.MAX_VOLUME),this.updateSoundProperty("volume",e),e}changeSoundLoopCount(e){return e=k.$clamp(0|e,Te.MIN_LOOP_COUNT,Te.MAX_LOOP_COUNT),this.updateSoundProperty("loopCount",e),e}updateSoundProperty(e,t){if(!this._$currentTarget)return;t|=0;const a=k.$timelineFrame.currentFrame,r=k.$currentWorkSpace().scene;if(!r._$sounds.has(a))return;const i=0|this._$currentTarget.dataset.soundId;r._$sounds.get(a)[i][e]=t,"volume"===e&&(document.getElementById(`sound-preview-${i}`).volume=t/100)}setIcon(e){const t=k.$timelineHeader.leftFrame;if(t>e)return;const a=e-t,r=document.getElementById("timeline-header").children[a].children[Xe.SOUND_INDEX];r.classList.contains("frame-border-box-sound")||r.setAttribute("class","frame-border-box-sound")}deleteIcon(e){const t=document.getElementById("timeline-header");if(!t)return;const a=t.getElementsByClassName("frame-border-box-sound");for(let t=0;t<a.length;++t){const r=a[t];if((0|r.dataset.frame)===e){r.setAttribute("class","frame-border-box");break}}}trash(e){const t=k.$timelineFrame.currentFrame,a=k.$currentWorkSpace().scene,r=a._$sounds.get(t);r.splice(e,1),r.length||(a._$sounds.delete(t),this.deleteIcon(t))}clear(){const e=document.getElementById("sound-list-area");if(e)for(;e.children.length;)e.children[0].remove()}createSoundElements(){if(this.clear(),!k.$timelinePlayer.stopFlag)return;const e=k.$timelineFrame.currentFrame,t=k.$currentWorkSpace().scene;if(t.hasSound(e)){const a=t.getSound(e);for(let e=0;e<a.length;++e)this.addSound(a[e],e)}}}k.$soundController=new Te;k.$soundWaveform=new class{constructor(){this._$width=280,this._$height=60,this._$stopFlag=!1}stop(){this._$stopFlag=!0}draw(e){return this._$stopFlag=!1,k.$audioContext?this.load(e,this._$width).then((e=>{if(this._$stopFlag)return Promise.resolve(k.$getCanvas());const t=e[0],a=e[1],r=k.$getCanvas();r.width=this._$width*window.devicePixelRatio,r.height=this._$height*window.devicePixelRatio;const i=r.getContext("2d"),s=r.width/t.length,n=r.height/2;i.fillStyle="#1355a5";for(let e=0;e<t.length;++e){const r=t[e]*n;i.fillRect(e*s,n-r,s,r);const o=a[e]*n;i.fillRect(e*s,n,s,o)}return r.setAttribute("style",`margin-bottom: 10px; width: ${this._$width}px; height: ${this._$height}px`),Promise.resolve(r)})):Promise.resolve(k.$getCanvas())}load(e,t){return k.$audioContext.decodeAudioData(e.buffer).then((e=>{const a=e.getChannelData(0),r=this.getPeaks(a,t*window.devicePixelRatio);if(2===e.numberOfChannels){const a=e.getChannelData(1);return[r,this.getPeaks(a,t*window.devicePixelRatio)]}return[r,r]}))}getPeaks(e,t){let a;a=Math.floor(e.length/t*window.devicePixelRatio),a<1&&(a=1);let r=[];for(let t=0;t<e.length;t+=a){const i=this.getPeak(e,t,t+a);r.push(i)}return r}getPeak(e,t,a){const r=e.slice(t,a);let i=-100;for(let e=0;e<r.length;e++){const t=r[e];t>i&&(i=t)}return i}};class Be extends we{constructor(){super("stage"),this._$stageLock=!1}static get MIN_FPS(){return 1}static get MAX_FPS(){return 60}static get MIN_STAGE_SIZE(){return 1}static get MAX_STAGE_SIZE(){return 3e3}static get MIN_STROKE_SIZE(){return 0}static get MAX_STROKE_SIZE(){return 200}initialize(){super.initialize();const e=document.getElementById("stage-lock");e&&e.addEventListener("mousedown",(e=>{this.stageLock(e)}));const t=["stage-width","stage-height","stage-fps"];for(let e=0;e<t.length;++e)this.setInputEvent(document.getElementById(t[e]));this.setChangeEvent(document.getElementById("stage-bgColor"))}focusIn(e){super.focusIn(e),this.setLockElement(e)}mouseDown(e){super.mouseDown(e),this.setLockElement(e)}setLockElement(e){if(!this._$focus)if(this._$stageLock)switch(e.target.id){case"stage-width":this._$lockTarget=document.getElementById("stage-height");break;case"stage-height":this._$lockTarget=document.getElementById("stage-width");break;default:this._$lockTarget=null}else this._$lockTarget=null}stageLock(e){const t=document.getElementById("stage-lock");t&&(e.stopPropagation(),this._$stageLock=!this._$stageLock,this._$currentValue=null,this._$stageLock||(this._$lockTarget=null),t.childNodes[1].setAttribute("class",this._$stageLock?"active":"disable"))}changeStageBgColor(e){document.getElementById("stage").style.backgroundColor=e,document.getElementById("library-preview-area").style.backgroundColor=e;k.$currentWorkSpace().stage.bgColor=e}changeStageWidth(e){e=k.$clamp(0|e,Be.MIN_STAGE_SIZE,Be.MAX_STAGE_SIZE);const t=document.getElementById("stage-area"),a=document.getElementById("stage"),r=k.$currentWorkSpace();return t.style.width=`${e*k.$zoomScale+window.screen.width}px`,a.style.width=e*k.$zoomScale+"px",r.stage.width=e,k.$offsetLeft=a.offsetLeft,k.$offsetTop=a.offsetTop,e}changeStageHeight(e){e=k.$clamp(0|e,Be.MIN_STAGE_SIZE,Be.MAX_STAGE_SIZE);const t=document.getElementById("stage-area"),a=document.getElementById("stage"),r=k.$currentWorkSpace();return t.style.height=`${e*k.$zoomScale+window.screen.height}px`,a.style.height=e*k.$zoomScale+"px",r.stage.height=e,k.$offsetLeft=a.offsetLeft,k.$offsetTop=a.offsetTop,e}changeStageFps(e){e=k.$clamp(0|e,Be.MIN_FPS,Be.MAX_FPS),k.$timelineHeader.rebuild();return k.$currentWorkSpace().stage.fps=e,e}}k.$stageController=new Be;k.$tabController=new class{constructor(){this._$active=null,this._$handler=null,k.$readEnd++,"complete"!==document.readyState?(this._$handler=this.initialize.bind(this),window.addEventListener("DOMContentLoaded",this._$handler)):this.initialize()}initialize(){this._$handler&&(window.removeEventListener("DOMContentLoaded",this._$handler),this._$handler=null);const e=document.getElementById("controller-tab-area");if(e){const t=e.children;for(let e=0;e<t.length;++e){const a=t[e];this._$active||(a.classList.add("active"),this._$active=a),a.addEventListener("click",(e=>{this.mouseDown(e)}))}}const t=document.getElementById("controller-area");if(t){const e=t.children;for(let t=0;t<e.length;++t){const a=e[t];t&&(a.style.display="none")}}k.$initializeEnd()}mouseDown(e){e.stopPropagation(),k.$endMenu(),this._$active.classList.remove("active"),this._$active.classList.add("disable"),e.target.classList.remove("disable"),e.target.classList.add("active"),this._$active=e.target;const t=document.getElementById("controller-area").children;for(let a=0;a<t.length;++a){const r=t[a];r.id===e.target.dataset.tabType?r.style.display="":r.style.display="none"}"controller-area-property"===e.target.dataset.tabType&&this.showController()}showController(){const e=k.$tools.getDefaultTool("arrow").activeElements;if(1!==e.length)return;const t=k.$currentWorkSpace().scene,a=e[0];t.getLayer(0|a.dataset.layerId).getCharacter(0|a.dataset.characterId).showController()}};class ze extends we{constructor(){super("text")}static get MIN_SIZE(){return 0}static get MAX_SIZE(){return 255}static get MIN_FONT_SIZE(){return 10}static get MAX_FONT_SIZE(){return 255}static get MIN_STROKE_SIZE(){return 0}static get MAX_STROKE_SIZE(){return 200}initialize(){super.initialize();const e=["font-select","font-style-select","font-align-select","font-wrap-select","font-input-select","font-scroll-select","font-border-select","font-auto-size-select","font-color","font-stroke-color"];for(let t=0;t<e.length;++t)this.setChangeEvent(document.getElementById(e[t]));const t=["font-size","font-stroke-size","font-leading","font-letterSpacing","font-leftMargin","font-rightMargin"];for(let e=0;e<t.length;++e)this.setInputEvent(document.getElementById(t[e]))}changeFontLeading(e){return e=k.$clamp(0|e,ze.MIN_SIZE,ze.MAX_SIZE),this.updateText({name:"leading",value:e}),e}changeFontLetterSpacing(e){return e=k.$clamp(0|e,-ze.MAX_SIZE,ze.MAX_SIZE),this.updateText({name:"letterSpacing",value:e}),e}changeFontLeftMargin(e){return e=k.$clamp(0|e,ze.MIN_SIZE,ze.MAX_SIZE),this.updateText({name:"leftMargin",value:e}),e}changeFontRightMargin(e){return e=k.$clamp(0|e,ze.MIN_SIZE,ze.MAX_SIZE),this.updateText({name:"rightMargin",value:e}),e}changeFontStrokeSize(e){return e=k.$clamp(0|e,ze.MIN_STROKE_SIZE,ze.MAX_STROKE_SIZE),this.updateText({name:"thickness",value:e}),e}changeFontSize(e){return e=k.$clamp(0|e,ze.MIN_FONT_SIZE,ze.MAX_FONT_SIZE),this.updateText({name:"size",value:e}),e}changeFontStrokeColor(e){this.updateText({name:"thicknessColor",value:0|`0x${e.slice(1)}`})}changeFontColor(e){this.updateText({name:"color",value:0|`0x${e.slice(1)}`})}changeFontSelect(e){this.updateText({name:"font",value:e})}changeFontStyleSelect(e){e|=0,this.updateText({name:"fontType",value:k.$clamp(e,0,3)})}changeFontAlignSelect(e){switch(e){case"left":case"center":case"right":this.updateText({name:"align",value:e})}}changeFontWrapSelect(e){switch(0|e){case 0:this.updateText({name:"wordWrap",value:!1}),this.updateText({name:"multiline",value:!1});break;case 1:this.updateText({name:"wordWrap",value:!1}),this.updateText({name:"multiline",value:!0});break;case 2:this.updateText({name:"wordWrap",value:!0}),this.updateText({name:"multiline",value:!0})}}changeFontInputSelect(e){e|=0,this.updateText({name:"inputType",value:e?"input":"static"})}changeFontScrollSelect(e){this.updateText({name:"scroll",value:!!(0|e)})}changeFontBorderSelect(e){this.updateText({name:"border",value:!!(0|e)})}changeFontAutoSizeSelect(e){e|=0,this.updateText({name:"autoSize",value:k.$clamp(e,0,2)})}updateText(e){const t=k.$tools.getDefaultTool("arrow").activeElements;if(!t.length)return;const a=k.$currentWorkSpace(),r=a.scene,i=t[0],s=r.getLayer(0|i.dataset.layerId).getCharacter(0|i.dataset.characterId);a.getLibrary(s.libraryId)[e.name]=e.value,s.dispose()}}k.$textController=new ze;class Pe extends we{constructor(){super("transform"),this._$state="hide",this._$sizeLock=!1,this._$scaleLock=!1,this._$screenTargets=["target-rect","scale-top-left","scale-top-right","scale-bottom-left","scale-bottom-right","scale-center-left","scale-center-top","scale-center-right","scale-center-bottom","target-rotation","reference-point"]}static get MIN_SIZE(){return 1}static get MAX_SIZE(){return 3e3}static get MIN_SCALE(){return-32768}static get MAX_SCALE(){return 32767}static get MIN_ROTATE(){return-360}static get MAX_ROTATE(){return 360}initialize(){super.initialize();for(let e=0;e<this._$screenTargets.length;++e){const t=document.getElementById(this._$screenTargets[e]);t&&(t.style.display="none",t.addEventListener("mousedown",(e=>{this.standbyPointer(e)})))}const e=document.getElementById("transform-size-lock");e&&e.addEventListener("mousedown",(e=>{this.sizeLock(e)}));const t=document.getElementById("transform-scale-lock");t&&t.addEventListener("mousedown",(e=>{this.scaleLock(e)}));const a=["object-width","object-height","object-x","object-y","transform-scale-x","transform-scale-y","transform-rotate"];for(let e=0;e<a.length;++e)this.setInputEvent(document.getElementById(a[e]))}changeObjectWidth(e){return e=k.$clamp(+e,Pe.MIN_SIZE,Pe.MAX_SIZE),this.updateWidth(e),e}changeObjectHeight(e){return e=k.$clamp(+e,Pe.MIN_SIZE,Pe.MAX_SIZE),this.updateHeight(e),e}changeObjectX(e){return e=k.$clamp(+e,Pe.MIN_SCALE,Pe.MAX_SCALE),this.updateX(e-this._$currentValue),e}changeObjectY(e){return e=k.$clamp(+e,Pe.MIN_SCALE,Pe.MAX_SCALE),this.updateY(e-this._$currentValue),e}changeTransformScaleX(e){return e=k.$clamp(+e,Pe.MIN_SCALE,Pe.MAX_SCALE),this.updateScaleX(e/100),e}changeTransformScaleY(e){return e=k.$clamp(+e,Pe.MIN_SCALE,Pe.MAX_SCALE),this.updateScaleY(e/100),e}changeTransformRotate(e){return e=k.$clamp((0|e)%360,Pe.MIN_ROTATE,Pe.MAX_ROTATE),this.updateRotate(e),e}focusIn(e){super.focusIn(e),this.setLockElement(e)}mouseDown(e){super.mouseDown(e),this.setLockElement(e)}setLockElement(e){if(!this._$focus)switch(e.target.id){case"object-width":this._$sizeLock&&(this._$lockTarget=document.getElementById("object-height"));break;case"object-height":this._$sizeLock&&(this._$lockTarget=document.getElementById("object-width"));break;case"transform-scale-x":this._$scaleLock&&(this._$lockTarget=document.getElementById("transform-scale-y"));break;case"transform-scale-y":this._$scaleLock&&(this._$lockTarget=document.getElementById("transform-scale-x"))}}scaleLock(e){e.stopPropagation(),this._$scaleLock=!this._$scaleLock,this._$currentValue=null,this._$scaleLock||(this._$lockTarget=null),e.currentTarget.childNodes[1].setAttribute("class",this._$scaleLock?"active":"disable")}sizeLock(e){e.stopPropagation(),this._$sizeLock=!this._$sizeLock,this._$currentValue=null,this._$sizeLock||(this._$lockTarget=null),e.currentTarget.childNodes[1].setAttribute("class",this._$sizeLock?"active":"disable")}standbyPointer(e){e.stopPropagation();const t=k.$tools.activeTool;t&&(e.transform=!0,t.dispatchEvent(re.MOUSE_DOWN,e))}show(){const e=k.$tools.getDefaultTool("arrow-transform");if("show"!==this._$state){this._$state="show";for(let t=0;t<this._$screenTargets.length;++t){const a=this._$screenTargets[t];if(!e.active&&"target-rect"!==a)continue;const r=document.getElementById(a);r&&(r.style.display="")}}return this}hide(){if("hide"===this._$state)return;for(let e=0;e<this._$screenTargets.length;++e){const t=document.getElementById(this._$screenTargets[e]);t&&t.setAttribute("style","display:none;")}const e=document.getElementById("standard-point");e&&e.setAttribute("style","display:none;"),this._$state="hide"}relocation(){if("hide"===this._$state)return;const e=k.$tools.getDefaultTool("arrow").activeElements;if(!e.length)return this.hide();const t=k.$currentWorkSpace(),a=t.scene,r=k.$timelineFrame.currentFrame,i=k.$sceneChange.concatenatedMatrix;let s=0,n=Number.MAX_VALUE,o=-Number.MAX_VALUE,l=Number.MAX_VALUE,c=-Number.MAX_VALUE;for(let t=0;t<e.length;++t){const r=e[t],d=a.getLayer(0|r.dataset.layerId);if(!d||d.lock||d.disable){s++;continue}const h=0|r.dataset.characterId;if(!document.getElementById(`character-${h}`)){s++;continue}const u=d.getCharacter(h);if(!u){s++;continue}const m=u.getBounds(i),g=k.$offsetLeft+(k.$sceneChange.offsetX+m.xMin)*k.$zoomScale,p=k.$offsetTop+(k.$sceneChange.offsetY+m.yMin)*k.$zoomScale;n=Math.min(n,g),o=Math.max(o,g+Math.ceil(Math.abs(m.xMax-m.xMin)*k.$zoomScale)),l=Math.min(l,p),c=Math.max(c,p+Math.ceil(Math.abs(m.yMax-m.yMin)*k.$zoomScale))}if(e.length-s==0)return this.hide();const d=document.getElementById("standard-point"),h=o-n,u=c-l;let m=null;if(1===e.length){const i=e[0],s=a.getLayer(0|i.dataset.layerId).getCharacter(0|i.dataset.characterId),n=s.getRange(r),o=s.getPlace(n.startFrame);if(!o.point){const e=s.getBounds(o.matrix),t=e.xMin,a=e.yMin,r=Math.ceil(Math.abs(e.xMax-e.xMin))/2,i=Math.ceil(Math.abs(e.yMax-e.yMin))/2;o.point={x:t+r,y:a+i}}m=o.point,k.$referenceController.setInputValue(m.x,m.y);if(!document.getElementById(`character-${s.id}`))return this.hide();if(t.getLibrary(s.libraryId).type===A.MOVIE_CLIP){d.setAttribute("style","");const e=d.clientWidth/2,t=d.clientHeight/2,a=k.$sceneChange.concatenatedMatrix,r=s.x,i=s.y,n=r*a[0]+i*a[2]+a[4],o=r*a[1]+i*a[3]+a[5],l=k.$offsetLeft+n*k.$zoomScale-e,c=k.$offsetTop+o*k.$zoomScale-t;d.setAttribute("style",`left: ${l}px; top: ${c}px;`)}else d.setAttribute("style","display: none;")}else k.$referenceController.pointer||(k.$referenceController.pointer={x:n+h/2,y:l+u/2}),m=k.$referenceController.pointer,d.setAttribute("style","display: none;");document.getElementById("target-rect").setAttribute("style",`width: ${h}px; height: ${u}px; left: ${n-1}px; top: ${l-1}px;`);if(k.$tools.getDefaultTool("arrow-transform").validity){if(m){const e=k.$offsetLeft+(k.$sceneChange.offsetX+m.x)*k.$zoomScale,t=k.$offsetTop+(k.$sceneChange.offsetY+m.y)*k.$zoomScale,a=document.getElementById("reference-point");a.setAttribute("style","");const r=e-a.offsetWidth/2,i=t-a.offsetHeight/2;a.setAttribute("style",`left: ${r}px; top: ${i}px;`)}document.getElementById("scale-top-left").setAttribute("style",`left: ${n-6}px; top: ${l-6}px;`),document.getElementById("scale-top-right").setAttribute("style",`left: ${o-5}px; top: ${l-6}px;`),document.getElementById("scale-bottom-left").setAttribute("style",`left: ${n-6}px; top: ${c-5}px;`),document.getElementById("scale-bottom-right").setAttribute("style",`left: ${o-5}px; top: ${c-5}px;`),document.getElementById("target-rotation").setAttribute("style",`left: ${o+5}px; top: ${c+5}px;`),document.getElementById("scale-center-left").setAttribute("style",`left: ${n-6}px; top: ${l+u/2-5}px;`),document.getElementById("scale-center-top").setAttribute("style",`left: ${n+h/2-5}px; top: ${l-6}px;`),document.getElementById("scale-center-right").setAttribute("style",`left: ${o-5}px; top: ${l+u/2-5}px;`),document.getElementById("scale-center-bottom").setAttribute("style",`left: ${n+h/2-5}px; top: ${c-5}px;`)}}updateX(e){const t=k.$currentWorkSpace().scene,a=k.$timelineFrame.currentFrame,r=k.$tools.getDefaultTool("arrow").activeElements;for(let i=0;i<r.length;++i){const s=r[i],n=0|s.dataset.layerId,o=t.getLayer(n),l=0|s.dataset.characterId,c=o.getCharacter(l);c.x+=e;const d=c.getPlace(a);if(!d.point){const e=c.getBounds();d.point={x:d.matrix[4]+(e.xMax-e.xMin)/2,y:d.matrix[5]+(e.yMax-e.yMin)/2}}d.point.x+=e,c.relocationTween(a)}if(r.length>1){k.$referenceController.pointer.x+=e}this.relocation()}updateY(e){const t=k.$currentWorkSpace().scene,a=k.$timelineFrame.currentFrame,r=k.$tools.getDefaultTool("arrow").activeElements;for(let i=0;i<r.length;++i){const s=r[i],n=0|s.dataset.layerId,o=t.getLayer(n),l=0|s.dataset.characterId,c=o.getCharacter(l);c.y+=e;const d=c.getPlace(a);if(!d.point){const e=c.getBounds();d.point={x:d.matrix[4]+(e.xMax-e.xMin)/2,y:d.matrix[5]+(e.yMax-e.yMin)/2}}d.point.y+=e,c.relocationTween(a)}if(r.length>1){k.$referenceController.pointer.y+=e}this.relocation()}updateWidth(e){const t=k.$tools.getDefaultTool("arrow").activeElements;if(!t.length)return;e=k.$clamp(e,Pe.MIN_SIZE,Pe.MAX_SIZE);const a=k.$currentWorkSpace(),r=a.scene;if(t.length>1){let a=Number.MAX_VALUE,i=-Number.MAX_VALUE,s=Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let e=0;e<t.length;++e){const o=t[e],l=0|o.dataset.layerId,c=r.getLayer(l),d=0|o.dataset.characterId,h=c.getCharacter(d).getBounds();a=Math.min(a,h.xMin),i=Math.max(i,h.xMax),s=Math.min(s,h.yMin),n=Math.max(n,h.yMax)}this.updateScaleX(e/Math.abs(i-a))}else{const i=t[0],s=0|i.dataset.layerId,n=r.getLayer(s),o=0|i.dataset.characterId,l=n.getCharacter(o),c=a.getLibrary(l.libraryId).getBounds([1,0,0,1,0,0]);this.updateScaleX(e/Math.abs(c.xMax-c.xMin)),document.getElementById("transform-scale-x").value=""+100*l.scaleX}}updateScaleX(e){const t=k.$tools.getDefaultTool("arrow").activeElements;if(!t.length)return;const{Matrix:a}=window.next2d.geom;e=k.$toFixed4(k.$clamp(e,Pe.MIN_SCALE,Pe.MAX_SCALE));const r=k.$currentWorkSpace().scene,i=k.$timelineFrame.currentFrame;let s=Number.MAX_VALUE,n=Number.MAX_VALUE,o=Number.MAX_VALUE,l=-Number.MAX_VALUE,c=Number.MAX_VALUE,d=-Number.MAX_VALUE;const h=k.$sceneChange.concatenatedMatrix;if(t.length>1){const s=k.$referenceController.pointer,n=new a(h[0],h[1],h[2],h[3],h[4]-k.$sceneChange.offsetX,h[5]-k.$sceneChange.offsetY);n.invert();const u=s.x*n.a+s.y*n.c+n.tx,m=s.x*n.b+s.y*n.d+n.ty,g=k.$multiplicationMatrix([e,0,0,1,0,0],[1,0,0,1,-u,-m]);for(let e=0;e<t.length;++e){const a=t[e],s=0|a.dataset.layerId,n=r.getLayer(s),h=0|a.dataset.characterId,p=n.getCharacter(h),f=p.getRange(i),$=p.getPlace(f.startFrame).point,y=k.$multiplicationMatrix(g,[1,0,0,1,$.x,$.y]);$.x=y[4]+u,$.y=y[5]+m;const _=p.getPlace(i),b=k.$multiplicationMatrix(g,_.matrix);_.matrix[0]=b[0],_.matrix[1]=b[1],_.matrix[2]=b[2],_.matrix[3]=b[3],_.matrix[4]=b[4]+u,_.matrix[5]=b[5]+m,_.scaleX=Math.sqrt(b[0]*b[0]+b[1]*b[1]);const v=p.getBounds();o=Math.min(o,v.xMin),l=Math.max(l,v.xMax),c=Math.min(c,v.yMin),d=Math.max(d,v.yMax),p.dispose(),p.relocationTween(i)}document.getElementById("transform-scale-y").value="100",document.getElementById("transform-scale-x").value="100"}else for(let h=0;h<t.length;++h){const u=t[h],m=0|u.dataset.layerId,g=r.getLayer(m).getCharacter(0|u.dataset.characterId);if(g.scaleX!==e){const t=g.getPlace(i),r=g.getRange(i),s=g.getPlace(r.startFrame).point,n=new a(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]);n.invert();const o=s.x*n.a+s.y*n.c+n.tx,l=s.x*n.b+s.y*n.d+n.ty,c=[1,0,0,1,-o,-l],d=k.$multiplicationMatrix([t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],o,l],c),h=g.scaleX;h&&e&&(t.matrix[4]-=d[4],t.matrix[5]-=d[5]),g.scaleX=e;const u=k.$multiplicationMatrix([t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],o,l],c);h&&e&&(t.matrix[4]+=u[4],t.matrix[5]+=u[5]),g.dispose()}s=Math.min(s,g.x),n=Math.min(n,g.y);const p=g.getBounds();o=Math.min(o,p.xMin),l=Math.max(l,p.xMax),c=Math.min(c,p.yMin),d=Math.max(d,p.yMax),document.getElementById("transform-scale-x").value=""+ +(100*e).toFixed(2),g.relocationTween(i)}document.getElementById("object-x").value=""+ +s.toFixed(2),document.getElementById("object-y").value=""+ +n.toFixed(2),document.getElementById("object-width").value=""+ +Math.abs(l-o).toFixed(2),document.getElementById("object-height").value=""+ +Math.abs(d-c).toFixed(2)}updateHeight(e){const t=k.$tools.getDefaultTool("arrow").activeElements;if(!t.length)return;e=k.$clamp(e,Pe.MIN_SIZE,Pe.MAX_SIZE);const a=k.$currentWorkSpace(),r=a.scene;if(t.length>1){let a=Number.MAX_VALUE,i=-Number.MAX_VALUE,s=Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let e=0;e<t.length;++e){const o=t[e],l=0|o.dataset.layerId,c=r.getLayer(l),d=0|o.dataset.characterId,h=c.getCharacter(d).getBounds([1,0,0,1,0,0]);a=Math.min(a,h.xMin),i=Math.max(i,h.xMax),s=Math.min(s,h.yMin),n=Math.max(n,h.yMax)}this.updateScaleY(e/Math.abs(n-s))}else{const i=t[0],s=0|i.dataset.layerId,n=r.getLayer(s),o=0|i.dataset.characterId,l=n.getCharacter(o),c=a.getLibrary(l.libraryId).getBounds([1,0,0,1,0,0]);this.updateScaleY(e/Math.abs(c.yMax-c.yMin)),document.getElementById("transform-scale-y").value=""+100*l.scaleY}}updateScaleY(e){const t=k.$tools.getDefaultTool("arrow").activeElements;if(!t.length)return;const{Matrix:a}=window.next2d.geom;e=k.$toFixed4(k.$clamp(e,Pe.MIN_SCALE,Pe.MAX_SCALE));const r=k.$currentWorkSpace().scene,i=k.$timelineFrame.currentFrame;let s=Number.MAX_VALUE,n=Number.MAX_VALUE,o=Number.MAX_VALUE,l=-Number.MAX_VALUE,c=Number.MAX_VALUE,d=-Number.MAX_VALUE;const h=k.$sceneChange.concatenatedMatrix;if(t.length>1){const s=k.$referenceController.pointer,n=new a(h[0],h[1],h[2],h[3],h[4]-k.$sceneChange.offsetX,h[5]-k.$sceneChange.offsetY);n.invert();const u=s.x*n.a+s.y*n.c+n.tx,m=s.x*n.b+s.y*n.d+n.ty,g=k.$multiplicationMatrix([1,0,0,e,0,0],[1,0,0,1,-u,-m]);for(let e=0;e<t.length;++e){const a=t[e],s=0|a.dataset.layerId,n=r.getLayer(s),h=0|a.dataset.characterId,p=n.getCharacter(h),f=p.getRange(i),$=p.getPlace(f.startFrame).point,y=k.$multiplicationMatrix(g,[1,0,0,1,$.x,$.y]);$.x=y[4]+u,$.y=y[5]+m;const _=p.getPlace(i),b=k.$multiplicationMatrix(g,_.matrix);_.matrix[0]=b[0],_.matrix[1]=b[1],_.matrix[2]=b[2],_.matrix[3]=b[3],_.matrix[4]=b[4]+u,_.matrix[5]=b[5]+m,_.scaleY=Math.sqrt(b[2]*b[2]+b[3]*b[3]);const v=p.getBounds();o=Math.min(o,v.xMin),l=Math.max(l,v.xMax),c=Math.min(c,v.yMin),d=Math.max(d,v.yMax),p.dispose(),p.relocationTween(i)}document.getElementById("transform-scale-y").value="100",document.getElementById("transform-scale-x").value="100"}else for(let h=0;h<t.length;++h){const u=t[h],m=0|u.dataset.layerId,g=r.getLayer(m).getCharacter(0|u.dataset.characterId);if(g.scaleY!==e){const t=g.getPlace(i),r=g.getRange(i),s=g.getPlace(r.startFrame).point,n=new a(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]);n.invert();const o=s.x*n.a+s.y*n.c+n.tx,l=s.x*n.b+s.y*n.d+n.ty,c=[1,0,0,1,-o,-l],d=k.$multiplicationMatrix([t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],o,l],c),h=g.scaleY;h&&e&&(t.matrix[4]-=d[4],t.matrix[5]-=d[5]),g.scaleY=e;const u=k.$multiplicationMatrix([t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],o,l],c);h&&e&&(t.matrix[4]+=u[4],t.matrix[5]+=u[5]),g.dispose()}s=Math.min(s,g.x),n=Math.min(n,g.y);const p=g.getBounds();o=Math.min(o,p.xMin),l=Math.max(l,p.xMax),c=Math.min(c,p.yMin),d=Math.max(d,p.yMax),document.getElementById("transform-scale-y").value=""+ +(100*e).toFixed(2),g.relocationTween(i)}document.getElementById("object-x").value=""+ +s.toFixed(2),document.getElementById("object-y").value=""+ +n.toFixed(2),document.getElementById("object-width").value=""+ +Math.abs(l-o).toFixed(2),document.getElementById("object-height").value=""+ +Math.abs(d-c).toFixed(2)}updateRotate(e){const t=k.$tools.getDefaultTool("arrow").activeElements;if(!t.length)return;const{Matrix:a}=window.next2d.geom,r=k.$currentWorkSpace().scene,i=k.$timelineFrame.currentFrame;let s=Number.MAX_VALUE,n=-Number.MAX_VALUE,o=Number.MAX_VALUE,l=-Number.MAX_VALUE;const c=k.$sceneChange.concatenatedMatrix;if(t.length>1){const d=k.$referenceController.pointer,h=new a(c[0],c[1],c[2],c[3],c[4]-k.$sceneChange.offsetX,c[5]-k.$sceneChange.offsetY);h.invert();const u=d.x*h.a+d.y*h.c+h.tx,m=d.x*h.b+d.y*h.d+h.ty,g=e*k.$Deg2Rad,p=k.$multiplicationMatrix([Math.cos(g),Math.sin(g),-Math.sin(g),Math.cos(g),0,0],[1,0,0,1,-u,-m]);for(let e=0;e<t.length;++e){const a=t[e],c=0|a.dataset.layerId,d=r.getLayer(c),h=0|a.dataset.characterId,g=d.getCharacter(h),f=g.getRange(i),$=g.getPlace(f.startFrame).point;$.x=u,$.y=m;const y=g.getPlace(i),_=k.$multiplicationMatrix(p,y.matrix);y.matrix[0]=_[0],y.matrix[1]=_[1],y.matrix[2]=_[2],y.matrix[3]=_[3],y.matrix[4]=_[4]+u,y.matrix[5]=_[5]+m,y.rotation=Math.atan2(_[1],_[0])*k.$Rad2Deg;const b=g.getBounds();s=Math.min(s,b.xMin),n=Math.max(n,b.xMax),o=Math.min(o,b.yMin),l=Math.max(l,b.yMax),g.dispose(),g.relocationTween(i)}document.getElementById("transform-scale-y").value="100",document.getElementById("transform-scale-x").value="100"}else for(let c=0;c<t.length;++c){const d=t[c],h=0|d.dataset.layerId,u=r.getLayer(h).getCharacter(0|d.dataset.characterId);if(u.rotation===e)return;const m=u.getPlace(i),g=new a(m.matrix[0],m.matrix[1],m.matrix[2],m.matrix[3],m.matrix[4],m.matrix[5]);g.invert();const p=u.getRange(i),f=u.getPlace(p.startFrame).point,$=f.x*g.a+f.y*g.c+g.tx,y=f.x*g.b+f.y*g.d+g.ty,_=[1,0,0,1,-$,-y],b=k.$multiplicationMatrix([m.matrix[0],m.matrix[1],m.matrix[2],m.matrix[3],$,y],_);m.matrix[4]-=b[4],m.matrix[5]-=b[5],u.rotation=e;const v=k.$multiplicationMatrix([m.matrix[0],m.matrix[1],m.matrix[2],m.matrix[3],$,y],_);m.matrix[4]+=v[4],m.matrix[5]+=v[5],u.dispose(),document.getElementById("transform-rotate").value=`${m.rotation}`,document.getElementById("transform-scale-x").value=""+100*m.scaleX,document.getElementById("transform-scale-y").value=""+100*m.scaleY;const w=u.getBounds();s=Math.min(s,w.xMin),n=Math.max(n,w.xMax),o=Math.min(o,w.yMin),l=Math.max(l,w.yMax),u.relocationTween(i)}document.getElementById("object-x").value=""+ +s.toFixed(2),document.getElementById("object-y").value=""+ +o.toFixed(2),document.getElementById("object-width").value=""+ +Math.abs(n-s).toFixed(2),document.getElementById("object-height").value=""+ +Math.abs(l-o).toFixed(2)}}k.$transformController=new Pe;class Oe extends we{constructor(){super("ease"),this._$easeTarget=null,this._$viewContext=null,this._$drawContext=null,this._$moveCurvePointer=null,this._$endMoveCurvePointer=null,this._$moveEasingPointer=null,this._$endMoveEasingPointer=null,this._$deleteEasingPointer=null}static get EASE_CANVAS_WIDTH(){return 300}static get EASE_CANVAS_HEIGHT(){return 400}static get EASE_BASE_CANVAS_SIZE(){return 200}static get EASE_MIN_POINTER_X(){return 6}static get EASE_MIN_POINTER_Y(){return-5}static get EASE_MAX_POINTER_X(){return 306}static get EASE_MAX_POINTER_Y(){return 395}static get EASE_SCREEN_X(){return 57}static get EASE_SCREEN_Y(){return 94}static get EASE_MOVE_Y(){return 294}static get EASE_OFFSET_X(){return 50}static get EASE_OFFSET_Y(){return 100}static get EASE_RANGE(){return 100}initialize(){super.initialize();const e=window.devicePixelRatio,t=document.createElement("canvas");t.width=Oe.EASE_CANVAS_WIDTH*e,t.height=Oe.EASE_CANVAS_HEIGHT*e,this._$drawContext=t.getContext("2d");const a=document.getElementById("ease-custom-canvas");a&&(a.width=Oe.EASE_CANVAS_WIDTH*e,a.height=Oe.EASE_CANVAS_HEIGHT*e,a.style.transform=`scale(${1/e}, ${1/e})`,a.style.backfaceVisibility="hidden",this._$viewContext=a.getContext("2d"),a.addEventListener("dblclick",(e=>{this.addEasingPointer(e)})));const r=document.getElementById("ease-canvas-view-area");this._$deleteEasingPointer=this.deleteEasingPointer.bind(this),r&&(r.style.display="none",r.addEventListener("mouseleave",(()=>{window.removeEventListener("keydown",this._$deleteEasingPointer)})));const i=["ease-select","ease-custom-file-input"];for(let e=0;e<i.length;++e){const t=document.getElementById(i[e]);t&&t.addEventListener("change",(e=>{e.stopPropagation(),this.executeFunction(e.target.id,e)}))}const s=["ease-custom-data-export","ease-custom-data-load"];for(let e=0;e<s.length;++e){const t=document.getElementById(s[e]);t&&t.addEventListener("click",(e=>{e.stopPropagation(),this.executeFunction(e.target.id,e)}))}}changeEaseCustomDataLoad(e){e.preventDefault();document.getElementById("ease-custom-file-input").click()}changeEaseCustomDataExport(){const e=k.$tools.getDefaultTool("arrow").activeElements;if(!e.length||e.length>1)return;const t=e[0],a=k.$currentWorkSpace().scene.getLayer(0|t.dataset.layerId).getCharacter(0|t.dataset.characterId);if(!a)return;const r=a.getRange(k.$timelineFrame.currentFrame);if(!a.hasTween(r.startFrame))return;const i=k.$currentWorkSpace().getLibrary(a.libraryId);if(!i)return;const s=document.createElement("a");s.download=`${i.name}_${r.startFrame}.json`,s.href=URL.createObjectURL(new Blob([JSON.stringify(a.getTween(r.startFrame).custom)],{type:"application/json"})),s.click()}changeEaseCustomFileInput(e){e.target.files[0].text().then((e=>{const t=k.$tools.getDefaultTool("arrow").activeElements;if(!t.length||t.length>1)return;const a=t[0],r=k.$currentWorkSpace().scene.getLayer(0|a.dataset.layerId).getCharacter(0|a.dataset.characterId);if(!r)return;const i=r.getRange(k.$timelineFrame.currentFrame);if(!r.hasTween(i.startFrame))return;r.getTween(i.startFrame).custom=JSON.parse(e),this._$easeTarget=null,this.clearEasingPointer(),this.createEasingPointer(),this.drawEasingGraph(),this.relocationPlace(r,i.startFrame),this.clearPointer().relocationPointer()})),e.target.value=""}addEasingPointer(e){const t=k.$tools.getDefaultTool("arrow").activeElements;if(!t.length||t.length>1)return;const a=t[0],r=k.$currentWorkSpace().scene.getLayer(0|a.dataset.layerId).getCharacter(0|a.dataset.characterId);if(!r)return;const i=r.getRange(k.$timelineFrame.currentFrame);if(!r.hasTween(i.startFrame))return;const s=document.getElementById("ease-cubic-pointer-area"),n=s.children,o=r.getTween(i.startFrame),l=["curve","pointer","curve"],c=[-20,0,20],d=Oe.EASE_BASE_CANVAS_SIZE/Oe.EASE_RANGE,h=(e.layerX-Oe.EASE_BASE_CANVAS_SIZE)/d,u=(Oe.EASE_BASE_CANVAS_SIZE-(e.layerY-300))/d;for(let e=0;e<l.length;++e){const t=l[e],a=h+c[e],r=u+c[e],i=this.createEasingPointerDiv(a,r,t);s.insertBefore(i,n[n.length-1]),o.custom.splice(-2,0,{type:t,x:a,y:r})}for(let e=0;e<n.length;++e){n[e].dataset.index=`${e+1}`}this._$easeTarget=null,this.drawEasingGraph(),this.relocationPlace(r,i.startFrame),this.clearPointer().relocationPointer()}changeEaseSelect(){const e=k.$timelineLayer.targetLayer;if(!e)return;const t=document.getElementById("ease-select");"custom"===t.value?this.showCustomArea():this.hideCustomArea();const a=k.$currentWorkSpace().scene.getLayer(0|e.dataset.layerId),r=k.$timelineFrame.currentFrame,i=a.getActiveCharacter(r);if(!i.length&&i.length>1)return;const s=i[0],n=s.getRange(r);s.hasTween(n.startFrame)&&(s.getTween(n.startFrame).method=t.value,s.relocationTween(n.startFrame))}relocationPlace(e,t,a="none"){const r=e.getRange(t);if("none"===a&&r.startFrame-1>=e.startFrame){const t=e.getRange(r.startFrame-1);e.hasTween(t.startFrame)&&this.relocationPlace(e,t.startFrame,"prev")}e.updateTweenPlace(r.startFrame,r.endFrame);const i=k.$currentWorkSpace().getLibrary(e.libraryId);if(!i)return;const s=i.getBounds(),n=e.getPlace(r.startFrame),o=n.matrix,l="scaleX"in n?n.scaleX:Math.sqrt(o[0]*o[0]+o[1]*o[1]),c="scaleY"in n?n.scaleY:Math.sqrt(o[2]*o[2]+o[3]*o[3]);let d="rotation"in n?n.rotation:Math.atan2(o[1],o[0])*k.$Rad2Deg;const h=o[4],u=o[5],m=document.getElementById(`tween-marker-${e.id}-${r.startFrame}`);if(m){const e=k.$boundsMatrix(s,o),t=Math.abs(Math.ceil(e.xMax-e.xMin)/2*k.$zoomScale),a=Math.abs(Math.ceil(e.yMax-e.yMin)/2*k.$zoomScale);m.style.left=k.$offsetLeft+e.xMin*k.$zoomScale+t-2+"px",m.style.top=k.$offsetTop+e.yMin*k.$zoomScale+a-2+"px"}let g=r.endFrame-1,p=e.getPlace(g);e.hasTween(r.endFrame)&&(g=r.endFrame,p=e.getPlace(r.endFrame));const f=p.matrix,$="scaleX"in p?p.scaleX:Math.sqrt(f[0]*f[0]+f[1]*f[1]),y="scaleY"in p?p.scaleY:Math.sqrt(f[2]*f[2]+f[3]*f[3]);let _="rotation"in p?p.rotation:Math.atan2(f[1],f[0])*k.$Rad2Deg,b=f[4],v=f[5];const w=document.getElementById(`tween-marker-${e.id}-${g}`);if(w){const e=k.$boundsMatrix(s,f),t=Math.abs(Math.ceil(e.xMax-e.xMin)/2*k.$zoomScale),a=Math.abs(Math.ceil(e.yMax-e.yMin)/2*k.$zoomScale);w.style.left=k.$offsetLeft+e.xMin*k.$zoomScale+t-2+"px",w.style.top=k.$offsetTop+e.yMin*k.$zoomScale+a-2+"px"}const S=e.getTween(r.startFrame),I=S.method,E=g-r.startFrame;let x=b-h,M=v-u;const L=$-l,C=y-c,F=_-d,{Matrix:A}=window.next2d.geom,T=new A(o[0],o[1],o[2],o[3],o[4],o[5]);T.invert();const B=e.getPlace(r.startFrame).point,z=B.x*T.a+B.y*T.c+T.tx,P=B.x*T.b+B.y*T.d+T.ty,O=[1,0,0,1,-z,-P],N=k.$multiplicationMatrix([o[0],o[1],o[2],o[3],z,P],O),D=k.$multiplicationMatrix([f[0],f[1],f[2],f[3],z,P],O);F&&(x=b-D[4]-(h-N[4]),M=v-D[5]-(u-N[5]));const U=n.colorTransform,R=p.colorTransform,X=R[0]-U[0],j=R[1]-U[1],Y=R[2]-U[2],W=R[3]-U[3],H=R[4]-U[4],G=R[5]-U[5],Z=R[6]-U[6],K=R[7]-U[7],{Easing:V}=window.next2d.ui;let J=1;for(let t=r.startFrame+1;t<g;++t){const a=e.getPlace(t),r=J/E;let i=0;if("custom"===I)for(let e=0;e<S.custom.length;e+=3){const t=S.custom[e+1];let a=S.custom[e+3];if(a.off)for(e+=3;a=S.custom[e+3],!a.fixed&&a.off;)e+=3;if(a.x/Oe.EASE_RANGE>r){const a=S.custom[e+2];i=this.cubicBezier(t.x/Oe.EASE_RANGE,t.y/Oe.EASE_RANGE,a.x/Oe.EASE_RANGE,a.y/Oe.EASE_RANGE)(r);break}}const n=a.matrix,o=L?"custom"===I?L*i+l:V[I](J,l,L,E):l,m=C?"custom"===I?C*i+c:V[I](J,c,C,E):c,g=F?"custom"===I?F*i+d:V[I](J,d,F,E)%360:d;let p=Math.atan2(n[1],n[0]),f=Math.atan2(-n[2],n[3]);const $=g*k.$Deg2Rad;if(f=f+$-p,p=$,n[0]=o*Math.cos(p),n[1]=o*Math.sin(p),n[2]=-m*Math.sin(f),n[3]=m*Math.cos(f),L&&(a.scaleX=Math.sqrt(n[0]*n[0]+n[1]*n[1])),C&&(a.scaleY=Math.sqrt(n[2]*n[2]+n[3]*n[3])),n[4]=x?"custom"===I?i*x+h:V[I](J,h,x,E):h,n[5]=M?"custom"===I?i*M+u:V[I](J,u,M,E):u,F){a.rotation=Math.atan2(n[1],n[0])*k.$Rad2Deg;const e=k.$multiplicationMatrix([Math.cos($),Math.sin($),-Math.sin($),Math.cos($),z,P],O);n[4]+=-N[4]+e[4],n[5]+=-N[5]+e[5]}if(S.curve.length){const e=Math.sqrt(Math.pow(x,2)+Math.pow(M,2)),t=Math.sqrt(Math.pow(n[4]-h,2)+Math.pow(n[5]-u,2));if(t&&e){const a=this.getCurvePoint(t/e,h,u,b,v,S.curve);a&&(n[4]=a.x,n[5]=a.y)}}const y=a.colorTransform;y[0]=X?k.$clamp("custom"===I?X*i+U[0]:V[I](J,U[0],X,E),Ie.MIN_MULTIPLIER,Ie.MAX_MULTIPLIER):U[0],y[1]=j?k.$clamp("custom"===I?j*i+U[1]:V[I](J,U[1],j,E),Ie.MIN_MULTIPLIER,Ie.MAX_MULTIPLIER):U[1],y[2]=Y?k.$clamp("custom"===I?Y*i+U[2]:V[I](J,U[2],Y,E),Ie.MIN_MULTIPLIER,Ie.MAX_MULTIPLIER):U[2],y[3]=W?k.$clamp("custom"===I?W*i+U[3]:V[I](J,U[3],W,E),Ie.MIN_MULTIPLIER,Ie.MAX_MULTIPLIER):U[3],y[4]=H?k.$clamp("custom"===I?H*i+U[4]:V[I](J,U[4],H,E),Ie.MIN_OFFSET,Ie.MAX_OFFSET):U[4],y[5]=G?k.$clamp("custom"===I?G*i+U[5]:V[I](J,U[5],G,E),Ie.MIN_OFFSET,Ie.MAX_OFFSET):U[5],y[6]=Z?k.$clamp("custom"===I?Z*i+U[6]:V[I](J,U[6],Z,E),Ie.MIN_OFFSET,Ie.MAX_OFFSET):U[6],y[7]=K?k.$clamp("custom"===I?K*i+U[7]:V[I](J,U[7],K,E),Ie.MIN_OFFSET,Ie.MAX_OFFSET):U[7];const _=document.getElementById(`tween-marker-${e.id}-${t}`);if(_){const e=k.$boundsMatrix(s,n),t=Math.abs(Math.ceil(e.xMax-e.xMin)/2*k.$zoomScale),a=Math.abs(Math.ceil(e.yMax-e.yMin)/2*k.$zoomScale);_.style.left=k.$offsetLeft+e.xMin*k.$zoomScale+t-2+"px",_.style.top=k.$offsetTop+e.yMin*k.$zoomScale+a-2+"px"}J++}const q=n.filter,Q=p.filter;if(q.length&&Q.length){const t=["blurX","blurY","quality","color","alpha","distance","angle","highlightColor","highlightAlpha","shadowColor","shadowAlpha","strength"],a=q.length;for(let i=0;i<a;++i){const a=q[i],s=Q[i];if(a.name!==s.name)continue;let n=1;for(let o=r.startFrame+1;r.endFrame>o;++o){const r=e.getPlace(o).filter;r[i]||(r[i]=new k.$filterClasses[a.name]);const l=r[i];for(let e=0;e<t.length;++e){const r=t[e];if(r in l){const e=s[r]-a[r];if(!e)continue;l[r]="custom"===I?e*customValue+a[r]:V[I](n,a[r],e,E)}}n++}}}}relocationPointer(){const e=k.$tools.getDefaultTool("arrow").activeElements;if(!e.length)return;const t=k.$currentWorkSpace();if(!t)return;const a=k.$sceneChange.concatenatedMatrix,r=k.$timelineFrame.currentFrame,i=t.scene;for(let t=0;t<e.length;++t){const s=e[t],n=i.getLayer(0|s.dataset.layerId);if(!n)continue;const o=n.getCharacter(0|s.dataset.characterId);if(!o)continue;const l=o.getRange(r);if(!o.hasTween(l.startFrame))continue;let c=l.startFrame;for(;o.startFrame!==c&&c>1;){const e=o.getRange(c-1);if(!o.hasTween(e.startFrame))break;c=e.startFrame}let d=l.endFrame;for(;o.hasTween(d);)d=o.getTween(d).endFrame;const h=k.$currentWorkSpace().getLibrary(o.libraryId);if(!h)continue;const u=h.getBounds(),m=document.getElementById("stage-area");for(let e=c;e<d;++e){const t=document.createElement("div"),r=o.getPlace(e).matrix,i=k.$multiplicationMatrix(a,r),s=k.$boundsMatrix(u,i),n=Math.abs(Math.ceil(s.xMax-s.xMin)/2*k.$zoomScale),l=Math.abs(Math.ceil(s.yMax-s.yMin)/2*k.$zoomScale),c=k.$offsetLeft+s.xMin*k.$zoomScale+n-2,d=k.$offsetTop+s.yMin*k.$zoomScale+l-2;t.id=`tween-marker-${o.id}-${e}`,t.dataset.child="tween",t.setAttribute("style",`left: ${c}px; top: ${d}px`),t.setAttribute("class","tween-marker"),m.appendChild(t)}const g=o.getTween(l.startFrame);for(let e=0;e<g.curve.length;++e){const t=g.curve[e];m.appendChild(this.createTweenCurveElement(t,e,n.id))}}}clearPointer(){const e=document.getElementById("stage-area");if(!e)return this;let t=0;for(;e.children.length>t;){const a=e.children[t];"tween"===a.dataset.child?a.remove():t++}return this}startMoveCurvePointer(e){e.button||(k.$endMenu(),e.stopPropagation(),this._$currentTarget=e.target,this._$pointX=e.pageX,this._$pointY=e.pageY,this._$moveCurvePointer||(this._$moveCurvePointer=this.moveCurvePointer.bind(this)),this._$endMoveCurvePointer||(this._$endMoveCurvePointer=this.endMoveCurvePointer.bind(this)),this.save(),window.addEventListener("mousemove",this._$moveCurvePointer),window.addEventListener("mouseup",this._$endMoveCurvePointer))}deleteCurvePointer(){const e=this._$currentTarget;if(!e)return;const t=k.$currentWorkSpace().scene.getLayer(0|e.dataset.layerId),a=k.$timelineFrame.currentFrame,r=t.getActiveCharacter(a);if(!r.length||r.length>1)return;const i=r[0],s=i.getRange(a);i.getTween(s.startFrame).curve.splice(0|e.dataset.index,1),e.remove(),this.relocationPlace(i,s.startFrame),this.clearPointer().relocationPointer(),this.save(),this._$saved=!1,this._$currentTarget=null}moveCurvePointer(e){e.preventDefault(),window.requestAnimationFrame((()=>{const t=this._$currentTarget;if(!t)return;const a=(e.pageX-this._$pointX)/k.$zoomScale,r=(e.pageY-this._$pointY)/k.$zoomScale,i=k.$currentWorkSpace().scene.getLayer(0|t.dataset.layerId),s=k.$timelineFrame.currentFrame,n=i.getActiveCharacter(s);if(!n.length&&n.length>1)return;const o=n[0],l=o.getRange(s);if(!o.hasTween(l.startFrame))return;const c=o.getTween(l.startFrame).curve[t.dataset.index],d=k.$sceneChange.concatenatedMatrix,{Matrix:h}=next2d.geom,u=new h(d[0],d[1],d[2],d[3],d[4],d[5]);u.invert();const m=a*u.a+r*u.c,g=a*u.b+r*u.d;c.x+=m,c.y+=g,this.relocationPlace(o,l.startFrame),this.clearPointer().relocationPointer(),this.reloadScreen(),this._$pointX=e.pageX,this._$pointY=e.pageY}))}endMoveCurvePointer(){window.removeEventListener("mousemove",this._$moveCurvePointer),window.removeEventListener("mouseup",this._$endMoveCurvePointer),this._$saved=!1}switchingCurvePointer(e){const t=e.target,a=k.$currentWorkSpace().scene.getLayer(0|t.dataset.layerId),r=k.$timelineFrame.currentFrame,i=a.getActiveCharacter(r);if(!i.length&&i.length>1)return;const s=i[0],n=s.getRange(r);if(!s.hasTween(n.startFrame))return;const o=s.getTween(n.startFrame).curve[t.dataset.index];o.usePoint=!o.usePoint,o.usePoint?(t.classList.remove("tween-pointer-disabled"),t.classList.add("tween-pointer-active")):(t.classList.add("tween-pointer-disabled"),t.classList.remove("tween-pointer-active")),this.relocationPlace(s,n.startFrame),this.clearPointer().relocationPointer(),this.reloadScreen()}createTweenCurveElement(e,t,a){const r=document.createElement("div");r.classList.add("tween-pointer-marker","tween-pointer-disabled");const i=k.$timelineFrame.currentFrame;r.textContent=`${t+1}`,r.dataset.child="tween",r.dataset.curve="true",r.dataset.layerId=`${a}`,r.dataset.index=`${t}`,r.dataset.detail="{{カーブポインター(ダブルクリックでON/OFF)}}";const s=k.$currentWorkSpace().scene.getLayer(a).getActiveCharacter(i);if(!s.length||s.length>1)return null;const n=s[0],o=k.$currentWorkSpace().getLibrary(n.libraryId).getBounds(),l=k.$sceneChange.concatenatedMatrix,c=e.x*l[0]+e.y*l[2]+l[4],d=e.x*l[1]+e.y*l[3]+l[5],h=Math.abs(Math.ceil(o.xMax-o.xMin)/2*k.$zoomScale),u=Math.abs(Math.ceil(o.yMax-o.yMin)/2*k.$zoomScale);return r.style.left=k.$offsetLeft+c*k.$zoomScale+h-7+"px",r.style.top=k.$offsetTop+d*k.$zoomScale+u-7+"px",e.usePoint?(r.classList.remove("tween-pointer-disabled"),r.classList.add("tween-pointer-active")):(r.classList.add("tween-pointer-disabled"),r.classList.remove("tween-pointer-active")),r.addEventListener("mousedown",(e=>{this.startMoveCurvePointer(e)})),r.addEventListener("dblclick",(e=>{this.switchingCurvePointer(e)})),r.addEventListener("mouseover",k.$fadeIn),r.addEventListener("mouseout",k.$fadeOut),r}createEasingObject(){return[{type:"pointer",fixed:!0,x:0,y:0},{type:"curve",x:0,y:0},{type:"curve",x:100,y:100},{type:"pointer",fixed:!0,x:100,y:100}]}createEasingPointer(){const e=k.$tools.getDefaultTool("arrow").activeElements;if(!e.length||e.length>1)return;const t=e[0],a=k.$currentWorkSpace().scene.getLayer(0|t.dataset.layerId).getCharacter(0|t.dataset.characterId);if(!a)return;const r=a.getRange(k.$timelineFrame.currentFrame);if(!a.hasTween(r.startFrame))return;const i=a.getTween(r.startFrame),s=document.getElementById("ease-cubic-pointer-area");for(let e=0;e<i.custom.length;++e){const t=i.custom[e];if(t.fixed)continue;const a=this.createEasingPointerDiv(t.x,t.y,t.type,e);t.off&&a.classList.add("ease-cubic-disable"),s.appendChild(a)}}startMoveEasingPointer(e){this._$easeTarget=e.currentTarget,this._$pointX=e.screenX,this._$pointY=e.screenY,this._$moveEasingPointer||(this._$moveEasingPointer=this.moveEasingPointer.bind(this)),this._$endMoveEasingPointer||(this._$endMoveEasingPointer=this.endMoveEasingPointer.bind(this)),this.save(),window.addEventListener("mousemove",this._$moveEasingPointer),window.addEventListener("mouseup",this._$endMoveEasingPointer),window.removeEventListener("keydown",this._$deleteEasingPointer)}deleteEasingPointer(e){if("Backspace"!==e.key||!this._$easeTarget)return;const t=k.$tools.getDefaultTool("arrow").activeElements;if(!t.length||t.length>1)return;const a=t[0],r=k.$currentWorkSpace().scene.getLayer(0|a.dataset.layerId).getCharacter(0|a.dataset.characterId);if(!r)return;const i=r.getRange(k.$timelineFrame.currentFrame);if(!r.hasTween(i.startFrame))return;const s=r.getTween(i.startFrame),n=0|this._$easeTarget.dataset.index;s.custom.splice(n-1,3);const o=document.getElementById("ease-cubic-pointer-area").children;o[n].remove(),o[n-1].remove(),o[n-2].remove();for(let e=0;e<o.length;++e){o[e].dataset.index=`${e+1}`}this.drawEasingGraph(),this.relocationPlace(r,i.startFrame),this.clearPointer().relocationPointer()}moveEasingPointer(e){window.requestAnimationFrame((()=>{if(!this._$easeTarget)return;const t=k.$tools.getDefaultTool("arrow").activeElements;if(!t.length||t.length>1)return;const a=t[0],r=k.$currentWorkSpace().scene.getLayer(0|a.dataset.layerId).getCharacter(0|a.dataset.characterId);if(!r)return;const i=r.getRange(k.$timelineFrame.currentFrame);if(!r.hasTween(i.startFrame))return;const s=this._$easeTarget;let n=s.offsetLeft+e.screenX-this._$pointX,o=s.offsetTop+e.screenY-this._$pointY;this._$pointX=e.screenX,this._$pointY=e.screenY,Oe.EASE_MIN_POINTER_Y>o&&(o=Oe.EASE_MIN_POINTER_Y),Oe.EASE_MAX_POINTER_Y<o&&(o=Oe.EASE_MAX_POINTER_Y),Oe.EASE_MIN_POINTER_X>n&&(n=Oe.EASE_MIN_POINTER_X),Oe.EASE_MAX_POINTER_X<n&&(n=Oe.EASE_MAX_POINTER_X),s.style.left=`${n}px`,s.style.top=`${o}px`;const l=r.getTween(i.startFrame).custom[s.dataset.index],c=Oe.EASE_BASE_CANVAS_SIZE/Oe.EASE_RANGE;l.x=(n-Oe.EASE_SCREEN_X)/c,l.y=(Oe.EASE_MOVE_Y-o)/c,document.getElementById("ease-cubic-current-text").textContent=`(${l.x/Oe.EASE_RANGE*100|0})`,document.getElementById("ease-cubic-current-tween").textContent=`(${l.y/Oe.EASE_RANGE*100|0})`,this.drawEasingGraph(),this.relocationPlace(r,i.startFrame),this.clearPointer().relocationPointer()}))}endMoveEasingPointer(){window.removeEventListener("mousemove",this._$moveEasingPointer),window.removeEventListener("mouseup",this._$endMoveEasingPointer),window.addEventListener("keydown",this._$deleteEasingPointer),this._$saved=!1}disabledEasingPointer(e){const t=k.$tools.getDefaultTool("arrow").activeElements;if(!t.length||t.length>1)return;const a=t[0],r=k.$currentWorkSpace().scene.getLayer(0|a.dataset.layerId).getCharacter(0|a.dataset.characterId);if(!r)return;const i=r.getRange(k.$timelineFrame.currentFrame);if(!r.hasTween(i.startFrame))return;const s=r.getTween(i.startFrame),n=0|e.target.dataset.index,o=s.custom[n];o.off=!o.off,s.custom[n-1].off=o.off,s.custom[n+1].off=o.off;const l=document.getElementById("ease-cubic-pointer-area").children;o.off?(l[n-2].classList.add("ease-cubic-disable"),l[n-1].classList.add("ease-cubic-disable"),l[n].classList.add("ease-cubic-disable")):(l[n-2].classList.remove("ease-cubic-disable"),l[n-1].classList.remove("ease-cubic-disable"),l[n].classList.remove("ease-cubic-disable")),this._$easeTarget=null,this.drawEasingGraph(),this.relocationPlace(r,i.startFrame),this.clearPointer().relocationPointer()}createEasingPointerDiv(e=0,t=0,a="pointer",r=0){const i=document.createElement("div");i.addEventListener("mousedown",(e=>{this.startMoveEasingPointer(e)})),"pointer"===a&&i.addEventListener("dblclick",(e=>{this.disabledEasingPointer(e)})),i.classList.add(`ease-cubic-${a}`),i.dataset.index=`${r}`,i.dataset.type=`${a}`;const s=Oe.EASE_BASE_CANVAS_SIZE/Oe.EASE_RANGE;return i.style.left=`${Oe.EASE_SCREEN_X+e*s}px`,i.style.top=`${Oe.EASE_SCREEN_Y+(Oe.EASE_RANGE-t)*s}px`,i}drawEasingGraph(){const e=k.$tools.getDefaultTool("arrow").activeElements;if(!e.length||e.length>1)return;const t=e[0],a=k.$currentWorkSpace().scene.getLayer(0|t.dataset.layerId).getCharacter(0|t.dataset.characterId);if(!a)return;const r=a.getRange(k.$timelineFrame.currentFrame);if(!a.hasTween(r.startFrame))return;const i=a.getTween(r.startFrame),s=window.devicePixelRatio,n=Oe.EASE_OFFSET_X*s,o=Oe.EASE_OFFSET_Y*s,l=this._$drawContext;l.fillStyle="rgb(240, 240, 240)";const c=Oe.EASE_BASE_CANVAS_SIZE*s;l.setTransform(1,0,0,1,0,0),l.clearRect(0,0,l.canvas.width,l.canvas.height),l.fillRect(n,o,c,c),l.lineCap="round",l.translate(n,o),l.beginPath(),l.strokeStyle="rgba(200, 200, 200, 0.6)",l.lineWidth=10,l.moveTo(0,0),l.lineTo(c,c),l.stroke();const d=Oe.EASE_BASE_CANVAS_SIZE/Oe.EASE_RANGE*s;for(let e=0;e<i.custom.length;e+=3){const t=i.custom[e],a=i.custom[e+1];let r=i.custom[e+2],s=i.custom[e+3];if(s.off)for(e+=3;r=i.custom[e+2],s=i.custom[e+3],!s.fixed&&s.off;)e+=3;if(l.beginPath(),l.strokeStyle="rgb(160, 160, 160)",l.lineWidth=3,l.moveTo(t.x*d,t.y*d),l.lineTo(a.x*d,a.y*d),l.stroke(),l.beginPath(),l.strokeStyle="rgb(160, 160, 160)",l.lineWidth=3,l.moveTo(s.x*d,s.y*d),l.lineTo(r.x*d,r.y*d),l.stroke(),l.beginPath(),l.strokeStyle="rgb(80, 80, 80)",l.lineWidth=10,l.moveTo(t.x*d,t.y*d),l.bezierCurveTo(a.x*d,a.y*d,r.x*d,r.y*d,s.x*d,s.y*d),l.stroke(),s.fixed)break}const h=this._$viewContext;h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,l.canvas.width,l.canvas.height),h.scale(1,-1),h.translate(0,-l.canvas.height),h.drawImage(l.canvas,0,0)}getCurvePoint(e,t,a,r,i,s){const n=[];for(let e=0;e<s.length;++e){const t=s[e];t.usePoint&&n.push(t)}if(!n.length)return null;const o=1-e,l=n.length+1;for(let s=0;s<l;++s)t*=o,a*=o,r*=e,i*=e;let c=t+r,d=a+i;for(let t=0;t<n.length;++t){const a=n[t],r=t+1;let i=a.x*l,s=a.y*l;for(let t=0;t<r;++t)i*=e,s*=e;for(let e=0;e<l-r;++e)i*=o,s*=o;c+=i,d+=s}return{x:c,y:d}}cubicBezier(e,t,a,r){const i=3*e,s=3*(a-e)-i,n=1-i-s,o=3*t,l=3*(r-t)-o,c=1-o-l,d=e=>i+e*(2*s+3*n*e);return e=>{const t=(e=>{if(e<=0)return 0;if(e>=1)return 1;let t=0,a=0,r=e;for(;Math.abs(r-a)>1e-4&&(a=r,r-=((o=r)*(i+o*(s+o*n))-e)/d(r),t++,!(t>1e3)););var o;return r})(e);return t*(o+t*(l+t*c))}}clearEasingPointer(){const e=document.getElementById("ease-cubic-pointer-area");if(e)for(;e.children.length;)e.children[0].remove()}showCustomArea(){this.clearEasingPointer(),this._$easeTarget=null,document.getElementById("ease-canvas-view-area").style.display="",this.createEasingPointer(),this.drawEasingGraph()}hideCustomArea(){const e=document.getElementById("ease-canvas-view-area");e&&(e.style.display="none")}addCurvePinter(){const e=k.$timelineLayer.targetLayer;if(!e)return;const t=k.$timelineFrame.currentFrame,a=k.$currentWorkSpace().scene.getLayer(0|e.dataset.layerId),r=a.getActiveCharacter(t);if(!r.length||r.length>1)return;const i=r[0],s=i.getRange(t);if(!i.hasTween(s.startFrame))return;const n=i.getTween(s.startFrame),o=n.curve.length,l=k.$sceneChange.concatenatedMatrix,c=i.getBounds(l),d={usePoint:!0,x:c.xMin,y:c.yMin};n.curve.push(d);const h=this.createTweenCurveElement(d,o,a.id);h&&document.getElementById("stage-area").appendChild(h),this.relocationPlace(i,s.startFrame),this.clearPointer().relocationPointer()}}k.$tweenController=new Oe;class Ne extends we{constructor(){super("video")}static get MIN_VOLUME(){return 0}static get MAX_VOLUME(){return 100}initialize(){super.initialize();const e=["video-loop-select","video-auto-select"];for(let t=0;t<e.length;++t)this.setChangeEvent(document.getElementById(e[t]));this.setInputEvent(document.getElementById("video-volume"))}changeVideoLoopSelect(e){this.updateVideoProperty("loop",1==(0|e))}changeVideoAutoSelect(e){this.updateVideoProperty("autoPlay",1==(0|e))}changeVideoVolume(e){return e=k.$clamp(0|e,Ne.MIN_VOLUME,Ne.MAX_VOLUME),this.updateVideoProperty("volume",e),e}updateVideoProperty(e,t){const a=k.$tools.getDefaultTool("arrow").activeElements;if(!a.length)return;const r=a[0];k.$currentWorkSpace().getLibrary(0|r.dataset.libraryId)[e]=t}}k.$videoController=new Ne;class De extends ie{constructor(){super(),this._$handler=null,k.$readEnd++,"complete"!==document.readyState?(this._$handler=this.initialize.bind(this),window.addEventListener("DOMContentLoaded",this._$handler)):this.initialize()}initialize(){this._$handler&&(window.removeEventListener("DOMContentLoaded",this._$handler),this._$handler=null),k.$initializeEnd()}reloadScreen(){const e=k.$timelineFrame.currentFrame;return k.$soundController.createSoundElements(),k.$currentWorkSpace().scene.changeFrame(e)}executeFunction(e){this[`execute${e.target.id.split("-").map((e=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`)).join("")}`](e)}}class Ue extends De{constructor(){super(),this._$editor=null,this._$active=!1,this._$frame=-1,this._$scene=null,this._$screenX=0,this._$screenY=0,this._$mouseMove=null,this._$mouseUp=null}static get SCRIPT_MODAL_WIDTH(){return 620}static get SCRIPT_MODAL_HEIGHT(){return 450}static get SCRIPT_MODAL_BAR_HEIGHT(){return 25}get active(){return this._$active}initialize(){super.initialize();const e=["editor-hide-icon","editor-bar"];for(let t=0;t<e.length;++t){const a=document.getElementById(e[t]);a&&a.addEventListener("mousedown",(e=>{e.stopPropagation(),k.$endMenu("editor-modal"),this.executeFunction(e)}))}document.documentElement.style.setProperty("--script-modal-width",`${Ue.SCRIPT_MODAL_WIDTH}px`),document.documentElement.style.setProperty("--script-modal-height",`${Ue.SCRIPT_MODAL_HEIGHT}px`),document.documentElement.style.setProperty("--script-modal-bar-height",`${Ue.SCRIPT_MODAL_BAR_HEIGHT}px`)}createEditor(){if(!("ace"in window))return;this._$editor=ace.edit("editor"),this._$editor.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),this._$editor.setTheme("ace/theme/monokai"),this._$editor.session.setMode("ace/mode/javascript");const e=[{word:"next2d",meta:"window.next2d"},{word:"toString",value:"toString()",meta:"common method"},{word:"namespace",meta:"common property"}],t=Object.keys(window.next2d);for(let a=1;a<t.length;++a){const r=t[a];if(r.indexOf("_$")>-1)continue;if(!window.next2d[r])continue;e.push({word:`next2d.${r}`,meta:`next2d.${r}`});const i=Object.keys(window.next2d[r]);for(let t=0;t<i.length;++t){const a=i[t];e.push({word:a,meta:`next2d.${r}.${a}`});const s=window.next2d[r][a],n=Object.getOwnPropertyDescriptors(s),o=Object.getOwnPropertyNames(s);for(let t=0;t<o.length;++t){const r=o[t];switch(r){case"length":case"prototype":case"toString":case"namespace":case"name":continue}const i=n[r];if("value"in i){const t=i.value.toString().replace(/ |\n/g,"").split("{")[0].split("(")[1];e.push({word:r,value:`${r}()`,meta:`${a}.${r}(${t}`})}else e.push({word:r,meta:`${a}.${r}`})}const l=Object.getOwnPropertyDescriptors(s.prototype),c=Object.getOwnPropertyNames(s.prototype);for(let t=0;t<c.length;++t){const r=c[t];switch(r){case"constructor":case"toString":case"namespace":case"name":continue}if(r.indexOf("_$")>-1)continue;const i=l[r];if("value"in i){const t=i.value.toString().replace(/ |\n/g,"").split("{")[0].split("(")[1];e.push({word:r,value:`${r}()`,meta:`${a}.${r}(${t}`})}else e.push({word:r,meta:`${a}.${r}`})}}}ace.require("ace/ext/language_tools").addCompleter({getCompletions:(t,a,r,i,s)=>{s(null,e.map((e=>({caption:e.word,value:e.value||e.word,meta:e.meta,score:0}))))}});const a=new ResizeObserver((e=>{e.forEach((e=>{const t=e.target,a=parseFloat(document.documentElement.style.getPropertyValue("--script-modal-width")),r=parseFloat(document.documentElement.style.getPropertyValue("--script-modal-height"));a!==t.clientWidth&&document.documentElement.style.setProperty("--script-modal-width",`${t.clientWidth}px`),r!==t.clientHeight&&document.documentElement.style.setProperty("--script-modal-height",`${t.clientHeight+Ue.SCRIPT_MODAL_BAR_HEIGHT}px`)})),this._$editor.resize()})),r=document.getElementById("editor-modal");r&&a.observe(r)}executeTimelineScriptAdd(e){this.show(e)}executeContextMenuScriptAdd(e){this.show(e)}executeEditorHideIcon(){this.hide()}executeEditorBar(e){this._$screenX=e.screenX,this._$screenY=e.screenY,this._$mouseMove||(this._$mouseMove=this.mouseMove.bind(this)),this._$mouseUp||(this._$mouseUp=this.mouseUp.bind(this)),window.addEventListener("mousemove",this._$mouseMove),window.addEventListener("mouseup",this._$mouseUp)}mouseMove(e){window.requestAnimationFrame((()=>{const t=document.getElementById("editor-modal");t.style.left=`${parseFloat(t.style.left)+(e.screenX-this._$screenX)}px`,t.style.top=`${parseFloat(t.style.top)+(e.screenY-this._$screenY)}px`,this._$screenX=e.screenX,this._$screenY=e.screenY}))}mouseUp(){window.removeEventListener("mousemove",this._$mouseMove),window.removeEventListener("mouseup",this._$mouseUp),k.$setCursor("auto")}show(e=null,t=0,a=null){k.$keyLock=!0,this._$active=!0,this._$frame=t||k.$timelineFrame.currentFrame,this._$editor.setValue("",-1),(a=a||k.$currentWorkSpace().scene).hasAction(this._$frame)&&this._$editor.setValue(a.getAction(this._$frame),-1),document.getElementById("editor-title").textContent=`${a.name} / frame[${this._$frame}]`;const r=document.getElementById("editor-modal");e&&(r.style.display="",r.style.left=`${e.pageX+5}px`,r.style.top=e.pageY-r.clientHeight/2+"px"),isNaN(parseFloat(r.style.left))&&(r.style.left="200px",r.style.top=300-r.clientHeight/2+"px"),r.setAttribute("class","fadeIn"),k.$endMenu("editor-modal"),this._$editor.focus()}hide(){this.save(),this._$editor.setValue("",0),this._$frame=-1,this._$scene=null,this._$active=!1,k.$keyLock=!1,k.$endMenu()}save(){if(-1===this._$frame)return;const e=k.$timelineHeader.leftFrame;if(e>this._$frame)return;const t=this._$frame-e,a=document.getElementById("timeline-header").children[t].children[Xe.ACTION_INDEX],r=this._$editor.getValue(0),i=this._$scene||k.$currentWorkSpace().scene;r?(i.setAction(this._$frame,r.trim()),this._$scene||a.classList.contains("frame-border-box-action")||a.setAttribute("class","frame-border-box-action")):(i.deleteAction(this._$frame),this._$scene||a.setAttribute("class","frame-border-box"))}}k.$javaScriptEditor=new Ue;class Re extends De{constructor(){super(),this._$pointY=0,this._$mouseMove=null,this._$mouseUp=null}static get TIMELINE_DEFAULT_SIZE(){return 280}static get TIMELINE_MIN_SIZE(){return 150}initialize(){super.initialize(),document.documentElement.style.setProperty("--timeline-height",`${Re.TIMELINE_DEFAULT_SIZE}px`);const e=document.getElementById("timeline-adjustment");e&&e.addEventListener("mousedown",(e=>{this.mouseDown(e)}))}mouseDown(e){e.preventDefault(),this._$pointY=e.screenY,this._$mouseMove||(this._$mouseMove=this.mouseMove.bind(this)),this._$mouseUp||(this._$mouseUp=this.mouseUp.bind(this)),window.addEventListener("mousemove",this._$mouseMove),window.addEventListener("mouseup",this._$mouseUp)}mouseMove(e){k.$setCursor("row-resize"),window.requestAnimationFrame((()=>{const t=this._$pointY-e.screenY,a=0|document.documentElement.style.getPropertyValue("--timeline-height").split("px")[0],r=Math.max(Re.TIMELINE_MIN_SIZE,a+t);document.documentElement.style.setProperty("--timeline-height",`${r}px`),k.$currentWorkSpace()._$timelineHeight=r,this._$pointY=e.screenY,k.$timelineLayer.updateClientSize(),k.$timelineMarker.setMarkerPosition()}))}mouseUp(){window.removeEventListener("mousemove",this._$mouseMove),window.removeEventListener("mouseup",this._$mouseUp),k.$timelineLayer.moveTimeLine(),k.$setCursor("auto"),k.$timelineLayer.updateClientSize()}}k.$timelineAdjustment=new Re;k.$timelineFrame=new class extends De{constructor(){super(),this._$pointX=0,this._$currentValue=null,this._$currentTarget=null,this._$mouseMove=null,this._$mouseUp=null}get currentFrame(){const e=document.getElementById("current-frame");return e?0|e.value:1}set currentFrame(e){const t=document.getElementById("current-frame");if(t){const a=k.$currentWorkSpace().scene,r=a?a.totalFrame+Ye.FRAME_COUNT-2:Ye.FRAME_COUNT-2;t.value=""+(0|Math.max(1,Math.min(e,r)))}}initialize(){super.initialize();const e=document.getElementById("current-frame");e&&(e.addEventListener("mouseover",(e=>{this.mouseOver(e)})),e.addEventListener("mouseout",(e=>{this.mouseOut(e)})),e.addEventListener("mousedown",(e=>{this.mouseDown(e)})),e.addEventListener("focusin",(e=>{this.focusIn(e)})),e.addEventListener("focusout",(e=>{this.finishInput(e)})),e.addEventListener("keypress",(e=>{this.finishInput(e)})))}focusIn(e){super.focusIn(),this._$currentValue=+e.target.value,this._$currentTarget=e.target}focusOut(){super.focusOut(),this._$currentValue=null,this._$currentTarget=null}mouseOver(e){switch(e.stopPropagation(),!0){case this._$focus:case null!==this._$currentTarget:case null!==this._$currentValue:return;default:k.$setCursor("ew-resize"),e.target.style.cursor="ew-resize"}}mouseOut(e){e.stopPropagation(),!this._$focus&&this._$currentTarget||(k.$setCursor("auto"),e.target.style.cursor="")}mouseDown(e){this._$focus||(e.preventDefault(),this._$pointX=e.screenX,this._$currentTarget=e.target,this._$currentValue=+e.target.value,k.$setCursor("ew-resize"),this._$mouseMove||(this._$mouseMove=this.mouseMove.bind(this)),this._$mouseUp||(this._$mouseUp=this.mouseUp.bind(this)),k.$timelineLayer.clear(),window.addEventListener("mousemove",this._$mouseMove),window.addEventListener("mouseup",this._$mouseUp))}mouseUp(){window.removeEventListener("mousemove",this._$mouseMove),window.removeEventListener("mouseup",this._$mouseUp),k.$setCursor("auto"),this._$currentTarget&&(this._$currentTarget.style.cursor="",this._$currentTarget.focus())}mouseMove(e){!this._$focus&&this._$currentTarget&&window.requestAnimationFrame((()=>{if(this._$focus||!this._$currentTarget)return;e.preventDefault(),k.$setCursor("ew-resize");const t=e.screenX-this._$pointX;let a=+this._$currentTarget.value;isNaN(a)&&(a=1);const r=k.$currentWorkSpace().scene.totalFrame+Ye.FRAME_COUNT-2,i=Math.max(1,Math.min(a+t,r));this._$currentTarget.value=`${i}`,this._$currentValue=i,this._$pointX=e.screenX,this.moveTimeline(),this.reloadScreen()}))}finishInput(e){if("Enter"!==e.key){if("focusout"===e.type){const t=k.$currentWorkSpace().scene.totalFrame+Ye.FRAME_COUNT-2;e.target.value=`${Math.max(1,Math.min(0|e.target.value,t))}`,this.moveTimeline(),this.focusOut(),this.reloadScreen()}}else e.currentTarget.blur()}moveTimeline(){const e=document.getElementById("timeline-controller-base");if(!e)return;const t=k.$timelineTool.timelineWidth,a=k.$timelineFrame.currentFrame,r=(a-(k.$timelineHeader.scrollX/t|0))*(t+1);(0>=r||r>e.clientWidth)&&(k.$timelineHeader.scrollX=(a-1)*t),k.$timelineHeader.rebuild(),k.$timelineMarker.move(),k.$timelineLayer.moveTimeLine()}};class Xe extends De{constructor(){super(),this._$width=0,this._$scrollX=0,this._$targetElement=null,this._$deleteIcon=null}static get MARKER_INDEX(){return 1}static get ACTION_INDEX(){return 2}static get SOUND_INDEX(){return 3}get width(){return this._$width}get scrollX(){return this._$scrollX}get leftFrame(){return k.$timelineTool.timelineWidth||(k.$timelineTool.timelineWidth=k.$timelineTool.DEFAULT_TIMELINE_WIDTH),1+this._$scrollX/k.$timelineTool.timelineWidth|0}set scrollX(e){let t=k.$timelineScroll.maxX;isNaN(t)&&(t=e),this._$scrollX=0|Math.max(0,Math.min(e,t)),k.$timelineScroll.x=this._$scrollX}initialize(){super.initialize(),this._$deleteIcon||(this._$deleteIcon=this.deleteIcon.bind(this));const e=document.getElementById("timeline-controller-base");e&&(e.addEventListener("wheel",(e=>{if(e.stopPropagation(),e.preventDefault(),k.$altKey){const t=0|e.deltaY;if(!t)return!1;window.requestAnimationFrame((()=>{k.$timelineTool.timelineWidth=k.$clamp(k.$timelineTool.timelineWidth+t,5,240)}))}else{const t=0|(e.deltaX||e.deltaY);if(!t)return!1;if(!this._$scrollX&&0>t)return!1;if(this._$scrollX>=Number.MAX_VALUE)return!1;window.requestAnimationFrame((()=>{this.scrollX=k.$clamp(this._$scrollX+t,0,Number.MAX_VALUE),this.rebuild(),k.$timelineMarker.move(),k.$timelineLayer.moveTimeLine()}))}}),{passive:!1}),e.addEventListener("mouseleave",(()=>{this.clearParams(),window.removeEventListener("keydown",this._$deleteIcon)})),e.addEventListener("mouseover",(()=>{window.addEventListener("keydown",this._$deleteIcon)})))}setWidth(){const e=document.getElementById("timeline-controller-base");e&&(this._$width=0|e.clientWidth)}rebuild(){const e=document.getElementById("timeline-header");if(!e)return;const t=k.$currentWorkSpace();if(!t)return;const a=t.scene;if(!a)return;k.$timelineTool.timelineWidth||(k.$timelineTool.timelineWidth=k.$timelineTool.DEFAULT_TIMELINE_WIDTH);const r=k.$timelineTool.timelineWidth,i=this.width/(r+1)|0;if(!e.children.length)for(let t=0;i>=t;++t)this.createElement(e,t+1);if(e.children.length+1>i){const t=i+1;for(;e.children.length>t;)e.children[t].remove()}if(i>e.children.length){let t=0|e.lastElementChild.dataset.frame;const a=i-e.children.length;for(let r=1;a>=r;++r)this.createElement(e,t++)}const s=0|document.getElementById("stage-fps").value;let n=this.leftFrame,o=Math.max(1,1+(n/24|0));const l=e.children,c=l.length;for(let e=0;c>e;++e){const t=n+e,r=l[e];(0|r.dataset.frame)!==t&&r.setAttribute("data-frame",`${t}`);const i=r.children,c=i.length;for(let e=0;c>e;++e){const r=i[e];switch((0|r.dataset.frame)!==t&&r.setAttribute("data-frame",`${t}`),e){case 0:if(t%5==0?r.classList.contains("frame-border-end")||r.setAttribute("class","frame-border-end"):r.classList.contains("frame-border")||r.setAttribute("class","frame-border"),t%s==0&&s>4){const e=o+++"s";r.innerHTML&&r.innerHTML===e||(r.innerHTML=e)}else r.innerHTML&&(r.innerHTML="");break;case Xe.MARKER_INDEX:a.hasLabel(t)?r.classList.contains("frame-border-box-marker")||(r.setAttribute("class","frame-border-box-marker"),r.textContent=a.getLabel(t)):r.classList.contains("frame-border-box")||(r.setAttribute("class","frame-border-box"),r.textContent="");break;case Xe.ACTION_INDEX:a.hasAction(t)?r.classList.contains("frame-border-box-action")||r.setAttribute("class","frame-border-box-action"):r.classList.contains("frame-border-box")||r.setAttribute("class","frame-border-box");break;case Xe.SOUND_INDEX:a.hasSound(t)?r.classList.contains("frame-border-box-sound")||r.setAttribute("class","frame-border-box-sound"):r.classList.contains("frame-border-box")||r.setAttribute("class","frame-border-box");break;case 4:if(t%5==0){const e=`${t}`;r.innerHTML&&r.innerHTML===e||(r.innerHTML=e)}else r.innerHTML&&(r.innerHTML="")}}}}createElement(e,t=1){const a=`\n<div class="frame-header-parent" data-frame="${t}">\n    <div class="frame-sec ${t%5==0?"frame-border-end":"frame-border"}" data-frame="${t}"></div>\n    <div class="frame-border-box" data-type="marker" data-frame="${t}"></div>\n    <div class="frame-border-box" data-type="action" data-frame="${t}"></div>\n    <div class="frame-border-box" data-type="sound" data-frame="${t}"></div>\n    <div class="frame-number" data-frame="${t}">${t%5==0?t:""}</div>\n</div>\n`;e.insertAdjacentHTML("beforeend",a);const r=e.lastElementChild;r.addEventListener("mousedown",(e=>{e.button||(k.$endMenu(),this.moveMarker(e))}));for(let e=0;e<3;++e){const t=r.children[1+e];t&&(t.addEventListener("mousedown",(e=>{this.dragIcon(e)})),t.addEventListener("dragover",(e=>{e.preventDefault()})),t.addEventListener("drop",(e=>{this.dropIcon(e)})))}}clearParams(){this._$targetElement=null}dragIcon(e){const t=e.target;t.classList.contains("frame-border-box")||(e.stopPropagation(),t.draggable=!0,this._$targetElement=t)}deleteIcon(e){if(k.$keyLock)return;if("Backspace"!==e.key)return;if(!this._$targetElement)return;this.save();const t=0|this._$targetElement.dataset.frame,a=k.$currentWorkSpace().scene;switch(this._$targetElement.dataset.type){case"marker":this._$targetElement.textContent="",a.deleteLabel(t);break;case"action":a.deleteAction(t);break;case"sound":a.deleteSound(t)}this._$targetElement.setAttribute("class","frame-border-box"),this._$targetElement=null,super.focusOut()}dropIcon(e){if(!this._$targetElement)return;e.preventDefault(),this._$targetElement.draggable=!1;const t=e.target,a=0|this._$targetElement.dataset.frame,r=0|t.dataset.frame;if(a!==r){this.save();const e=k.$currentWorkSpace().scene,i=this._$targetElement.dataset.type;let s=null;const n=t.parentElement;switch(i){case"marker":this._$targetElement.textContent="",s=n.children[1],s.textContent=e.getLabel(a),e.setLabel(r,e.getLabel(a));break;case"action":s=n.children[2],e.setAction(r,e.getAction(a));break;case"sound":s=n.children[3],e.setSound(r,e.getSound(a))}k.$altKey||this.deleteIcon({key:"Backspace"}),s&&(this._$targetElement=s,s.setAttribute("class",`frame-border-box-${i}`))}super.focusOut()}moveMarker(e){e.stopPropagation(),this.clearParams(),k.$timelineFrame.currentFrame=0|e.target.dataset.frame,k.$timelineMarker.move(),k.$timelineMarker.startMarker(),this.reloadScreen()}}k.$timelineHeader=new Xe;class je{static get color(){const e=["#ff0000","#0000ff","#32cd32","#ffc0cb","#ffd700","#ff8c00","#00ffff","#ff00ff","#008080","#00bfff","#ff6347","#fa8072","#ff69b4","#7fff00","#ffffe0","#9370db"],t=k.$currentWorkSpace();if(t&&t.scene){const a=t.scene;if(a._$layers.size){const t=k.$timelineLayer.targetLayer;let r=a._$layers.values().next().value;if(t&&(r=a.getLayer(0|t.dataset.layerId)),r){const t=e.indexOf(r.color);t>-1&&e.splice(t,1)}}}return e[Math.random()*e.length|0]}}k.$timelineKeyboardCommand=new class extends ne{constructor(){super("timeline")}initialize(){super.initialize();const e=document.getElementById("timeline");e&&(e.addEventListener("mouseleave",(()=>{this.active=!1})),e.addEventListener("mouseover",(()=>{this.active||(this.active=!0)})),e.addEventListener("mouseup",(()=>{this.active||(this.active=!0)}))),this.add(k.$generateShortcutKey("+",{ctrl:!0}),(()=>{k.$ctrlKey=!1,k.$timelineTool.executeTimelineLayerAdd(),k.$ctrlKey=!0})),this.add(k.$generateShortcutKey(";",{ctrl:!0}),(()=>{k.$ctrlKey=!1,k.$timelineTool.executeTimelineLayerAdd(),k.$ctrlKey=!0})),this.add(k.$generateShortcutKey("Backspace",{ctrl:!0}),(()=>{k.$timelineTool.executeTimelineLayerTrash()})),this.add("Backspace",(()=>{k.$timelineLayer.removeFrame()})),this.add(k.$generateShortcutKey("ArrowDown",{ctrl:!0}),this.selectLayer),this.add(k.$generateShortcutKey("ArrowUp",{ctrl:!0}),this.selectLayer),this.add(k.$generateShortcutKey("ArrowLeft",{ctrl:!0}),this.moveFrame),this.add(k.$generateShortcutKey("ArrowRight",{ctrl:!0}),this.moveFrame);const t=k.$screenKeyboardCommand.executeMoveDisplayObject;this.add("ArrowDown",t),this.add(k.$generateShortcutKey("ArrowDown",{shift:!0}),t),this.add("ArrowUp",t),this.add(k.$generateShortcutKey("ArrowUp",{shift:!0}),t),this.add("ArrowLeft",t),this.add(k.$generateShortcutKey("ArrowLeft",{shift:!0}),t),this.add("ArrowRight",t),this.add(k.$generateShortcutKey("ArrowRight",{shift:!0}),t),this.add("f",(()=>{k.$timelineTool.executeTimelineFrameAdd()})),this.add(k.$generateShortcutKey("f",{ctrl:!0}),(()=>{k.$timelineTool.executeTimelineFrameDelete()})),this.add("k",(()=>{k.$timelineTool.executeTimelineKeyAdd()})),this.add(k.$generateShortcutKey("k",{ctrl:!0}),(()=>{k.$timelineTool.executeTimelineKeyDelete()})),this.add("l",(()=>{document.getElementById("label-name").focus()})),this.add("e",(()=>{k.$timelineTool.executeTimelineEmptyAdd()})),this.add("s",(()=>{k.$javaScriptEditor.show()})),this.add("v",this.activePropertyTab),this.add("z",(()=>{document.getElementById("timeline-scale").focus()})),this.add("p",k.$timelineTool.executeTimelinePreview),this.add("o",(()=>{k.$timelineTool.executeTimelineOnionSkin()})),this.add("m",(()=>{k.$timelineMenu.executeContextMenuTweenAdd()})),this.add(k.$generateShortcutKey("m",{ctrl:!0}),(()=>{k.$timelineMenu.executeContextMenuTweenDelete()})),this.add(k.$generateShortcutKey("h",{shift:!0}),(()=>{k.$timelineTool.executeTimelineLayerLightAll()})),this.add(k.$generateShortcutKey("l",{shift:!0}),(()=>{k.$timelineTool.executeTimelineLayerLockAll()})),this.add(k.$generateShortcutKey("d",{shift:!0}),(()=>{k.$timelineTool.executeTimelineLayerDisableAll()})),this.add(k.$generateShortcutKey("n",{shift:!0}),(()=>{k.$timelineLayerMenu.executeTimelineLayerNormal()})),this.add(k.$generateShortcutKey("m",{shift:!0}),(()=>{k.$timelineLayerMenu.executeTimelineLayerMask()})),this.add(k.$generateShortcutKey("g",{shift:!0}),(()=>{k.$timelineLayerMenu.executeTimelineLayerGuide()})),this.add(k.$generateShortcutKey("c",{ctrl:!0}),(()=>(k.$timelineMenu.executeContextMenuFrameCopy(),!1))),this.add(k.$generateShortcutKey("v",{ctrl:!0}),(()=>(k.$timelineMenu.executeContextMenuFramePaste(),!1))),this.add(k.$generateShortcutKey("l",{ctrl:!0}),(()=>{k.$timelineMenu.executeContextMenuLayerCopy(),k.$timelineMenu.executeContextMenuLayerPaste()})),this.add(k.$generateShortcutKey("ArrowLeft",{ctrl:!0,shift:!0}),(()=>{k.$timelineMenu.executeContextMenuFirstFrame()})),this.add(k.$generateShortcutKey("ArrowRight",{ctrl:!0,shift:!0}),(()=>{k.$timelineMenu.executeContextMenuLastFrame()})),this.add("F6",(()=>{k.$timelineMenu.executeContextMenuKeyFrameChange()})),this.add("F7",(()=>{k.$timelineMenu.executeContextMenuKeyFrameChange()}))}activePropertyTab(){document.getElementById("controller-tab-area").children[0].click()}moveFrame(e){const t=k.$timelineLayer.targetLayer;if(!t)return;const a=e?"ArrowRightCtrl"===e?1:-1:0,r=Math.max(1,k.$timelineFrame.currentFrame+a);k.$tools.getDefaultTool("arrow").clear(),k.$timelineLayer.changeLabel(r),k.$timelineLayer.moveFrame(r),k.$timelineLayer.activeLayer(t)}selectLayer(e){let t=null;const a=document.getElementById("timeline-content"),r=k.$ctrlKey;k.$ctrlKey=!1;const i=k.$timelineLayer.targetLayer;if(i)if("ArrowDownCtrl"===e){if(t=i.nextElementSibling,!t)return;t.offsetTop+t.offsetHeight>window.innerHeight&&k.$timelineScroll.execute(0,k.$timelineTool.timelineHeight)}else{if(t=i.previousElementSibling,!t)return;a.offsetTop>t.offsetTop&&k.$timelineScroll.execute(0,-k.$timelineTool.timelineHeight)}else"ArrowDownCtrl"===e?(t=a.firstElementChild,k.$timelineScroll.execute(0,-k.$timelineScroll.y)):(t=a.lastElementChild,k.$timelineScroll.execute(0,k.$timelineLayer.clientHeight));k.$timelineLayer.activeLayer(t),k.$ctrlKey=r}};k.$timelineLayer=new class extends De{constructor(){super(),this._$targetFrames=new Map,this._$activeKeyEvent=!1,this._$targetLayers=new Map,this._$clientX=0,this._$clientY=0,this._$clientHeight=0,this._$scrollIndex=0,this._$moveLayerId=-1,this._$clickTimerId=-1,this._$selectLayerId=-1,this._$destLayer=null,this._$timerId=-1,this._$exitLayer=null,this._$executeMoveLayer=null,this._$moveLayer=null,this._$endInput=null,this._$moveTargetGroup=null,this._$endTargetGroup=null,this._$multiSelect=null,this._$endMultiSelect=null,this._$clearClickParam=null,this._$disableState=!1,this._$lightState=!1,this._$lockState=!1}get clientWidth(){return this._$clientWidth}set clientWidth(e){this._$clientWidth=0|e,k.$timelineScroll.updateWidth()}get clientHeight(){return this._$clientHeight}set clientHeight(e){this._$clientHeight=0|e,k.$timelineScroll.updateHeight()}get targetFrames(){return this._$targetFrames}get targetFrame(){return this.targetFrames.size?this.targetFrames.values().next().value[0]:null}get targetLayers(){return this._$targetLayers}get targetLayer(){return this.targetLayers.size?this.targetLayers.values().next().value:null}set targetLayer(e){switch(!0){case k.$ctrlKey:e&&(this.targetLayers.has(e.id)?(e.classList.remove("active"),this.targetLayers.delete(e.id)):(e.classList.add("active"),this.targetLayers.set(e.id,e)));break;case k.$shiftKey:if(e){const t=this.targetLayer;if(!t||t.id===e.id)return;this.clearActiveLayers(),this.clearActiveFrames();const a=Array.from(document.getElementById("timeline-content").children),r=a.indexOf(t),i=a.indexOf(e),s=Math.min(r,i),n=Math.max(r,i);this.targetLayers.set(t.id,t);for(let e=s;e<=n;++e){const t=a[e];t.classList.add("active"),this.targetLayers.has(t.id)||this.targetLayers.set(t.id,t)}}break;default:this.clearActiveLayers(),this.clearActiveFrames(),e&&(e.classList.add("active"),this.targetLayers.set(e.id,e))}}addTargetFrame(e,t){this.targetFrames.has(e.id)||this.targetFrames.set(e.id,[]);this.targetFrames.get(e.id).push(t);const a=e.getChildren(t);a&&a.classList.add("frame-active")}clearClickParam(){window.removeEventListener("mouseup",this._$clearClickParam),this._$disableState=!1,this._$lightState=!1,this._$lockState=!1}initialize(){super.initialize();const e=document.getElementById("timeline");e&&e.addEventListener("mouseover",(()=>{k.$setCursor("auto")}));const t=document.getElementById("timeline-content");t&&t.addEventListener("wheel",(e=>{const t=0|e.deltaY;if(!t)return!1;e.stopPropagation(),e.preventDefault(),k.$altKey?window.requestAnimationFrame((()=>{k.$timelineTool.timelineWidth=k.$clamp(k.$timelineTool.timelineWidth+t,5,240)})):window.requestAnimationFrame((()=>{k.$timelineScroll.execute(0,t)}))}),{passive:!1}),this.hideTargetGroup()}updateClientSize(){const e=document.getElementById("timeline-content");if(e){const t=window.innerWidth-(0|document.documentElement.style.getPropertyValue("--controller-width").split("px")[0])-338;this.clientWidth!==t&&(this.clientWidth=t,k.$timelineScroll.updateWidth()),this.clientHeight!==e.clientHeight&&(this.clientHeight=e.clientHeight,k.$timelineScroll.updateHeight())}}updateScrollY(e=0){const t=k.$currentWorkSpace();if(!t)return;const a=t.scene;if(!a)return;const r=a._$layers.size*k.$timelineTool.timelineHeight,i=this.scrollY;if(this.clientHeight>r)this.scrollY=0;else{const t=this.clientHeight/k.$timelineTool.timelineHeight|0;this.scrollY=Math.max(0,Math.min(this.scrollY+e,(a._$layers.size-t)*k.$timelineTool.timelineHeight))}i!==this.scrollY&&this.moveTimeLine()}activeCharacter(){if(!this.targetLayers.size)return;const e=k.$tools.getDefaultTool("arrow");e.clearActiveElement(),k.$transformController.hide(),k.$gridController.hide();const t=k.$timelineFrame.currentFrame,a=k.$currentWorkSpace().scene,r=k.$shiftKey;k.$shiftKey=!0;for(const r of this.targetFrames.keys()){const i=a.getLayer(r).getActiveCharacter(t);for(let t=0;t<i.length;++t){const a=i[t],r=document.getElementById(`character-${a.id}`);r&&e.addElement(r,!0)}}k.$shiftKey=r,k.$controller.default(),e.activeElements.length?(e.updateControllerProperty(),k.$transformController.show().relocation(),k.$gridController.show().relocation()):k.$tweenController.clearPointer()}clear(){this.clearActiveLayers(),this.clearActiveFrames()}removeAll(){const e=document.getElementById("timeline-content");if(e)for(;e.firstChild;)e.firstChild.remove()}create(e,t){if(!k.$currentWorkSpace())return;const a=document.getElementById("timeline-content");if(!a)return;if(!document.getElementById(`frame-scroll-id-${e}`)){a.insertAdjacentHTML("beforeend",`\n<div class="timeline-content-child" id="layer-id-${e}" data-layer-id="${e}">\n    <div class="timeline-layer-controller">\n        <i class="timeline-exit-icon" id="timeline-exit-icon-${e}" data-layer-id="${e}"></i>\n        <i class="timeline-exit-in-icon" id="timeline-exit-in-icon-${e}" data-layer-id="${e}"></i>\n        <i class="timeline-layer-icon" id="layer-icon-${e}" data-layer-id="${e}" data-detail="{{レイヤー変更(ダブルクリック)}}"></i>\n        <i class="timeline-mask-icon" id="layer-mask-icon-${e}" data-layer-id="${e}" data-detail="{{レイヤー変更(ダブルクリック)}}"></i>\n        <i class="timeline-mask-in-icon" id="layer-mask-in-icon-${e}" data-layer-id="${e}"></i>\n        <i class="timeline-guide-icon" id="layer-guide-icon-${e}" data-layer-id="${e}" data-detail="{{レイヤー変更(ダブルクリック)}}"></i>\n        <i class="timeline-guide-in-icon" id="layer-guide-in-icon-${e}" data-layer-id="${e}" data-detail="{{レイヤー変更(ダブルクリック)}}"></i>\n        <div class="view-text" id="layer-name-${e}" data-layer-id="${e}">layer_${e}</div>\n        <input type="text" class="view-text-input" id="layer-name-input-${e}" data-layer-id="${e}" value="layer_${e}" style="display: none;" autocomplete="off" tabindex="-1">\n        <i class="timeline-layer-light-one" id="layer-light-icon-${e}" data-layer-id="${e}" data-detail="{{レイヤーをハイライト}}"><span style="background-color:${t};"></span></i>\n        <i class="timeline-layer-disable-one icon-disable" id="layer-disable-icon-${e}" data-click-type="disable" data-layer-id="${e}" data-detail="{{レイヤーを非表示}}"></i>\n        <i class="timeline-layer-lock-one icon-disable" id="layer-lock-icon-${e}" data-click-type="lock" data-layer-id="${e}" data-detail="{{レイヤーをロック}}"></i>\n    </div>\n\n    <div class="timeline-frame-controller" id="frame-scroll-id-${e}"></div>\n</div>\n`),document.getElementById(`layer-name-${e}`).addEventListener("dblclick",(e=>{this.showInput(e)})),document.getElementById(`layer-icon-${e}`).addEventListener("dblclick",(e=>{this.showLayerMenu(e)}));const r=document.getElementById(`layer-guide-icon-${e}`);r.addEventListener("dblclick",(e=>{this.showLayerMenu(e)})),r.addEventListener("mouseover",(e=>{this.exitLayer(e)})),r.addEventListener("mouseout",(e=>{this.endExitLayer(e)}));const i=document.getElementById(`layer-mask-icon-${e}`);i.addEventListener("dblclick",(e=>{this.showLayerMenu(e)})),i.addEventListener("mouseover",(e=>{this.exitLayer(e)})),i.addEventListener("mouseout",(e=>{this.endExitLayer(e)}));const s=document.getElementById(`timeline-exit-icon-${e}`);s.addEventListener("mouseover",(e=>{this.exitLayer(e)})),s.addEventListener("mouseout",(e=>{this.endExitLayer(e)}));const n=document.getElementById(`timeline-exit-in-icon-${e}`);n.addEventListener("mouseover",(e=>{this.exitLayer(e)})),n.addEventListener("mouseout",(e=>{this.endExitLayer(e)}));const o=document.getElementById(`layer-id-${e}`);k.$addModalEvent(o),o.addEventListener("mousedown",(e=>{this.selectLayer(e)}));const l=o.getElementsByClassName("timeline-layer-controller")[0];l.addEventListener("mouseover",(e=>{this.activeMoveLayer(e)})),l.addEventListener("mouseout",(e=>{this.inactiveMoveLayer(e)})),l.addEventListener("contextmenu",(e=>{this.showLayerMenu(e)}));const c=o.getElementsByClassName("timeline-frame-controller")[0];c.addEventListener("wheel",(e=>{let t=0|e.deltaY,a=0|e.deltaX;if(k.$shiftKey&&(a=0|e.deltaY,t=0),!a||t>0)return!1;e.stopPropagation(),e.preventDefault();const r=k.$timelineHeader.scrollX;if(!r&&0>a)return!1;window.requestAnimationFrame((()=>{k.$timelineHeader.scrollX=k.$clamp(r+a,0,Number.MAX_VALUE),k.$timelineHeader.rebuild(),k.$timelineMarker.move(),this.moveTimeLine()}))}),{passive:!1}),c.addEventListener("mouseover",(e=>{this.showLayerPreview(e)})),c.addEventListener("mouseout",(()=>{this.hideLayerPreview()})),c.addEventListener("mousedown",(e=>{this.selectFrame(e)})),c.addEventListener("dblclick",(e=>{this.selectRange(e)}));const d=document.getElementById(`layer-light-icon-${e}`);d.addEventListener("mousedown",(e=>{this.clickLight(e)})),d.addEventListener("mouseover",(e=>{this._$lightState&&this.clickLight(e)}));const h=document.getElementById(`layer-disable-icon-${e}`);h.addEventListener("mousedown",(e=>{this.clickDisable(e)})),h.addEventListener("mouseover",(e=>{this._$disableState&&this.clickDisable(e)}));const u=document.getElementById(`layer-lock-icon-${e}`);u.addEventListener("mousedown",(e=>{this.clickLock(e)})),u.addEventListener("mouseover",(e=>{this._$lockState&&this.clickLock(e)}));document.getElementById(`frame-scroll-id-${e}`).addEventListener("contextmenu",(e=>{k.$timelineMenu.show(e)}))}this.rebuild(e)}rebuild(e){const t=document.getElementById(`frame-scroll-id-${e}`);if(!t)return;const a=k.$currentWorkSpace().scene.getLayer(e);if(!a)return;const r=k.$timelineTool.timelineWidth,i=k.$timelineHeader.width/(r+1)|0;if(!t.children.length){for(let a=0;i>=a;++a)this.createElement(t,e,a+1);a._$children=[]}if(t.children.length>i+1){const e=i+1;for(;t.children.length>e;)t.children[e].remove();a._$children=[]}if(i>t.children.length){let r=0|t.lastElementChild.dataset.frame;const s=i-t.children.length;for(let a=0;s>=a;++a)this.createElement(t,e,++r);a._$children=[]}a._$children.length||(a._$children=Array.from(t.children));let s=k.$timelineHeader.leftFrame;for(let e=0;a._$children.length>e;++e){const t=s+e,r=a._$children[e];r.setAttribute("data-frame",`${t}`),r.setAttribute("data-frame-state","empty"),r.setAttribute("class",t%5!=0?"frame":"frame frame-pointer")}a.reloadStyle()}createElement(e,t,a=1){e.insertAdjacentHTML("beforeend",`<div class="${a%5!=0?"frame":"frame frame-pointer"}" data-frame-state="empty" data-layer-id="${t}" data-frame="${a}"></div>`)}removeFrame(){if(!this.targetLayer)return;this.save();let e=!1;const t=k.$timelineFrame.currentFrame,a=k.$currentWorkSpace().scene,r=this.targetFrames;for(const i of r.keys()){const r=a.getLayer(i),s=r.getActiveCharacter(t);if(!s.length)continue;e=!0;let n=null;for(let e=0;e<s.length;++e){const a=s[e];n||(n=a.getRange(t)),a.remove(r)}r.addEmptyCharacter(new L({startFrame:n.startFrame,endFrame:n.endFrame})),r.reloadStyle()}this.clearActiveFrames(),this.activeCharacter(),e&&this.reloadScreen(),super.focusOut()}attachLayer(){if(!this.targetLayer){const e=k.$currentWorkSpace().scene;let t=document.getElementById("timeline-content").children[0];t||(e.addLayer(),t=document.getElementById("timeline-content").children[0]);const a=k.$shiftKey,r=k.$ctrlKey;k.$shiftKey=!1,k.$ctrlKey=!1,this.targetLayer=t;const i=e.getLayer(0|t.dataset.layerId);this.addTargetFrame(i,k.$timelineFrame.currentFrame),k.$shiftKey=a,k.$ctrlKey=r}}exitLayer(e){if(-1===this._$moveLayerId)return;const t=0|e.target.dataset.layerId;let a=document.getElementById(`layer-id-${t}`);const r=Array.from(document.getElementById("timeline-content").children),i=k.$currentWorkSpace().scene,s=r.indexOf(a),n=r[s+1];if(n){switch(i.getLayer(0|n.dataset.layerId).mode){case B.MASK_IN:case B.GUIDE_IN:return}}this._$exitLayer=a,document.getElementById(`timeline-exit-icon-${t}`).style.opacity="1",document.getElementById(`timeline-exit-in-icon-${t}`).style.opacity="1"}endExitLayer(e){if(-1===this._$moveLayerId)return;this._$exitLayer=null;const t=0|e.target.dataset.layerId;document.getElementById(`timeline-exit-icon-${t}`).style.opacity="0",document.getElementById(`timeline-exit-in-icon-${t}`).style.opacity="0"}clickLight(e){if(e.button)return;k.$endMenu(),e.stopPropagation(),this._$lightState=!0,this._$clearClickParam||(this._$clearClickParam=this.clearClickParam.bind(this)),window.addEventListener("mouseup",this._$clearClickParam);const t=0|e.target.dataset.layerId,a=document.getElementById(`layer-light-icon-${t}`),r=document.getElementById(`layer-id-${t}`),i=k.$currentWorkSpace().scene.getLayer(t);i.light=!i.light,i.light?(a.children[0].style.display="none",a.style.backgroundImage=`url('${i.getHighlightURL()}')`,r.style.borderBottom=`1px solid ${i.color}`):(a.children[0].style.display="",a.style.backgroundImage="",r.style.borderBottom="")}clickLock(e){e.button||(k.$endMenu(),e.stopPropagation(),this._$lockState=!0,this._$clearClickParam||(this._$clearClickParam=this.clearClickParam.bind(this)),window.addEventListener("mouseup",this._$clearClickParam),this.changeType(e.target,"lock"),k.$transformController.show().relocation())}clickDisable(e){e.button||(k.$endMenu(),e.stopPropagation(),this._$disableState=!0,this._$clearClickParam||(this._$clearClickParam=this.clearClickParam.bind(this)),window.addEventListener("mouseup",this._$clearClickParam),this.changeType(e.target,"disable"),k.$transformController.show(),k.$clearShapePointer(),this.reloadScreen())}changeType(e,t){const a=0|e.dataset.layerId,r=document.getElementById(`layer-id-${a}`),i=k.$currentWorkSpace().scene.getLayer(a);i[t]=!i[t],i[t]?(e.classList.remove("icon-disable"),e.classList.add("icon-active"),r.classList.add(`${t}-active`)):(e.classList.add("icon-disable"),e.classList.remove("icon-active"),r.classList.remove(`${t}-active`)),"lock"===t&&this.reloadScreen()}showLayerMenu(e){e.preventDefault(),e.stopPropagation();const t=0|e.target.dataset.layerId;k.$timelineLayer.targetLayers.has(`layer-id-${t}`)||(this.targetLayer=document.getElementById(`layer-id-${t}`)),k.$timelineLayerMenu.show(e)}showInput(e){e.stopPropagation(),k.$keyLock=!0;const t=0|e.target.dataset.layerId,a=document.getElementById(`layer-name-input-${t}`);a.value=e.target.textContent,a.style.display="",a.focus(),e.target.style.display="none",this._$endInput||(this._$endInput=this.endInput.bind(this)),a.addEventListener("focusout",this._$endInput),a.addEventListener("keypress",this._$endInput)}endInput(e){if("Enter"===e.key)return void e.target.blur();if("focusout"!==e.type)return;this.save(),e.stopPropagation();const t=e.target,a=0|t.dataset.layerId;k.$currentWorkSpace().scene.getLayer(a).name=t.value;const r=document.getElementById(`layer-name-${a}`);r.textContent=t.value,r.style.display="",t.style.display="none",t.removeEventListener("focusout",this._$endInput),t.removeEventListener("keypress",this._$endInput),super.focusOut()}moveLayer(e){k.$setCursor("grabbing"),window.requestAnimationFrame((()=>{const t=document.getElementById("timeline-content");e.pageY+20>window.innerHeight&&(t.scrollTop+=e.pageY+20-window.innerHeight),t.scrollTop>0&&t.offsetTop>e.pageY-8&&(t.scrollTop+=e.pageY-t.offsetTop-8)}))}executeMoveLayer(){window.removeEventListener("mousemove",this._$moveLayer),window.removeEventListener("mouseup",this._$executeMoveLayer);let e=null;const t=k.$currentWorkSpace().scene;if(this._$exitLayer){switch(e=t.getLayer(0|this._$exitLayer.dataset.layerId),e.mode){case B.MASK_IN:for(const t of this.targetLayers.values())if(t.id===e.maskId)return this._$moveLayerId=-1,this._$destLayer=null,this._$exitLayer=null,void k.$setCursor("auto");break;case B.GUIDE_IN:for(const t of this.targetLayers.values())if(t.id===e.guideId)return this._$moveLayerId=-1,this._$destLayer=null,this._$exitLayer=null,void k.$setCursor("auto")}document.getElementById(`timeline-exit-icon-${e.id}`).style.opacity="0",document.getElementById(`timeline-exit-in-icon-${e.id}`).style.opacity="0",this._$destLayer=this._$exitLayer}if(this._$destLayer){this._$destLayer.classList.remove("move-target");const a=t.getLayer(0|this._$destLayer.dataset.layerId);if(null===e)switch(a.mode){case B.MASK:case B.MASK_IN:case B.GUIDE:case B.GUIDE_IN:for(const e of this.targetLayers.values()){switch(t.getLayer(0|e.dataset.layerId).mode){case B.MASK:case B.GUIDE:return this._$moveLayerId=-1,this._$destLayer=null,this._$exitLayer=null,void k.$setCursor("auto")}}}this.save();const r=document.getElementById("timeline-content"),i=Array.from(this.targetLayers.values());if(i.length>1){for(let e=0;e<i.length;++e){const a=i[e],r=t.getLayer(0|a.dataset.layerId);switch(r.mode){case B.MASK_IN:{const t=document.getElementById(`layer-id-${r.maskId}`);i.indexOf(t)>-1&&(i.splice(e,1),--e)}break;case B.GUIDE_IN:{const t=document.getElementById(`layer-id-${r.guideId}`);i.indexOf(t)>-1&&(i.splice(e,1),--e)}}}const e=Array.from(r.children);i.sort(((t,a)=>{const r=e.indexOf(t),i=e.indexOf(a);switch(!0){case r>i:return-1;case r<i:return 1;default:return 0}}))}const s=[];for(let n=0;n<i.length;++n){const o=i[n],l=t.getLayer(0|o.dataset.layerId);switch(a.mode){case B.MASK:case B.MASK_IN:e?null!==e.maskId&&e.maskId===l.maskId&&(l.maskId=null,l.mode=B.NORMAL,l.showIcon()):(l.maskId=null===a.maskId?a.id:a.maskId,l.mode=B.MASK_IN,l.showIcon());break;case B.GUIDE:case B.GUIDE_IN:e?null!==e.guideId&&e.guideId===l.guideId&&(l.guideId=null,l.mode=B.NORMAL,l.showIcon()):(l.guideId=null===a.guideId?a.id:a.guideId,l.mode=B.GUIDE_IN,l.showIcon());break;default:switch(l.mode){case B.MASK_IN:l.maskId=null,l.mode=B.NORMAL,l.showIcon();break;case B.GUIDE_IN:l.guideId=null,l.mode=B.NORMAL,l.showIcon()}}switch(s.length&&(s.length=0),l.mode){case B.MASK:{const e=Array.from(r.children);let a=e.indexOf(o);for(;;){const r=e[++a];if(!r)break;if(t.getLayer(0|r.dataset.layerId).mode!==B.MASK_IN)break;s.unshift(r)}}break;case B.GUIDE:{const e=Array.from(r.children);let a=e.indexOf(o);for(;;){const r=e[++a];if(!r)break;if(t.getLayer(0|r.dataset.layerId).mode!==B.GUIDE_IN)break;s.unshift(r)}}}if(r.insertBefore(o,this._$destLayer.nextElementSibling),s.length)for(let e=0;e<s.length;++e)r.insertBefore(s[e],o.nextElementSibling)}const n=[],o=r.children;for(let e=0;e<o.length;++e)n.push(t.getLayer(0|o[e].dataset.layerId));t.clearLayer();for(let e=0;e<n.length;++e){const a=n[e];t.setLayer(a.id,a)}this.reloadScreen()}else if(this._$moveLayerId!==this._$selectLayerId){const e=document.getElementById(`layer-id-${this._$moveLayerId}`);this.activeLayer(e)}super.focusOut(),this._$selectLayerId=-1,this._$moveLayerId=-1,this._$destLayer=null,this._$exitLayer=null,k.$setCursor("auto")}activeMoveLayer(e){if(this._$destLayer=null,-1===this._$moveLayerId)return;e.stopPropagation();const t=e.currentTarget.parentNode;this.targetLayers.has(t.id)||(this._$destLayer=t,t.classList.add("move-target"))}inactiveMoveLayer(e){-1!==this._$moveLayerId&&this._$destLayer&&(e.stopPropagation(),this._$destLayer.classList.remove("move-target"),this._$destLayer=null)}moveTimeLine(){const e=k.$currentWorkSpace().scene;if(!e)return;const t=this.clientHeight,a=k.$timelineScroll.y/k.$timelineTool.timelineHeight|0;let r=0,i=0;for(const s of e._$layers.values())if(a>r){if("none"!==s.display){const e=document.getElementById(`layer-id-${s.id}`);e&&(s.display=e.style.display="none")}r++}else{if("none"===s.display){const e=document.getElementById(`layer-id-${s.id}`);e&&(s.display=e.style.display="")}if(this.rebuild(s.id),k.$timelineTool.timelineHeight*++i>t)break;r++}this.moveActiveFrame()}showLayerPreview(e){if(!k.$timelineTool.preview)return;const t=0|e.target.dataset.layerId,a=e.target;window.requestAnimationFrame((()=>{const r=k.$currentWorkSpace();let i=0|a.dataset.frame;const s=r.scene.getLayer(t),n=s.getActiveCharacter(i);if(n.length){clearTimeout(this._$timerId),s.sort(n,i);const t=document.getElementById("timeline-preview-modal"),{Sprite:a,BitmapData:o}=window.next2d.display,{Matrix:l,ColorTransform:c}=window.next2d.geom,d=new a;let h=Number.MAX_VALUE,u=-Number.MAX_VALUE,m=Number.MAX_VALUE,g=-Number.MAX_VALUE;for(let e=0;e<n.length;++e){const t=n[e],a=t.getPlace(i),s=r.getLibrary(t.libraryId);if(s.type===A.MOVIE_CLIP){const e=a.loop&&a.loop.type===Ce.DEFAULT?{startFrame:t.startFrame,endFrame:t.endFrame}:t.getRange(i);i=k.$getFrame(a,e,i,s.totalFrame)}const o=s.createInstance(i);o.transform.matrix=new l(a.matrix[0],a.matrix[1],a.matrix[2],a.matrix[3],a.matrix[4],a.matrix[5]),o.transform.colorTransform=new c(a.colorTransform[0],a.colorTransform[1],a.colorTransform[2],a.colorTransform[3],a.colorTransform[4],a.colorTransform[5],a.colorTransform[6],a.colorTransform[7]);const p=s.getBounds(a.matrix,i);h=Math.min(h,p.xMin),u=Math.max(u,p.xMax),m=Math.min(m,p.yMin),g=Math.max(g,p.yMax),d.addChild(o)}const p=Math.ceil(Math.abs(u-h)),f=Math.ceil(Math.abs(g-m)),$=Math.min(120/p,120/f),y=window.devicePixelRatio,_=new o(p*$*y,f*$*y,!0,0),b=new l(y,0,0,y,-h*y,-m*y);b.scale($,$),_.draw(d,b,null,k.$getCanvas(),(a=>{for(;t.children.length;){const e=t.children[0];k.$poolCanvas(e),e.remove()}let r="";for(r+=`left: ${e.pageX+10}px;`,r+=`top: ${e.pageY-t.offsetHeight-10}px;`,r+=`background-color: ${document.getElementById("stage-bgColor").value};`,t.setAttribute("style",r),a.style.width=_.width/y+"px",a.style.height=_.height/y+"px",t.appendChild(a),t.classList.contains("fadeIn")||t.setAttribute("class","fadeIn");k.$sleepCanvases.length;)k.$poolCanvas(k.$sleepCanvases.pop())}))}}))}hideLayerPreview(){if(!document.getElementById("timeline-preview").classList.contains("timeline-preview-active"))return;const e=document.getElementById("timeline-preview-modal");e.classList.contains("fadeOut")||(this._$timerId=setTimeout((()=>{e.classList.contains("fadeOut")||e.setAttribute("class","fadeOut")}),1e3))}selectLayer(e){if(e.button||k.$keyLock)return;e.stopPropagation(),k.$endMenu();const t=e.currentTarget;t.classList.contains("active")||this.activeLayer(t),this._$moveLayer||(this._$moveLayer=this.moveLayer.bind(this)),this._$executeMoveLayer||(this._$executeMoveLayer=this.executeMoveLayer.bind(this)),this._$moveLayerId=0|t.dataset.layerId,window.addEventListener("mousemove",this._$moveLayer),window.addEventListener("mouseup",this._$executeMoveLayer)}activeLayer(e){this.clearActiveFrames(),this.targetLayer=e,this._$selectLayerId=0|e.dataset.layerId;const t=k.$currentWorkSpace().scene,a=k.$timelineFrame.currentFrame;for(const e of this.targetLayers.values()){const r=0|e.dataset.layerId,i=t.getLayer(r);this.targetFrames.delete(r),this.addTargetFrame(i,a)}k.$timelineMarker.move(),this.activeCharacter()}selectRange(e){clearTimeout(this._$clickTimerId),e.stopPropagation(),k.$endMenu();const t=e.target,a=k.$timelineFrame.currentFrame,r=0|t.dataset.layerId,i=k.$currentWorkSpace().scene.getLayer(r);let s=null;const n=i.getActiveCharacter(a);if(n.length&&(s=n[0]),s||(s=i.getActiveEmptyCharacter(a)),!s)return;k.$tools.getDefaultTool("arrow").clear(),this.targetLayer=document.getElementById(`layer-id-${r}`);const o=s.getRange(a);for(let e=o.startFrame;o.endFrame>e;++e)this.addTargetFrame(i,e);this.moveFrame(a)}selectFrame(e){if(e.button)return;e.stopPropagation(),k.$endMenu();const t=document.getElementById("timeline-preview-modal");t.classList.contains("fadeOut")||t.setAttribute("class","fadeOut");const a=e.target,r=0|a.dataset.frame;this.changeLabel(r);const i=k.$tools.getDefaultTool("arrow"),s=0|a.dataset.layerId;let n=!1;if(this.targetFrames.has(s)){n=this.targetFrames.get(s).indexOf(r)>-1}if(n){const t=this.targetFrames.values().next().value;if(!t.length)return;clearTimeout(this._$clickTimerId),this._$clickTimerId=window.setTimeout((()=>{const a=this.targetLayer;if(!a)return;const r=Array.from(document.getElementById("timeline-content").children);let i=r.indexOf(a);if(this.targetFrames.size>1)for(const e of this.targetFrames.keys()){const t=document.getElementById(`layer-id-${e}`);t&&(i=Math.min(i,r.indexOf(t)))}const s=k.$timelineTool.getFirstFrame(),n=k.$currentWorkSpace().scene.getLayer(0|r[i].dataset.layerId).getChildren(s),o=document.getElementById("timeline-content"),l=t.length*(k.$timelineTool.timelineWidth+1)-5;this._$clientX=n.offsetLeft,this._$clientY=n.offsetTop-o.scrollTop;const c=document.getElementById("target-group");let d=`width: ${l}px;`;d+=`height: ${this.targetFrames.size*k.$timelineTool.timelineHeight-5}px;`,d+=`left: ${this._$clientX}px;`,d+=`top: ${this._$clientY}px;`,c.setAttribute("style",d),c.dataset.frame=`${s}`,c.dataset.index=`${i}`;const h=k.$timelineTool.timelineWidth+1;for(;!(this._$clientX+h>e.clientX);)this._$clientX+=h;for(;!(this._$clientY+30>e.clientY);)this._$clientY+=30;this._$moveTargetGroup||(this._$moveTargetGroup=this.moveTargetGroup.bind(this)),window.addEventListener("mousemove",this._$moveTargetGroup),this._$clickTimerId=-1}),200),this._$endTargetGroup||(this._$endTargetGroup=this.endTargetGroup.bind(this)),window.addEventListener("mouseup",this._$endTargetGroup)}else{if(k.$shiftKey)return void this.multiSelect(null,a);k.$ctrlKey||i.clear(),this.targetLayer=document.getElementById(`layer-id-${s}`);const e=k.$currentWorkSpace().scene.getLayer(s);this.addTargetFrame(e,r),this._$multiSelect||(this._$multiSelect=this.multiSelect.bind(this)),this._$endMultiSelect||(this._$endMultiSelect=this.endMultiSelect.bind(this)),window.addEventListener("mousemove",this._$multiSelect),window.addEventListener("mouseup",this._$endMultiSelect),this.moveFrame(r)}}changeLabel(e){const t=document.getElementById("label-name");if(!t)return;t.blur(),t.value="";const a=k.$currentWorkSpace().scene;a.hasLabel(e)&&(t.value=a.getLabel(e))}moveFrame(e){const t=[];if(k.$timelineFrame.currentFrame!==e){k.$timelineFrame.currentFrame=e;const a=k.$timelineTool.timelineWidth,r=k.$timelineHeader.leftFrame,i=k.$timelineHeader.width/(a+1)|0;switch(!0){case r>e:case e>r+i-1:k.$timelineHeader.scrollX=(e-1)*a,k.$timelineHeader.rebuild(),this.moveTimeLine()}k.$timelineMarker.move(),t.push(this.reloadScreen())}Promise.all(t).then((()=>{this.activeCharacter()}))}moveTargetGroup(e){window.requestAnimationFrame((()=>{const t=document.getElementById("target-group"),a=this.targetLayer;if(!a)return;const r=document.getElementById(`frame-scroll-id-${a.dataset.layerId}`),i=k.$timelineTool.timelineWidth,s=i+1,n=0|t.dataset.frame,o=0|t.dataset.index;if(e.clientX-this._$clientX>s){if(t.offsetLeft+t.offsetWidth+s>r.offsetLeft+r.offsetWidth){const a=document.getElementById("timeline-controller-base");return void(e.pageX>a.offsetLeft+a.offsetWidth&&(k.$timelineHeader.scrollX+=i,k.$timelineHeader.rebuild(),k.$timelineLayer.moveTimeLine(),t.dataset.frame=`${n+1}`))}return t.style.left=`${t.offsetLeft+s}px`,t.dataset.frame=`${n+1}`,void(this._$clientX+=s)}if(this._$clientX-e.clientX>s){if(r.offsetLeft>t.offsetLeft-s){const a=document.getElementById("timeline-controller-base");return void(k.$timelineHeader.scrollX>0&&a.offsetLeft>e.pageX&&(k.$timelineHeader.scrollX-=i,k.$timelineHeader.rebuild(),k.$timelineLayer.moveTimeLine(),t.dataset.frame=""+(n-1)))}return t.style.left=t.offsetLeft-s+"px",t.dataset.frame=""+(n-1),void(this._$clientX-=s)}if(e.clientY-this._$clientY>k.$timelineTool.timelineHeight-1){const e=document.getElementById("timeline-content"),a=Math.min(e.children.length*k.$timelineTool.timelineHeight,e.offsetHeight);return t.offsetTop+t.offsetHeight+k.$timelineTool.timelineHeight>e.offsetTop+a?void(k.$timelineScroll.maxY>=k.$timelineScroll.y+k.$timelineTool.timelineHeight&&(t.dataset.index=`${o+1}`,k.$timelineScroll.execute(0,k.$timelineTool.timelineHeight))):(t.style.top=`${t.offsetTop+k.$timelineTool.timelineHeight}px`,t.dataset.index=`${o+1}`,void(this._$clientY+=k.$timelineTool.timelineHeight-1))}if(this._$clientY-e.clientY>0){if(document.getElementById("timeline-content").offsetTop>t.offsetTop-k.$timelineTool.timelineHeight)return void(k.$timelineScroll.y>0&&(t.dataset.index=""+(o-1),k.$timelineScroll.execute(0,-k.$timelineTool.timelineHeight)));t.style.top=t.offsetTop-k.$timelineTool.timelineHeight+"px",t.dataset.index=""+(o-1),this._$clientY-=k.$timelineTool.timelineHeight-1}}))}pasteFrame(e,t,a,r,i,s=!1,n=!1,o=null,l=null){const c=r+i.length,d=this.createMoveCharacters(e,i,o,l),h=d.characters,u=d.emptys,m=this.createTweenMap(e,h);let g=0;const p=a+i.length;if(!s){const t=this.deleteSourceKeyFrame(e,h,a,p),r=this.deleteSourceEmptyKeyFrame(e,a,p);g=Math.max(t,r)}const f=this.deleteDestinationKeyFrame(t,r,c),$=this.deleteDestinationEmptyKeyFrame(t,r,c);this.moveKeyFrame(t,h,r-a),this.moveEmptyKeyFrame(t,u,r-a);const y=Math.max(c,g,f,$),_=Math.min(a,r);if(n||t.id!==e.id){const e=Math.max(f,$);this.adjustBehindFrame(t,1,e-1)}else this.adjustBehindFrame(t,_,y-1);(n||t.id!==e.id)&&this.adjustBehindFrame(e,1,g-1),r>1&&this.adjustPreviousFrame(t,r,y),1!==a||!n&&t.id===e.id||this.adjustPreviousFrame(e,r,g),this.characterIntegration(t,h),m.size&&!n&&t.id===e.id&&this.adjustTween(h,m,r-a),t.reloadStyle(),e!==t&&e.reloadStyle()}endTargetGroup(){if(window.removeEventListener("mousemove",this._$moveTargetGroup),window.removeEventListener("mouseup",this._$endTargetGroup),this._$clickTimerId>0)return clearTimeout(this._$clickTimerId),void(this._$clickTimerId=-1);this.hideTargetGroup();const e=this.targetLayer;if(!e)return;const t=document.getElementById("target-group"),a=0|t.dataset.frame;let r=0|t.dataset.index;const i=Array.from(document.getElementById("timeline-content").children);let s=i.indexOf(e);if(this.targetFrames.size>1)for(const e of this.targetFrames.keys()){const t=document.getElementById(`layer-id-${e}`);t&&(s=Math.min(s,i.indexOf(t)))}const n=0|i[r].dataset.layerId,o=0|i[s].dataset.layerId,l=k.$timelineTool.getFirstFrame();if(n===o&&l===a)return;this.save();const c=[];for(const[e,t]of this.targetFrames){const a=document.getElementById(`layer-id-${e}`);c.push({index:i.indexOf(a),value:{layerId:e,frames:t}})}c.sort(((e,t)=>{const a=0|e.index,r=0|t.index;switch(!0){case a>r:return 1;case a<r:return-1;default:return 0}}));let d=null;const h=k.$currentWorkSpace().scene;for(let e=0;e<c.length;++e){const t=c[e].value,s=t.layerId,n=t.frames;if(!i[r])break;d||(d=n.slice(),d.length>1&&d.sort(((e,t)=>{const a=0|e,r=0|t;switch(!0){case a>r:return 1;case a<r:return-1;default:return 0}})));const o=h.getLayer(s),u=h.getLayer(0|i[r++].dataset.layerId);this.pasteFrame(o,u,l,a,d,k.$altKey)}k.$tools.getDefaultTool("arrow").clear(),this.reloadScreen(),this._$saved=!1}adjustTween(e,t,a){for(const[r,i]of e){const e=i.endFrame-1;if(e>1&&e>i.startFrame&&i.hasTween(e)){const t=i.getRange(e),a=i.getRange(t.startFrame-1);if(i.hasTween(a.startFrame)){i.getTween(a.startFrame).endFrame=t.endFrame;i.getPlace(e).tweenFrame=a.startFrame,i.deleteTween(e)}}if(t.has(r))for(const[e,s]of t.get(r)){const t=i.getRange(e+a);s.tweenFrame=t.startFrame,i.setPlace(t.endFrame-1,s),k.$tweenController.relocationPlace(i,t.startFrame)}}}characterIntegration(e,t){for(const a of t.values()){let t=a;const r=a.startFrame-1;if(r){const i=e.getActiveCharacter(r);for(let r=0;r<i.length;++r){const s=i[r];if(s.libraryId===a.libraryId&&s.endFrame===a.startFrame){for(const[e,a]of s._$places)t.setPlace(e,a);for(const[e,a]of s._$tween)t.setTween(e,a);t.startFrame=s.startFrame,e.deleteCharacter(s.id);break}}}const i=a.endFrame,s=e.getActiveCharacter(i);for(let a=0;a<s.length;++a){const r=s[a];if(r.libraryId===t.libraryId&&r.startFrame===t.endFrame){for(const[e,a]of r._$places)t.setPlace(e,a);for(const[e,a]of r._$tween)t.setTween(e,a);t.endFrame=r.endFrame,e.deleteCharacter(r.id);break}}}}adjustBehindFrame(e,t,a){let r=a+1,i=a;for(;i>=t;){if(!e.getActiveCharacter(i).length&&!e.getActiveEmptyCharacter(i)){r=i+1;break}--i}let s=0;for(i=r-1;i>0;){const t=e.getActiveCharacter(i);if(t.length){for(let e=0;e<t.length;++e){const a=t[e],i=a.getPlace(a.endFrame-1);if(i.tweenFrame){a.getTween(i.tweenFrame).endFrame=r;const e=a.endFrame-1;for(let t=a.endFrame;r>t;++t)a.setPlace(t,a.getClonePlace(e))}a.endFrame=r,s=a.startFrame}break}const a=e.getActiveEmptyCharacter(i);if(a){a.endFrame=r,s=a.startFrame;break}--i}s&&s>t&&this.adjustBehindFrame(e,t,s-1)}adjustPreviousFrame(e,t,a){if(!a)return;let r=1;for(;t>=r&&(e.getActiveCharacter(r).length||e.getActiveEmptyCharacter(r));)++r;if(r>t)return;const i=new L({startFrame:r});for(;a>r&&!e.getActiveCharacter(r).length&&!e.getActiveEmptyCharacter(r);)++r;i.endFrame=r,e.addEmptyCharacter(i)}moveEmptyKeyFrame(e,t,a){for(let r=0;r<t.length;++r){const i=t[r];i.move(a),e.addEmptyCharacter(i)}}moveKeyFrame(e,t,a){for(const r of t.values())r.move(a),e.addCharacter(r)}deleteSourceEmptyKeyFrame(e,t,a){let r=0;const i=e._$emptys.slice(0);for(let s=0;s<i.length;++s){const n=i[s];if(t>=n.endFrame)continue;if(n.startFrame>=a)continue;if(r=Math.max(r,n.endFrame),r.startFrame>=t&&a>=r.endFrame){e.deleteEmptyCharacter(n);continue}let o=!1;for(let r=t;a>r;++r)if(n.startFrame===r){e.deleteEmptyCharacter(n),o=!0;break}o||n.endFrame>t&&(n.endFrame=t)}return r}deleteSourceKeyFrame(e,t,a,r){let i=0;for(const s of t.keys()){const t=e.getCharacter(s);if(!t)continue;if(t.startFrame>=a&&r>=t.endFrame){e.deleteCharacter(t.id),i=Math.max(i,t.endFrame);continue}if(a>t.startFrame){const s=t.getRange(r-1);i=Math.max(i,s.endFrame);const n=new M;n.libraryId=t.libraryId,n.startFrame=t.startFrame,n.endFrame=a;const o=new Map;for(const[e,r]of t._$places)a>e?n.setPlace(e,r):s.endFrame>e||o.set(e,r);const l=new Map;for(const[e,r]of t._$tween)a>e?n.setTween(e,r):s.endFrame>e||l.set(e,r);if(e.addCharacter(n),!o.size){e.deleteCharacter(t.id);continue}t._$tween=l,t._$places=o,t._$startFrame=s.endFrame,t._$cachePlaces.length=0;continue}const n=t.getRange(r-1);i=Math.max(i,n.endFrame);const o=new Map;for(const[e,a]of t._$places)n.endFrame>e||o.set(e,a);const l=new Map;for(const[e,a]of t._$tween)n.endFrame>e||l.set(e,a);o.size?(t._$tween=l,t._$places=o,t.startFrame=n.endFrame,t._$cachePlaces.length=0):e.deleteCharacter(t.id)}return i}deleteDestinationEmptyKeyFrame(e,t,a){const r=e._$emptys.slice();let i=0;for(let s=0;s<r.length;++s){const n=r[s];t>=n.endFrame||(n.startFrame>=a||(i=Math.max(n.endFrame,i),t>n.startFrame?n.endFrame=t:e.deleteEmptyCharacter(n)))}return i}deleteDestinationKeyFrame(e,t,a){let r=1;const i=e._$characters.slice();for(let s=0;s<i.length;++s){const n=i[s];if(!(t>=n.endFrame)&&!(n.startFrame>=a))if(n.startFrame>=t&&a>=n.endFrame)r=Math.max(r,n.endFrame),e.deleteCharacter(n.id);else{const i=n.getRange(a-1);r=Math.max(r,i.endFrame);for(let e=t;a>e&&!(e>=n.endFrame);++e){if(!n.hasPlace(e))continue;const a=n.getPlace(e);if(a.tweenFrame){const r=n.getRange(e);if(n.hasTween(e)){for(let e=r.startFrame;r.endFrame>e;++e)n.deletePlace(e);n.deleteTween(e)}else{for(let e=t;r.endFrame>e;++e)n.deletePlace(e);n.getTween(a.tweenFrame).endFrame=t,k.$tweenController.relocationPlace(n,a.tweenFrame)}}n.deletePlace(e)}if(n._$places.size){if(n.hasPlace(i.endFrame)){const t=n.clone(),a=new Map;for(const[e,r]of t._$places)i.endFrame>e||(n.deletePlace(e),a.set(e,r));const r=new Map;for(const[e,a]of t._$tween)i.endFrame>e||(n.deleteTween(e),r.set(e,a));a.size&&(t.startFrame=i.endFrame,t._$tween=r,t._$places=a,e.addCharacter(t))}if(n._$places.size){const e=n.getRange(t);n.hasTween(e.startFrame)&&(n.getTween(e.startFrame).endFrame=t),n.endFrame=t}else e.deleteCharacter(n.id)}else e.deleteCharacter(n.id)}}return Math.max(r,a)}createMoveCharacters(e,t,a=null,r=null){const i=new Map,s=[];let n=null,o=1;for(let l=0;l<t.length;++l){const c=t[l];if(e.getActiveEmptyCharacter(c)||e.getActiveCharacter(c).length){const t=e.getActiveCharacter(c);if(t.length){let e=0;if(a)for(let r=0;r<t.length;++r){const i=t[r];a.has(i.libraryId)&&e++}if(t.length>e){n&&(n.endFrame=c,s.push(n),n=null);for(let e=0;e<t.length;++e){const s=t[e];if(a&&a.has(s.libraryId))continue;if(!i.has(s.id)){const e=new M;e.libraryId=r?r.get(s.libraryId):s.libraryId,e.startFrame=c,e.endFrame=c+1,e.screenX=s.screenX,e.screenY=s.screenY;const t=s.getClonePlace(c);if(e.setPlace(c,t),t.tweenFrame){const a=s.getCloneTween(t.tweenFrame);a.startFrame=c,a.endFrame=c+1,t.tweenFrame=c,e.setTween(c,a)}i.set(s.id,e),o=Math.max(e.endFrame,o);continue}const n=i.get(s.id);if(s.hasPlace(c)){const e=s.getClonePlace(c);e.tweenFrame&&(e.tweenFrame=e.tweenFrame===c?c:n.getPlace(c).tweenFrame,n.hasTween(e.tweenFrame)||n.setTween(e.tweenFrame,s.getCloneTween(e.tweenFrame)),n.getTween(e.tweenFrame).endFrame=c+1),n.setPlace(c,e)}n.endFrame=c+1,o=Math.max(n.endFrame,o)}continue}}if(!n){n=new L,n.startFrame=c,n.endFrame=c+1,o=Math.max(n.endFrame,o);continue}n.endFrame=c+1,o=Math.max(n.endFrame,o)}else{if(n){n.endFrame=c+1;continue}if(i.size){let e=0;if(a)for(const t of i.values())a.has(t.libraryId)&&e++;if(i.size>e){for(const e of i.values()){if(e.endFrame!==o)continue;if(a&&a.has(e.libraryId))continue;const t=e.endFrame-1;if(e.hasPlace(t)){const a=e.getPlace(t);a.tweenFrame&&(e.setPlace(c,e.getClonePlace(t)),e.getTween(a.tweenFrame).endFrame=c+1,k.$tweenController.relocationPlace(e,t))}e.endFrame=c+1,o=c+1}continue}}n=new L,n.startFrame=c,n.endFrame=c+1}}return n&&s.push(n),{characters:i,emptys:s}}createTweenMap(e,t){const a=new Map;for(const[r,i]of t){const t=e.getCharacter(r);if(t)for(const e of i._$tween.values()){const i=t.getRange(e.startFrame),s=t.getClonePlace(i.endFrame-1);a.has(r)||a.set(r,new Map),a.get(r).set(e.startFrame,s)}}return a}clearActiveLayers(){for(const e of this.targetLayers.values())e.classList.remove("active");this.targetLayers.clear()}moveActiveFrame(){const e=k.$timelineTool.timelineWidth,t=k.$timelineHeader.width/(e+1)|0,a=k.$timelineHeader.leftFrame,r=a+t,i=k.$timelineTool.getFirstFrame(),s=k.$currentWorkSpace().scene;for(const[e,t]of this._$targetFrames){const n=s.getLayer(e);if(n)for(let e=0;e<t.length;++e){const t=i+e;if(a>t)continue;if(t>r)continue;const s=n.getChildren(t);s&&s.classList.add("frame-active")}}}clearActiveFrames(){const e=k.$currentWorkSpace();if(!e)return this.targetFrames.clear(),void this.hideTargetGroup();const t=e.scene;if(!t)return this.targetFrames.clear(),void this.hideTargetGroup();for(const[e,a]of this.targetFrames){const r=t.getLayer(e);if(r)for(let e=0;e<a.length;++e){const t=r.getChildren(a[e]);t&&t.classList.remove("frame-active")}}this.targetFrames.clear(),this.hideTargetGroup()}hideTargetGroup(){const e=document.getElementById("target-group");e&&(e.style.display="none")}multiSelect(e,t=null){const a=e?e.target:t,r=0|a.dataset.frame;if(!r)return;if(!("layerId"in a.dataset))return;const i=this.targetLayer;if(!i)return;e&&(e.stopPropagation(),e.preventDefault());const s=0|this.targetFrames.keys().next().value,n=this.targetFrames.values().next().value[0],o=Math.min(r,n),l=Math.max(r,n)+1,c=[s],d=0|a.dataset.layerId;if(s!==d){const e=Array.from(document.getElementById("timeline-content").children),t=e.indexOf(i),a=e.indexOf(document.getElementById(`layer-id-${d}`));if(a>t){const r=a-t+1;for(let a=1;a<r;++a)c.push(0|e[t+a].dataset.layerId)}else{const r=t-a+1;for(let a=1;a<r;++a)c.push(0|e[t-a].dataset.layerId)}}k.$shiftKey?this.targetLayer=document.getElementById(`layer-id-${d}`):this.clearActiveFrames();const h=k.$currentWorkSpace().scene;for(let e=0;e<c.length;++e){const t=0|c[e],a=h.getLayer(t);if(a)for(let e=o;e<l;++e)this.addTargetFrame(a,e)}const u=this.targetFrames.get(s);u.splice(u.indexOf(n),1),u.unshift(n),this.activeCharacter()}endMultiSelect(){k.$setCursor("auto"),window.removeEventListener("mousemove",this._$multiSelect),window.removeEventListener("mouseup",this._$endMultiSelect)}};k.$timelineLayerMenu=new class extends De{initialize(){super.initialize();const e=["timeline-layer-normal","timeline-layer-mask","timeline-layer-guide","timeline-layer-copy","timeline-layer-paste","timeline-layer-clone"];for(let t=0;t<e.length;++t){const a=document.getElementById(e[t]);a&&a.addEventListener("mousedown",(e=>{e.stopPropagation(),this.executeFunction(e)}))}const t=document.getElementById("timeline-layer-color");t&&t.addEventListener("change",(e=>{e.stopPropagation(),this.changeLayerHighlightColor(e)}));const a=document.getElementById("timeline-layer-scale");a&&a.addEventListener("change",(e=>{e.stopPropagation(),k.$endMenu(),this.changeLayerScale(e)}))}changeLayerScale(e){const t=+e.target.value,a=We.DEFAULT_TIMELINE_HEIGHT-1,r=k.$timelineScroll.y;k.$timelineScroll.execute(0,-r),k.$timelineTool.timelineHeight=a*t,k.$timelineScroll.execute(0,r)}executeTimelineLayerNormal(){k.$endMenu();const e=k.$timelineLayer.targetLayer;if(!e)return;const t=k.$currentWorkSpace().scene,a=0|e.dataset.layerId,r=t.getLayer(a);if(r.mode===B.NORMAL)return;this.save();const i=this.resetLayer(e);r.mode=B.NORMAL,r.showIcon(),i&&this.reloadScreen(),super.focusOut()}executeTimelineLayerMask(){k.$endMenu();const e=k.$timelineLayer.targetLayer;if(!e)return;const t=k.$currentWorkSpace().scene.getLayer(0|e.dataset.layerId);if(t.mode===B.MASK)return;this.save();const a=this.resetLayer(e);t.mode=B.MASK,t.showIcon(),(a||t.lock)&&this.reloadScreen(),super.focusOut()}executeTimelineLayerCopy(){k.$endMenu(),k.$timelineMenu.executeContextMenuLayerCopy()}executeTimelineLayerPaste(){k.$endMenu(),k.$timelineMenu.executeContextMenuLayerPaste()}executeTimelineLayerClone(){k.$endMenu(),k.$timelineMenu.executeContextMenuLayerClone()}executeTimelineLayerGuide(){k.$endMenu();const e=k.$timelineLayer.targetLayer;if(!e)return;const t=k.$currentWorkSpace().scene.getLayer(0|e.dataset.layerId);if(t.mode===B.GUIDE)return;this.save();const a=this.resetLayer(e);t.mode=B.GUIDE,t.showIcon(),a&&this.reloadScreen(),super.focusOut()}changeLayerHighlightColor(e){this.save();const t=0|e.target.dataset.layerId,a=k.$currentWorkSpace().scene.getLayer(t);a.color=e.target.value;const r=document.getElementById(`layer-light-icon-${t}`);r.children[0].style.backgroundColor=`${a.color}`,a.light&&(r.style.backgroundImage=`url('${a.getHighlightURL()}')`,document.getElementById(`layer-id-${t}`).style.borderBottom=`1px solid ${a.color}`),super.focusOut(),k.$endMenu()}resetLayer(e){const t=k.$currentWorkSpace().scene,a=t.getLayer(0|e.dataset.layerId),r=Array.from(document.getElementById("timeline-content").children);let i=!1,s=r.indexOf(e);switch(a.mode){case B.MASK:for(;;){const e=r[++s];if(!e)break;const a=t.getLayer(0|e.dataset.layerId);if(a.mode!==B.MASK_IN)break;a.maskId=null,a.mode=B.NORMAL,a.showIcon(),i=!0}break;case B.GUIDE:for(;;){const e=r[++s];if(!e)break;const a=t.getLayer(0|e.dataset.layerId);if(a.mode!==B.GUIDE_IN)break;a.guideId=null,a.mode=B.NORMAL,a.showIcon()}}return i}show(e){e.stopPropagation(),k.$endMenu("timeline-layer-menu");const t=0|e.target.dataset.layerId,a=k.$currentWorkSpace().scene.getLayer(t);if(!a)return;const r=document.getElementById("timeline-layer-color");r.dataset.layerId=`${t}`,r.value=a.color;const i=document.getElementById("timeline-layer-menu");i.style.left=`${e.pageX+5}px`,i.style.top=e.pageY-i.clientHeight+"px",15>i.offsetTop&&(i.style.top="10px"),e.pageY+15>window.innerHeight&&(i.style.top=e.pageY-i.clientHeight-15+"px"),i.setAttribute("class","fadeIn")}};k.$timelineMarker=new class extends De{constructor(){super(),this._$left=0,this._$pointerEvents="",this._$clientWidth=0,this._$offsetTop=0,this._$markerClientWidth=0,this._$controllerWidth=-1,this._$timelineHeight=-1,this._$moveMarker=null,this._$endMarker=null}initialize(){super.initialize();const e=document.getElementById("timeline-marker");e&&e.addEventListener("mousedown",(e=>{e.button||this.startMarker()}))}resetMarker(){this._$markerClientWidth=0,this._$controllerWidth=-1,this._$timelineHeight=-1}startMarker(){k.$tools.getDefaultTool("arrow").clear(),this._$pointerEvents="none",document.getElementById("timeline-marker").setAttribute("style",`left: ${this._$left}px; pointer-events: none;`),this._$moveMarker||(this._$moveMarker=this.moveMarker.bind(this)),this._$endMarker||(this._$endMarker=this.endMarker.bind(this)),window.addEventListener("mousemove",this._$moveMarker),window.addEventListener("mouseup",this._$endMarker),document.getElementById("label-name").blur()}moveMarker(e){k.$setCursor("ew-resize"),window.requestAnimationFrame((()=>{const t=document.getElementById("timeline-controller-base"),a=k.$timelineTool.timelineWidth;if(e.pageX+a>t.offsetLeft+t.offsetWidth){const r=(e.pageX+2*a-(t.offsetLeft+t.offsetWidth))/a|0;if(!r)return;return k.$timelineFrame.currentFrame+=r,k.$timelineHeader.scrollX+=r*a,k.$timelineHeader.rebuild(),k.$timelineLayer.moveTimeLine(),this.move(),void this.reloadScreen()}if(t.offsetLeft>e.pageX-a){let r=(t.offsetLeft-e.pageX-a)/a|0;if(!r||1===k.$timelineFrame.currentFrame)return;return r>0&&(r*=-1),k.$timelineFrame.currentFrame+=r,k.$timelineHeader.scrollX+=r*a,k.$timelineHeader.rebuild(),k.$timelineLayer.moveTimeLine(),this.move(),void this.reloadScreen()}let r=0|e.target.dataset.frame;if(!r)return;k.$timelineFrame.currentFrame!==r&&(k.$timelineFrame.currentFrame=r,this.move(),this.reloadScreen())}))}endMarker(){k.$setCursor("auto"),window.removeEventListener("mousemove",this._$moveMarker),window.removeEventListener("mouseup",this._$endMarker),this._$pointerEvents="",document.getElementById("timeline-marker").setAttribute("style",`left: ${this._$left}px;`);const e=k.$currentWorkSpace().scene.getLabel(k.$timelineFrame.currentFrame);document.getElementById("label-name").value=e||""}move(){const e=document.getElementById("timeline-marker");if(!e)return;const t=k.$timelineTool.timelineWidth,a=t+1,r=1+k.$timelineHeader.scrollX/t|0,i=k.$timelineFrame.currentFrame-r;this._$left=i*a;let s=`left: ${this._$left}px;`;this._$pointerEvents&&(s+="pointer-events: none;"),e.setAttribute("style",s),this.setMarkerPosition()}setMarkerPosition(){const e=document.getElementById("timeline-marker");if(!e)return;this._$markerClientWidth||(this._$markerClientWidth=e.clientWidth);const t=document.getElementById("timeline-content");if(!t)return;const a=k.$currentWorkSpace();this._$controllerWidth!==a._$controllerWidth&&(t.clientWidth?(this._$controllerWidth=a._$controllerWidth,this._$clientWidth=t.clientWidth):this._$controllerWidth=-1),this._$timelineHeight!==a._$timelineHeight&&(this._$timelineHeight=a._$timelineHeight,this._$offsetTop=t.offsetTop);const r=document.getElementById("timeline-marker-border");if(!r)return;const i=this._$left;if(0>i||this._$clientWidth>0&&i+318-45>=this._$clientWidth)return void r.setAttribute("style","display: none;");const s=318+this._$markerClientWidth/2+i,n=this._$offsetTop-1,o=window.screen.height;r.setAttribute("style",`height: ${o}px; top: ${0|n}px; left: ${0|s}px;`)}};k.$timelineMenu=new class extends De{constructor(){super(),this._$copyWorkSpaceId=-1,this._$copyLayers=[],this._$copyFrames=new Map,this._$copyScene=null,this._$targetLayer=null}initialize(){super.initialize();const e=["context-menu-script-add","context-menu-frame-add","context-menu-key-frame-add","context-menu-empty-key-frame-add","context-menu-frame-delete","context-menu-key-frame-delete","context-menu-tween-add","context-menu-tween-delete","context-menu-frame-copy","context-menu-frame-paste","context-menu-layer-copy","context-menu-layer-paste","context-menu-layer-clone","context-menu-first-frame","context-menu-last-frame","context-menu-key-frame-change"];for(let t=0;t<e.length;++t){const a=document.getElementById(e[t]);a&&a.addEventListener("mousedown",(e=>{e.stopPropagation(),k.$endMenu(),this.executeFunction(e)}))}}executeContextMenuKeyFrameChange(){if(!k.$timelineLayer.targetLayer)return;this.save();const e=k.$currentWorkSpace().scene;let t=null;const a=k.$timelineLayer.targetFrames;for(let[r,i]of a){const a=e.getLayer(r);if(a._$characters.length||a._$emptys.length){t||(t=i.slice().sort(((e,t)=>{switch(!0){case e>t:return 1;case e<t:return-1;default:return 0}})));for(let e=0;e<t.length;++e){const r=t[e],i=a.getActiveCharacter(r);if(i.length){for(let e=0;e<i.length;++e){const t=i[e],a=t.getPlace(r);if(a.tweenFrame){const e=a.tweenFrame,i=t.getTween(e);for(let e=r;i.endFrame>e;++e){t.getPlace(e).tweenFrame=r}const s=t.getCloneTween(e);s.startFrame=r,s.endFrame=i.endFrame,t.setTween(r,s),i.endFrame=r}else t.hasPlace(r)||t.setPlace(r,t.getClonePlace(r))}continue}const s=a.getActiveEmptyCharacter(r);s&&s.startFrame!==r&&(a.addEmptyCharacter(new L({startFrame:r,endFrame:s.endFrame})),s.endFrame=r)}a.reloadStyle()}}k.$timelineTool.setActiveFrame(),this._$saved=!1}executeContextMenuFirstFrame(){const e=k.$timelineLayer.targetLayer;if(!e)return;k.$tools.getDefaultTool("arrow").clear(),k.$timelineFrame.currentFrame=1,k.$timelineHeader.scrollX=0,k.$timelineHeader.rebuild(),k.$timelineMarker.move(),k.$timelineLayer.moveTimeLine(),k.$timelineLayer.targetLayer=e;const t=k.$currentWorkSpace().scene.getLayer(0|e.dataset.layerId);k.$timelineLayer.addTargetFrame(t,1),this.reloadScreen()}executeContextMenuLastFrame(){const e=k.$timelineLayer.targetLayer;if(!e)return;const t=k.$currentWorkSpace().scene.totalFrame;if(2>t)return;k.$tools.getDefaultTool("arrow").clear();const a=k.$timelineTool.timelineWidth;k.$timelineFrame.currentFrame=t,k.$timelineHeader.scrollX=(t-1)*a,k.$timelineHeader.rebuild(),k.$timelineMarker.move(),k.$timelineLayer.moveTimeLine(),k.$timelineLayer.targetLayer=e;const r=k.$currentWorkSpace().scene.getLayer(0|e.dataset.layerId);k.$timelineLayer.addTargetFrame(r,t),this.reloadScreen()}executeContextMenuFrameCopy(){if(this._$copyScene=null,this._$copyFrames.clear(),this._$targetLayer=k.$timelineLayer.targetLayer,!this._$targetLayer)return;this._$copyWorkSpaceId=k.$activeWorkSpaceId,this._$copyScene=k.$currentWorkSpace().scene;const e=k.$timelineLayer.targetFrames,t=Array.from(document.getElementById("timeline-content").children),a=[];for(const[r,i]of e){const e=document.getElementById(`layer-id-${r}`);a.push({index:t.indexOf(e),value:{layerId:r,frames:i}})}a.sort(((e,t)=>{const a=0|e.index,r=0|t.index;switch(!0){case a>r:return 1;case a<r:return-1;default:return 0}}));for(let e=0;e<a.length;++e){const t=a[e].value;this._$copyFrames.set(t.layerId,t.frames.slice())}}executeContextMenuFramePaste(){const e=k.$timelineLayer.targetLayer;if(!e)return;if(!this._$copyFrames.size)return;clearTimeout(k.$timelineLayer._$clickTimerId),k.$timelineLayer._$clickTimerId=-1,this.save(),k.$timelineLayer.hideTargetGroup();const t=this._$copyFrames.values().next().value.slice();t.length>1&&t.sort(((e,t)=>{const a=0|e,r=0|t;switch(!0){case a>r:return 1;case a<r:return-1;default:return 0}}));let a=Number.MAX_VALUE;for(let e=0;e<t.length;++e)a=Math.min(a,t[e]);const r=k.$timelineFrame.currentFrame;let i=Array.from(document.getElementById("timeline-content").children);const s=k.$workSpaces[this._$copyWorkSpaceId],n=k.$currentWorkSpace();let o=i.indexOf(e);if(this._$copyWorkSpaceId!==k.$activeWorkSpaceId){if(this._$copyFrames.size>1&&this._$copyFrames.size>i.length){const t=this._$copyFrames.size-1;for(let e=0;e<t;++e)k.$timelineTool.executeTimelineLayerAdd();i=Array.from(document.getElementById("timeline-content").children),o=i.indexOf(e)-t}if(!k.$workSpaces[this._$copyWorkSpaceId])return;k.$confirmModal.clear(),k.$confirmModal.addCallback((e=>{const t=this._$copyFrames.values().next().value.slice();t.length>1&&t.sort(((e,t)=>{const a=0|e,r=0|t;switch(!0){case a>r:return 1;case a<r:return-1;default:return 0}}));let a=Number.MAX_VALUE;for(let e=0;e<t.length;++e)a=Math.min(a,t[e]);const r=k.$currentWorkSpace().scene;for(const s of this._$copyFrames.keys()){const n=this._$copyScene.getLayer(s);if(!n){k.$confirmModal.clear(),this._$copyScene=null,this._$copyFrames.clear();break}const l=r.getLayer(0|i[o++].dataset.layerId),c=k.$confirmModal._$mapping,d=k.$timelineFrame.currentFrame;k.$timelineLayer.pasteFrame(n,l,a,d,t,!0,!1,e,c)}}));const t=k.$confirmModal._$mapping;for(const e of this._$copyFrames.keys()){const a=this._$copyScene.getLayer(e);if(!a){k.$confirmModal.clear(),this._$copyFrames.clear();break}for(let e=0;a._$characters.length>e;++e){const r=a._$characters[e].libraryId;if(t.has(r))continue;const i=s.getLibrary(r);if(!i)continue;const o=i.getPathWithWorkSpace(s);if(n._$nameMap.has(o)){k.$confirmModal.files.push({file:i,path:o,workSpaceId:this._$copyWorkSpaceId,type:"copy"});continue}let l=null;if(i.type===A.MOVIE_CLIP)l=k.$confirmModal.cloneMovieClip(this._$copyWorkSpaceId,i);else{const e=k.$activeWorkSpaceId;k.$activeWorkSpaceId=this._$copyWorkSpaceId,l=i.clone(),k.$activeWorkSpaceId=e}l._$id=n.nextLibraryId,t.set(r,l.id),k.$libraryController.createInstance(l.type,l.name,l.id,l.symbol),n._$libraries.set(l.id,l),l.folderId&&k.$confirmModal.createFolder(this._$copyWorkSpaceId,l)}}k.$confirmModal.files.length?k.$confirmModal.show():(k.$confirmModal.executeCallBack(),k.$confirmModal.clear(),k.$libraryController.reload())}else{const e=n.scene,s=this._$copyScene===e;for(const n of this._$copyFrames.keys()){const l=this._$copyScene.getLayer(n);if(!l){this._$copyFrames.clear();break}const c=e.getLayer(0|i[o++].dataset.layerId);k.$timelineLayer.pasteFrame(l,c,a,r,t,!0,s)}}k.$tools.getDefaultTool("arrow").clear(),this.reloadScreen()}clearCopy(){this._$copyWorkSpaceId=-1,this._$copyLayers.length=0}executeContextMenuLayerCopy(){this.clearCopy(),this._$copyWorkSpaceId=k.$activeWorkSpaceId;const e=k.$timelineLayer.targetLayers,t=k.$currentWorkSpace().scene;for(const a of e.values()){const e=t.getLayer(0|a.dataset.layerId);this._$copyLayers.push(e.clone())}}executeContextMenuLayerPaste(){const e=document.getElementById("timeline-content");if(!e)return;const t=k.$workSpaces[this._$copyWorkSpaceId],a=k.$currentWorkSpace();this.save();let r=k.$timelineLayer.targetLayer;r||(k.$timelineLayer.attachLayer(),r=k.$timelineLayer.targetLayer);const i=a.scene;if(this._$copyWorkSpaceId!==k.$activeWorkSpaceId){if(!k.$workSpaces[this._$copyWorkSpaceId])return;k.$confirmModal.clear();const s=k.$confirmModal._$mapping;for(let n=0;n<this._$copyLayers.length;++n){const o=this._$copyLayers[n],l=new T;for(let e=0;e<o._$characters.length;++e){const r=o._$characters[e],i=k.$activeWorkSpaceId;k.$activeWorkSpaceId=this._$copyWorkSpaceId;const n=new M(JSON.parse(JSON.stringify(r.toObject())));n._$id=a._$characterId++,k.$activeWorkSpaceId=i;const c=n.libraryId;if(s.has(c)){const e=k.$activeWorkSpaceId;k.$activeWorkSpaceId=this._$copyWorkSpaceId;const t=new M(JSON.parse(JSON.stringify(r.toObject())));k.$activeWorkSpaceId=e,t.libraryId=s.get(c),l.addCharacter(t);continue}const d=t.getLibrary(c);if(!d)continue;const h=d.getPathWithWorkSpace(t);if(a._$nameMap.has(h)){k.$confirmModal.files.push({file:d,character:n,layer:l,path:h,workSpaceId:this._$copyWorkSpaceId,type:"copy"});continue}l.addCharacter(n);let u=null;if(d.type===A.MOVIE_CLIP)u=k.$confirmModal.cloneMovieClip(this._$copyWorkSpaceId,d);else{const e=k.$activeWorkSpaceId;k.$activeWorkSpaceId=this._$copyWorkSpaceId,u=d.clone(),k.$activeWorkSpaceId=e}const m=a.nextLibraryId;n.libraryId=u._$id=m,s.set(d.id,u.id),k.$libraryController.createInstance(u.type,u.name,u.id,u.symbol),a._$libraries.set(u.id,u),u.folderId&&k.$confirmModal.createFolder(this._$copyWorkSpaceId,u)}for(let e=0;e<o._$emptys.length;++e)l.addEmptyCharacter(o._$emptys[e].clone());i.addLayer(l);const c=e.lastElementChild;e.insertBefore(c,r)}k.$libraryController.reload()}else for(let t=0;t<this._$copyLayers.length;++t){const s=this._$copyLayers[t].clone();i.addLayer(s),s._$instances.clear();for(let e=0;e<s._$characters.length;++e){const t=s._$characters[e];t._$id=a._$characterId++,s._$instances.set(t.id,t)}const n=e.lastElementChild;e.insertBefore(n,r)}const s=[];for(let t=0;t<e.children.length;++t)s.push(i.getLayer(0|e.children[t].dataset.layerId));i.clearLayer();for(let e=0;e<s.length;++e){const t=s[e];i.setLayer(t.id,t)}k.$confirmModal.files.length?k.$confirmModal.show():k.$confirmModal.clear(),this.reloadScreen(),super.focusOut()}executeContextMenuLayerClone(){this.executeContextMenuLayerCopy(),this.executeContextMenuLayerPaste()}executeContextMenuScriptAdd(){k.$javaScriptEditor.show()}executeContextMenuFrameAdd(){k.$timelineTool.executeTimelineFrameAdd()}executeContextMenuKeyFrameAdd(){k.$timelineTool.executeTimelineKeyAdd()}executeContextMenuKeyFrameDelete(){k.$timelineTool.executeTimelineKeyDelete()}executeContextMenuEmptyKeyFrameAdd(){k.$timelineTool.executeTimelineEmptyAdd()}executeContextMenuFrameDelete(){k.$timelineTool.executeTimelineFrameDelete()}executeContextMenuTweenAdd(){const e=k.$timelineLayer.targetLayer;if(!e)return;const t=k.$timelineFrame.currentFrame,a=k.$currentWorkSpace().scene.getLayer(0|e.dataset.layerId),r=a.getActiveCharacter(t);if(!r.length)return;if(r.length>1)return void alert("If you want to add motion tweening to multiple objects, please do so in a single MovieClip.");const i=r[0],s=i.getRange(t);i.hasTween(s.startFrame)||(this.save(),i.setTween(s.startFrame,{method:"linear",curve:[],custom:k.$tweenController.createEasingObject(),startFrame:s.startFrame,endFrame:s.endFrame}),i.updateTweenPlace(s.startFrame,s.endFrame),i.relocationTween(s.startFrame),a.reloadStyle(),i.dispose(),this.reloadScreen(),this._$saved=!1)}executeContextMenuTweenDelete(){if(!k.$timelineLayer.targetLayer)return;const e=k.$currentWorkSpace().scene;for(let[t,a]of k.$timelineLayer.targetFrames){const r=e.getLayer(t);for(let e=0;e<a.length;++e){const t=a[e],i=r.getActiveCharacter(t);if(!i.length||i.length>1)continue;const s=i[0],n=s.getRange(t);if(!s.hasTween(n.startFrame))continue;this.save();for(let e=n.startFrame+1;n.endFrame>e;++e)s.hasPlace(e)&&s.deletePlace(e);s.deleteTween(n.startFrame);delete s.getPlace(n.startFrame).tweenFrame,s.dispose()}r.reloadStyle()}k.$tweenController.clearPointer(),this.reloadScreen(),this._$saved=!1}show(e){const t=k.$timelineLayer.targetLayers;if(!t.size)return;const a=["context-menu-tween-add","context-menu-tween-delete"];for(let e=0;e<a.length;++e){const t=document.getElementById(a[e]);t&&t.setAttribute("style","opacity:0.5; pointer-events:none;")}if(1===t.size){const e=k.$timelineLayer.targetLayer,t=k.$currentWorkSpace().scene.getLayer(0|e.dataset.layerId),a=k.$timelineFrame.currentFrame,r=t.getActiveCharacter(a);if(1===r.length){if(r[0].getPlace(a).tweenFrame){const e=document.getElementById("context-menu-tween-delete");e&&e.setAttribute("style","")}else{const e=document.getElementById("context-menu-tween-add");e&&e.setAttribute("style","")}}}k.$endMenu("timeline-menu");const r=document.getElementById("timeline-menu");r.style.left=`${e.pageX+5}px`,r.style.top=e.pageY-r.clientHeight+"px",15>r.offsetTop&&(r.style.top="10px"),e.pageY+15>window.innerHeight&&(r.style.top=e.pageY-r.clientHeight-15+"px"),r.setAttribute("class","fadeIn")}};k.$timelinePlayer=new class extends De{constructor(){super(),this._$stopFlag=!0,this._$repeat=!1,this._$totalFrame=0,this._$startTime=0,this._$fps=0,this._$timerId=-1,this._$baseOffsetHalfWidth=0,this._$sounds=[],this._$clientWidth=0,this._$run=null}get repeat(){return this._$repeat}get stopFlag(){return this._$stopFlag}initialize(){super.initialize();const e=["timeline-play","timeline-stop","timeline-repeat","timeline-no-repeat"];for(let t=0;t<e.length;++t){const a=e[t],r=document.getElementById(a);if(r){switch(a){case"timeline-stop":case"timeline-repeat":r.style.display="none"}r.addEventListener("mousedown",(e=>{e.stopPropagation(),this.executeFunction(e),k.$endMenu()}))}}this._$run=this.run.bind(this)}executeTimelinePlay(){if(this._$stopFlag){"next2d"in window&&k.$root.stage._$player._$loadWebAudio();const e=k.$currentWorkSpace().scene;if(this._$totalFrame=e.totalFrame,this._$totalFrame>1){k.$soundController.clear(),this._$stopFlag=!1,this._$timerId>-1&&window.cancelAnimationFrame(this._$timerId);k.$tools.getDefaultTool("arrow").clear(),k.$timelineFrame.currentFrame>=this._$totalFrame&&(k.$timelineFrame.currentFrame=1,k.$timelineHeader.scrollX=0,k.$timelineHeader.rebuild(),k.$timelineLayer.moveTimeLine(),k.$timelineMarker.move(),this.reloadScreen()),e.startSound(k.$timelineFrame.currentFrame),document.getElementById("timeline-play").style.display="none",document.getElementById("timeline-stop").style.display="";const t=document.getElementById("timeline-controller-base");this._$baseOffsetHalfWidth=t.offsetWidth/2,this._$clientWidth=t.clientWidth,this._$startTime=window.performance.now(),this._$fps=1e3/(0|document.getElementById("stage-fps").value),this._$timerId=window.requestAnimationFrame(this._$run)}}else this.executeTimelineStop()}stopAllSound(){const e=[];for(let t=0;t<this._$sounds.length;++t){const a=this._$sounds[t];a._$stopFlag?e.push(a):a.stop()}this._$sounds=e,this._$sounds.length&&requestAnimationFrame((()=>{this.stopAllSound()}))}executeTimelineStop(e=!0){window.cancelAnimationFrame(this._$timerId),this.stopAllSound(),this._$stopFlag=!0,this._$timerId=-1,document.getElementById("timeline-play").style.display="",document.getElementById("timeline-stop").style.display="none",e&&this.reloadScreen()}executeTimelineRepeat(){document.getElementById("timeline-repeat").style.display="none",document.getElementById("timeline-no-repeat").style.display="",this._$repeat=!1}executeTimelineNoRepeat(){document.getElementById("timeline-repeat").style.display="",document.getElementById("timeline-no-repeat").style.display="none",this._$repeat=!0}run(e=0){if(this._$stopFlag)return;let t=e-this._$startTime;if(t>this._$fps){let a=k.$timelineFrame.currentFrame+1;if(a>this._$totalFrame){if(!this._$repeat)return this.executeTimelineStop();a=1,k.$timelineHeader.scrollX=0,k.$timelineLayer.moveTimeLine()}k.$timelineFrame.currentFrame=a;const r=k.$timelineTool.timelineWidth,i=(a-(k.$timelineHeader.scrollX/r|0))*(r+1);(0>=i||i>this._$clientWidth)&&(k.$timelineHeader.scrollX=(a-1)*r),k.$timelineHeader.rebuild(),k.$timelineMarker.move();(a-1)*(k.$timelineTool.timelineWidth+1)>this._$baseOffsetHalfWidth&&k.$timelineLayer.moveTimeLine(),this._$startTime=e-t%this._$fps,this.reloadScreen()}this._$timerId=window.requestAnimationFrame(this._$run)}};class Ye extends De{constructor(){super(),this._$x=0,this._$y=0,this._$pageX=0,this._$pageY=0,this._$mouseMove=null,this._$mouseUp=null}static get FRAME_COUNT(){return 600}initialize(){super.initialize();const e=["timeline-scroll-bar-x","timeline-scroll-bar-y"];for(let t=0;t<e.length;++t){const a=document.getElementById(e[t]);a&&(a.addEventListener("mousedown",(e=>{e.stopPropagation(),e.preventDefault(),k.$endMenu(),this.executeFunction(e)})),a.addEventListener("wheel",(e=>{e.stopPropagation(),e.preventDefault(),k.$endMenu(),"timeline-scroll-bar-y"===e.target.id?this.executeTimelineYBarBox(e):this.executeTimelineXBarBox(e)}),{passive:!1}))}const t=["timeline-x-bar-box","timeline-y-bar-box"];for(let e=0;e<t.length;++e){const a=document.getElementById(t[e]);a&&a.addEventListener("wheel",(e=>{e.stopPropagation(),e.preventDefault(),k.$endMenu(),this.executeFunction(e)}),{passive:!1})}}get x(){return this._$x}set x(e){this._$x=Math.max(0,Math.min(e,this.maxX)),this.viewX()}get y(){return this._$y}set y(e){this._$y=e,this.viewY()}executeTimelineXBarBox(e){const t=0|e.deltaX;if(!t)return!1;window.requestAnimationFrame((()=>{k.$timelineScroll.execute(t,0)}))}executeTimelineYBarBox(e){const t=0|e.deltaY;if(!t)return!1;window.requestAnimationFrame((()=>{k.$timelineScroll.execute(0,t)}))}executeTimelineScrollBarX(e){this._$pageX=e.pageX,this._$pageY=0,this._$mouseMove||(this._$mouseMove=this.mouseMove.bind(this)),this._$mouseUp||(this._$mouseUp=this.mouseUp.bind(this)),window.addEventListener("mousemove",this._$mouseMove),window.addEventListener("mouseup",this._$mouseUp)}executeTimelineScrollBarY(e){this._$pageX=0,this._$pageY=e.pageY,this._$mouseMove||(this._$mouseMove=this.mouseMove.bind(this)),this._$mouseUp||(this._$mouseUp=this.mouseUp.bind(this)),window.addEventListener("mousemove",this._$mouseMove),window.addEventListener("mouseup",this._$mouseUp)}mouseMove(e){e.stopPropagation(),e.preventDefault(),window.requestAnimationFrame((()=>{const t=k.$currentWorkSpace().scene;if(this._$pageY){const a=e.pageY-this._$pageY;if(a){const e=t._$layers.size*k.$timelineTool.timelineHeight/k.$timelineLayer.clientHeight;this.execute(0,a*e)}this._$pageY=e.pageY}if(this._$pageX){const a=e.pageX-this._$pageX;if(a){const e=k.$timelineLayer.clientWidth,r=(t.totalFrame+Ye.FRAME_COUNT)*k.$timelineTool.timelineWidth/e;this.execute(a*r,0)}this._$pageX=e.pageX}}))}mouseUp(){window.removeEventListener("mousemove",this._$mouseMove),window.removeEventListener("mouseup",this._$mouseUp),this._$pageX=0,this._$pageY=0}get maxX(){const e=k.$currentWorkSpace().scene,t=k.$timelineLayer.clientWidth-10;return(e.totalFrame+Ye.FRAME_COUNT)*k.$timelineTool.timelineWidth-t}get maxY(){const e=k.$currentWorkSpace().scene,t=k.$timelineLayer.clientHeight/k.$timelineTool.timelineHeight|0;return(e._$layers.size-t)*k.$timelineTool.timelineHeight}execute(e=0,t=0){const a=k.$currentWorkSpace();if(!a)return;const r=a.scene;if(!r)return;const i=this.x;e&&(this.x=Math.max(0,Math.min(this.x+e,this.maxX)),k.$timelineHeader.scrollX=this.x);const s=this.y;if(t){const e=r._$layers.size*k.$timelineTool.timelineHeight;if(k.$timelineLayer.clientHeight>e)this.y=0;else{if((k.$timelineLayer.clientHeight/k.$timelineTool.timelineHeight|0)>=r._$layers.size)return void this.viewY();this.y=Math.max(0,Math.min(this.y+t,this.maxY))}}s===this.y&&i===this.x||(i!==this.x&&(k.$timelineMarker.move(),k.$timelineHeader.rebuild()),k.$timelineLayer.moveTimeLine())}updateWidth(){const e=k.$currentWorkSpace();if(!e)return;const t=e.scene;if(!t)return;const a=k.$timelineLayer.clientWidth,r=a*(a/((t.totalFrame+Ye.FRAME_COUNT)*k.$timelineTool.timelineWidth))|0;document.documentElement.style.setProperty("--timeline-scroll-bar-width",r-2+"px"),this.viewX()}updateHeight(){const e=k.$currentWorkSpace();if(!e)return;const t=e.scene;if(!t)return;const a=k.$timelineLayer.clientHeight,r=a/k.$timelineTool.timelineHeight|0;if(t._$layers.size>r){const e=(a-(a-(r*k.$timelineTool.timelineHeight|0)))*(a/(t._$layers.size*k.$timelineTool.timelineHeight))|0;document.documentElement.style.setProperty("--timeline-scroll-bar-height",e-2+"px")}this.viewY()}viewX(){const e=document.getElementById("timeline-scroll-bar-x");if(e){const t=k.$currentWorkSpace();if(!t)return;const a=t.scene;if(!a)return;const r=k.$timelineLayer.clientWidth/((a.totalFrame+Ye.FRAME_COUNT)*k.$timelineTool.timelineWidth),i=this.x*r|0;e.style.left=`${i+1}px`}}viewY(){const e=document.getElementById("timeline-scroll-bar-y");if(e){const t=k.$currentWorkSpace();if(!t)return;const a=t.scene;if(!a)return;if((k.$timelineLayer.clientHeight/k.$timelineTool.timelineHeight|0)>=a._$layers.size)return void(e.style.display="none");e.style.display="";const r=k.$timelineLayer.clientHeight/(a._$layers.size*k.$timelineTool.timelineHeight),i=this.y*r|0;e.style.top=`${i+1}px`}}}k.$timelineScroll=new Ye;class We extends De{constructor(){super(),this._$labelFrame=0,this._$timelineWidth=We.DEFAULT_TIMELINE_WIDTH,this._$timelineHeight=We.DEFAULT_TIMELINE_HEIGHT,this._$lightAll=!1,this._$lockAll=!1,this._$disableAll=!1,this._$preview=!1}initialize(){super.initialize();const e=["timeline-layer-add","timeline-layer-trash","timeline-layer-light-all","timeline-layer-disable-all","timeline-layer-lock-all","timeline-script-add","timeline-frame-add","timeline-key-add","timeline-empty-add","timeline-frame-delete","timeline-onion-skin","timeline-preview","scene-list"];for(let t=0;t<e.length;++t){const a=document.getElementById(e[t]);a&&a.addEventListener("mousedown",(e=>{e.stopPropagation(),this.executeFunction(e)}))}const t=["label-name"];for(let e=0;e<t.length;++e){const a=document.getElementById(t[e]);a&&(a.addEventListener("focusin",(e=>{this.focusIn(e)})),a.addEventListener("keypress",(e=>{"Enter"===e.key&&e.target.blur()})),a.addEventListener("focusout",(e=>{this.executeFunction(e)})))}const a=document.getElementById("timeline-scale");a&&this.setInputEvent(a)}get preview(){return this._$preview}static get DEFAULT_TIMELINE_WIDTH(){return 13}static get DEFAULT_TIMELINE_HEIGHT(){return 31}get timelineHeight(){return this._$timelineHeight}set timelineHeight(e){this._$timelineHeight=e,document.documentElement.style.setProperty("--timeline-frame-height",`${e}px`),k.$timelineScroll.updateHeight(),k.$timelineLayer.moveTimeLine()}get timelineWidth(){return this._$timelineWidth}set timelineWidth(e){this._$timelineWidth=e,document.documentElement.style.setProperty("--timeline-frame-width",`${e}px`),document.documentElement.style.setProperty("--marker-width",`${k.$clamp(e,4,We.DEFAULT_TIMELINE_WIDTH)}px`),document.getElementById("timeline-scale").value=""+(e/We.DEFAULT_TIMELINE_WIDTH*100|0),k.$timelineScroll.updateWidth(),k.$timelineHeader.rebuild(),k.$timelineMarker.move()}focusIn(){super.focusIn(),this._$labelFrame=k.$timelineFrame.currentFrame}executeLabelName(e){if(!this._$labelFrame)return;const t=k.$timelineHeader.leftFrame;if(t>this._$labelFrame)return;const a=this._$labelFrame-t,r=document.getElementById("timeline-header").children[a].children[Xe.MARKER_INDEX],i=e.target.value,s=k.$currentWorkSpace().scene;if(i)this.save(),s.setLabel(this._$labelFrame,i),r.setAttribute("class","frame-border-box-marker"),r.textContent=i;else{s.getLabel(this._$labelFrame)&&(this.save(),s.deleteLabel(this._$labelFrame),r.setAttribute("class","frame-border-box"),r.textContent="")}super.focusOut(),this._$labelFrame=0}changeTimelineScale(e){return e=k.$clamp(0|e,41,2e3),this.timelineWidth=We.DEFAULT_TIMELINE_WIDTH*e/100,k.$timelineHeader._$currentFrame=-1,k.$timelineHeader.rebuild(),k.$timelineMarker.move(),k.$timelineLayer.moveTimeLine(),e}executeTimelineLayerLockAll(){this._$lockAll=!this._$lockAll;const e=document.getElementById("timeline-content"),t=k.$currentWorkSpace().scene;let a=!1;const r=e.children.length;for(let i=0;i<r;++i){const r=0|e.children[i].dataset.layerId,s=document.getElementById(`layer-lock-icon-${r}`),n=t.getLayer(r);n.mode===B.MASK&&(a=!0),this._$lockAll?(s.classList.remove("icon-disable"),s.classList.add("icon-active"),n.lock=!0):(s.classList.remove("icon-active"),s.classList.add("icon-disable"),n.lock=!1),a&&this.reloadScreen()}k.$tools.getDefaultTool("arrow").clear()}executeTimelineLayerDisableAll(){this._$disableAll=!this._$disableAll;const e=document.getElementById("timeline-content"),t=k.$currentWorkSpace().scene,a=e.children.length;for(let r=0;r<a;++r){const a=0|e.children[r].dataset.layerId,i=document.getElementById(`layer-disable-icon-${a}`),s=t.getLayer(a);this._$disableAll?(i.classList.remove("icon-disable"),i.classList.add("icon-active"),s.disable=!0):(i.classList.remove("icon-active"),i.classList.add("icon-disable"),s.disable=!1)}k.$tools.getDefaultTool("arrow").clear(),this.reloadScreen()}executeTimelineLayerLightAll(){this._$lightAll=!this._$lightAll;const e=document.getElementById("timeline-content"),t=k.$currentWorkSpace().scene,a=e.children.length;for(let r=0;r<a;++r){const a=0|e.children[r].dataset.layerId,i=document.getElementById(`layer-light-icon-${a}`),s=document.getElementById(`layer-id-${a}`),n=t.getLayer(a);this._$lightAll?(i.children[0].style.display="none",i.style.backgroundImage=`url('${n.getHighlightURL()}')`,s.style.borderBottom=`1px solid ${n.color}`,n.light=!0):(i.children[0].style.display="",i.style.backgroundImage="",s.style.borderBottom="",n.light=!1)}}executeTimelineLayerTrash(){const e=k.$timelineLayer.targetLayers;if(e.size){this.save();const t=k.$currentWorkSpace().scene,a=document.getElementById("timeline-content");let r=Array.from(a.children).indexOf(k.$timelineLayer.targetLayer),i=!1;const s=k.$timelineFrame.currentFrame;for(const r of e.values()){const e=Array.from(a.children).indexOf(r),n=0|r.dataset.layerId,o=t.getLayer(n),l=a.children;switch(o.mode){case B.MASK:for(let a=e+1;a<l.length;++a){const e=l[a],r=t.getLayer(0|e.dataset.layerId);if(r.mode!==B.MASK_IN)break;r.mode=B.NORMAL,r.showIcon()}break;case B.GUIDE:for(let a=e+1;a<l.length;++a){const e=l[a],r=t.getLayer(0|e.dataset.layerId);if(r.mode!==B.GUIDE_IN)break;r.mode=B.NORMAL,r.showIcon()}}o.getActiveCharacter(s).length&&(i=!0),r.remove(),t.deleteLayer(n)}if(k.$tools.getDefaultTool("arrow").clear(),a.children.length){let e=null;for(;;)if(e=a.children[r--],e){k.$timelineLayer.activeLayer(e);break}}k.$timelineScroll.updateWidth(),k.$timelineLayer.moveTimeLine(),k.$timelineScroll.updateHeight(),i&&this.reloadScreen()}}executeTimelineLayerAdd(){this.save();const e=k.$timelineLayer.targetLayer||document.getElementById("timeline-content").children[0],t=k.$currentWorkSpace().scene,a=t.addLayer();if(t.totalFrame>0&&a.addEmptyCharacter(new L({startFrame:1,endFrame:t.totalFrame+1})),e){const a=document.getElementById("timeline-content"),r=t.getLayer(0|e.dataset.layerId),i=a.lastElementChild;switch(r.mode){case B.MASK_IN:{const e=t.getLayer(0|i.dataset.layerId);e.maskId=null===r.maskId?r.id:r.maskId,e.mode=B.MASK_IN,e.showIcon()}break;case B.GUIDE_IN:{const e=t.getLayer(0|i.dataset.layerId);e.guideId=null===r.guideId?r.id:r.guideId,e.mode=B.GUIDE_IN,e.showIcon()}}a.insertBefore(i,e);const s=[];for(let e=0;e<a.children.length;++e)s.push(t.getLayer(0|a.children[e].dataset.layerId));t.clearLayer();for(let e=0;e<s.length;++e){const a=s[e];t.setLayer(a.id,a)}k.$timelineLayer.moveTimeLine(),k.$timelineScroll.updateHeight(),k.$timelineLayer.activeLayer(e.previousElementSibling)}super.focusOut()}executeTimelineScriptAdd(e){k.$javaScriptEditor.show(e)}executeTimelineFrameAdd(){const e=k.$timelineLayer.targetFrames;if(!e.size)return;this.save();const t=this.getFirstFrame(),a=k.$currentWorkSpace().scene;for(const[r,i]of e){const e=t+i.length,s=a.getLayer(r),n=s.getChildren(t);if(n){if("empty"===n.dataset.frameState){let t=!1,a=1;for(let e=0;e<s._$characters.length;++e)a=Math.max(s._$characters[e].endFrame-1,a);for(let e=0;e<s._$emptys.length;++e)a=Math.max(s._$emptys[e].endFrame-1,a);const r=s.getActiveCharacter(a);if(r.length){for(let t=0;t<r.length;++t){const i=r[t],s=i.getRange(a);if(i.hasTween(s.startFrame)){i.getTween(s.startFrame).endFrame=e,i.updateTweenPlace(s.startFrame,e),i.relocationTween(s.startFrame)}i.endFrame=e}t=!0}const i=s.getActiveEmptyCharacter(a);!t&&i&&(i.endFrame=e,t=!0),t||s.addEmptyCharacter(new L({startFrame:a,endFrame:e}))}else{for(let e=0;e<s._$characters.length;++e){const a=s._$characters[e];t>=a.startFrame||a.move(i.length)}for(let e=0;e<s._$emptys.length;++e){const a=s._$emptys[e];t>=a.startFrame||a.move(i.length)}const e=s.getActiveCharacter(t);if(e.length)for(let a=0;a<e.length;++a){const r=e[a],s=r.getRange(t),n=new Map;for(const[e,t]of r._$places)s.startFrame>e||e>=s.startFrame&&s.endFrame>e?n.set(e,t):(t.frame=e+i.length,t.tweenFrame&&(t.tweenFrame+=i.length),n.set(t.frame,t));if(r._$places=n,r._$cachePlaces.length=0,r._$tween.size){const e=new Map;for(const[t,a]of r._$tween)s.startFrame>=t?e.set(t,a):(a.startFrame+=i.length,a.endFrame+=i.length,e.set(a.startFrame,a));if(r._$tween=e,r.hasTween(s.startFrame)){r.getTween(s.startFrame).endFrame+=i.length,r.updateTweenPlace(s.startFrame,s.endFrame+i.length),r.relocationTween(s.startFrame)}}r.endFrame+=i.length}else{const e=s.getActiveEmptyCharacter(t);e&&(e.endFrame+=i.length)}}s.reloadStyle()}}this.setActiveFrame(),this.reloadScreen(),super.focusOut()}executeTimelineKeyAdd(){const e=k.$timelineLayer.targetFrames;if(!e.size)return;this.save();const t=k.$timelineFrame.currentFrame,a=k.$currentWorkSpace().scene;for(const r of e.keys()){const e=a.getLayer(r),i=e.getActiveCharacter(t);if(i.length)for(let e=0;e<i.length;++e){const a=i[e];if(a.hasPlace(t)){const e=a.getPlace(t);if(e.tweenFrame){const r=a.getRange(t),i=a.getTween(e.tweenFrame);i.endFrame=t,a.setTween(t,{method:i.method,curve:[],custom:k.$tweenController.createEasingObject(),startFrame:t,endFrame:r.endFrame}),a.updateTweenPlace(t,r.endFrame),k.$tweenController.relocationPlace(a,t),k.$tweenController.clearPointer().relocationPointer()}}else a.setPlace(t,a.getClonePlace(t))}else this.addEmptyCharacter(e);e.reloadStyle()}this.setActiveFrame(),this.reloadScreen(),super.focusOut()}executeTimelineKeyDelete(){const e=k.$timelineLayer.targetFrames;if(!e.size)return;this.save();const t=k.$currentWorkSpace().scene,a=this.getFirstFrame();for(const[r,i]of e){const e=t.getLayer(r);if(!e._$characters.length&&!e._$emptys.length)continue;const s=e.totalFrame;let n=0;for(let t=0;i.length>t&&(e._$characters.length||e._$emptys.length);++t){const a=i[t],r=e.getActiveCharacter(a);if(r.length){for(let t=0;t<r.length;++t){const i=r[t];if(!i.hasPlace(a))continue;const s=i.getPlace(a);if(s.tweenFrame&&s.tweenFrame!==a)continue;const o=i.getRange(a);if(n=Math.max(n,o.endFrame),i.hasTween(a)){const e=i.getTween(a);switch(!0){case i.startFrame===e.startFrame&&i.endFrame===e.endFrame:i._$places.clear();break;case i.startFrame===e.startFrame:for(let t=e.startFrame;t<e.endFrame;++t)i.deletePlace(t);break;default:{const t=i.getRange(e.startFrame-1);if(i.hasTween(t.startFrame)){for(let a=e.startFrame;a<e.endFrame;++a){i.getPlace(a).tweenFrame=t.startFrame}i.getTween(t.startFrame).endFrame=e.endFrame,i.updateTweenFilter(t.startFrame),i.updateTweenBlend(t.startFrame),i.relocationTween(t.startFrame)}else for(let t=e.startFrame;t<e.endFrame;++t)i.deletePlace(t)}}i.deleteTween(a)}else i.deletePlace(a);if(i._$places.size){if(a===i.startFrame){let e=i.endFrame;for(const t of i._$places.keys())e=Math.min(e,t);i.startFrame=e}}else e.deleteCharacter(i.id)}continue}const s=e.getActiveEmptyCharacter(a);s&&s.startFrame===a&&(n=Math.max(n,s.endFrame),e.deleteEmptyCharacter(s))}this.adjustmentKeyFrame(e,a,n,s),e.reloadStyle()}this.setActiveFrame(),k.$timelineLayer.activeCharacter(),this.reloadScreen(),super.focusOut()}executeTimelineEmptyAdd(){const e=k.$timelineLayer.targetFrames;if(!e.size)return;k.$tools.getDefaultTool("arrow").clearActiveElement(),this.save();const t=k.$timelineFrame.currentFrame,a=k.$currentWorkSpace().scene;for(const r of e.keys()){const e=a.getLayer(r),i=e.getActiveCharacter(t);if(i.length){const a=e.getChildren(t);if("key-frame"===a.dataset.frameState){k.$fadeIn({currentTarget:{dataset:{detail:"{{キーフレームに空のキーフレームを追加できません}}"}},pageX:a.offsetLeft,pageY:a.offsetTop});continue}let r=Number.MAX_VALUE;for(let e=0;e<i.length;++e){const a=i[e];r=Math.min(r,a.endFrame);for(let e of a._$places.keys())t>e||(r=Math.min(r,e))}for(let a=0;a<i.length;++a){const s=i[a];s.split(e,t,r),s.endFrame>r&&e.addCharacter(s.split(e,r,s.endFrame))}const s=new L;s.startFrame=t,s.endFrame=r,e.addEmptyCharacter(s)}else this.addEmptyCharacter(e);e.reloadStyle()}this.setActiveFrame(),this.reloadScreen(),super.focusOut()}addEmptyCharacter(e){const t=k.$timelineFrame.currentFrame,a=e.getActiveEmptyCharacter(t);if(a){const r=e.getChildren(t);if(r&&"empty-key-frame"===r.dataset.frameState)return;a.startFrame!==t&&(e.addEmptyCharacter(new L({startFrame:t,endFrame:a.endFrame})),a.endFrame=t)}else{if(t>1){let a=1;for(let t=0;t<e._$characters.length;++t)a=Math.max(e._$characters[t].endFrame-1,a);for(let t=0;t<e._$emptys.length;++t)a=Math.max(e._$emptys[t].endFrame-1,a);const r=e.getActiveCharacter(a);if(r.length)for(let e=0;e<r.length;++e){r[e].endFrame=t}else{const r=e.getActiveEmptyCharacter(a);r?r.endFrame=t:e.addEmptyCharacter(new L({startFrame:a,endFrame:t}))}}const a=new L;a.startFrame=t,a.endFrame=t+1,e.addEmptyCharacter(a)}}executeTimelineFrameDelete(){const e=k.$timelineLayer.targetFrames;if(!e.size)return;this.save();const t=this.getFirstFrame(),a=k.$currentWorkSpace().scene;for(const[r,i]of e){const e=a.getLayer(r),s=e.getChildren(t);if(!s||"empty"===s.dataset.frameState)continue;const n=e.getActiveCharacter(t);let o=0;if(n.length)for(let a=0;a<n.length;++a){const r=n[a],s=r.getRange(t);if(r.hasPlace(t)&&i.length>=s.endFrame-s.startFrame){if(r.hasTween(t)){for(let e=s.startFrame;e<s.endFrame;++e)r.deletePlace(e);r.deleteTween(t),k.$tweenController.clearPointer()}r.deletePlace(t)}if(o=Math.min(s.endFrame,t+i.length)-t,r._$places.size){const e=new Map;for(const[t,a]of r._$places)s.startFrame>t?e.set(t,a):t>=s.startFrame&&s.endFrame>t?(s.endFrame-o>t&&e.set(t,a),s.endFrame-1===t&&e.set(s.endFrame-o-1,a)):(a.frame=t-o,a.tweenFrame&&(a.tweenFrame-=o),e.set(a.frame,a));if(r._$places=e,r._$cachePlaces.length=0,r._$tween.size){const e=new Map;for(const[t,a]of r._$tween)s.startFrame>=t?(s.startFrame===t&&(a.endFrame-=o),e.set(t,a)):(a.startFrame-=o,a.endFrame-=o,e.set(a.startFrame,a));r._$tween=e,r.relocationTween(s.startFrame)}r.endFrame-=o}else e.deleteCharacter(r.id)}else{const a=e.getActiveEmptyCharacter(t);if(a){const r=a.endFrame-a.startFrame;o=Math.min(a.endFrame,t+i.length)-t,o>=r?e.deleteEmptyCharacter(a):a.endFrame-=o}}for(let a=0;a<e._$characters.length;++a){const r=e._$characters[a];t>=r.startFrame||r.move(-o)}for(let a=0;a<e._$emptys.length;++a){const r=e._$emptys[a];t>=r.startFrame||r.move(-o)}e.reloadStyle()}this.setActiveFrame(),k.$timelineLayer.activeCharacter(),this.reloadScreen(),super.focusOut()}executeTimelineOnionSkin(){const e=document.getElementById("timeline-onion-skin");if(e.classList.contains("onion-skin-active")){e.classList.remove("onion-skin-active");const t=k.$currentWorkSpace().scene._$layers;for(const e of t.values())for(let t=0;t<e._$characters.length;++t)e._$characters[t].dispose()}else e.classList.add("onion-skin-active");this.reloadScreen()}executeTimelinePreview(){const e=document.getElementById("timeline-preview");e&&(this._$preview?(this._$preview=!1,e.setAttribute("class","")):(this._$preview=!0,e.setAttribute("class","timeline-preview-active")))}executeSceneList(e){if(!document.getElementById("scene-name-menu-list").children.length)return;const t=document.getElementById("scene-name-menu");if(t.classList.contains("fadeIn"))t.setAttribute("class","fadeOut");else{const a=e.currentTarget;t.style.left=`${a.offsetLeft+a.offsetWidth}px`,t.style.top=`${a.offsetTop+10}px`,t.setAttribute("class","fadeIn"),k.$endMenu("scene-name-menu")}}setActiveFrame(){const e=this.timelineWidth,t=k.$timelineHeader.width/(e+1)|0,a=k.$timelineHeader.leftFrame,r=a+t,i=k.$currentWorkSpace().scene;for(const[e,t]of k.$timelineLayer.targetFrames){const s=i.getLayer(e);for(let e=0;e<t.length;++e){const i=t[e];if(a>i)continue;if(i>r)continue;const n=s.getChildren(i);n&&n.classList.add("frame-active")}}k.$timelineScroll.updateWidth()}adjustmentKeyFrame(e,t,a,r){if(t>1)for(let r=1;t-r>0;++r){const i=t-r,s=e.getActiveCharacter(i);if(s.length){for(let e=0;e<s.length;++e){const t=s[e],r=t.endFrame-1;if(t.hasPlace(r)){const e=t.getPlace(r);if(e.tweenFrame){const i=t.getTween(e.tweenFrame);if(a>i.endFrame){i.endFrame=endFrame;for(let e=r+1;a>e;++e)t.setPlace(e,t.getClonePlace(r))}k.$tweenController.relocationPlace(t,r)}}a>t.endFrame&&(t.endFrame=a)}break}const n=e.getActiveEmptyCharacter(i);if(n){n.endFrame=a;break}}else if(e._$characters.length||e._$emptys.length)for(let t=1;;++t){const a=1+t,r=e.getActiveCharacter(a);if(r.length){for(let e=0;e<r.length;++e){const t=r[e];let a=t.endFrame;for(let e of t._$places.keys())a=Math.min(a,e);const i=t.getPlace(a);t.deletePlace(a),t.setPlace(1,i),t.startFrame=1}break}const i=e.getActiveEmptyCharacter(a);if(i){i.startFrame=1;break}}else e.addEmptyCharacter(new L({startFrame:t,endFrame:r}))}getFirstFrame(){if(!k.$timelineLayer.targetFrame)return 1;const e=k.$timelineLayer.targetFrames.values().next().value;let t=Number.MAX_VALUE;for(let a=0;a<e.length;++a)t=Math.min(t,e[a]);return t}}k.$timelineTool=new We;class He extends ie{constructor(){super(),this._$handler=null,k.$readEnd++,"complete"!==document.readyState?(this._$handler=this.initialize.bind(this),window.addEventListener("DOMContentLoaded",this._$handler)):this.initialize()}initialize(){this._$handler&&(window.removeEventListener("DOMContentLoaded",this._$handler),this._$handler=null),k.$initializeEnd()}executeFunction(e){k.$endMenu();this[`execute${e.split("-").map((e=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`)).join("")}`]()}}k.$changeMovieClip=new class extends He{constructor(){super(),this._$element=null,this._$message=""}initialize(){super.initialize();const e=document.getElementById("change-movie-clip");if(e){const t=e.getElementsByClassName("change-movie-clip-box-child");for(let e=0;t.length>e;++e){const a=t[e];"middle-center"===a.dataset.position&&(this._$element=a,this._$element.classList.add("active")),a.addEventListener("mousedown",(e=>{e.stopPropagation(),this.changeBox(e)}))}}const t=["change-movie-clip-button"];for(let e=0;t.length>e;++e){const a=document.getElementById(t[e]);a&&a.addEventListener("mousedown",(e=>{e.stopPropagation(),this._$message?this.showModal(this._$message):this.executeFunction(e.target.id)}))}const a=document.getElementById("change-movie-clip-input");a&&(a.addEventListener("focusin",(()=>{this.focusIn()})),a.addEventListener("focusout",(()=>{this.focusOut()})))}focusIn(){k.$keyLock=!0}focusOut(){if(!k.$keyLock)return;k.$keyLock=!1,this._$message="";const e=document.getElementById("change-movie-clip-input");if(!e)return;const t=e.value;if(t||(this._$message="{{名前は必須です}}"),!this._$message){const e=k.$currentWorkSpace();for(const a of e._$libraries.values())if(a.path===t){this._$message="{{名前が重複しています}}";break}}this._$message&&this.showModal(this._$message)}showModal(e=""){const t=document.getElementById("detail-modal");if(t){clearTimeout(0|t.dataset.timerId),t.textContent=k.$currentLanguage.replace(e);const a=document.getElementById("change-movie-clip"),r=a.offsetLeft-a.offsetWidth/2,i=a.offsetTop-a.offsetHeight/2,s=document.getElementById("change-movie-clip-input");t.style.left=`${r+s.offsetLeft}px`,t.style.top=`${i+s.offsetTop}px`,t.classList.contains("fadeIn")||t.setAttribute("class","fadeIn"),t.dataset.timerId=setTimeout((()=>{t.classList.contains("fadeOut")||t.setAttribute("class","fadeOut")}),1500)}}changeBox(e){this._$element&&this._$element.setAttribute("class","change-movie-clip-box-child"),this._$element=e.target,this._$element.classList.add("active")}executeChangeMovieClipButton(){const e=document.getElementById("change-movie-clip-input");if(!e)return;if(k.$keyLock&&e.blur(),!this._$element||this._$message)return;const t=k.$tools.getDefaultTool("arrow"),a=t.activeElements;if(!a.length)return;if(!k.$timelineLayer.targetLayer)return;this.save();const r=k.$currentWorkSpace(),i=r.scene,s=k.$timelineFrame.currentFrame,n=r.nextLibraryId,o=r.addLibrary(k.$libraryController.createInstance(A.MOVIE_CLIP,e.value,n)),l=new T;o.setLayer(0,l);let c=Number.MAX_VALUE,d=-Number.MAX_VALUE,h=Number.MAX_VALUE,u=-Number.MAX_VALUE;for(let e=0;e<a.length;++e){const t=a[e],r=i.getLayer(0|t.dataset.layerId).getCharacter(0|t.dataset.characterId).getBounds();c=Math.min(c,r.xMin),d=Math.max(d,r.xMax),h=Math.min(h,r.yMin),u=Math.max(u,r.yMax)}const m=this._$element.dataset.position;let g=c,p=h;const f=Math.abs(d-c),$=Math.abs(u-h);switch(m){case"top-left":break;case"top-center":g+=f/2;break;case"top-right":g+=f;break;case"middle-left":p+=$/2;break;case"middle-center":g+=f/2,p+=$/2;break;case"middle-right":g+=f,p+=$/2;break;case"bottom-left":p+=$;break;case"bottom-center":g+=f/2,p+=$;break;case"bottom-right":g+=f,p+=$}let y=null,_=null,b=null,v=null;const w=new Map;for(let e=0;e<a.length;++e){const t=a[e],r=i.getLayer(0|t.dataset.layerId);y||(y=r);const n=r.getCharacter(0|t.dataset.characterId);_||(_=n.getRange(s),b=n.getPlace(_.startFrame),n.hasTween(_.startFrame)&&(v={tween:n.getTween(_.startFrame),place:n.getClonePlace(_.endFrame-1)}));const o=n.getRange(s);w.has(r.id)||w.set(r.id,{layer:r,range:o});const c=new M;c.libraryId=n.libraryId;const d=n.getPlace(o.startFrame),h={frame:1,matrix:d.matrix.slice(),colorTransform:d.colorTransform.slice(),blendMode:d.blendMode,filter:d.filter.slice(),point:{x:d.point.x,y:d.point.y},loop:d.loop?JSON.parse(JSON.stringify(d.loop)):k.$getDefaultLoopConfig(),depth:e};"scaleX"in d&&(h.scaleX=d.scaleX),"scaleY"in d&&(h.scaleY=d.scaleY),"rotation"in d&&(h.rotation=d.rotation),c.setPlace(1,h),c.x-=g,c.y-=p,l.addCharacter(c),n.remove(r)}for(const e of w.values()){const t=e.layer,a=e.range,r=t.getActiveCharacter(a.startFrame);if(r.length){t.sort(r,s);for(let e=0;e<r.length;++e)r[e].getPlace(s).depth=e}else t.addEmptyCharacter(new L({startFrame:a.startFrame,endFrame:a.endFrame}));t.reloadStyle()}const S=new M;if(S.libraryId=o.id,S.startFrame=_.startFrame,S.endFrame=_.endFrame,v){for(let e=_.startFrame;_.endFrame>e;++e)S.setPlace(e,{frame:e,tweenFrame:_.startFrame,matrix:[1,0,0,1,g,p],colorTransform:[1,1,1,1,0,0,0,0],blendMode:"normal",filter:[],depth:0,loop:k.$getDefaultLoopConfig()});let e=v.place.matrix[4],t=v.place.matrix[5];switch(m){case"top-left":break;case"top-center":e+=f/2;break;case"top-right":e+=f;break;case"middle-left":t+=$/2;break;case"middle-center":e+=f/2,t+=$/2;break;case"middle-right":e+=f,t+=$/2;break;case"bottom-left":t+=$;break;case"bottom-center":e+=f/2,t+=$;break;case"bottom-right":e+=f,t+=$}const a=S.getPlace(_.endFrame-1);a.matrix[4]=e,a.matrix[5]=t,S.setTween(_.startFrame,v.tween),k.$tweenController.relocationPlace(S,_.startFrame)}else S.setPlace(_.startFrame,{frame:_.startFrame,matrix:[1,0,0,1,g,p],colorTransform:[1,1,1,1,0,0,0,0],blendMode:"normal",filter:[],depth:0,loop:k.$getDefaultLoopConfig(),point:{x:b.point.x,y:b.point.y},scaleX:1,scaleY:1,rotation:0});y.addCharacter(S);const I=y.getActiveEmptyCharacter(_.startFrame);I&&y.deleteEmptyCharacter(I),_.startFrame>1&&y.addEmptyCharacter(new L({startFrame:1,endFrame:_.startFrame})),y.reloadStyle(),t.clearActiveElement(),this.reloadScreen(),this._$saved=!1}};k.$sceneChange=new class extends He{constructor(){super(),this._$matrix=[],this._$offsetX=0,this._$offsetY=0,this._$cache=null}cache(){const e=document.getElementById("scene-name-menu-list");if(e&&e.children.length){const t=Array.from(e.children);this._$cache={children:t,matrix:this._$matrix.slice(),offsetX:this._$offsetX,offsetY:this._$offsetY}}}restore(){if(!this._$cache)return;const e=document.getElementById("scene-name-menu-list");if(!e)return;this._$matrix=this._$cache.matrix,this._$offsetX=this._$cache.offsetX,this._$offsetY=this._$cache.offsetY;const t=this._$cache.children;for(let a=0;t.length>a;++a)e.appendChild(t[a])}get matrix(){return this._$matrix}get concatenatedMatrix(){let e=new Float32Array([1,0,0,1,0,0]);for(let t=0;this._$matrix.length>t;++t)e=k.$multiplicationMatrix(e,this._$matrix[t]);return e}get offsetX(){return this._$offsetX}set offsetX(e){this._$offsetX=e}get offsetY(){return this._$offsetY}set offsetY(e){this._$offsetY=e}initialize(){super.initialize()}clear(){this._$offsetX=0,this._$offsetY=0,this._$matrix.length=0}reload(e=-1){if(this._$cache)return void(this._$cache=null);const t=document.getElementById("scene-name-menu-list");if(t){for(;t.children.length;)t.children[0].remove();this.clear(),k.$currentWorkSpace().root.addSceneName(),e>-1&&k.$sceneChange.execute(e)}}execute(e){const t=k.$currentWorkSpace(),a=t.getLibrary(e),r=k.$timelineFrame.currentFrame,i=t.scene;i._$currentFrame=r,i._$leftFrame=k.$timelineHeader.leftFrame,k.$timelineMarker.move();const s=document.getElementById("timeline-controller-base"),n=(r-1)*(k.$timelineTool.timelineWidth+1);n>s.offsetWidth/2&&k.$timelineLayer.moveTimeLine(n-s.offsetWidth/2),t.scene=a}};k.$screen=new class extends He{constructor(){super(),this._$timerId=-1}initialize(){super.initialize();const e=document.getElementById("screen");e&&(e.addEventListener("contextmenu",(e=>{k.$screenMenu.show(e)})),e.addEventListener("dragover",(e=>{e.preventDefault()})),e.addEventListener("drop",(e=>{e.preventDefault(),e.stopPropagation(),this.drop(e)})),e.addEventListener("mousedown",(e=>{if(e.button)return;k.$canCopyLayer=!1,k.$endMenu();const t=k.$tools.activeTool;t&&(e.screen=!0,t.dispatchEvent(re.MOUSE_DOWN,e))})),e.addEventListener("dblclick",(e=>{const t=k.$tools.activeTool;t&&(e.screen=!0,t.dispatchEvent(re.DBL_CLICK,e))})),e.addEventListener("mouseleave",(e=>{const t=k.$tools.activeTool;t&&(e.screen=!0,t.dispatchEvent(re.MOUSE_LEAVE,e)),document.getElementById("stage-rect").style.display="none",document.getElementById("draw-rect").style.display="none",k.$setCursor("auto")})),e.addEventListener("mousewheel",(e=>{const t=e.deltaX||e.deltaY;if(t)return e.ctrlKey&&!e.metaKey||!e.ctrlKey&&e.metaKey?(e.preventDefault(),window.cancelAnimationFrame(this._$timerId),this._$timerId=window.requestAnimationFrame((()=>{k.$screenZoom.execute(t/2/100*-1)})),!1):void 0}),{passive:!1}),e.addEventListener("scroll",(e=>{if("hide"!==k.$screenRuler.state)return e.preventDefault(),k.$screenRuler.reload(),!1})),e.addEventListener("mousemove",(e=>{const t=k.$tools.activeTool;t&&(e.screen=!0,window.requestAnimationFrame((()=>{t.dispatchEvent(re.MOUSE_MOVE,e)})))})),e.addEventListener("mouseup",(e=>{const t=k.$tools.activeTool;t&&(e.screen=!0,t.dispatchEvent(re.MOUSE_UP,e))})))}drop(e){const t=k.$libraryController.activeInstances;if(!t.size)return Promise.resolve();const a=k.$currentWorkSpace(),r=a.scene;k.$timelineLayer.attachLayer();const i=0|k.$timelineLayer.targetLayer.dataset.layerId,s=r.getLayer(i);if(s.lock){const t=document.getElementById("detail-modal");return t.textContent=k.$currentLanguage.replace("{{ロックされたレイヤーです}}"),t.style.left=`${e.pageX+10}px`,t.style.top=e.pageY-30+"px",t.setAttribute("class","fadeIn"),t.dataset.timerId=setTimeout((()=>{t.classList.contains("fadeOut")||t.setAttribute("class","fadeOut")}),1500),Promise.resolve()}const n=k.$timelineFrame.currentFrame;this.save();const o=[],l=[];for(const e of t.keys()){const t=a.getLibrary(e);if(t&&t.id!==r.id)switch(t.type){case A.SOUND:o.push(e);break;case A.FOLDER:t.getInstanceIds(l);break;default:l.push(e)}}if(o.length){r.hasSound(n)||r.setSound(n,[]);const e=r.getSound(n);for(let t=0;t<o.length;++t){const r=a.getLibrary(o[t]);e.push({characterId:r.id,name:r.name,volume:100,autoPlay:!1,loopCount:0})}k.$soundController.setIcon(n),k.$soundController.createSoundElements()}const c=s.getActiveCharacter(n);if(c.length){const t=c[0],a=t.getRange(n);if(t.hasTween(a.startFrame)){const t=document.getElementById("detail-modal");return t.textContent=k.$currentLanguage.replace("{{トゥイーンには複数のオブジェクトを設置できません}}"),t.style.left=`${e.pageX+10}px`,t.style.top=e.pageY-30+"px",t.setAttribute("class","fadeIn"),t.dataset.timerId=setTimeout((()=>{t.classList.contains("fadeOut")||t.setAttribute("class","fadeOut")}),1500),Promise.resolve()}}l.length||(this._$saved=!1);const d=(e.offsetX-k.$offsetLeft)/k.$zoomScale,h=(e.offsetY-k.$offsetTop)/k.$zoomScale,{Matrix:u}=window.next2d.geom,m=k.$sceneChange.concatenatedMatrix,g=new u(m[0],m[1],m[2],m[3],m[4],m[5]);g.invert();const p=d*g.a+h*g.c+g.tx,f=d*g.b+h*g.d+g.ty,$=s.adjustmentLocation(n),y=$.endFrame,_=$.startFrame;for(let e=0;e<l.length;++e){const t=l[e],r={start:null,end:null},i=s._$characters;for(let e=0;e<i.length;++e){const a=i[e];if(a.libraryId===t)switch(!0){case _>1&&a.endFrame===_:r.start=a;break;case a.startFrame===y:r.end=a}}const n=a.getLibrary(t),o={frame:$.startFrame,matrix:[1,0,0,1,p,f],colorTransform:[1,1,1,1,0,0,0,0],blendMode:"normal",filter:[],depth:s._$characters.length,scaleX:1,scaleY:1,rotation:0};n.type===A.MOVIE_CLIP&&(o.loop=k.$getDefaultLoopConfig());let c=null;if(r.start&&(c=r.start,c.endFrame=y),r.end)if(c){c.endFrame=r.end.endFrame;for(let[e,t]of r.end._$places)c.setPlace(e,t);for(let[e,t]of r.end._$tween)c.setTween(e,t);s.deleteCharacter(r.end.id)}else c=r.end,c.startFrame=_;c?c.setPlace(_,o):(c=new M,c.libraryId=t,c.startFrame=_,c.endFrame=y,c.setPlace(_,o),s.addCharacter(c));const d=n.getBounds([1,0,0,1,0,0]);let h=d.xMin,u=d.yMin;const g=c.getBounds();let b=g.xMax-g.xMin;b||(b=10);let v=g.yMax-g.yMin;v||(v=10),h+=b/2,u+=v/2,o.matrix[4]-=h,o.matrix[5]-=u;const w=c.getBounds(m),S=k.$sceneChange.offsetX+w.xMin,I=k.$sceneChange.offsetY+w.yMin,E=Math.ceil(Math.abs(w.xMax-w.xMin))/2,x=Math.ceil(Math.abs(w.yMax-w.yMin))/2;o.point={x:S+E,y:I+x}}return k.$timelineScroll.updateWidth(),s.reloadStyle(),this.reloadScreen().then((()=>{this._$saved=!1}))}appendOnionCharacter(e,t,a=null,r=1){const i=a||k.$currentWorkSpace().scene,s=i.getLayer(t);if(!s)return Promise.resolve();const n=k.$sceneChange.concatenatedMatrix,o=e.getBounds(n,r);return e.draw(k.$getCanvas(),r).then((t=>{const a=document.createElement("div");a.setAttribute("class","display-object"),a.dataset.child="true",a.dataset.preview="true",a.appendChild(t),t.style.width=t._$width*k.$zoomScale+"px",t.style.height=t._$height*k.$zoomScale+"px",t.style.left=e.offsetX*k.$zoomScale+"px",t.style.top=e.offsetY*k.$zoomScale+"px";let l="";const c=[];if(null!==s.maskId){const e=i.getLayer(s.maskId);if(e||(s.maskId=null),e&&e.lock&&e._$characters.length){const t=e._$characters[0];t.dispose(),c.push(t.draw(k.$getCanvas(),r).then((e=>{const a=t.getBounds(n),r=(a.xMin-o.xMin)*k.$zoomScale,i=(a.yMin-o.yMin)*k.$zoomScale,s=e.toDataURL(),c=e._$width*k.$zoomScale,d=e._$height*k.$zoomScale;l+=`mask: url(${s}), none;`,l+=`-webkit-mask: url(${s}), none;`,l+=`mask-size: ${c}px ${d}px;`,l+=`-webkit-mask-size: ${c}px ${d}px;`,l+="mask-repeat: no-repeat;",l+="-webkit-mask-repeat: no-repeat;",l+=`mask-position: ${r}px ${i}px;`,l+=`-webkit-mask-position: ${r}px ${i}px;`,l+=`mix-blend-mode: ${e.style.mixBlendMode};`,l+=`filter: ${e.style.filter};`})))}}l+="position: absolute;",l+="pointer-events: none;",l+="opacity: 0.25;";let d=k.$offsetLeft+(k.$sceneChange.offsetX+o.xMin)*k.$zoomScale,h=k.$offsetTop+(k.$sceneChange.offsetY+o.yMin)*k.$zoomScale;return l+=`left: ${d}px;`,l+=`top: ${h}px;`,c.length?Promise.all(c).then((()=>(a.setAttribute("style",l),Promise.resolve({div:a,canvas:t})))):(a.setAttribute("style",l),Promise.resolve({div:a,canvas:t}))}))}appendCharacter(e,t,a,r="auto",i=null,s=1,n=null,o=null){const l=k.$currentWorkSpace(),c=i||l.scene,d=c.getLayer(a);if(!d)return Promise.resolve();const h=e.getPlace(t),u=l.getLibrary(e.libraryId);if(!u)return Promise.resolve();let m=e.libraryId===k.$changeLibraryId;switch(u.type){case A.MOVIE_CLIP:u.totalFrame>1&&e._$currentFrame!==t&&(m=!0,e._$currentFrame=t);break;case A.VIDEO:e._$currentFrame!==t&&(m=!0,e._$currentFrame=t)}if(h!==e._$currentPlace){if(e._$currentPlace){const t=h.matrix,a=e._$currentPlace.matrix;switch(!0){case t[0]!==a[0]:case t[1]!==a[1]:case t[2]!==a[2]:case t[3]!==a[3]:m=!0;break;default:e._$screenX+=-a[4]+t[4],e._$screenY+=-a[5]+t[5]}if(!m){const t=h.colorTransform,a=e._$currentPlace.colorTransform;switch(!0){case t[0]!==a[0]:case t[1]!==a[1]:case t[2]!==a[2]:case t[3]!==a[3]:case t[4]!==a[4]:case t[5]!==a[5]:case t[6]!==a[6]:case t[7]!==a[7]:m=!0}}if(m||h.blendMode===e._$currentPlace.blendMode||(m=!0),!m&&(e._$currentPlace.filter.length!==h.filter.length&&(m=!0),!m))for(let t=0;t<h.filter.length;++t){const a=h.filter[t],r=e._$currentPlace[t];if(!a||!r){m=!0;break}if(r.constructor!==a.constructor){m=!0;break}if(!r.isSame(a)){m=!0;break}}}e._$currentPlace=h}m&&e.dispose();const g=k.$sceneChange.concatenatedMatrix,p=e.getBounds(g,i?t:0);return e.draw(k.$getCanvas(),t).then((h=>{const m=document.createElement("div");i||m.setAttribute("class","display-object"),m.setAttribute("data-child","true"),k.$timelinePlayer.stopFlag&&(m.setAttribute("id",`character-${e.id}`),m.setAttribute("data-character-id",`${e.id}`),m.setAttribute("data-layer-id",`${a}`),m.setAttribute("data-instance-type",`${u.type}`),m.setAttribute("data-library-id",`${e.libraryId}`),m.setAttribute("data-pointer",`${r}`),m.addEventListener("mouseover",(e=>{e.stopPropagation();const t=k.$tools.activeTool;t&&(e.displayObject=!0,t.dispatchEvent(re.MOUSE_OVER,e))})),m.addEventListener("mouseout",(e=>{e.stopPropagation();const t=k.$tools.activeTool;t&&(e.displayObject=!0,t.dispatchEvent(re.MOUSE_OUT,e))})),m.addEventListener("mousedown",(e=>{if(e.button)return;e.stopPropagation();const t=k.$tools.activeTool;t&&(e.displayObject=!0,t.dispatchEvent(re.MOUSE_DOWN,e))}))),i&&m.setAttribute("data-preview","true");let f="position: absolute;";f+=`pointer-events: ${r};`,1>s&&(f+=`opacity: ${s};`);let $=(p.xMax-p.xMin)*k.$zoomScale;$||($=10);let y=(p.yMax-p.yMin)*k.$zoomScale;y||(y=10),f+=`width: ${Math.ceil($)}px;`,f+=`height: ${Math.ceil(y)}px;`;const _=null===n?k.$sceneChange.offsetX:n,b=null===o?k.$sceneChange.offsetY:o;let v=k.$offsetLeft+(_+p.xMin)*k.$zoomScale,w=k.$offsetTop+(b+p.yMin)*k.$zoomScale;f+=`left: ${v}px;`,f+=`top: ${w}px;`;let S="";h.hasAttribute("style")&&(S=h.getAttribute("style"));let I="";-1===S.indexOf("width")&&(I+=`width: ${h._$width*k.$zoomScale}px;`),-1===S.indexOf("height")&&(I+=`height: ${h._$height*k.$zoomScale}px;`),e.offsetX&&-1===S.indexOf("left")&&(I+=`left: ${e.offsetX*k.$zoomScale}px;`),e.offsetY&&-1===S.indexOf("top")&&(I+=`top: ${e.offsetY*k.$zoomScale}px;`),I&&(S&&(I+=S),h.setAttribute("style",I));const E=[];if(null!==d.maskId){const e=c.getLayer(d.maskId);if(e||(d.maskId=null),e&&e.lock&&e._$characters.length){const a=e._$characters[0];E.push(a.draw(k.$getCanvas(),t).then((e=>{const r=a.getBounds(g,i?t:0),s=(r.xMin-p.xMin)*k.$zoomScale,n=(r.yMin-p.yMin)*k.$zoomScale;if(l.getLibrary(a.libraryId).type===A.MOVIE_CLIP)a._$base64Frame!==t&&(e._$base64=null,e._$base64Frame=t);else{const r=a.getPlace(t);a._$base64Frame!==r.frame&&(e._$base64=null,e._$base64Frame=r.frame)}e._$base64||(e._$base64=e.toDataURL());const o=e._$base64,c=e._$width*k.$zoomScale,d=e._$height*k.$zoomScale;f+=`mask: url(${o}), none;`,f+=`-webkit-mask: url(${o}), none;`,f+=`mask-size: ${c}px ${d}px;`,f+=`-webkit-mask-size: ${c}px ${d}px;`,f+="mask-repeat: no-repeat;",f+="-webkit-mask-repeat: no-repeat;",f+=`mask-position: ${s}px ${n}px;`,f+=`-webkit-mask-position: ${s}px ${n}px;`,f+=`mix-blend-mode: ${e.style.mixBlendMode};`,f+=`filter: ${e.style.filter};`})))}}if(k.$timelinePlayer.stopFlag)switch(u._$type){case A.MOVIE_CLIP:m.addEventListener("dblclick",(e=>{this.changeScene(e)}));break;case A.TEXT:{const e=document.createElement("div");e.style.width=$-2+"px",e.style.height=y-2+"px",e.style.pointerEvents="none",e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.border=u._$border?"1px solid gray":"1px dashed gray",m.appendChild(e),m.addEventListener("dblclick",(e=>{this.selectText(e)}))}}return E.length?Promise.all(E).then((()=>(m.setAttribute("style",f),Promise.resolve({div:m,canvas:h})))):(m.setAttribute("style",f),Promise.resolve({div:m,canvas:h}))}))}selectText(e){e.stopPropagation(),k.$tools.reset();const t=document.getElementById("stage-area").children;for(let e=0;e<t.length;++e)t[e].style.pointerEvents="none";const a=e.currentTarget;a.style.pointerEvents="";const r=a.firstChild;r.remove();const i=window.document.createElement("textarea");a.style.display="none",a.parentNode.appendChild(i);const s=k.$currentWorkSpace(),n=s.scene,o=0|a.dataset.layerId,l=n.getLayer(o),c=0|a.dataset.characterId,d=l.getCharacter(c),h=s.getLibrary(d.libraryId);i.value=h._$text,i.style.border=h._$border?"1px solid gray":"1px dashed gray",i.style.fontSize=`${h._$size}px`,i.style.fontFamily=h._$font,i.style.width=parseFloat(r.style.width)-4+"px",i.style.height=`${parseFloat(r.style.height)}px`,i.style.position="absolute",i.style.left=a.style.left,i.style.top=a.style.top,i.style.pointerEvents="auto",h._$border||(i.style.backgroundColor="transparent"),i.dataset.characterId=`${d.id}`,i.dataset.layerId=`${o}`,i.dataset.libraryId=`${d.libraryId}`,i.dataset.child="true",h._$multiline||i.addEventListener("keydown",(e=>{if("Enter"===e.key)return e.preventDefault(),!1})),i.addEventListener("focusin",(()=>{k.$keyLock=!0})),i.addEventListener("focusout",(e=>{const t=e.target,a=k.$currentWorkSpace(),r=a.scene,i=0|t.dataset.layerId,s=r.getLayer(i),n=0|t.dataset.characterId,o=s.getCharacter(n);a.getLibrary(o.libraryId)._$text=t.value,o.dispose(),k.$keyLock=!1;const l=document.getElementById("stage-area").children;for(let e=0;e<l.length;++e){l[e].style.pointerEvents=""}const c=k.$timelineFrame.currentFrame;r.changeFrame(c)})),i.focus()}changeScene(e){e.stopPropagation(),k.$timelinePlayer.executeTimelineStop(!1);const t=e.currentTarget,a=k.$currentWorkSpace().scene.getLayer(0|t.dataset.layerId),r=0|t.dataset.characterId,i=a.getCharacter(r);k.$activeCharacterIds.push(r),k.$currentWorkSpace().scene.addSceneName(!0);const s=k.$sceneChange.concatenatedMatrix,n=i.x,o=i.y;k.$sceneChange.offsetX=n*s[0]+o*s[2]+s[4],k.$sceneChange.offsetY=n*s[1]+o*s[3]+s[5];const l=i.getPlace(i.startFrame);k.$sceneChange.matrix.push(l.matrix),k.$sceneChange.execute(0|t.dataset.libraryId)}clearStageArea(){const e=document.getElementById("stage-area");if(!e)return;let t=0;for(;e.children.length>t;){const a=e.children[t];a.dataset.child?a.remove():t++}}};k.$screenKeyboardCommand=new class extends ne{constructor(){super("screen"),this._$state="close",this._$prevTool=null,this._$activeTool=null,this._$endHandTool=null}initialize(){super.initialize();const e=document.getElementById("screen");e&&(e.addEventListener("mouseleave",(()=>{this.active=!1})),e.addEventListener("mouseover",(()=>{this.active||(this.active=!0)})),e.addEventListener("mouseup",(()=>{this.active||(this.active=!0)}))),this._$endHandTool=this.endHandTool.bind(this),this.add(" ",this.startHandTool.bind(this));const t=["v","q","a","p","t","k","o","r","z"];this._$activeTool=this.activeTool.bind(this);for(let e=0;e<t.length;++e)this.add(t[e],this._$activeTool);this.add(k.$generateShortcutKey("r",{shift:!0}),this._$activeTool),this.add("s",this.userSetting.bind(this));const a=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"];for(let e=0;e<a.length;++e){const t=a[e];this.add(t,this.executeMoveDisplayObject),this.add(k.$generateShortcutKey(t,{shift:!0}),this.executeMoveDisplayObject)}this.add(k.$generateShortcutKey("r",{ctrl:!0}),(()=>{k.$shiftKey=!1,k.$ctrlKey=!1,k.$altKey=!1,k.$project.open()})),this.add(k.$generateShortcutKey("s",{ctrl:!0,shift:!0}),k.$project.save),this.add("Backspace",this.deleteDisplayObject),this.add(k.$generateShortcutKey("p",{ctrl:!0,shift:!0}),(()=>{k.$tweenController.deleteCurvePointer()})),this.add(k.$generateShortcutKey("ArrowUp",{ctrl:!0,shift:!0}),(()=>{k.$screenMenu.changeDepth("up")})),this.add(k.$generateShortcutKey("ArrowUp",{ctrl:!0}),(()=>{k.$screenMenu.changeDepthOne("up")})),this.add(k.$generateShortcutKey("ArrowDown",{ctrl:!0,shift:!0}),(()=>{k.$screenMenu.changeDepth("down")})),this.add(k.$generateShortcutKey("ArrowDown",{ctrl:!0}),(()=>{k.$screenMenu.changeDepthOne("down")})),this.add("1",(()=>{k.$screenMenu.alignment("left")})),this.add(k.$generateShortcutKey("!",{shift:!0}),(()=>{k.$screenMenu.alignment("left","stage")})),this.add("2",(()=>{k.$screenMenu.alignment("center")})),this.add(k.$generateShortcutKey('"',{shift:!0}),(()=>{k.$screenMenu.alignment("center","stage")})),this.add("3",(()=>{k.$screenMenu.alignment("right")})),this.add(k.$generateShortcutKey("#",{shift:!0}),(()=>{k.$screenMenu.alignment("right","stage")})),this.add("4",(()=>{k.$screenMenu.alignment("top")})),this.add(k.$generateShortcutKey("$",{shift:!0}),(()=>{k.$screenMenu.alignment("top","stage")})),this.add("5",(()=>{k.$screenMenu.alignment("middle")})),this.add(k.$generateShortcutKey("%",{shift:!0}),(()=>{k.$screenMenu.alignment("middle","stage")})),this.add("6",(()=>{k.$screenMenu.alignment("bottom")})),this.add(k.$generateShortcutKey("&",{shift:!0}),(()=>{k.$screenMenu.alignment("bottom","stage")})),this.add(k.$generateShortcutKey("d",{ctrl:!0}),(()=>{k.$screenMenu.executeScreenDistributeToLayers()})),this.add(k.$generateShortcutKey("k",{ctrl:!0}),(()=>{k.$screenMenu.executeScreenDistributeToKeyframes()})),this.add(k.$generateShortcutKey("i",{ctrl:!0}),(()=>{k.$screenMenu.executeScreenIntegratingPaths()})),this.add(k.$generateShortcutKey("p",{ctrl:!0}),(()=>{k.$tweenController.addCurvePinter()})),this.add(k.$generateShortcutKey("m",{shift:!0}),(()=>{k.$screenMenu.executeScreenChangeMovieClip()})),this.add(k.$generateShortcutKey("c",{ctrl:!0}),(()=>{k.$screenMenu.copyDisplayObject()})),this.add(k.$generateShortcutKey("v",{ctrl:!0}),(()=>{k.$screenMenu.pasteDisplayObject()})),this.add(k.$generateShortcutKey("a",{ctrl:!0}),(()=>{this.allDisplayObjectSelect()})),this.add(k.$generateShortcutKey("r",{ctrl:!0,shift:!0}),(()=>{k.$screenRuler.show()})),this.add("e",(()=>{k.$screenMenu.executeScreenChangeScene()})),this.add(k.$generateShortcutKey("e",{shift:!0}),(()=>{k.$screenMenu.executeScreenMoveScene()}))}allDisplayObjectSelect(){const e=k.$tools.getDefaultTool("arrow");e.activeElements.length=0;const t=k.$currentWorkSpace().scene,a=k.$timelineFrame.currentFrame;for(const r of t._$layers.values()){if(r.lock)continue;const t=r.getActiveCharacter(a);for(let a=0;a<t.length;++a){const r=t[a],i=document.getElementById(`character-${r.id}`);i&&e.activeElements.push(i)}}e.updateControllerProperty(),k.$transformController.show().relocation(),k.$gridController.show().relocation(),e.activeTimeline()}deleteDisplayObject(){k.$tools.getDefaultTool("arrow").deleteDisplayObject()}userSetting(){const e=document.getElementById("user-setting");"show"===this._$state||e.classList.contains("fadeIn")?(this._$state="close",k.$endMenu()):(this._$state="show",k.$userSetting.show())}activeTool(e){let t="";switch(e){case"v":t="arrow";break;case"q":t="arrow-transform";break;case"a":t="transform";break;case"p":t="pen";break;case"t":t="text";break;case"z":t="zoom";break;case"k":t="bucket";break;case"r":t="rectangle";break;case"o":t="circle";break;case"rShift":t="round-rect"}if(t){const e=k.$tools.activeTool;e&&e.dispatchEvent(re.END);const a=k.$tools.getDefaultTool(t);a.dispatchEvent(re.START),k.$tools.activeTool=a}}startHandTool(){if("hand"===k.$tools.activeTool.name)return;this._$prevTool=k.$tools.activeTool,this._$prevTool&&this._$prevTool.dispatchEvent(re.END);const e=k.$tools.getDefaultTool("hand");e.dispatchEvent(re.START),k.$tools.activeTool=e,k.$tools.getDefaultTool("arrow").endRect(),window.addEventListener("keyup",this._$endHandTool)}endHandTool(e){if(" "!==e.key)return;window.removeEventListener("keyup",this._$endHandTool);k.$tools.getDefaultTool("hand").dispatchEvent(re.END),this._$prevTool?(this._$prevTool.dispatchEvent(re.START),k.$tools.activeTool=this._$prevTool,this._$prevTool=null):k.$tools.reset()}executeMoveDisplayObject(e){const t=k.$tools.getDefaultTool("arrow");if(t.activeElements.length){switch(e){case"ArrowRight":case"ArrowRightShift":t.pageX=k.$shiftKey?10:1,t.pageY=0;break;case"ArrowLeft":case"ArrowLeftShift":t.pageX=k.$shiftKey?-10:-1,t.pageY=0;break;case"ArrowUp":case"ArrowUpShift":t.pageX=0,t.pageY=k.$shiftKey?-10:-1;break;case"ArrowDown":case"ArrowDownShift":t.pageX=0,t.pageY=k.$shiftKey?10:1;break;default:return}t.moveDisplayObject(),t._$saved=!1}}};k.$screenMenu=new class extends He{constructor(){super(),this._$state="hide",this._$copyDisplayObjects=[],this._$copyWorkSpaceId=-1,this._$copyFrame=-1}initialize(){super.initialize();const e=["screen-front","screen-front-one","screen-back-one","screen-back","screen-position-left","screen-position-right","screen-position-center","screen-position-top","screen-position-middle","screen-position-bottom","stage-position-left","stage-position-right","stage-position-center","stage-position-top","stage-position-middle","stage-position-bottom","screen-distribute-to-layers","screen-distribute-to-keyframes","screen-integrating-paths","screen-add-tween-curve-pointer","screen-delete-tween-curve-pointer","screen-change-movie-clip","screen-preview","screen-ruler","screen-change-scene","screen-move-scene"];for(let t=0;t<e.length;++t){const a=document.getElementById(e[t]);a&&a.addEventListener("mousedown",(e=>{e.stopPropagation(),this.executeFunction(e.target.id)}))}const t=["screen-distribute-to-layers","screen-distribute-to-keyframes","screen-integrating-paths","screen-add-tween-curve-pointer","screen-delete-tween-curve-pointer","screen-change-movie-clip","screen-preview","screen-ruler","screen-change-scene","screen-move-scene"];for(let e=0;e<t.length;++e){const a=document.getElementById(t[e]);a&&a.addEventListener("mouseover",(()=>{this.hideSubMenu()}))}const a=["screen-order","screen-align"];for(let e=0;e<a.length;++e){const t=document.getElementById(a[e]);t&&t.addEventListener("mouseover",(e=>{e.stopPropagation(),this.showSubMenu(e)}))}}hideSubMenu(e=""){const t=["screen-order-menu","screen-align-menu"];for(let a=0;a<t.length;++a){const r=t[a];if(e&&e===r)continue;const i=document.getElementById(r);i&&(i.classList.contains("fadeIn")&&i.setAttribute("class","fadeOut"))}}showSubMenu(e){const t=`${e.target.id}-menu`,a=document.getElementById(t);if(!a)return;this.hideSubMenu(t);const r=document.getElementById("screen-menu");a.style.left=r.offsetLeft+r.clientWidth-5+"px",a.style.top=`${r.offsetTop+20}px`,a.setAttribute("class","fadeIn")}copyDisplayObject(){this.clearCopy();const e=k.$tools.getDefaultTool("arrow"),t=e.activeElements;if(!t.length)return;this._$copyWorkSpaceId=k.$activeWorkSpaceId,this._$copyFrame=k.$timelineFrame.currentFrame;const a=k.$currentWorkSpace().scene,r=e.activeElements.length;for(let e=0;e<r;++e){const r=t[e],i=a.getLayer(0|r.dataset.layerId).getCharacter(0|r.dataset.characterId);this._$copyDisplayObjects.push(new M(JSON.parse(JSON.stringify(i.toObject()))))}}clearCopy(){this._$copyFrame=-1,this._$copyWorkSpaceId=-1,this._$copyDisplayObjects.length=0}pasteDisplayObject(){if(-1===this._$copyWorkSpaceId)return;if(!this._$copyDisplayObjects.length)return;const e=k.$workSpaces[this._$copyWorkSpaceId],t=k.$currentWorkSpace();if(!e)return;let a=k.$timelineLayer.targetLayer;a||(k.$timelineLayer.attachLayer(),a=k.$timelineLayer.targetLayer);const r=t.scene.getLayer(0|a.dataset.layerId);if(this._$copyWorkSpaceId!==k.$activeWorkSpaceId){for(let t=0;this._$copyDisplayObjects.length>t;++t){const a=this._$copyDisplayObjects[t];if(!e.getLibrary(a.libraryId))return this._$copyWorkSpaceId=-1,void(this._$copyDisplayObjects.length=0)}this.save(),k.$confirmModal.clear();const a=k.$confirmModal._$mapping;for(let i=this._$copyDisplayObjects.length-1;i>-1;--i){const s=this._$copyDisplayObjects[i],n=s.libraryId;if(a.has(n)){const e=k.$activeWorkSpaceId;k.$activeWorkSpaceId=this._$copyWorkSpaceId;const i=new M(JSON.parse(JSON.stringify(s.toObject())));k.$activeWorkSpaceId=e,i.libraryId=a.get(n),i._$id=t._$characterId++,k.$confirmModal.pasteDisplayObject(r,i,this._$copyFrame);continue}const o=e.getLibrary(n);if(!o)continue;const l=o.getPathWithWorkSpace(e);if(t._$nameMap.has(l)){k.$confirmModal.files.push({file:o,character:s,layer:r,path:l,copyFrame:this._$copyFrame,workSpaceId:this._$copyWorkSpaceId,type:"copy"});continue}let c=null;if(o.type===A.MOVIE_CLIP)c=k.$confirmModal.cloneMovieClip(this._$copyWorkSpaceId,o);else{const e=k.$activeWorkSpaceId;k.$activeWorkSpaceId=this._$copyWorkSpaceId,c=o.clone(),k.$activeWorkSpaceId=e}c._$id=t.nextLibraryId,a.set(o.id,c.id),k.$libraryController.createInstance(c.type,c.name,c.id,c.symbol),t._$libraries.set(c.id,c),c.folderId&&k.$confirmModal.createFolder(this._$copyWorkSpaceId,c);const d=k.$activeWorkSpaceId;k.$activeWorkSpaceId=this._$copyWorkSpaceId;const h=new M(JSON.parse(JSON.stringify(s.toObject())));k.$activeWorkSpaceId=d,h.libraryId=c.id,h._$id=t._$characterId++,k.$confirmModal.pasteDisplayObject(r,h,this._$copyFrame)}k.$libraryController.reload()}else{for(let e=0;this._$copyDisplayObjects.length>e;++e){const a=this._$copyDisplayObjects[e];if(!t.getLibrary(a.libraryId))return this._$copyWorkSpaceId=-1,void(this._$copyDisplayObjects.length=0)}this.save();for(let e=this._$copyDisplayObjects.length-1;e>-1;--e){const t=this._$copyDisplayObjects[e];k.$confirmModal.pasteDisplayObject(r,t.clone(),this._$copyFrame)}}r.reloadStyle(),k.$confirmModal.files.length?k.$confirmModal.show():k.$confirmModal.clear(),this.reloadScreen(),this._$saved=!1,super.focusOut()}executeScreenPreview(){k.$showPreview()}executeScreenDistributeToLayers(){const e=k.$tools.getDefaultTool("arrow").activeElements;if(!e.length)return;this.save();const t=[],a=k.$timelineFrame.currentFrame,r=new Map,i=k.$currentWorkSpace().scene;for(let s=0;s<e.length;++s){const n=e[s],o=i.getLayer(0|n.dataset.layerId);if(!o)continue;const l=o.getCharacter(0|n.dataset.characterId);if(!l)continue;const c=l.getRange(a);r.has(o.id)||r.set(o.id,{layer:o,range:c});const d=l.getPlace(c.startFrame);d.depth=0,t.push({libraryId:l.libraryId,place:d,startFrame:c.startFrame,endFrame:c.endFrame}),l.remove(o)}for(const e of r.values()){const t=e.layer,r=e.range,i=t.getActiveCharacter(r.startFrame);if(i.length){t.sort(i,a);for(let e=0;e<i.length;++e)i[e].getPlace(a).depth=e}else t.addEmptyCharacter(new L({startFrame:r.startFrame,endFrame:r.endFrame}));t.reloadStyle()}k.$timelineLayer.clear();const s=k.$ctrlKey;k.$ctrlKey=!0;for(let e=0;e<t.length;++e){const a=t[e],r=new M;r.libraryId=a.libraryId,r.startFrame=a.startFrame,r.endFrame=a.endFrame,r.setPlace(a.startFrame,a.place);const s=new T;s.addCharacter(r),a.startFrame>1&&s.addEmptyCharacter(new L({startFrame:1,endFrame:a.startFrame})),i.addLayer(s),k.$timelineLayer.activeLayer(document.getElementById(`layer-id-${s.id}`))}this.reloadScreen(),k.$timelineLayer.activeCharacter(),k.$ctrlKey=s,this._$saved=!1}executeScreenDistributeToKeyframes(){const e=k.$tools.getDefaultTool("arrow").activeElements;if(!e.length)return;this.save();const t=k.$currentWorkSpace().scene;let a=k.$timelineFrame.currentFrame;const r=new Map;for(const i of e.values()){const e=t.getLayer(0|i.dataset.layerId),s=e.getCharacter(0|i.dataset.characterId);r.has(e.id)||r.set(e.id,{range:s.getRange(a),characters:[]}),r.get(e.id).characters.push(s)}for(const[e,i]of r){let r=i.characters;if(1===r.length)continue;const s=t.getLayer(e),n=i.range,o=s.getActiveCharacter(a),l=n.endFrame-n.startFrame;switch(!0){case r.length!==o.length:{const e=new Map,t=[];for(let a=0;a<o.length;++a){const i=o[a],l=r.indexOf(i),c=i.split(s,n.startFrame,n.endFrame);l>-1&&e.set(c.id,l),t.push(c)}for(let e=0;e<s._$characters.length;++e){const t=s._$characters[e];if(!(n.endFrame>t.endFrame))if(t.startFrame>n.startFrame)t.move(r.length);else{const e=new Map;for(const[a,i]of t._$places)a>n.startFrame&&(i.frame=a+r.length),e.set(i.frame,i);t._$places=e,t.endFrame+=r.length,t._$cachePlaces.length=0}}for(let e=0;s._$emptys.length>e;++e){const t=s._$emptys[e];n.startFrame>t.startFrame||t.move(r.length)}a=n.endFrame,n.startFrame=n.endFrame,n.endFrame+=r.length;const i=[];for(let a=0;a<t.length;++a){const r=t[a];if(e.has(r.id))r.setPlace(n.startFrame,r.getPlace(r.startFrame)),r.deletePlace(r.startFrame),r.startFrame=n.startFrame,r.endFrame=n.endFrame,s.addCharacter(r),i.push(r);else for(let e=0;e<s._$characters.length;++e){const t=s._$characters[e];if(t.libraryId===r.libraryId&&t.endFrame===r.startFrame){for(const[e,a]of r._$places)t.setPlace(e,a);t.endFrame=r.endFrame;break}}}r=i}break;case r.length>l:{const e=r.length-l;for(let t=0;s._$characters.length>t;++t){const a=s._$characters[t];if(!(n.endFrame>=a.endFrame))if(a.startFrame>n.endFrame)a.move(e);else{const t=new Map;for(const[r,i]of a._$places)r>=n.endFrame&&(i.frame=r+e),t.set(i.frame,i);a._$places=t,a.endFrame+=e,a._$cachePlaces.length=0}}for(let t=0;s._$emptys.length>t;++t){const a=s._$emptys[t];n.endFrame>=a.endFrame||a.move(e)}n.endFrame+=e}break;case l>r.length:{const e=l-r.length;for(let t=0;s._$characters.length>t;++t){const a=s._$characters[t];if(!(n.endFrame>a.endFrame))if(a.startFrame>n.endFrame)a.move(-e);else{const t=new Map;for(const[r,i]of a._$places)r>=n.endFrame&&(i.frame=r-e),t.set(i.frame,i);a._$places=t,a.endFrame-=e,a._$cachePlaces.length=0}}for(let t=0;s._$emptys.length>t;++t){const a=s._$emptys[t];n.startFrame>a.startFrame||a.move(-e)}n.endFrame-=e}}r.sort(((e,t)=>{const r=e.getPlace(a).depth,i=t.getPlace(a).depth;switch(!0){case r>i:return 1;case r<i:return-1;default:return 0}}));let c=n.startFrame;for(let e=0;e<r.length;++e){let t=r[e];1!==t._$places.size&&(t=t.split(s,n.startFrame,n.endFrame),s.addCharacter(t));const i=t.getPlace(a);let o=!1;for(let e=0;e<s._$characters.length;++e){const a=s._$characters[e];if(a.id!==t.id&&(a.libraryId===t.libraryId&&a.endFrame===c)){s.deleteCharacter(t.id),a.endFrame=c+1,a.setPlace(c,i),o=!0;break}}if(o)c++;else{for(let e=0;e<s._$characters.length;++e){const a=s._$characters[e];if(a.id!==t.id&&(a.libraryId===t.libraryId&&a.startFrame===c+1)){s.deleteCharacter(t.id),a.startFrame=c,a.setPlace(c,i),o=!0;break}}o||(t.startFrame=c,t.endFrame=c+1,t.deletePlace(i.frame),t.setPlace(c,i)),c++}}s.reloadStyle()}this.reloadScreen(),this._$saved=!1}executeScreenIntegratingPaths(){const e=k.$tools.getDefaultTool("arrow").activeElements;if(!e.length)return;this.save();const t=k.$currentWorkSpace(),a=t.scene,r=k.$timelineFrame.currentFrame;let i=null,s=null,n=0;for(let o=0;o<e.length;++o){const l=e[o];if(l.dataset.instanceType!==A.SHAPE)continue;const c=t.getLibrary(0|l.dataset.libraryId),d=a.getLayer(0|l.dataset.layerId).getCharacter(0|l.dataset.characterId),{Graphics:h}=window.next2d.display;if(!i){s=d,i=c;for(let e=0;i._$recodes.length>e;){switch(i._$recodes[e++]){case h.BEGIN_PATH:break;case h.MOVE_TO:case h.LINE_TO:e+=2;break;case h.CURVE_TO:e+=4;break;case h.CUBIC:e+=6;break;case h.FILL_STYLE:case h.GRADIENT_FILL:case h.STROKE_STYLE:case h.GRADIENT_STROKE:n=e-1;case h.CLOSE_PATH:case h.END_STROKE:case h.END_FILL:}if(n)break}continue}const u=s.screenX-i._$bounds.xMin-d.screenX,m=s.screenY-i._$bounds.yMin-d.screenY,g=d.getPlace(r).matrix,p=[];let f=!1;for(let e=0;c._$recodes.length>e;){switch(c._$recodes[e++]){case h.BEGIN_PATH:break;case h.MOVE_TO:{const t=c._$recodes[e++],a=c._$recodes[e++];p.push(h.MOVE_TO,t*g[0]+a*g[2]-u,t*g[1]+a*g[3]-m)}break;case h.LINE_TO:{const t=c._$recodes[e++],a=c._$recodes[e++];p.push(h.LINE_TO,t*g[0]+a*g[2]-u,t*g[1]+a*g[3]-m)}break;case h.CURVE_TO:{const t=c._$recodes[e++],a=c._$recodes[e++],r=c._$recodes[e++],i=c._$recodes[e++];p.push(h.CURVE_TO,t*g[0]+a*g[2]-u,t*g[1]+a*g[3]-m,r*g[0]+i*g[2]-u,r*g[1]+i*g[3]-m)}break;case h.CUBIC:{const t=c._$recodes[e++],a=c._$recodes[e++],r=c._$recodes[e++],i=c._$recodes[e++],s=c._$recodes[e++],n=c._$recodes[e++];p.push(h.CUBIC,t*g[0]+a*g[2]-u,t*g[1]+a*g[3]-m,r*g[0]+i*g[2]-u,r*g[1]+i*g[3]-m,s*g[0]+n*g[2]-u,s*g[1]+n*g[3]-m)}break;case h.FILL_STYLE:case h.GRADIENT_FILL:case h.STROKE_STYLE:case h.GRADIENT_STROKE:f=!0,Array.prototype.splice.apply(i._$recodes,[n,0].concat(p)),n+=p.length;case h.CLOSE_PATH:case h.END_STROKE:case h.END_FILL:}if(f)break}}if(i){const e=i.reloadBounds();i._$bounds.xMin=e.xMin,i._$bounds.xMax=e.xMax,i._$bounds.yMin=e.yMin,i._$bounds.yMax=e.yMax,i.cacheClear(),this.reloadScreen()}this._$saved=!1}executeScreenChangeMovieClip(){if(!k.$tools.getDefaultTool("arrow").activeElements.length)return;if(!k.$timelineLayer.targetLayer)return;const e=document.getElementById("change-movie-clip");if(!e)return;const t=document.getElementById("change-movie-clip-input");if(t){const e=k.$currentWorkSpace();t.value=`MovieClip_${e.nextLibraryId}`}k.$endMenu("change-movie-clip"),e.classList.contains("fadeIn")||e.setAttribute("class","fadeIn")}executeScreenChangeScene(){const e=k.$tools.getDefaultTool("arrow");if(1===e._$activeElements.length){const t=e._$activeElements[0];if("container"!==t.dataset.instanceType)return;k.$screen.changeScene({stopPropagation:()=>{},currentTarget:t})}}executeScreenMoveScene(){k.$tools.getDefaultTool("arrow").moveScene()}executeScreenRuler(){k.$screenRuler.show()}executeScreenAddTweenCurvePointer(){k.$tweenController.addCurvePinter()}executeScreenDeleteTweenCurvePointer(){k.$tweenController.deleteCurvePointer()}executeScreenFront(){this.changeDepth("up")}executeScreenBack(){this.changeDepth("down")}executeScreenFrontOne(){this.changeDepthOne("up")}executeScreenBackOne(){this.changeDepthOne("down")}executeStagePositionLeft(){this.alignment("left","stage")}executeScreenPositionLeft(){this.alignment("left")}executeStagePositionCenter(){this.alignment("center","stage")}executeScreenPositionCenter(){this.alignment("center")}executeStagePositionRight(){this.alignment("right","stage")}executeScreenPositionRight(){this.alignment("right")}executeStagePositionTop(){this.alignment("top","stage")}executeScreenPositionTop(){this.alignment("top")}executeStagePositionMiddle(){this.alignment("middle","stage")}executeScreenPositionMiddle(){this.alignment("middle")}executeStagePositionBottom(){this.alignment("bottom","stage")}executeScreenPositionBottom(){this.alignment("bottom")}alignment(e,t="rect"){const a=k.$tools.getDefaultTool("arrow").activeElements;if(!a.length||"rect"===t&&2>a.length)return;this.save();const r=k.$currentWorkSpace();let i=0,s=0,n=0,o=0;if("rect"===t){const e=document.getElementById("target-rect");i=e.offsetLeft-k.$offsetLeft-k.$sceneChange.offsetX,s=e.offsetTop-k.$offsetTop-k.$sceneChange.offsetY,n=e.offsetWidth,o=e.offsetHeight}else{const e=document.getElementById("scene-name-menu-list").children;let t=0;for(let a=0;a<e.length;++a){"false"!==e[a].dataset.parent&&t++}if(!t){const e=r.stage;n=e.width,o=e.height}}const l=k.$sceneChange.concatenatedMatrix,c=k.$timelineFrame.currentFrame,d=r.scene;for(let r=0;r<a.length;++r){const h=a[r],u=d.getLayer(0|h.dataset.layerId);if(!u||u.lock||u.disable)continue;const m=u.getCharacter(0|h.dataset.characterId),g=m.getPlace(c);if(!g.point){const e=m.getBounds(l),t=k.$sceneChange.offsetX+e.xMin,a=k.$sceneChange.offsetY+e.yMin,r=Math.ceil(Math.abs(e.xMax-e.xMin))/2,i=Math.ceil(Math.abs(e.yMax-e.yMin))/2;g.point={x:t+r,y:a+i}}const p=g.matrix[4],f=g.matrix[5],$=m.getBounds(l),y=Math.abs($.xMax-$.xMin),_=Math.abs($.yMax-$.yMin);switch(e){case"left":g.matrix[4]=p-$.xMin+i;break;case"right":g.matrix[4]=p-$.xMin+i+n-y;break;case"center":g.matrix[4]=p-$.xMin+i+n/2-y/2;break;case"top":g.matrix[5]=f-$.yMin+s;break;case"bottom":g.matrix[5]=f-$.yMin+s+o-_;break;case"middle":g.matrix[5]=f-$.yMin+s+o/2-_/2}const b=document.getElementById(`character-${m.id}`),v=m.getBounds(l),w=k.$offsetLeft+(k.$sceneChange.offsetX+v.xMin)*k.$zoomScale,S=k.$offsetTop+(k.$sceneChange.offsetY+v.yMin)*k.$zoomScale;b.style.top=`${S}px`,b.style.left=`${w}px`,m.screenX=v.xMin,m.screenY=v.yMin;const I=g.point;I.x+=g.matrix[4]-p,I.y+=g.matrix[5]-f,1===a.length&&"stage"===t&&(document.getElementById("object-x").value=`${g.matrix[4]}`,document.getElementById("object-y").value=`${g.matrix[5]}`)}k.$transformController.relocation(),this._$saved=!1}changeDepthOne(e="up"){const t=k.$tools.getDefaultTool("arrow").activeElements;if(!t.length)return;this.save();const a=k.$currentWorkSpace().scene,r=k.$timelineFrame.currentFrame,i=new Map;for(let e=0;e<t.length;++e){const r=t[e],s=a.getLayer(0|r.dataset.layerId);i.has(s.id)||i.set(s.id,[]),i.get(s.id).push(s.getCharacter(0|r.dataset.characterId))}for(const[t,s]of i){const i=a.getLayer(t).getActiveCharacter(r);if(1>=i.length)continue;i.sort(((e,t)=>{const a=e.getPlace(r).depth,i=t.getPlace(r).depth;switch(!0){case a>i:return-1;case a<i:return 1;default:return 0}})),s.length>1&&("up"===e?s.sort(((e,t)=>{const a=e.getPlace(r).depth,i=t.getPlace(r).depth;switch(!0){case a>i:return-1;case a<i:return 1;default:return 0}})):s.sort(((e,t)=>{const a=e.getPlace(r).depth,i=t.getPlace(r).depth;switch(!0){case a>i:return 1;case a<i:return-1;default:return 0}})));let n=0,o=i.length-1;for(let t=0;t<s.length;++t){const a=s[t],l=a.getPlace(r);if("up"===e){if(l.depth>=o){--o;continue}l.depth++;const e=i.indexOf(a);i[e-1].getPlace(r).depth--}else{if(n>=l.depth){++n;continue}l.depth--;const e=i.indexOf(a);i[e+1].getPlace(r).depth++}i.sort(((e,t)=>{const a=e.getPlace(r).depth,i=t.getPlace(r).depth;switch(!0){case a>i:return-1;case a<i:return 1;default:return 0}}))}}this.reloadScreen(),this._$saved=!1}changeDepth(e="up"){const t=k.$tools.getDefaultTool("arrow").activeElements;if(!t.length)return;this.save();const a=k.$currentWorkSpace().scene,r=k.$timelineFrame.currentFrame,i=new Map;for(let e=0;e<t.length;++e){const r=t[e],s=a.getLayer(0|r.dataset.layerId);i.has(s.id)||i.set(s.id,[]),i.get(s.id).push(s.getCharacter(0|r.dataset.characterId))}for(const[t,s]of i){const i=a.getLayer(t).getActiveCharacter(r);if(1>=i.length)continue;i.sort(((e,t)=>{const a=e.getPlace(r).depth,i=t.getPlace(r).depth;switch(!0){case a>i:return-1;case a<i:return 1;default:return 0}})),s.length>1&&("up"===e?s.sort(((e,t)=>{const a=e.getPlace(r).depth,i=t.getPlace(r).depth;switch(!0){case a>i:return-1;case a<i:return 1;default:return 0}})):s.sort(((e,t)=>{const a=e.getPlace(r).depth,i=t.getPlace(r).depth;switch(!0){case a>i:return 1;case a<i:return-1;default:return 0}})));const n=new Map;let o=0,l=i.length-1;for(let t=0;t<s.length;++t){const a=s[t],c=a.getPlace(r);if("up"===e){if(c.depth>=l){--l;continue}c.depth=l--,n.set(a.id,!0);let e=l;for(let t=0;i.length>t;++t){const a=i[t];if(!n.has(a.id)&&(a.getPlace(r).depth=e--,-1===e))break}}else{if(o>=c.depth){++o;continue}c.depth=o++,n.set(a.id,!0);let e=o;for(let t=i.length-1;t>-1;--t){const a=i[t];if(!n.has(a.id)&&(a.getPlace(r).depth=e++,e===i.length))break}}}}this.reloadScreen(),this._$saved=!1}show(e){const t=k.$tools.getDefaultTool("arrow");switch(t.activeElements.length){case 0:{const e=["screen-order","screen-align","screen-move-scene","screen-change-scene","screen-distribute-to-layers","screen-distribute-to-keyframes","screen-integrating-paths","screen-add-tween-curve-pointer","screen-delete-tween-curve-pointer","screen-change-movie-clip"];for(let t=0;t<e.length;++t){const a=document.getElementById(e[t]);a&&a.setAttribute("style","opacity:0.5; pointer-events:none;")}}break;case 1:{const e=["screen-order","screen-align","screen-change-movie-clip","screen-distribute-to-layers","screen-distribute-to-keyframes"];for(let t=0;t<e.length;++t){const a=document.getElementById(e[t]);a&&a.setAttribute("style","")}const a=["screen-move-scene","screen-change-scene","screen-integrating-paths","screen-add-tween-curve-pointer","screen-delete-tween-curve-pointer"];for(let e=0;e<a.length;++e){const t=document.getElementById(a[e]);t&&t.setAttribute("style","opacity:0.5; pointer-events:none;")}const r=t.activeElements[0];r.dataset.instanceType===A.MOVIE_CLIP&&document.getElementById("screen-change-scene").setAttribute("style","");const i=k.$currentWorkSpace().scene.getLayer(0|r.dataset.layerId);if(i){i.getCharacter(0|r.dataset.characterId).getPlace(0|k.$timelineFrame.currentFrame).tweenFrame&&(document.getElementById("screen-add-tween-curve-pointer").setAttribute("style",""),document.getElementById("screen-delete-tween-curve-pointer").setAttribute("style",""))}}break;default:{const e=["screen-order","screen-align","screen-change-movie-clip","screen-distribute-to-layers","screen-distribute-to-keyframes"];for(let t=0;t<e.length;++t){const a=document.getElementById(e[t]);a&&a.setAttribute("style","")}const a=["screen-move-scene","screen-change-scene","screen-integrating-paths","screen-add-tween-curve-pointer","screen-delete-tween-curve-pointer"];for(let e=0;e<a.length;++e){const t=document.getElementById(a[e]);t&&t.setAttribute("style","opacity:0.5; pointer-events:none;")}const r=t.activeElements;let i=!0;for(let e=0;e<r.length;++e){if(r[e].dataset.instanceType!==A.SHAPE){i=!1;break}}i&&document.getElementById("screen-integrating-paths").setAttribute("style","")}}k.$sceneChange.matrix.length&&document.getElementById("screen-move-scene").setAttribute("style",""),k.$endMenu("screen-menu");const a=document.getElementById("screen-menu"),r=a.clientHeight/2+15;if(a.style.left=`${e.pageX+5}px`,a.style.top=e.pageY-r+"px",15>a.offsetTop&&(a.style.top="10px"),e.pageY+r>window.innerHeight){const t=window.innerHeight-(e.pageY+r-15);a.style.top=`${a.offsetTop+t}px`}a.setAttribute("class","fadeIn")}};class Ge extends He{constructor(){super(),this._$state="hide",this._$elementIds=["ruler-top","ruler-left"],this._$size=Ge.DEFAULT_SIZE,this._$mouseMove=null,this._$mouseUp=null,this._$target=null,this._$mode=""}static get DEFAULT_SIZE(){return 5}get state(){return this._$state}initialize(){super.initialize(),document.documentElement.style.setProperty("--ruler-size",`${Ge.DEFAULT_SIZE}px`);for(let e=0;e<this._$elementIds.length;++e){const t=document.getElementById(this._$elementIds[e]);t&&t.addEventListener("mousedown",(e=>{e.stopPropagation(),e.preventDefault(),this.executeFunction(e.target.id)}))}}mouseMove(e){this._$target&&window.requestAnimationFrame((()=>{this._$target&&(e.stopPropagation(),e.preventDefault(),"x"===this._$mode?(this._$target.style.left=`${e.offsetX}px`,k.$rulerController.setInputValue(e.offsetX-k.$offsetLeft)):(this._$target.style.top=`${e.offsetY}px`,k.$rulerController.setInputValue(e.offsetY-k.$offsetTop)))}))}mouseUp(e){k.$tools.getDefaultTool("arrow").changeNodeEvent(),window.removeEventListener("mousemove",this._$mouseMove),window.removeEventListener("mouseup",this._$mouseUp),this.save();const t=k.$currentWorkSpace(),a=document.getElementById("screen");if("true"===e.target.dataset.removeZone){if("x"===this._$mode){const e=Array.from(a.getElementsByClassName("ruler-border-x")).indexOf(this._$target);t._$rulerX.splice(e,1)}else{const e=Array.from(a.getElementsByClassName("ruler-border-y")).indexOf(this._$target);t._$rulerY.splice(e,1)}this._$target.remove(),this._$target=null,k.$controller.hideObjectSetting(["ruler-setting"])}else this.updatePosition();this.changeNodeEvent(!0),this._$saved=!1}updatePosition(){const e=document.getElementById("screen");if(!e)return;const t=k.$currentWorkSpace(),a=this._$target;if("x"===this._$mode){const r=Array.from(e.getElementsByClassName("ruler-border-x")).indexOf(a);t._$rulerX[r]=Math.ceil((a.offsetLeft-k.$offsetLeft)/k.$zoomScale)}else{const r=Array.from(e.getElementsByClassName("ruler-border-y")).indexOf(a);t._$rulerY[r]=Math.ceil((a.offsetTop-k.$offsetTop)/k.$zoomScale)}}changeNodeEvent(e=!0){const t=document.getElementById("screen");if(!t)return;const a=t.getElementsByClassName("ruler-border-x");for(let t=0;t<a.length;++t)a[t].style.pointerEvents=e?"":"none";const r=t.getElementsByClassName("ruler-border-y");for(let t=0;t<r.length;++t)r[t].style.pointerEvents=e?"":"none"}reload(){if("hide"===this._$state)return;const e=document.getElementById("screen");if(!e)return;const t=document.getElementById("stage-area");if(!t)return;let a="";a+=`height: ${t.offsetHeight}px;`,a+=`left: ${e.scrollLeft}px;`,document.getElementById("ruler-left").setAttribute("style",a);let r="";r+=`width: ${t.offsetWidth}px;`,r+=`top: ${e.scrollTop}px;`,document.getElementById("ruler-top").setAttribute("style",r)}executeRulerTop(){document.getElementById("stage-area")&&"arrow"===k.$tools.activeTool.name&&(this._$mode="y",this._$target=this.createBorderY(),document.getElementById("screen").prepend(this._$target),k.$currentWorkSpace()._$rulerY.unshift(this._$target.offsetTop-k.$offsetTop),this.setupMove())}createBorderY(){const e=document.getElementById("stage-area");if(!e)return;const t=document.createElement("div");return t.setAttribute("style",`width: ${e.offsetWidth}px;`),t.setAttribute("class","ruler-border-y"),t.addEventListener("mousedown",(e=>{e.stopPropagation(),e.preventDefault(),this._$target=e.target,this._$mode="y",this.setupMove(),k.$controller.showObjectSetting(["ruler-setting"]);document.getElementById("ruler-position")&&k.$rulerController.setInputValue(this._$target.offsetTop-k.$offsetTop)})),t}executeRulerLeft(){document.getElementById("stage-area")&&"arrow"===k.$tools.activeTool.name&&(this._$mode="x",this._$target=this.createBorderX(),document.getElementById("screen").prepend(this._$target),k.$currentWorkSpace()._$rulerX.unshift(this._$target.offsetLeft-k.$offsetLeft),this.setupMove())}createBorderX(){const e=document.getElementById("stage-area");if(!e)return;const t=document.createElement("div");return t.setAttribute("style",`height: ${e.offsetHeight}px;`),t.setAttribute("class","ruler-border-x"),t.addEventListener("mousedown",(e=>{e.stopPropagation(),e.preventDefault(),this._$target=e.target,this._$mode="x",this.setupMove(),k.$controller.showObjectSetting(["ruler-setting"]);document.getElementById("ruler-position")&&k.$rulerController.setInputValue(this._$target.offsetLeft-k.$offsetLeft)})),t}setupMove(){const e=k.$tools.getDefaultTool("arrow");e.clear(),e.changeNodeEvent(!1),this.changeNodeEvent(!1),this._$mouseMove||(this._$mouseMove=this.mouseMove.bind(this)),this._$mouseUp||(this._$mouseUp=this.mouseUp.bind(this)),window.addEventListener("mousemove",this._$mouseMove),window.addEventListener("mouseup",this._$mouseUp)}rebuild(){if(this.removeAll(),this._$size=Ge.DEFAULT_SIZE*k.$zoomScale,document.documentElement.style.setProperty("--ruler-size",this._$size-1+"px"),"show"===this._$state){const e=document.getElementById("stage"),t=document.getElementById("stage-area");this.createRuler(document.getElementById("ruler-top"),e.offsetLeft,t.offsetWidth),this.createRuler(document.getElementById("ruler-left"),e.offsetTop,t.offsetHeight),this.reload()}this.createBorder()}createBorder(){const e=k.$currentWorkSpace(),t=document.getElementById("screen");for(let a=e._$rulerX.length-1;a>-1;--a){const r=e._$rulerX[a],i=this.createBorderX();i.style.left=`${k.$offsetLeft+r*k.$zoomScale}px`,t.prepend(i)}for(let a=e._$rulerY.length-1;a>-1;--a){const r=e._$rulerY[a],i=this.createBorderY();i.style.top=`${k.$offsetTop+r*k.$zoomScale}px`,t.prepend(i)}}createRuler(e,t,a){const r=this._$size,i=r>=Ge.DEFAULT_SIZE?50:200,s=r>=Ge.DEFAULT_SIZE?10:40,n=r*s,o=Math.ceil(t/k.$zoomScale),l=o%i,c=l/Ge.DEFAULT_SIZE;if(c){const t=document.createElement("div");t.setAttribute("class","vertical-main");const a=document.createElement("div");t.appendChild(a),a.setAttribute("class","vertical-header");const r=document.createElement("div");t.appendChild(r),r.setAttribute("class","vertical-meter");for(let e=0;c>e;++e){const t=document.createElement("div");t.setAttribute("class",e%2==0?"vertical-line":"vertical-line-pointer"),r.appendChild(t)}e.appendChild(t)}a=a/n|0;let d=o-l;for(let t=0;a>t;++t){const t=document.createElement("div");t.setAttribute("class","vertical-main");const a=document.createElement("div");t.appendChild(a),a.setAttribute("class","vertical-header"),a.textContent=`${Math.abs(d)}`;const r=document.createElement("div");t.appendChild(r),r.setAttribute("class","vertical-meter");for(let e=0;s>e;++e){const t=document.createElement("div");t.setAttribute("class",e%2==0?"vertical-line":"vertical-line-pointer"),r.appendChild(t)}d-=i,e.appendChild(t)}}show(){if("show"===this._$state)return void this.hide();k.$currentWorkSpace()._$ruler=!0,this._$state="show",this.rebuild()}hide(){if("hide"===this._$state)return;k.$currentWorkSpace()._$ruler=!1,this.clear(),this.createBorder()}clear(){this._$state="hide",this.removeAll()}removeAll(){for(let e=0;this._$elementIds.length>e;++e){const t=document.getElementById(this._$elementIds[e]);if(t){for(;t.firstChild;)t.firstChild.remove();t.setAttribute("style","display: none;")}}const e=document.getElementById("screen");if(!e)return;const t=e.getElementsByClassName("ruler-border-x");for(;t.length;)t[0].remove();const a=e.getElementsByClassName("ruler-border-y");for(;a.length;)a[0].remove()}}k.$screenRuler=new Ge;k.$screenTab=new class{constructor(){this._$dropTab=null,this._$saved=!1}run(){for(let e=0;e<k.$workSpaces.length;++e)this.createElement(k.$workSpaces[e],e);const e=document.getElementById("view-tab-add");e&&e.addEventListener("click",(e=>{this.addTab(e)}));const t=document.getElementById("view-tab-list");t&&t.addEventListener("mousedown",(e=>{this.showTabList(e)}))}showTabList(e){e.stopPropagation();const t=document.getElementById("tab-name-menu");if(t.classList.contains("fadeIn"))return k.$endMenu();k.$endMenu("tab-name-menu");const a=e.currentTarget;t.style.left=`${a.offsetLeft+a.offsetWidth}px`,t.style.top=`${a.offsetTop+25}px`,t.setAttribute("class","fadeIn")}createElement(e,t){e.name||(e.name=`Untitled-${t+1}`);const a=document.getElementById("view-tab-area");if(!a)return;a.insertAdjacentHTML("beforeend",`\n<div draggable="true" id="tab-id-${t}" data-tab-id="${t}" class="tab">\n    <p id="tab-text-id-${t}" data-tab-id="${t}" data-detail="{{タブの移動・名前を変更}}" data-shortcut-key="ArrowLeftCtrl" data-shortcut-text="Ctrl + ◀︎ or ▶" data-area="global">${e.name}</p>\n    <input type="text" id="tab-input-id-${t}" data-tab-id="${t}" value="${e.name}" autocomplete="off" tabindex="-1">\n    <i id="tab-delete-id-${t}" data-tab-id="${t}" data-detail="{{プロジェクトを閉じる}}"></i>\n</div>`);const r=document.getElementById(`tab-id-${t}`);k.$addModalEvent(r),r.classList.add(k.$activeWorkSpaceId===t?"active":"disable"),r.addEventListener("mousedown",(e=>{this.activeTab(e)})),r.addEventListener("dragstart",(e=>{this.dragStart(e)})),r.addEventListener("dragover",(e=>{this.dragOver(e)})),r.addEventListener("dragleave",(e=>{this.dragLeave(e)})),r.addEventListener("drop",(e=>{this.drop(e)})),document.getElementById(`tab-delete-id-${t}`).addEventListener("click",(e=>{this.deleteTab(e)})),document.getElementById(`tab-text-id-${t}`).addEventListener("dblclick",(e=>{this.editStart(e)}));const i=document.getElementById(`tab-input-id-${t}`);i&&(i.style.display="none",i.addEventListener("focusout",(e=>{this.editEnd(e)})),i.addEventListener("keypress",(e=>{this.editEnd(e)}))),document.getElementById("tab-name-menu-list").insertAdjacentHTML("beforeend",`\n<div id="tab-menu-id-${t}" data-tab-id="${t}">${e.name}</div>`);const s=document.getElementById(`tab-menu-id-${t}`);s&&s.addEventListener("mousedown",(e=>{this.activeTab(e,!0)}))}drop(e){e.preventDefault(),this.save(),e.currentTarget.classList.remove("drop-target");const t=e.currentTarget.nextElementSibling;document.getElementById("view-tab-area").insertBefore(this._$dropTab,this._$dropTab===t?e.currentTarget:t),this._$dropTab=null,this._$saved=!1}dragLeave(e){e.preventDefault(),e.currentTarget.classList.remove("drop-target")}dragOver(e){e.preventDefault(),e.currentTarget.classList.add("drop-target")}dragStart(e){k.$endMenu(),this._$dropTab=e.currentTarget}activeTab(e,t=!1){k.$root._$stage._$player.stop(),k.$endMenu();const a=document.getElementById(`tab-id-${k.$activeWorkSpaceId}`);a&&(a.classList.remove("active"),a.classList.add("disable"));const r=0|e.currentTarget.dataset.tabId,i=document.getElementById(`tab-id-${r}`);if(i&&(i.classList.remove("disable"),i.classList.add("active"),t)){const e=document.getElementById("view-tab-area");i.remove(),e.prepend(i)}k.$activeWorkSpaceId!==r&&k.$changeWorkSpace(r)}deleteTab(e){e.preventDefault();const t=k.$currentLanguage.replace("{{プロジェクトが保存されていない場合、このタブのプロジェクトデータを復旧する事はできません。タブを削除しますか？}}");if(!window.confirm(t))return;k.$root._$stage._$player.stop();const a=0|e.currentTarget.dataset.tabId,r=k.$workSpaces[a];k.$workSpaces[a]=null,document.getElementById(`tab-id-${a}`).remove(),document.getElementById(`tab-menu-id-${a}`).remove();const i=document.getElementById("library-preview-area");for(;i.children.length;)i.children[0].remove();k.$tools.getDefaultTool("arrow").clear();const s=document.getElementById("view-tab-area");if(s.children.length){if(k.$activeWorkSpaceId===a){const e=s.children[0];e.setAttribute("class","tab active"),r.stop(),k.$activeWorkSpaceId=0|e.dataset.tabId,k.$currentWorkSpace().run()}}else{k.$workSpaces.length=0,k.$activeWorkSpaceId=0;const e=new te;k.$workSpaces.push(e),this.createElement(e,0),r.stop(),e.run();s.children[0].setAttribute("class","tab active")}}editStart(e){k.$keyLock=!0;const t=e.currentTarget,a=0|t.dataset.tabId,r=document.getElementById(`tab-input-id-${a}`);if("none"===r.style.display){r.style.width=`${t.offsetWidth}px`,r.style.display="",t.style.display="none",r.focus();document.getElementById(`tab-id-${a}`).draggable=!1}}editEnd(e){if("Enter"!==e.key){if("focusout"===e.type){this.save();const t=e.currentTarget;t.style.display="none";const a=0|t.dataset.tabId,r=document.getElementById(`tab-text-id-${a}`),i=document.getElementById(`tab-menu-id-${a}`);k.$workSpaces[a].name=t.value,i.textContent=t.value,r.textContent=t.value,r.style.display="";document.getElementById(`tab-id-${a}`).draggable=!0,this._$saved=!1}}else e.target.blur()}addTab(e){k.$endMenu(),e.stopPropagation(),this.save();const t=k.$workSpaces.length,a=new te;k.$workSpaces.push(a),this.createElement(a,t),this._$saved=!1}save(){this._$saved||(this._$saved=!0,k.$currentWorkSpace().temporarilySaved())}};class Ze extends He{constructor(){super(),this._$currentValue=0}static get MIN_LEVEL(){return.25}static get MAX_LEVEL(){return 5}initialize(){super.initialize();const e=document.getElementById("screen-scale");e&&this.setInputEvent(e)}changeScreenScale(e){return e=k.$clamp(0|e,100*Ze.MIN_LEVEL,100*Ze.MAX_LEVEL),this.execute((e-this._$currentValue)/100),this._$currentValue=e,e}execute(e){const t=k.$zoomScale;k.$zoomScale+=e,k.$zoomScale=Math.min(Ze.MAX_LEVEL,Math.max(Ze.MIN_LEVEL,k.$zoomScale)),document.getElementById("screen-scale").value=""+(100*k.$zoomScale|0);const a=k.$currentWorkSpace(),r=k.$timelineFrame.currentFrame,i=a.scene;for(const e of i._$layers.values()){const t=e.getActiveCharacter(r);for(let e=0;e<t.length;++e)t[e].dispose()}i.changeFrame(r).then((()=>{const e=document.getElementById("stage-area");if(!e)return;let t=null;const a=e.children;for(let e=0;a.length>e;++e){const r=a[e];r.dataset.shapePointer&&(t=r,r.remove(),--e)}if(t){const e=0|t.dataset.characterId,a=0|t.dataset.layerId;k.$currentWorkSpace().getLibrary(0|t.dataset.libraryId).createPointer(a,e)}}));const s=a.stage.width*k.$zoomScale,n=a.stage.height*k.$zoomScale,o=document.getElementById("screen"),l=document.getElementById("stage-area"),c=document.getElementById("stage"),d=o.clientWidth,h=o.clientHeight,u=s+window.screen.width,m=n+window.screen.height;c.style.width=`${s}px`,c.style.height=`${n}px`,l.setAttribute("style",`width: ${u}px; height: ${m}px;`);const g=d/2,p=h/2,f=(o.scrollLeft+g-k.$offsetLeft)/t*k.$zoomScale,$=(o.scrollTop+p-k.$offsetTop)/t*k.$zoomScale;o.scrollLeft=k.$offsetLeft+f-g,o.scrollTop=k.$offsetTop+$-p,k.$rebuildRuler()}}k.$screenZoom=new Ze;class Ke{constructor(){this._$begin=!1}beginDraw(){this._$begin=!0}}class Ve{constructor(e){this._$workSpace=e,this._$timeline=new at(this),this._$library=new tt(this)}get pathURI(){return this._$workSpace.name}get timelines(){const e=[];for(const t of this._$workSpace._$libraries.values())t.type===A.MOVIE_CLIP&&e.push(new at(this._$workSpace));return e}getTimeline(){return this._$timeline}get library(){return this._$library}}class Je{constructor(e,t){this._$character=e,this._$parent=t}get x(){return this._$character.x}set x(e){this._$character.x=e;const t=k.$currentWorkSpace().getLibrary(this._$character.libraryId);let a=k.$timelineFrame.currentFrame;const r=this._$character.getPlace(a);let i=Object.keys(r);const s={};for(let e=0;e<i.length;++e){const t=i[e];s[t]=r[t]}s.loop=k.$getDefaultLoopConfig(),s.startFrame=this._$character.startFrame,s.endFrame=this._$character.endFrame;const n=k.$boundsMatrix(t.getBounds(s),s.matrix),o=k.$offsetLeft+n.xMin*k.$zoomScale;this._$character._$screenX=o,document.getElementById(`character-${this._$character.id}`).style.left=`${o}px`}get y(){return this._$character.y}set y(e){this._$character.y=e;const t=k.$currentWorkSpace().getLibrary(this._$character.libraryId);let a=k.$timelineFrame.currentFrame;const r=this._$character.getPlace(a);let i=Object.keys(r);const s={};for(let e=0;e<i.length;++e){const t=i[e];s[t]=r[t]}s.loop=k.$getDefaultLoopConfig(),s.startFrame=this._$character.startFrame,s.endFrame=this._$character.endFrame;const n=k.$boundsMatrix(t.getBounds(s),s.matrix),o=k.$offsetTop+n.yMin*k.$zoomScale;this._$character._$screenY=o,document.getElementById(`character-${this._$character.id}`).style.top=`${o}px`}get libraryItem(){return new tt(k.$currentWorkSpace().getLibrary(this._$character.libraryId))}get loop(){if(k.$currentWorkSpace().getLibrary(this._$character.libraryId).type!==A.MOVIE_CLIP)return"";const e=this._$character.getPlace(this._$character.startFrame);if(!e.loop)return"loop";switch(e.loop.type){case 1:case 3:return"play once";case 2:return"single frame";default:return"loop"}}set loop(e){if(k.$currentWorkSpace().getLibrary(this._$character.libraryId).type!==A.MOVIE_CLIP)return;const t=this._$character.getPlace(this._$character.startFrame);switch(e){case"loop":t.loop.type=Ce.REPEAT;break;case"play once":t.loop.type=Ce.NO_REPEAT;break;case"single frame":t.loop.type=Ce.FIXED_ONE;break;default:t.loop.type=Ce.DEFAULT}}get symbolType(){return k.$currentWorkSpace().getLibrary(this._$character.libraryId).type===A.MOVIE_CLIP?"movie clip":""}set symbolType(e){switch(e){case"button":case"movie clip":case"graphic":{const e=k.$currentWorkSpace();if(e.getLibrary(this._$character.libraryId).type===A.MOVIE_CLIP)return;const t=e.nextLibraryId,a=e.addLibrary(k.$controller.createContainer(A.MOVIE_CLIP,`MovieClip_${t}`,t)),r=this._$character.clone(),i=r._$endFrame-r._$startFrame+1,s=r._$startFrame-1,n=new Map;for(let[e,t]of r._$places)t.frame=e-s,n.set(t.frame,t);r._$places=n,r._$startFrame=1,r._$endFrame=i,r._$cachePlaces.length=0;const o=new T,l=this._$parent._$layer._$frame;for(let[e,t]of l._$classes)1>e-s||o._$frame._$classes.set(e-s,t);a.setLayer(a._$layerId++,o),o.addCharacter(r),this._$character._$currentFrame=0,this._$character._$currentPlace=null,this._$character.dispose(),this._$character._$libraryId=t;for(let e of this._$character._$places.values())e.loop=k.$getDefaultLoopConfig();e.scene.changeFrame(k.$timelineFrame.currentFrame)}}}}class qe{constructor(e,t){this._$frame=e,this._$parent=t}get elements(){const e=this._$parent._$layer.getActiveCharacter(this._$frame),t=[];for(let a=0;a<e.length;++a)t.push(new Je(e[a],this._$parent));return t}}class Qe{constructor(e){this._$instance=e}get name(){return this._$instance.path}get itemType(){switch(this._$instance.type){case A.SHAPE:return"graphic";case A.MOVIE_CLIP:return"movie clip";default:return this._$instance.type}}toImage(e=1){if(!this._$instance)return Promise.resolve(new Image);const t=this._$instance.getBounds([1,0,0,1,0,0],e),a=Math.ceil(Math.abs(t.xMax-t.xMin)),r=Math.ceil(Math.abs(t.yMax-t.yMin));return this._$instance.draw(k.$getCanvas(),a,r,{frame:e,matrix:[1,0,0,1,0,0],colorTransform:[1,1,1,1,0,0,0,0],blendMode:"normal",filter:[],loop:k.$getDefaultLoopConfig()},e).then((e=>{const t=new Image;return t.width=a,t.height=r,t.src=e.toDataURL(),k.$poolCanvas(e),t}))}}class et{constructor(e){this._$layer=e}get frames(){const e=[void 0],t=this._$layer.totalFrame;for(let a=1;t>=a;++a)e.push(new qe(a,this));return e}get locked(){return this._$layer.lock}set locked(e){this._$layer.lock=!!e;const t=document.getElementById(`layer-lock-icon-${this._$layer.id}`);t.classList.remove("icon-disable","icon-active"),t.classList.add(this._$layer.lock?"icon-active":"icon-disable")}get name(){return this._$layer.name}}class tt{constructor(e){this._$document=e}get document(){return this._$document}set document(e){this._$document=e}getItem(e){e=`${e}`;const t=k.$currentWorkSpace();for(let a of t._$libraries.values())if(a.path===e)return new Qe(a);return null}get items(){const e=this._$document._$workSpace,t=[];for(const a of e._$libraries.values())a.folderId||t.push(new Qe(a));return t.shift(),t}addItemToDocument(e,t){if(!e||!t)return Promise.resolve(!1);t=`${t}`;const a=k.$currentWorkSpace();for(let r of a._$libraries.values())if(r.path===t)return k.$libraryController.activeInstance=document.getElementById(`library-child-id-${r.id}`),k.$screen.drop({offsetX:e.x+k.$offsetLeft,offsetY:e.y+k.$offsetTop}).then((()=>Promise.resolve(!0)));return Promise.resolve(!1)}}class at{constructor(e){this._$document=e}get currentFrame(){return k.$timelineFrame.currentFrame}get currentLayer(){const e=k.$timelineLayer.targetLayer;if(!e)return 0;const t=0|e.dataset.layerId,a=k.$currentWorkSpace().scene;return 0|Array.from(a._$layers.keys()).indexOf(t)}set currentLayer(e){const t=k.$currentWorkSpace().scene,a=Array.from(t._$layers.keys())[e];k.$timelineLayer.targetLayer=document.getElementById(`layer-id-${a}`)}get layers(){const e=Array.from(document.getElementById("timeline-content").children),t=k.$currentWorkSpace().scene,a=[];for(const r of t._$layers.values()){a[e.indexOf(document.getElementById(`layer-id-${r.id}`))]=new et(r)}return a}getSelectedLayers(){const e=[],t=Array.from(document.getElementById("timeline-content").children),a=k.$timelineLayer.targetLayers;for(const r of a.values()){const a=0|r.dataset.layerId,i=t.indexOf(document.getElementById(`layer-id-${a}`));e.push(i)}return e.length>1&&e.sort(((e,t)=>{switch(!0){case e>t:return 1;case e<t:return-1;default:return 0}})),e}addNewLayer(e="",t="normal",a=!0){const r=k.$currentWorkSpace().scene,i=new T;switch(e&&(i.name=e),t){case"mask":i.mode=B.MASK;break;case"masked":i.mode=B.MASK_IN}const s=this.currentLayer;let n=0;const o=new Map;for(const e of r._$layers.values())a&&n===s&&o.set(n++,i),o.set(n++,e),a||n!==s+1||o.set(n++,i);return r._$layers=o,r.initialize(),k.$timelineLayer.targetLayer=document.getElementById(`layer-id-${i.id}`),k.$timelineLayer.clearActiveFrames(),k.$timelineLayer.addTargetFrame(i,this.currentFrame),new et(i)}setSelectedFrames(e,t){const a=k.$timelineLayer.targetLayer;if(!a)return;k.$timelineLayer.clearActiveFrames(),t=Math.max(e,t);const r=k.$currentWorkSpace().scene.getLayer(0|a.dataset.layerId);for(let a=e;t>=a;++a)k.$timelineLayer.addTargetFrame(r,a);k.$timelineFrame.currentFrame=e}clearKeyframes(e=-1,t=-1){const a=k.$timelineLayer.targetLayer;if(!a)return;const r=0|a.dataset.layerId;if(k.$timelineLayer.targetFrames.has(r)){const a=k.$timelineLayer.targetFrames.get(r).slice();a.length>1&&a.sort(((e,t)=>{const a=0|e,r=0|t;switch(!0){case a>r:return 1;case a<r:return-1;default:return 0}})),-1===e&&(e=a[0]),-1===t&&(t=a[a.length-1])}-1===t&&(t=e),-1!==e&&-1!==t&&this.setSelectedFrames(e,t)}convertToBlankKeyframes(e=-1,t=-1){const a=k.$timelineLayer.targetLayer;if(!a)return;const r=0|a.dataset.layerId;if(k.$timelineLayer.targetFrames.has(r)){const a=k.$timelineLayer.targetFrames.get(r).slice();a.length>1&&a.sort(((e,t)=>{const a=0|e,r=0|t;switch(!0){case a>r:return 1;case a<r:return-1;default:return 0}})),-1===e&&(e=a[0]),-1===t&&(t=a[a.length-1])}-1===t&&(t=e),-1!==e&&-1!==t&&(this.setSelectedFrames(e,t),k.$timelineTool.executeTimelineEmptyAdd())}}class rt extends le{constructor(e){super(e)}}class it{constructor(){this._$folderMap=new Map,this._$fileMap=new Map}clear(){this._$folderMap.clear(),this._$fileMap.clear()}write(e,t){console.log("write: ",e,t)}createFolder(e){if(this.exists(e))return!1;const t=e.split("/");let a=this._$fileMap,r=this._$folderMap;for(let e=0;e<t.length;++e){const i=t[e];r.has(i)||(a.set(i,new Map),r.set(i,new Map))}return!0}exists(e){const t=e.split("/");let a=this._$folderMap;for(let e=0;e<t.length;++e){const r=t[e];if(!a.has(r))return!1;a=a.get(r)}return!0}remove(e){const t=e.split("/"),a=t.pop();let r=this._$fileMap,i=this._$folderMap;for(let e=0;e<t.length;++e){const a=t[e];if(!i.has(a))break;r=r.get(a),i=i.get(a)}return r.has(a)?(r.delete(a),!0):!!i.has(a)&&(r.delete(a),i.delete(a),!0)}}window.FLfile=new it,e.nt=e.fl=new class{constructor(){this._$dom=new Ve,this._$panel=new Map,this._$drawingLayer=new Ke}get drawingLayer(){return this._$drawingLayer}addMenu(e,t=null){const a=document.getElementById("plugin-menu"),r=document.createElement("div");r.classList.add("screen-menu-bottom"),r.textContent=e,t&&r.addEventListener("mousedown",t),a.appendChild(r)}createPanel(e,t,a=200,r=200){this._$panel.set(e,{width:a,height:r,element:t})}showPanel(e){if(!this._$panel.has(e))return;document.getElementById("plugin-title").textContent=e;const t=this._$panel.get(e);document.getElementById("plugin-modal-element").appendChild(t.element),document.documentElement.style.setProperty("--plugin-modal-width",`${t.width}px`),document.documentElement.style.setProperty("--plugin-modal-height",`${t.height}px`);const a=document.getElementById("plugin-modal");a.style.top="100px",a.style.left="100px",a.setAttribute("class","fadeIn"),k.$endMenu("plugin-modal")}hidePanel(){k.$endMenu();const e=document.getElementById("plugin-modal-element").children;for(;e.length;)e[0].remove()}trace(e){k.$saveProgress.message(e)}getDocumentDOM(){return new Ve(k.$currentWorkSpace())}get documents(){const e=[];for(let t=0;t<k.$workSpaces.length;++t){const a=k.$workSpaces[t];a&&e.push(new Ve(a))}return e}addTool(e){return new rt(e)}setShortcut(e,t,a){switch(e){case"global":k.$setShortcut(t,a);break;case"screen":k.$screenKeyboardCommand.add(t,a);break;case"timeline":k.Util.$timelineKeyboardCommand.add(t,a);break;case"library":k.Util.$libraryKeyboardCommand.add(t,a)}}deleteShortcut(e,t){switch(e){case"global":k.$deleteShortcut(t);break;case"screen":k.$screenKeyboardCommand.delete(t);break;case"timeline":k.Util.$timelineKeyboardCommand.delete(t);break;case"library":k.Util.$libraryKeyboardCommand.delete(t)}}}}(this);